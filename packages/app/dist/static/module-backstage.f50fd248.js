(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:(Un,Ht,e)=>{"use strict";e.d(Ht,{r:()=>De});var o=e(53907),p=e(30705),m=e(30204),Y=e(56563),V=e(2784),I=e(77277),W=e(49558),tt=e(73557),Xe=e(39857),r=e(43642),je=e(80079),ye=e(90941),X=e(32915),Z=e(40562),l=e(21853),ne=e(60744),re=e(66569),se=e(30254),ve=e(13384),be=e(15933),u=e(58838),F=e(86737),R=e(4989),M=e(44407),g=e(18628),Ze=e(84219),we=e(98685),Qe=e(39781),le=e(39412),Le=e(78258),Se=e(73689),Ke=e(12536),St=e(19219),L=e(41547),mt=e(47591),fe=e(93606),Kt=e(3493),Et=e(81887),It=e(68542),Ft=e(87561);const Ye=w=>(...H)=>{const te=H.length===0?[1]:H,ut=(K,ee)=>typeof K=="string"?K:ee*K;return te.map(K=>{const ee=ut(K,w);return typeof ee=="number"?`${ee}px`:ee}).join(" ")};function _t(w,H){if(!H||typeof H=="string")return;const te=typeof H=="function"?H(w):H;if(te)return{"@global":te}}function kt(w,H){if(!(!H||typeof H=="string")){if(typeof H=="object"){const te={...w},ut=w.spacing(1);return typeof ut=="number"&&(te.spacing=Ye(ut)),Object.fromEntries(Object.entries(H).map(([K,ee])=>typeof ee=="function"?[K,ee({theme:te})]:[K,ee]))}return H}}const Qt=/^&.Mui-([\w-]+)$/;function Yt(w){let H=w;if(!w||typeof w!="object")return H;for(const te of Object.keys(w)){const ut=w[te];if(!(!ut||typeof ut!="object"))for(const K of Object.keys(ut)){const ee=K,Ve=ee.match(Qt);if(Ve){const[,lt]=Ve,{[ee]:Lt,...zt}=ut;Lt&&(H={...H,[te]:zt,[lt]:Lt})}}}return H}function Nt(w,H={}){const te={},ut={};for(const K of Object.keys(H)){const ee=H[K];ee&&("styleOverrides"in ee&&(K==="MuiCssBaseline"?te[K]=_t(w,ee.styleOverrides):te[K]=Yt(kt(w,ee.styleOverrides))),"defaultProps"in ee&&(ut[K]=ee.defaultProps))}return{overrides:te,props:ut}}const bt={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},Tt={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function wt(w){var H;const{colors:te,shape:ut,options:K}=w,Ve=`linear-gradient(90deg, ${(te.length===1?[te[0],te[0]]:te).join(", ")})`,lt=`${ut},  ${Ve}`,Lt=(H=K==null?void 0:K.fontColor)!=null?H:"#FFFFFF";return{colors:te,shape:ut,backgroundImage:lt,fontColor:Lt}}const Xt={home:wt({colors:Tt.teal,shape:bt.wave}),documentation:wt({colors:Tt.pinkSea,shape:bt.wave2}),tool:wt({colors:Tt.purpleSky,shape:bt.round}),service:wt({colors:Tt.marineBlue,shape:bt.wave}),website:wt({colors:Tt.veryBlue,shape:bt.wave}),library:wt({colors:Tt.rubyRed,shape:bt.wave}),other:wt({colors:Tt.darkGrey,shape:bt.wave}),app:wt({colors:Tt.toastyOrange,shape:bt.wave}),apis:wt({colors:Tt.teal,shape:bt.wave2}),card:wt({colors:Tt.greens,shape:bt.wave})},Re=16,j='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',v="home";function k(w){const{palette:H,htmlFontSize:te=Re,fontFamily:ut=j,defaultPageTheme:K=v,pageTheme:ee=Xt,typography:Ve}=w;if(!ee[K])throw new Error(`${K} is not defined in pageTheme.`);const lt={htmlFontSize:te,fontFamily:ut,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};return{palette:H,typography:Ve!=null?Ve:lt,page:ee[K],getPageTheme:({themeId:Lt})=>{var zt;return(zt=ee[Lt])!=null?zt:ee[K]}}}const Q={MuiCssBaseline:{styleOverrides:w=>({html:{height:"100%",fontFamily:w.typography.fontFamily},body:{height:"100%",fontFamily:w.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:w})=>({"&:nth-of-type(odd)":{backgroundColor:w.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:w})=>({"&:nth-of-type(odd)":{backgroundColor:w.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:w})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:w.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:w})=>({padding:w.spacing(1.5,2,1.5,2.5)}),head:({theme:w})=>({wordBreak:"break-word",overflow:"hidden",color:w.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:w})=>({color:w.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,mt._j)(w.palette.link,.3),background:(0,mt.$n)(w.palette.link,.95)},[w.breakpoints.up("md")]:{minWidth:120,fontSize:w.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:w})=>({color:w.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:w})=>({marginRight:w.spacing(1),marginBottom:w.spacing(1)}),label:({theme:w})=>({lineHeight:w.spacing(2.5),fontWeight:w.typography.fontWeightMedium,fontSize:w.spacing(1.75)}),labelSmall:({theme:w})=>({fontSize:w.spacing(1.5)}),deleteIcon:({theme:w})=>({width:w.spacing(3),height:w.spacing(3),margin:w.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:w})=>({width:w.spacing(2),height:w.spacing(2),margin:w.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}}};var q=(w,H,te)=>{if(!H.has(w))throw TypeError("Cannot "+te)},Ge=(w,H,te)=>(q(w,H,"read from private field"),te?te.call(w):H.get(w)),U=(w,H,te)=>{if(H.has(w))throw TypeError("Cannot add the same private member more than once");H instanceof WeakSet?H.add(w):H.set(w,te)},x=(w,H,te,ut)=>(q(w,H,"write to private field"),ut?ut.call(w,te):H.set(w,te),te),he;class Fe{constructor(H,te){U(this,he,new Map),x(this,he,new Map),H&&Ge(this,he).set("v4",H),te&&Ge(this,he).set("v5",te)}getTheme(H){return Ge(this,he).get(H)}}he=new WeakMap;function dt(w){const H=k(w),te={...Q,...w.components},ut=(0,fe.Z)({...H,components:te}),K=Nt(ut,te),ee={...(0,Se.Z)(H),...K};return new Fe(ee,ut)}function qt(w){const H=adaptV4Theme(w),te=createTheme$2(w);return new Fe(te,H)}const Ie={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},Be={light:dt({palette:Ie.light}),dark:dt({palette:Ie.dark})};It.Z.configure(w=>`v5-${w}`);const ct=(0,Ke.Z)({productionPrefix:"jss4-"});function Ot(w){const{children:H,theme:te,noCssBaseline:ut=!1}=w,K=te.getTheme("v4"),ee=te.getTheme("v5");let Ve;ut||(Ve=V.createElement(Ft.ZP,null));let lt=V.createElement(V.Fragment,null,Ve,H);return K&&(lt=V.createElement(St.ZP,{generateClassName:ct},V.createElement(L.Z,{theme:K},lt))),ee&&(lt=V.createElement(Kt.Z,{injectFirst:!0},V.createElement(Et.Z,{theme:ee},lt))),lt}function Ct(w){var H,te,ut,K;return{props:{MuiGrid:(te=(H=Q)==null?void 0:H.MuiGrid)==null?void 0:te.defaultProps,MuiSwitch:(K=(ut=Q)==null?void 0:ut.MuiSwitch)==null?void 0:K.defaultProps},...k(w)}}function $t(w){return Nt(w,Q).overrides}function Pt(w){const H=Ct(w),te=(0,Se.Z)(H),ut=$t(te);return{...te,overrides:ut}}const $e=Pt({palette:Ie.light}),qe=Pt({palette:Ie.dark});var Ee=e(98192),G=e(15222);const de=[(0,p.ni)({api:m.q,deps:{configApi:m.p},factory:({configApi:w})=>o.pM.compile(`${w.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,p.ni)({api:m.l,deps:{},factory:()=>new o.CX}),(0,p.ni)({api:m.a,deps:{},factory:()=>new o.gN}),(0,p.ni)({api:m.s,deps:{alertApi:m.l},factory:({alertApi:w})=>{const H=new o.KN(w,new o.gr);return o.Jv.forward(H,{hidden:!1}),H}}),(0,p.ni)({api:m.y,deps:{errorApi:m.s},factory:({errorApi:w})=>o.CJ.create({errorApi:w})}),(0,p.ni)({api:m.t,deps:{configApi:m.p,identityApi:m.v,discoveryApi:m.q},factory:({configApi:w,identityApi:H,discoveryApi:te})=>(0,o.jJ)({middleware:[o.II.resolvePluginProtocol({discoveryApi:te}),o.II.injectIdentityAuth({identityApi:H,config:w})]})}),(0,p.ni)({api:m.x,deps:{},factory:()=>new o.YM}),(0,p.ni)({api:m.g,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.eE.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.m,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o._i.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.d,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.Td.create({configApi:te,discoveryApi:w,oauthRequestApi:H,defaultScopes:["read:user"],environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.o,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.sn.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.e,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.aq.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.h,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.$_.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.i,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.xP.create({configApi:te,discoveryApi:w,oauthRequestApi:H,defaultScopes:["team"],environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.j,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.C4.create({configApi:te,discoveryApi:w,oauthRequestApi:H,defaultScopes:["REPO_READ"]})}),(0,p.ni)({api:m.k,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.uC.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:Y.RV,deps:{discovery:m.q,identity:m.v,config:m.p},factory:({config:w,discovery:H,identity:te})=>Y.iM.create({config:w,discovery:H,identity:te})})];function Ue({children:w}){return(0,tt.GV)()?V.createElement(V.Fragment,null,w):V.createElement(tt.VA,null,w)}const nt=()=>V.createElement(W.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),it=({step:w,error:H})=>{let te="";return w==="load-config"?te=`The configuration failed to load, someone should have a look at this error: ${H.message}`:w==="load-chunk"&&(te=`Lazy loaded chunk failed to load, try to reload the page: ${H.message}`),V.createElement(Ue,null,V.createElement(W.mf,{status:"501",statusMessage:te}))},Rt=({error:w,resetError:H,plugin:te})=>V.createElement(W.yu,{title:`Error in ${te==null?void 0:te.getId()}`,defaultExpanded:!0,error:w},V.createElement(I.Z,{variant:"outlined",onClick:H},"Retry")),en={Progress:W.Ex,Router:Xe.VK,NotFoundErrorPage:nt,BootErrorPage:it,ErrorBoundaryFallback:Rt},rn={brokenImage:je.Z,catalog:g.Z,scaffolder:X.Z,techdocs:Z.Z,search:l.Z,chat:ne.Z,dashboard:re.Z,docs:se.Z,email:ve.Z,github:u.Z,group:Ze.Z,help:F.Z,"kind:api":be.Z,"kind:component":M.Z,"kind:domain":r.Z,"kind:group":Ze.Z,"kind:location":R.Z,"kind:system":ye.Z,"kind:user":we.Z,"kind:resource":le.Z,"kind:template":Le.Z,user:we.Z,warning:Qe.Z},Ae=[{id:"light",title:"Light Theme",variant:"light",icon:V.createElement(G.Z,null),Provider:({children:w})=>V.createElement(Ot,{theme:Be.light,children:w})},{id:"dark",title:"Dark Theme",variant:"dark",icon:V.createElement(Ee.Z,null),Provider:({children:w})=>V.createElement(Ot,{theme:Be.dark,children:w})}];function De(w){var H,te,ut,K;return(0,o.bg)({...w,apis:(H=w==null?void 0:w.apis)!=null?H:[],bindRoutes:w==null?void 0:w.bindRoutes,components:{...en,...w==null?void 0:w.components},configLoader:w==null?void 0:w.configLoader,defaultApis:de,icons:{...rn,...w==null?void 0:w.icons},plugins:(te=w==null?void 0:w.plugins)!=null?te:[],featureFlags:(ut=w==null?void 0:w.featureFlags)!=null?ut:[],themes:(K=w==null?void 0:w.themes)!=null?K:Ae})}},88285:(Un,Ht,e)=>{"use strict";e.d(Ht,{MS:()=>r,mk:()=>je,n3:()=>V});var o=e(34520),p=e(32272),m=e(96279),Y=e.n(m);const V=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function I(ye){return!ye.cursor}var W=Object.defineProperty,tt=(ye,X,Z)=>X in ye?W(ye,X,{enumerable:!0,configurable:!0,writable:!0,value:Z}):ye[X]=Z,Xe=(ye,X,Z)=>(tt(ye,typeof X!="symbol"?X+"":X,Z),Z);class r{constructor(X){Xe(this,"discoveryApi"),Xe(this,"fetchApi"),this.discoveryApi=X.discoveryApi,this.fetchApi=X.fetchApi||{fetch:Y()}}async getEntityAncestors(X,Z){const{kind:l,namespace:ne,name:re}=(0,o.of)(X.entityRef);return await this.requestRequired("GET",`/entities/by-name/${encodeURIComponent(l)}/${encodeURIComponent(ne)}/${encodeURIComponent(re)}/ancestry`,Z)}async getLocationById(X,Z){return await this.requestOptional("GET",`/locations/${encodeURIComponent(X)}`,Z)}async getEntities(X,Z){const{filter:l=[],fields:ne=[],order:re,offset:se,limit:ve,after:be}=X!=null?X:{},u=this.getParams(l);if(ne.length&&u.push(`fields=${ne.map(encodeURIComponent).join(",")}`),re)for(const g of[re].flat())g&&u.push(`order=${encodeURIComponent(g.order)}:${encodeURIComponent(g.field)}`);se!==void 0&&u.push(`offset=${se}`),ve!==void 0&&u.push(`limit=${ve}`),be!==void 0&&u.push(`after=${encodeURIComponent(be)}`);const F=u.length?`?${u.join("&")}`:"",R=await this.requestRequired("GET",`/entities${F}`,Z),M=(g,Ze)=>{var we,Qe;if(((we=g.metadata)==null?void 0:we.name)===void 0||g.kind===void 0||((Qe=Ze.metadata)==null?void 0:Qe.name)===void 0||Ze.kind===void 0)return 0;const le=(0,o.eE)(g),Le=(0,o.eE)(Ze);return le<Le?-1:le>Le?1:0};return{items:R.sort(M)}}async getEntitiesByRefs(X,Z){var l;const ne={entityRefs:X.entityRefs};(l=X.fields)!=null&&l.length&&(ne.fields=X.fields);const se=`${await this.discoveryApi.getBaseUrl("catalog")}/entities/by-refs`,ve=await this.fetchApi.fetch(se,{headers:{"Content-Type":"application/json",...(Z==null?void 0:Z.token)&&{Authorization:`Bearer ${Z==null?void 0:Z.token}`}},method:"POST",body:JSON.stringify(ne)});if(!ve.ok)throw await p.VL.fromResponse(ve);const{items:be}=await ve.json();return{items:be.map(u=>u!=null?u:void 0)}}async queryEntities(X={},Z){var l,ne;const re=[];if(I(X)){const{fields:ve=[],filter:be,limit:u,orderFields:F,fullTextFilter:R}=X;re.push(...this.getParams(be)),u!==void 0&&re.push(`limit=${u}`),F!==void 0&&(Array.isArray(F)?F:[F]).forEach(({field:g,order:Ze})=>re.push(`orderField=${g},${Ze}`)),ve.length&&re.push(`fields=${ve.map(encodeURIComponent).join(",")}`);const M=(l=R==null?void 0:R.term)==null?void 0:l.trim();M&&re.push(`fullTextFilterTerm=${M}`),(ne=R==null?void 0:R.fields)!=null&&ne.length&&re.push(`fullTextFilterFields=${R.fields.join(",")}`)}else{const{fields:ve=[],limit:be,cursor:u}=X;re.push(`cursor=${u}`),be!==void 0&&re.push(`limit=${be}`),ve.length&&re.push(`fields=${ve.map(encodeURIComponent).join(",")}`)}const se=re.length?`?${re.join("&")}`:"";return this.requestRequired("GET",`/entities/by-query${se}`,Z)}async getEntityByRef(X,Z){const{kind:l,namespace:ne,name:re}=(0,o.of)(X);return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(l)}/${encodeURIComponent(ne)}/${encodeURIComponent(re)}`,Z)}async getEntityByName(X,Z){const{kind:l,namespace:ne="default",name:re}=X;return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(l)}/${encodeURIComponent(ne)}/${encodeURIComponent(re)}`,Z)}async refreshEntity(X,Z){const l=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/refresh`,{headers:{"Content-Type":"application/json",...(Z==null?void 0:Z.token)&&{Authorization:`Bearer ${Z==null?void 0:Z.token}`}},method:"POST",body:JSON.stringify({entityRef:X})});if(l.status!==200)throw new Error(await l.text())}async getEntityFacets(X,Z){const{filter:l=[],facets:ne}=X,re=this.getParams(l);for(const ve of ne)re.push(`facet=${encodeURIComponent(ve)}`);const se=re.length?`?${re.join("&")}`:"";return await this.requestOptional("GET",`/entity-facets${se}`,Z)}async addLocation(X,Z){const{type:l="url",target:ne,dryRun:re}=X,se=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/locations${re?"?dryRun=true":""}`,{headers:{"Content-Type":"application/json",...(Z==null?void 0:Z.token)&&{Authorization:`Bearer ${Z==null?void 0:Z.token}`}},method:"POST",body:JSON.stringify({type:l,target:ne})});if(se.status!==201)throw new Error(await se.text());const{location:ve,entities:be,exists:u}=await se.json();if(!ve)throw new Error(`Location wasn't added: ${ne}`);return{location:ve,entities:be,exists:u}}async getLocationByRef(X,Z){return(await this.requestRequired("GET","/locations",Z)).map(ne=>ne.data).find(ne=>X===(0,o.NZ)(ne))}async removeLocationById(X,Z){await this.requestIgnored("DELETE",`/locations/${encodeURIComponent(X)}`,Z)}async removeEntityByUid(X,Z){await this.requestIgnored("DELETE",`/entities/by-uid/${encodeURIComponent(X)}`,Z)}async validateEntity(X,Z,l){const ne=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/validate-entity`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"POST",body:JSON.stringify({entity:X,location:Z})});if(ne.ok)return{valid:!0};if(ne.status!==400)throw await p.VL.fromResponse(ne);const{errors:re=[]}=await ne.json();return{valid:!1,errors:re}}async requestIgnored(X,Z,l){const ne=`${await this.discoveryApi.getBaseUrl("catalog")}${Z}`,re=l!=null&&l.token?{Authorization:`Bearer ${l.token}`}:{},se=await this.fetchApi.fetch(ne,{method:X,headers:re});if(!se.ok)throw await p.VL.fromResponse(se)}async requestRequired(X,Z,l){const ne=`${await this.discoveryApi.getBaseUrl("catalog")}${Z}`,re=l!=null&&l.token?{Authorization:`Bearer ${l.token}`}:{},se=await this.fetchApi.fetch(ne,{method:X,headers:re});if(!se.ok)throw await p.VL.fromResponse(se);return se.json()}async requestOptional(X,Z,l){const ne=`${await this.discoveryApi.getBaseUrl("catalog")}${Z}`,re=l!=null&&l.token?{Authorization:`Bearer ${l.token}`}:{},se=await this.fetchApi.fetch(ne,{method:X,headers:re});if(!se.ok){if(se.status===404)return;throw await p.VL.fromResponse(se)}return await se.json()}getParams(X=[]){const Z=[];for(const l of[X].flat()){const ne=[];for(const[re,se]of Object.entries(l))for(const ve of[se].flat())ve===V?ne.push(encodeURIComponent(re)):typeof ve=="string"&&ne.push(`${encodeURIComponent(re)}=${encodeURIComponent(ve)}`);ne.length&&Z.push(`filter=${ne.join(",")}`)}return Z}}const je="backstage.io/catalog-processing"},34520:(Un,Ht,e)=>{"use strict";e.d(Ht,{$1:()=>_e,CV:()=>Nr,Dg:()=>oe,In:()=>Ue,KS:()=>pn,M6:()=>tr,M_:()=>Ne,NZ:()=>wr,Ou:()=>Kr,P1:()=>ra,S4:()=>ue,Tf:()=>l,X9:()=>Ce,Zj:()=>We,_b:()=>tn,aS:()=>En,cz:()=>hn,eE:()=>Ze,hr:()=>gn,iB:()=>M,l2:()=>Z,nP:()=>pt,of:()=>g,q1:()=>br,w$:()=>nn,wI:()=>qe,wP:()=>Ut,y$:()=>G,zG:()=>X});var o=e(76635),p=e.n(o),m=e(27991),Y=e.n(m);function V(at){return at.kind.toLocaleUpperCase("en-US")==="API"}function I(at){return at.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function W(at){return at.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function tt(at){return at.kind.toLocaleUpperCase("en-US")==="GROUP"}function Xe(at){return at.kind.toLocaleUpperCase("en-US")==="LOCATION"}function r(at){return at.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function je(at){return at.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function ye(at){return at.kind.toLocaleUpperCase("en-US")==="USER"}const X="default",Z="backstage.io/view-url",l="backstage.io/edit-url",ne="kubernetes.io/api-server",re="kubernetes.io/api-server-certificate-authority",se="kubernetes.io/auth-provider";var ve=Object.defineProperty,be=(at,pe,yt)=>pe in at?ve(at,pe,{enumerable:!0,configurable:!0,writable:!0,value:yt}):at[pe]=yt,u=(at,pe,yt)=>(be(at,typeof pe!="symbol"?pe+"":pe,yt),yt);class F{constructor(pe=X){u(this,"namespace"),this.namespace=pe}async enforce(pe){return pe.metadata.namespace?pe:lodash.merge({metadata:{namespace:this.namespace}},pe)}}function R(at){let pe=at.indexOf(":");const yt=at.indexOf("/");yt!==-1&&yt<pe&&(pe=-1);const _n=pe===-1?void 0:at.slice(0,pe),Zn=yt===-1?void 0:at.slice(pe+1,yt),Xn=at.slice(Math.max(pe+1,yt+1));if(_n===""||Zn===""||Xn==="")throw new TypeError(`Entity reference "${at}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:_n,namespace:Zn,name:Xn}}function M(at){return{kind:at.kind,namespace:at.metadata.namespace||X,name:at.metadata.name}}function g(at,pe){var yt,_n,Zn,Xn;if(!at)throw new Error("Entity reference must not be empty");const dr=pe==null?void 0:pe.defaultKind,$r=(pe==null?void 0:pe.defaultNamespace)||X;let Zr,lr,y;if(typeof at=="string"){const s=R(at);Zr=(yt=s.kind)!=null?yt:dr,lr=(_n=s.namespace)!=null?_n:$r,y=s.name}else Zr=(Zn=at.kind)!=null?Zn:dr,lr=(Xn=at.namespace)!=null?Xn:$r,y=at.name;if(Zr)if(lr){if(!y){const s=JSON.stringify(at);throw new Error(`Entity reference ${s} had missing or empty name`)}}else{const s=JSON.stringify(at);throw new Error(`Entity reference ${s} had missing or empty namespace`)}else{const s=JSON.stringify(at);throw new Error(`Entity reference ${s} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Zr,namespace:lr,name:y}}function Ze(at){var pe,yt;let _n,Zn,Xn;return"metadata"in at?(_n=at.kind,Zn=(pe=at.metadata.namespace)!=null?pe:X,Xn=at.metadata.name):(_n=at.kind,Zn=(yt=at.namespace)!=null?yt:X,Xn=at.name),`${_n.toLocaleLowerCase("en-US")}:${Zn.toLocaleLowerCase("en-US")}/${Xn.toLocaleLowerCase("en-US")}`}var we=Object.defineProperty,Qe=(at,pe,yt)=>pe in at?we(at,pe,{enumerable:!0,configurable:!0,writable:!0,value:yt}):at[pe]=yt,le=(at,pe,yt)=>(Qe(at,typeof pe!="symbol"?pe+"":pe,yt),yt);class Le{constructor(pe){le(this,"parentRef");const{kind:yt,namespace:_n,name:Zn}=g(pe,{defaultKind:"Group",defaultNamespace:X});if(yt.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=Ze({kind:yt,namespace:_n,name:Zn})}async enforce(pe){if(pe.kind!=="Group")return pe;const yt=pe;return yt.spec.parent||Ze(yt)!==this.parentRef&&(yt.spec.parent=this.parentRef),yt}}class Se{static isValidPrefixAndOrSuffix(pe,yt,_n,Zn){if(typeof pe!="string")return!1;const Xn=pe.split(yt);return Xn.length===1?Zn(Xn[0]):Xn.length===2?_n(Xn[0])&&Zn(Xn[1]):!1}static isJsonSafe(pe){try{return p().isEqual(pe,JSON.parse(JSON.stringify(pe)))}catch{return!1}}static isValidDnsSubdomain(pe){return typeof pe=="string"&&pe.length>=1&&pe.length<=253&&pe.split(".").every(Se.isValidDnsLabel)}static isValidDnsLabel(pe){return typeof pe=="string"&&pe.length>=1&&pe.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(pe)}static isValidTag(pe){return typeof pe=="string"&&pe.length>=1&&pe.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(pe)}static isValidUrl(pe){if(typeof pe!="string")return!1;try{return new URL(pe),!0}catch{return!1}}static isValidString(pe){var yt;return typeof pe=="string"&&((yt=pe==null?void 0:pe.trim())==null?void 0:yt.length)>=1}static isNonEmptyString(pe){var yt;return typeof pe=="string"&&((yt=pe==null?void 0:pe.trim())==null?void 0:yt.length)>=1}}var Ke="http://json-schema.org/draft-07/schema",St="EntityEnvelope",L="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",mt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],fe="object",Kt=["apiVersion","kind","metadata"],Et=!0,It={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},Ft={$schema:Ke,$id:St,description:L,examples:mt,type:fe,required:Kt,additionalProperties:Et,properties:It},Ye="http://json-schema.org/draft-07/schema",_t="Entity",kt="The parts of the format that's common to all versions/kinds of entity.",Qt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Yt="object",Nt=["apiVersion","kind","metadata"],bt=!1,Tt={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},wt={$schema:Ye,$id:_t,description:kt,examples:Qt,type:Yt,required:Nt,additionalProperties:bt,properties:Tt},Xt="http://json-schema.org/draft-07/schema",Re="EntityMeta",j="Metadata fields common to all versions/kinds of entity.",v=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],k="object",Q=["name"],q=!0,Ge={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},U={$schema:Xt,$id:Re,description:j,examples:v,type:k,required:Q,additionalProperties:q,properties:Ge},x="http://json-schema.org/draft-07/schema",he="common",Fe="object",dt="Common definitions to import from other schemas",qt={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},Ie={$schema:x,$id:he,type:Fe,description:dt,definitions:qt};const Be=new Map,ct=[Ft,wt,U,Ie];function Ot(at){if(!(at!=null&&at.length))throw new TypeError("Unknown error");const pe=at[0];throw new TypeError(`${pe.instancePath||"<root>"} ${pe.message}${pe.params?` - ${Object.entries(pe.params).map(([yt,_n])=>`${yt}: ${_n}`).join(", ")}`:""}`)}function Ct(at,pe={}){var yt;const _n=(yt=pe==null?void 0:pe.disableCache)!=null?yt:!1,Zn=_n?"":JSON.stringify(at);if(!_n){const Zr=Be.get(Zn);if(Zr)return Zr}const Xn=$t(at),dr=new(Y())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});Xn.length&&dr.addSchema(Xn,void 0,void 0,!0);const $r=dr.compile(at);return _n||Be.set(Zn,$r),$r}function $t(at){if(typeof at!="object")return[];const pe=new Set;at.$id&&pe.add(at.$id);const yt=new Array,_n=[at];for(;_n.length;){const Zn=_n.pop();for(const Xn of Pt(Zn))if(!pe.has(Xn)){pe.add(Xn);const dr=ct.find($r=>$r.$id===Xn);dr&&(yt.push(dr),_n.push(dr))}}return yt}function*Pt(at){const pe=[at];for(;pe.length;){const yt=pe.pop();if(typeof yt=="object"&&yt)for(const[_n,Zn]of Object.entries(yt))_n==="$ref"&&typeof Zn=="string"?yield Zn.split("#")[0]:pe.push(Zn)}}function $e(at){const pe=Ct(at||Ft);return yt=>{if(pe(yt)===!0)return yt;throw Ot(pe.errors)}}function qe(at){const pe=Ct(at);return yt=>{var _n;if(pe(yt)===!0)return yt;const Xn=(_n=pe.errors)==null?void 0:_n.filter(dr=>["/kind","/apiVersion"].includes(dr.instancePath));if(Xn!=null&&Xn.length&&Xn.every(dr=>dr.keyword==="enum"))return!1;throw Ot(pe.errors)}}function Ee(at){const pe=Ct(at||wt);return yt=>{if(pe(yt)===!0)return yt;throw Ot(pe.errors)}}class G{static isValidApiVersion(pe){return Se.isValidPrefixAndOrSuffix(pe,"/",Se.isValidDnsSubdomain,yt=>yt.length>=1&&yt.length<=63&&/^[a-z0-9A-Z]+$/.test(yt))}static isValidKind(pe){return typeof pe=="string"&&pe.length>=1&&pe.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(pe)}static isValidObjectName(pe){return typeof pe=="string"&&pe.length>=1&&pe.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(pe)}static isValidNamespace(pe){return Se.isValidDnsLabel(pe)}static isValidLabelKey(pe){return Se.isValidPrefixAndOrSuffix(pe,"/",Se.isValidDnsSubdomain,G.isValidObjectName)}static isValidLabelValue(pe){return pe===""||G.isValidObjectName(pe)}static isValidAnnotationKey(pe){return Se.isValidPrefixAndOrSuffix(pe,"/",Se.isValidDnsSubdomain,G.isValidObjectName)}static isValidAnnotationValue(pe){return typeof pe=="string"}}const de={isValidApiVersion:G.isValidApiVersion,isValidKind:G.isValidKind,isValidEntityName:G.isValidObjectName,isValidNamespace:G.isValidNamespace,isValidLabelKey:G.isValidLabelKey,isValidLabelValue:G.isValidLabelValue,isValidAnnotationKey:G.isValidAnnotationKey,isValidAnnotationValue:G.isValidAnnotationValue,isValidTag:at=>typeof at=="string"&&at.length>=1&&at.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(at)};function Ue(at={}){return{...de,...at}}var nt=Object.defineProperty,it=(at,pe,yt)=>pe in at?nt(at,pe,{enumerable:!0,configurable:!0,writable:!0,value:yt}):at[pe]=yt,Rt=(at,pe,yt)=>(it(at,typeof pe!="symbol"?pe+"":pe,yt),yt);class en{constructor(pe=Ue()){Rt(this,"validators"),this.validators=pe}async enforce(pe){var yt,_n,Zn,Xn,dr,$r,Zr;function lr(B,Oe,ot){if(Oe==null)throw new Error(`${B} must have a value`);let At;try{At=ot(Oe)}catch(xt){throw new Error(`${B} could not be validated, ${xt}`)}if(!At){let xt;switch(ot.name){case"isValidLabelValue":case"isValidObjectName":xt="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":xt="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":xt="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":xt="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":xt="a string";break;case"isValidKind":xt="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":xt="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":xt="a non empty string";break;default:xt=void 0;break}const Sn=xt?` expected ${xt} but found "${Oe}".`:"";throw new Error(`"${B}" is not valid;${Sn} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function y(B,Oe,ot){return Oe===void 0||lr(B,Oe,ot)}lr("apiVersion",pe.apiVersion,this.validators.isValidApiVersion),lr("kind",pe.kind,this.validators.isValidKind),lr("metadata.name",pe.metadata.name,this.validators.isValidEntityName),y("metadata.namespace",pe.metadata.namespace,this.validators.isValidNamespace);for(const[B,Oe]of Object.entries((yt=pe.metadata.labels)!=null?yt:[]))lr(`labels.${B}`,B,this.validators.isValidLabelKey),lr(`labels.${B}`,Oe,this.validators.isValidLabelValue);for(const[B,Oe]of Object.entries((_n=pe.metadata.annotations)!=null?_n:[]))lr(`annotations.${B}`,B,this.validators.isValidAnnotationKey),lr(`annotations.${B}`,Oe,this.validators.isValidAnnotationValue);const s=(Zn=pe.metadata.tags)!=null?Zn:[];for(let B=0;B<s.length;++B)lr(`tags.${B}`,s[B],this.validators.isValidTag);const b=(Xn=pe.metadata.links)!=null?Xn:[];for(let B=0;B<b.length;++B)lr(`links.${B}.url`,(dr=b[B])==null?void 0:dr.url,Se.isValidUrl),y(`links.${B}.title`,($r=b[B])==null?void 0:$r.title,Se.isNonEmptyString),y(`links.${B}.icon`,(Zr=b[B])==null?void 0:Zr.icon,G.isValidObjectName);return pe}}var rn=Object.defineProperty,Ae=(at,pe,yt)=>pe in at?rn(at,pe,{enumerable:!0,configurable:!0,writable:!0,value:yt}):at[pe]=yt,De=(at,pe,yt)=>(Ae(at,typeof pe!="symbol"?pe+"":pe,yt),yt);const w=null;class H{constructor(pe=w){De(this,"knownFields"),this.knownFields=pe}async enforce(pe){for(const yt of Object.keys(pe))if(!this.knownFields.includes(yt))throw new Error(`Unknown field ${yt}`);return pe}}var te=Object.defineProperty,ut=(at,pe,yt)=>pe in at?te(at,pe,{enumerable:!0,configurable:!0,writable:!0,value:yt}):at[pe]=yt,K=(at,pe,yt)=>(ut(at,typeof pe!="symbol"?pe+"":pe,yt),yt);class ee{constructor(){K(this,"validate")}async enforce(pe){if(!this.validate){const Zn=new Ajv({allowUnionTypes:!0});this.validate=Zn.addSchema([Ie,U],void 0,void 0,!0).compile(wt)}if(this.validate(pe)===!0)return pe;const[_n]=this.validate.errors||[];throw _n?new Error(`Malformed envelope, ${_n.instancePath||"<root>"} ${_n.message}`):new Error("Malformed envelope, Unknown error")}}class Ve{constructor(pe){this.policies=pe}async enforce(pe){let yt=pe;for(const _n of this.policies){const Zn=await _n.enforce(yt);if(!Zn)throw new Error(`Policy ${_n.constructor.name} did not return a result`);yt=Zn}return yt}}class lt{constructor(pe){this.policies=pe}async enforce(pe){for(const yt of this.policies){const _n=await yt.enforce(pe);if(_n)return _n}throw new Error("The entity did not match any known policy")}}const Lt={allOf(at){return new Ve(at)},oneOf(at){return new lt(at)}};var zt="http://json-schema.org/draft-07/schema",Gt="ApiV1alpha1",an="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",fn=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],on=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],ln={$schema:zt,$id:Gt,description:an,examples:fn,allOf:on};function cn(at){let pe;return{async check(yt){return pe||(pe=qe(at)),pe(yt)===yt}}}const On=cn(ln);var dn="http://json-schema.org/draft-07/schema",Pn="ComponentV1alpha1",ce='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',ae=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],ke=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],vt={$schema:dn,$id:Pn,description:ce,examples:ae,allOf:ke};const jt=cn(vt);var Vt="http://json-schema.org/draft-07/schema",An="DomainV1alpha1",Nn="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Fn=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],sr=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],gr={$schema:Vt,$id:An,description:Nn,examples:Fn,allOf:sr};const Jn=cn(gr);var pr="http://json-schema.org/draft-07/schema",Cr="GroupV1alpha1",xr="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",vr=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],Lr=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],Ar={$schema:pr,$id:Cr,description:xr,examples:vr,allOf:Lr};const Mr=cn(Ar);var ie="http://json-schema.org/draft-07/schema",He="LocationV1alpha1",st="A location is a marker that references other places to look for catalog data.",C=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],_=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],O={$schema:ie,$id:He,description:st,examples:C,allOf:_};const D=cn(O),ue="ownedBy",_e="ownerOf",oe="consumesApi",Ce="apiConsumedBy",Ne="providesApi",We="apiProvidedBy",pt="dependsOn",nn="dependencyOf",tn="parentOf",Ut="childOf",gn="memberOf",pn="hasMember",hn="partOf",En="hasPart";var vn="http://json-schema.org/draft-07/schema",Yn="ResourceV1alpha1",Vn="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",In=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],xn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],zn={$schema:vn,$id:Yn,description:Vn,examples:In,allOf:xn};const sn=cn(zn);var Rn="http://json-schema.org/draft-07/schema",or="SystemV1alpha1",er="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",yr=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],Br=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],_r={$schema:Rn,$id:or,description:er,examples:yr,allOf:Br};const Jr=cn(_r);var Fr="http://json-schema.org/draft-07/schema",kr="UserV1alpha1",Wr="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Xr=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],ta=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],na={$schema:Fr,$id:kr,description:Wr,examples:Xr,allOf:ta};const da=cn(na),ra="backstage.io/managed-by-location",br="backstage.io/managed-by-origin-location",tr="backstage.io/source-location",rr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function Kr(at){if(typeof at!="string")throw new TypeError(`Unable to parse location ref '${at}', unexpected argument ${typeof at}`);const pe=at.indexOf(":");if(pe<0)throw new TypeError(`Unable to parse location ref '${at}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const yt=at.substring(0,pe).trim(),_n=at.substring(pe+1).trim();if(!yt||!_n)throw new TypeError(`Unable to parse location ref '${at}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(yt==="http"||yt==="https")throw new TypeError(`Invalid location ref '${at}', please prefix it with 'url:', e.g. 'url:${at}'`);if(rr.test(_n))throw new TypeError(`Invalid location ref '${at}', target is a javascript: URL`);return{type:yt,target:_n}}function wr(at){const{type:pe,target:yt}=at;if(pe){if(!yt)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(rr.test(yt))throw new TypeError(`Invalid location ref '${pe}:${yt}', target is a javascript: URL`);return`${pe}:${yt}`}function Nr(at){var pe,yt,_n,Zn,Xn;const dr=(Xn=(yt=(pe=at.metadata)==null?void 0:pe.annotations)==null?void 0:yt[tr])!=null?Xn:(Zn=(_n=at.metadata)==null?void 0:_n.annotations)==null?void 0:Zn[ra];if(!dr)throw new Error(`Entity '${Ze(at)}' is missing location`);return Kr(dr)}},53907:(Un,Ht,e)=>{"use strict";e.d(Ht,{CX:()=>Lr,WY:()=>yt,uC:()=>pr,xP:()=>Fn,C4:()=>gr,KN:()=>_e,gr:()=>We,II:()=>zn,wQ:()=>Xa,Td:()=>ut,aq:()=>ee,eE:()=>Lt,_i:()=>ke,gN:()=>Mr,YM:()=>kr,sn:()=>fn,$_:()=>An,Jv:()=>pt,pM:()=>D,CJ:()=>ra,jJ:()=>hn,bg:()=>Vr});var o=e(2784),p=e(13980),m=e.n(p),Y=e(18473),V=e(82394),I=e.n(V),W=e(30204),tt=e(30705),Xe=e(30195),r=e(9850),je=e.n(r),ye=e(12782),X=e.n(ye);const Z=null;function l(d,n){let i,h=!1;const A={};try{i=n!=null&&n.key?d.getConfig(n.key):d;for(const Pe of Z){const et=i.getOptionalNumber(Pe);et!==void 0&&(A[Pe]=et,h=!0)}}catch(Pe){throw new InputError(`Failed to read duration from config, ${Pe}`)}try{if(!h){const et=Z.map(rt=>`'${rt}'`).join(", ");throw new Error(`Needs one or more of ${et}`)}const Pe=i.keys().filter(et=>!Z.includes(et));if(Pe.length){const et=Pe.length===1?"property":"properties",rt=Pe.map(Wt=>`'${Wt}'`).join(", "),Dt=Z.map(Wt=>`'${Wt}'`).join(", ");throw new Error(`Unknown ${et} ${rt}; expected one or more of ${Dt}`)}}catch(Pe){let et="Failed to read duration from config";throw n!=null&&n.key&&(et+=` at '${n.key}'`),new InputError(`${et}, ${Pe}`)}return A}var ne=Object.defineProperty,re=(d,n,i)=>n in d?ne(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,se=(d,n,i)=>(re(d,typeof n!="symbol"?n+"":n,i),i);const ve=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function be(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function u(d){if(d===null)return"null";if(Array.isArray(d))return"array";const n=typeof d;return n==="number"&&isNaN(d)?"nan":n==="string"&&d===""?"empty-string":n}const F={type(d,n,i,h){return`Invalid type in config for key '${d}' in '${n}', got ${i}, wanted ${h}`},missing(d){return`Missing required config value at '${d}'`},convert(d,n,i){return`Unable to convert config value for key '${d}' in '${n}' to a ${i}`}};class R{constructor(n,i="mock-config",h,A=""){this.data=n,this.context=i,this.fallback=h,this.prefix=A,se(this,"filteredKeys"),se(this,"notifiedFilteredKeys",new Set)}static fromConfigs(n){return n.length===0?new R(void 0):n.reduce((i,{data:h,context:A,filteredKeys:Pe,deprecatedKeys:et})=>{const rt=new R(h,A,i);if(rt.filteredKeys=Pe,et)for(const{key:Dt,description:Wt}of et)console.warn(`The configuration key '${Dt}' of ${A} is deprecated and may be removed soon. ${Wt||""}`);return rt},void 0)}has(n){var i,h;return this.readValue(n)!==void 0?!0:(h=(i=this.fallback)==null?void 0:i.has(n))!=null?h:!1}keys(){var n,i;const h=this.data?Object.keys(this.data):[],A=(i=(n=this.fallback)==null?void 0:n.keys())!=null?i:[];return[...new Set([...h,...A])]}get(n){const i=this.getOptional(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n!=null?n:"")));return i}getOptional(n){var i,h;const A=je()(this.readValue(n)),Pe=(i=this.fallback)==null?void 0:i.getOptional(n);return A===void 0?Pe:Pe===void 0?A:X()({},{value:Pe},{value:A},(et,rt)=>!be(rt)||!be(et)?rt:void 0).value}getConfig(n){const i=this.getOptionalConfig(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalConfig(n){var i;const h=this.readValue(n),A=(i=this.fallback)==null?void 0:i.getOptionalConfig(n);if(be(h))return this.copy(h,n,A);if(h!==void 0)throw new TypeError(F.type(this.fullKey(n),this.context,u(h),"object"));return A}getConfigArray(n){const i=this.getOptionalConfigArray(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalConfigArray(n){var i;const h=this.readConfigValue(n,A=>{if(!Array.isArray(A))return{expected:"object-array"};for(const[Pe,et]of A.entries())if(!be(et))return{expected:"object-array",value:et,key:`${n}[${Pe}]`};return!0});if(h)return h.map((A,Pe)=>this.copy(A,`${n}[${Pe}]`))}getNumber(n){const i=this.getOptionalNumber(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalNumber(n){const i=this.readConfigValue(n,A=>typeof A=="number"||typeof A=="string"||{expected:"number"});if(typeof i=="number"||i===void 0)return i;const h=Number(i);if(!Number.isFinite(h))throw new Error(F.convert(this.fullKey(n),this.context,"number"));return h}getBoolean(n){const i=this.getOptionalBoolean(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalBoolean(n){const i=this.readConfigValue(n,A=>typeof A=="boolean"||typeof A=="number"||typeof A=="string"||{expected:"boolean"});if(typeof i=="boolean"||i===void 0)return i;const h=String(i).trim();if(/^(?:y|yes|true|1|on)$/i.test(h))return!0;if(/^(?:n|no|false|0|off)$/i.test(h))return!1;throw new Error(F.convert(this.fullKey(n),this.context,"boolean"))}getString(n){const i=this.getOptionalString(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalString(n){return this.readConfigValue(n,i=>typeof i=="string"&&i!==""||{expected:"string"})}getStringArray(n){const i=this.getOptionalStringArray(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalStringArray(n){return this.readConfigValue(n,i=>{if(!Array.isArray(i))return{expected:"string-array"};for(const[h,A]of i.entries())if(typeof A!="string"||A==="")return{expected:"string-array",value:A,key:`${n}[${h}]`};return!0})}fullKey(n){return`${this.prefix}${this.prefix?".":""}${n}`}copy(n,i,h){const A=new R(n,this.context,h,this.fullKey(i));return A.filteredKeys=this.filteredKeys,A}readConfigValue(n,i){var h,A;const Pe=this.readValue(n);if(Pe===void 0)return(A=this.fallback)==null?void 0:A.readConfigValue(n,i);const et=i(Pe);if(et!==!0){const{key:rt=n,value:Dt=Pe,expected:Wt}=et;throw new TypeError(F.type(this.fullKey(rt),this.context,u(Dt),Wt))}return Pe}readValue(n){const i=n?n.split("."):[];for(const A of i)if(!ve.test(A))throw new TypeError(`Invalid config key '${n}'`);if(this.data===void 0)return;let h=this.data;for(const[A,Pe]of i.entries())if(be(h))h=h[Pe];else if(h!==void 0){const et=this.fullKey(i.slice(0,A).join("."));throw new TypeError(F.type(et,this.context,u(h),"object"))}return h}}var M=e(73557),g=e(16060),Ze=e(64279),we=e(83487),Qe=e(34519),le=e.n(Qe),Le=e(72164),Se=e(24991),Ke=Object.defineProperty,St=(d,n,i)=>n in d?Ke(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,L=(d,n,i)=>(St(d,typeof n!="symbol"?n+"":n,i),i);class mt{constructor(...n){L(this,"holders"),this.holders=n}get(n){for(const i of this.holders){const h=i.get(n);if(h)return h}}}const fe=(0,Y.CT)("api-context"),Kt=d=>{var n;const{apis:i,children:h}=d,A=(n=(0,o.useContext)(fe))==null?void 0:n.atVersion(1),Pe=A?new mt(i,A):i;return o.createElement(fe.Provider,{value:(0,Y.EI)({1:Pe}),children:h})};Kt.propTypes={apis:m().shape({get:m().func.isRequired}).isRequired,children:m().node};var Et=Object.defineProperty,It=(d,n,i)=>n in d?Et(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Ft=(d,n,i)=>(It(d,typeof n!="symbol"?n+"":n,i),i);class Ye{constructor(n){this.factories=n,Ft(this,"apis",new Map)}static validateFactories(n,i){for(const h of i){const A=[h],Pe=new Set;for(;A.length;){const et=A.shift(),rt=n.get(et);if(rt)for(const Dt of Object.values(rt.deps)){if(Dt.id===h.id)throw new Error(`Circular dependency of api factory for ${h}`);Pe.has(Dt)||(Pe.add(Dt),A.push(Dt))}}}}get(n){return this.load(n)}load(n,i=[]){const h=this.apis.get(n.id);if(h)return h;const A=this.factories.get(n);if(!A)return;if(i.includes(A.api))throw new Error(`Circular dependency of api factory for ${A.api}`);const Pe=this.loadDeps(n,A.deps,[...i,A.api]),et=A.factory(Pe);return this.apis.set(n.id,et),et}loadDeps(n,i,h){const A={};for(const Pe in i)if(i.hasOwnProperty(Pe)){const et=i[Pe],rt=this.load(et,h);if(!rt)throw new Error(`No API factory available for dependency ${et} of dependent ${n}`);A[Pe]=rt}return A}}var _t=Object.defineProperty,kt=(d,n,i)=>n in d?_t(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Qt=(d,n,i)=>(kt(d,typeof n!="symbol"?n+"":n,i),i),Yt=(d=>(d[d.default=10]="default",d[d.app=50]="app",d[d.static=100]="static",d))(Yt||{});class Nt{constructor(){Qt(this,"factories",new Map)}register(n,i){const h=Yt[n],A=this.factories.get(i.api.id);return A&&A.priority>=h?!1:(this.factories.set(i.api.id,{priority:h,factory:i}),!0)}get(n){const i=this.factories.get(n.id);if(i)return i.factory}getAllApis(){const n=new Set;for(const{factory:i}of this.factories.values())n.add(i.api);return n}}function bt(d){return new Promise((n,i)=>{const h=d.width||500,A=d.height||700,Pe=window.screen.width/2-h/2,et=window.screen.height/2-A/2,rt=window.open(d.url,d.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${h},height=${A},top=${et},left=${Pe}`);let Dt="";if(!rt||typeof rt.closed=="undefined"||rt.closed){const Tn=new Error("Failed to open auth popup.");Tn.name="PopupRejectedError",i(Tn);return}const Wt=Tn=>{if(Tn.source!==rt||Tn.origin!==d.origin)return;const{data:nr}=Tn;if(nr.type==="config_info"){Dt=nr.targetOrigin;return}if(nr.type!=="authorization_response")return;const kn=nr;if("error"in kn){const ir=new Error(kn.error.message);ir.name=kn.error.name,i(ir)}else n(kn.response);$n()},Kn=setInterval(()=>{if(rt.closed){const Tn=`Login failed, ${Dt&&Dt!==window.location.origin?`Incorrect app origin, expected ${Dt}`:"popup was closed"}`,nr=new Error(Tn);nr.name="PopupClosedError",i(nr),$n()}},100);function $n(){window.removeEventListener("message",Wt),clearInterval(Kn)}window.addEventListener("message",Wt)})}var Tt=Object.defineProperty,wt=(d,n,i)=>n in d?Tt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Xt=(d,n,i)=>(wt(d,typeof n!="symbol"?n+"":n,i),i);let Re=!1;function j(d){return[...d].join(" ")}class v{constructor(n){Xt(this,"discoveryApi"),Xt(this,"environment"),Xt(this,"provider"),Xt(this,"joinScopesFunc"),Xt(this,"authRequester"),Xt(this,"sessionTransform"),Xt(this,"enableExperimentalRedirectFlow"),Xt(this,"popupOptions");var i;const{configApi:h,discoveryApi:A,environment:Pe,provider:et,joinScopes:rt=j,oauthRequestApi:Dt,sessionTransform:Wt=$n=>$n,popupOptions:Kn}=n;!Re&&!h&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),Re=!0),this.enableExperimentalRedirectFlow=h&&(i=h.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?i:!1,this.authRequester=Dt.createAuthRequester({provider:et,onAuthRequest:async $n=>this.enableExperimentalRedirectFlow?this.executeRedirect($n):this.showPopup($n)}),this.discoveryApi=A,this.environment=Pe,this.provider=et,this.joinScopesFunc=rt,this.sessionTransform=Wt,this.popupOptions=Kn}async createSession(n){return n.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(n.scopes):this.showPopup(n.scopes):this.authRequester(n.scopes)}async refreshSession(n){const i=await fetch(await this.buildUrl("/refresh",{optional:!0,...n&&{scope:this.joinScopesFunc(n)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(A=>{throw new Error(`Auth refresh request failed, ${A}`)});if(!i.ok){const A=new Error(`Auth refresh request failed, ${i.statusText}`);throw A.status=i.status,A}const h=await i.json();if(h.error){const A=new Error(h.error.message);throw h.error.name&&(A.name=h.error.name),A}return await this.sessionTransform(h)}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!n.ok){const i=new Error(`Logout request failed, ${n.statusText}`);throw i.status=n.status,i}}async showPopup(n){var i,h,A,Pe,et,rt,Dt,Wt;const Kn=this.joinScopesFunc(n),$n=await this.buildUrl("/start",{scope:Kn,origin:window.location.origin,flow:"popup"}),Tn=(h=(i=this.popupOptions)==null?void 0:i.size)!=null&&h.fullscreen?window.screen.width:((Pe=(A=this.popupOptions)==null?void 0:A.size)==null?void 0:Pe.width)||450,nr=(rt=(et=this.popupOptions)==null?void 0:et.size)!=null&&rt.fullscreen?window.screen.height:((Wt=(Dt=this.popupOptions)==null?void 0:Dt.size)==null?void 0:Wt.height)||730,kn=await bt({url:$n,name:`${this.provider.title} Login`,origin:new URL($n).origin,width:Tn,height:nr});return await this.sessionTransform(kn)}async executeRedirect(n){const i=this.joinScopesFunc(n);return window.location.href=await this.buildUrl("/start",{scope:i,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(n,i){const h=await this.discoveryApi.getBaseUrl("auth"),A=this.buildQueryString({...i,env:this.environment});return`${h}/${this.provider.id}${n}${A}`}buildQueryString(n){if(!n)return"";const i=Object.entries(n).map(([h,A])=>{if(typeof A=="string")return`${encodeURIComponent(h)}=${encodeURIComponent(A)}`;if(A)return encodeURIComponent(h)}).filter(Boolean).join("&");return i?`?${i}`:""}}var k=Object.defineProperty,Q=(d,n,i)=>n in d?k(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,q=(d,n,i)=>(Q(d,typeof n!="symbol"?n+"":n,i),i);class Ge{constructor(n){q(this,"discoveryApi"),q(this,"environment"),q(this,"provider");const{discoveryApi:i,environment:h,provider:A}=n;this.discoveryApi=i,this.environment=h,this.provider=A}async createSession(){const n=await this.buildUrl("/start"),i=await bt({url:n,name:`${this.provider.title} Login`,origin:new URL(n).origin,width:450,height:730});return{...i,id:i.profile.email}}async refreshSession(){}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!n.ok){const i=new Error(`Logout request failed, ${n.statusText}`);throw i.status=n.status,i}}async buildUrl(n){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${n}?env=${this.environment}`}}function U(d,n){for(const i of n)if(!d.has(i))return!1;return!0}class x{constructor(n){this.options=n}sessionExistsAndHasScope(n,i){if(!n)return!1;if(!i||this.options.sessionScopes===void 0)return!0;const h=this.options.sessionScopes(n);return U(h,i)}getExtendedScope(n,i){const h=new Set(this.options.defaultScopes);if(n&&this.options.sessionScopes!==void 0){const A=this.options.sessionScopes(n);for(const Pe of A)h.add(Pe)}if(i)for(const A of i)h.add(A);return h}}var he=Object.defineProperty,Fe=(d,n,i)=>n in d?he(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,dt=(d,n,i)=>(Fe(d,typeof n!="symbol"?n+"":n,i),i);class qt{constructor(){dt(this,"isClosed",!1),dt(this,"terminatingError"),dt(this,"observable",new(I())(n=>this.isClosed?(this.terminatingError?n.error(this.terminatingError):n.complete(),()=>{}):(this.subscribers.add(n),()=>{this.subscribers.delete(n)}))),dt(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(i=>i.next(n))}error(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(i=>i.error(n))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,i,h){const A=typeof n=="function"?{next:n,error:i,complete:h}:n;return this.observable.subscribe(A)}}class Ie{constructor(n){dt(this,"isClosed"),dt(this,"currentValue"),dt(this,"terminatingError"),dt(this,"observable"),dt(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=n,this.terminatingError=void 0,this.observable=new(I())(i=>this.isClosed?(this.terminatingError?i.error(this.terminatingError):i.complete(),()=>{}):(i.next(this.currentValue),this.subscribers.add(i),()=>{this.subscribers.delete(i)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=n,this.subscribers.forEach(i=>i.next(n))}error(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(i=>i.error(n))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,i,h){const A=typeof n=="function"?{next:n,error:i,complete:h}:n;return this.observable.subscribe(A)}}var Be=Object.defineProperty,ct=(d,n,i)=>n in d?Be(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Ot=(d,n,i)=>(ct(d,typeof n!="symbol"?n+"":n,i),i);class Ct{constructor(){Ot(this,"subject",new Ie(W.S.SignedOut)),Ot(this,"signedIn",!1)}setIsSignedIn(n){this.signedIn!==n&&(this.signedIn=n,this.subject.next(this.signedIn?W.S.SignedIn:W.S.SignedOut))}sessionState$(){return this.subject}}var $t=Object.defineProperty,Pt=(d,n,i)=>n in d?$t(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,$e=(d,n,i)=>(Pt(d,typeof n!="symbol"?n+"":n,i),i);class qe{constructor(n){$e(this,"connector"),$e(this,"helper"),$e(this,"sessionScopesFunc"),$e(this,"sessionShouldRefreshFunc"),$e(this,"stateTracker",new Ct),$e(this,"refreshPromise"),$e(this,"currentSession");const{connector:i,defaultScopes:h=new Set,sessionScopes:A,sessionShouldRefresh:Pe}=n;this.connector=i,this.sessionScopesFunc=A,this.sessionShouldRefreshFunc=Pe,this.helper=new x({sessionScopes:A,defaultScopes:h})}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const h=await this.collapsedSessionRefresh(n.scopes),A=this.sessionScopesFunc(this.currentSession),Pe=this.sessionScopesFunc(h);return U(Pe,A)&&(this.currentSession=h),h}catch(h){if(n.optional)return;throw h}}if(!this.currentSession&&!n.instantPopup)try{const i=await this.collapsedSessionRefresh(n.scopes);return this.currentSession=i,this.getSession(n)}catch{}if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(n){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,n));try{const i=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),i}finally{delete this.refreshPromise}}}var Ee=Object.defineProperty,G=(d,n,i)=>n in d?Ee(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,de=(d,n,i)=>(G(d,typeof n!="symbol"?n+"":n,i),i);class Ue{constructor(n){de(this,"connector"),de(this,"helper"),de(this,"stateTracker",new Ct),de(this,"currentSession");const{connector:i,defaultScopes:h=new Set,sessionScopes:A}=n;this.connector=i,this.helper=new x({sessionScopes:A,defaultScopes:h})}setSession(n){this.currentSession=n,this.stateTracker.setIsSignedIn(Boolean(n))}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes))return this.currentSession;if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var nt=Object.defineProperty,it=(d,n,i)=>n in d?nt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Rt=(d,n,i)=>(it(d,typeof n!="symbol"?n+"":n,i),i);class en{constructor(n){Rt(this,"manager"),Rt(this,"storageKey"),Rt(this,"schema"),Rt(this,"sessionShouldRefreshFunc"),Rt(this,"helper");const{manager:i,storageKey:h,schema:A,sessionScopes:Pe,sessionShouldRefresh:et=()=>!1}=n;this.manager=i,this.storageKey=h,this.schema=A,this.sessionShouldRefreshFunc=et,this.helper=new x({sessionScopes:Pe,defaultScopes:new Set})}setSession(n){this.manager.setSession(n),this.saveSession(n)}async getSession(n){const{scopes:i}=n,h=this.loadSession();if(this.helper.sessionExistsAndHasScope(h,i)&&!this.sessionShouldRefreshFunc(h))return this.manager.setSession(h),h;const A=await this.manager.getSession(n);return this.saveSession(A),A}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const n=localStorage.getItem(this.storageKey);if(n){const i=JSON.parse(n,(h,A)=>(A==null?void 0:A.__type)==="Set"?new Set(A.__value):A);try{return this.schema.parse(i)}catch(h){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${h}`),h}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(n){if(n===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(n)}catch(i){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${i}`);return}localStorage.setItem(this.storageKey,JSON.stringify(n,(i,h)=>h instanceof Set?{__type:"Set",__value:Array.from(h)}:h))}}var rn=Object.defineProperty,Ae=(d,n,i)=>n in d?rn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,De=(d,n,i)=>(Ae(d,typeof n!="symbol"?n+"":n,i),i);const w={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class H{constructor(n){De(this,"sessionManager"),De(this,"scopeTransform"),this.sessionManager=n.sessionManager,this.scopeTransform=n.scopeTransform}static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Pe=w,oauthRequestApi:et,defaultScopes:rt=[],scopeTransform:Dt=Tn=>Tn,popupOptions:Wt}=n,Kn=new v({configApi:i,discoveryApi:h,environment:A,provider:Pe,oauthRequestApi:et,sessionTransform({backstageIdentity:Tn,...nr}){var kn;const ir={...nr,providerInfo:{idToken:nr.providerInfo.idToken,accessToken:nr.providerInfo.accessToken,scopes:H.normalizeScopes(Dt,nr.providerInfo.scope),expiresAt:nr.providerInfo.expiresInSeconds?new Date(Date.now()+nr.providerInfo.expiresInSeconds*1e3):void 0}};if(Tn){const qr=(kn=Tn.expiresInSeconds)!=null?kn:nr.providerInfo.expiresInSeconds;ir.backstageIdentity={token:Tn.token,identity:Tn.identity,expiresAt:qr?new Date(Date.now()+qr*1e3):void 0}}return ir},popupOptions:Wt}),$n=new qe({connector:Kn,defaultScopes:new Set(rt),sessionScopes:Tn=>Tn.providerInfo.scopes,sessionShouldRefresh:Tn=>{var nr,kn;let ir=1/0;return(nr=Tn.providerInfo)!=null&&nr.expiresAt&&(ir=Math.min(ir,(Tn.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(kn=Tn.backstageIdentity)!=null&&kn.expiresAt&&(ir=Math.min(ir,(Tn.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),ir<60*5}});return new H({sessionManager:$n,scopeTransform:Dt})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(n,i){var h;const A=H.normalizeScopes(this.scopeTransform,n),Pe=await this.sessionManager.getSession({...i,scopes:A});return(h=Pe==null?void 0:Pe.providerInfo.accessToken)!=null?h:""}async getIdToken(n={}){var i;const h=await this.sessionManager.getSession({...n,scopes:new Set(["openid"])});return(i=h==null?void 0:h.providerInfo.idToken)!=null?i:""}async getBackstageIdentity(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.backstageIdentity}async getProfile(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.profile}static normalizeScopes(n,i){if(!i)return new Set;const h=Array.isArray(i)?i:i.split(/[\s|,]/).filter(Boolean);return new Set(n(h))}}const te={id:"github",title:"GitHub",icon:()=>null};class ut{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Pe=te,oauthRequestApi:et,defaultScopes:rt=["read:user"]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Pe,environment:A,defaultScopes:rt})}}const K={id:"gitlab",title:"GitLab",icon:()=>null};class ee{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Pe=K,oauthRequestApi:et,defaultScopes:rt=["read_user"]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Pe,environment:A,defaultScopes:rt})}}const Ve={id:"google",title:"Google",icon:()=>null},lt="https://www.googleapis.com/auth/";class Lt{static create(n){const{configApi:i,discoveryApi:h,oauthRequestApi:A,environment:Pe="development",provider:et=Ve,defaultScopes:rt=["openid",`${lt}userinfo.email`,`${lt}userinfo.profile`]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:A,provider:et,environment:Pe,defaultScopes:rt,scopeTransform(Dt){return Dt.map(Wt=>Wt==="openid"?Wt:Wt==="profile"||Wt==="email"?`${lt}userinfo.${Wt}`:Wt.startsWith(lt)?Wt:`${lt}${Wt}`)}})}}const zt={id:"okta",title:"Okta",icon:()=>null},Gt=new Set(["openid","profile","email","phone","address","groups","offline_access"]),an="okta.";class fn{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Pe=zt,oauthRequestApi:et,defaultScopes:rt=["openid","email","profile","offline_access"]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Pe,environment:A,defaultScopes:rt,scopeTransform(Dt){return Dt.map(Wt=>Gt.has(Wt)||Wt.startsWith(an)?Wt:`${an}${Wt}`)}})}}const on=Xe.z.object({profile:Xe.z.object({email:Xe.z.string().optional(),displayName:Xe.z.string().optional(),picture:Xe.z.string().optional()}),backstageIdentity:Xe.z.object({token:Xe.z.string(),identity:Xe.z.object({type:Xe.z.literal("user"),userEntityRef:Xe.z.string(),ownershipEntityRefs:Xe.z.array(Xe.z.string())})})}),ln={id:"saml",title:"SAML",icon:()=>null};class cn{constructor(n){this.sessionManager=n}static create(n){const{discoveryApi:i,environment:h="development",provider:A=ln}=n,Pe=new Ge({discoveryApi:i,environment:h,provider:A}),et=new Ue({connector:Pe}),rt=new en({manager:et,storageKey:`${A.id}Session`,schema:on});return new cn(rt)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.backstageIdentity}async getProfile(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.profile}}var On=Object.defineProperty,dn=(d,n,i)=>n in d?On(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Pn=(d,n,i)=>(dn(d,typeof n!="symbol"?n+"":n,i),i);const ce={id:"microsoft",title:"Microsoft",icon:()=>null},ae=class Fa{constructor(n){Pn(this,"oauth2"),Pn(this,"configApi"),Pn(this,"environment"),Pn(this,"provider"),Pn(this,"oauthRequestApi"),Pn(this,"discoveryApi"),Pn(this,"scopeTransform");const{configApi:i,environment:h="development",provider:A=ce,oauthRequestApi:Pe,discoveryApi:et,defaultScopes:rt=["openid","offline_access","profile","email","User.Read"],scopeTransform:Dt=Wt=>Wt.concat("offline_access")}=n;this.configApi=i,this.environment=h,this.provider=A,this.oauthRequestApi=Pe,this.discoveryApi=et,this.scopeTransform=Dt,this.oauth2={[Fa.MicrosoftGraphID]:H.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:rt})}}static create(n){return new Fa(n)}microsoftGraph(){return this.oauth2[Fa.MicrosoftGraphID]}static resourceForScopes(n){var i;const h=[...new Set(n.split(" ").map(Fa.resourceForScope).filter(Pe=>Pe!=="openid"))];if(h.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${h.join(", ")}. Access tokens can only have a single audience.`));const A=(i=h[0])!=null?i:Fa.MicrosoftGraphID;return Promise.resolve(A)}static resourceForScope(n){var i;const h=(i=n.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:i.groups;if(h){const{resourceURI:A}=h;return A.replace(/^api:\/\//,"")}switch(n){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return Fa.MicrosoftGraphID}}async getAccessToken(n,i){const h=n===void 0?Fa.MicrosoftGraphID:await Fa.resourceForScopes(Array.isArray(n)?n.join(" "):n);return h in this.oauth2||(this.oauth2[h]=H.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[h].getAccessToken(n,i)}getIdToken(n){return this.microsoftGraph().getIdToken(n)}getProfile(n){return this.microsoftGraph().getProfile(n)}getBackstageIdentity(n){return this.microsoftGraph().getBackstageIdentity(n)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};Pn(ae,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let ke=ae;const vt={id:"onelogin",title:"onelogin",icon:()=>null},jt=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Vt="onelogin.";class An{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Pe=vt,oauthRequestApi:et}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Pe,environment:A,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(rt){return rt.map(Dt=>jt.has(Dt)||Dt.startsWith(Vt)?Dt:`${Vt}${Dt}`)}})}}const Nn={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Fn{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Pe=Nn,oauthRequestApi:et,defaultScopes:rt=["team"]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Pe,environment:A,defaultScopes:rt})}}const sr={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class gr{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Pe=sr,oauthRequestApi:et,defaultScopes:rt=["PROJECT_ADMIN"]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Pe,environment:A,defaultScopes:rt})}}const Jn={id:"atlassian",title:"Atlassian",icon:()=>null};class pr{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Pe=Jn,oauthRequestApi:et}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Pe,environment:A})}}var Cr=Object.defineProperty,xr=(d,n,i)=>n in d?Cr(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,vr=(d,n,i)=>(xr(d,typeof n!="symbol"?n+"":n,i),i);class Lr{constructor(){vr(this,"subject",new qt)}post(n){this.subject.next(n)}alert$(){return this.subject}}class Ar{constructor(n){this.actualApis=n}static fromApis(n){return new Ar(n)}captureEvent(n){this.actualApis.forEach(i=>{try{i.captureEvent(n)}catch{}})}}class Mr{captureEvent(n){}}var ie=Object.defineProperty,He=(d,n,i)=>n in d?ie(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,st=(d,n,i)=>(He(d,typeof n!="symbol"?n+"":n,i),i);const C="theme";class _{constructor(n){this.themes=n,st(this,"activeThemeId"),st(this,"subject",new Ie(void 0))}static createWithStorage(n){var i;const h=new _(n);if(!window.localStorage)return h;const A=(i=window.localStorage.getItem(C))!=null?i:void 0;return h.setActiveThemeId(A),h.activeThemeId$().subscribe(Pe=>{Pe?window.localStorage.setItem(C,Pe):window.localStorage.removeItem(C)}),window.addEventListener("storage",Pe=>{var et;if(Pe.key===C){const rt=(et=localStorage.getItem(C))!=null?et:void 0;h.setActiveThemeId(rt)}}),h}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(n){this.activeThemeId=n,this.subject.next(n)}}const O="Invalid discovery URL pattern,";class D{constructor(n){this.parts=n}static compile(n){const i=n.split(/\{\{\s*pluginId\s*\}\}/),h=i.join("pluginId");let A;try{A=new URL(h)}catch{throw new Error(`${O} URL '${h}' is invalid`)}if(A.hash)throw new Error(`${O} URL must not have a hash`);if(A.search)throw new Error(`${O} URL must not have a query`);if(h.endsWith("/"))throw new Error(`${O} URL must not end with a slash`);return new D(i)}async getBaseUrl(n){return this.parts.join(encodeURIComponent(n))}}class ue{constructor(n,i){this.endpoints=n,this.defaultEndpoint=i}static fromConfig(n,i){var h,A;const Pe=(h=i==null?void 0:i.pathPattern)!=null?h:"/api/{{ pluginId }}",et=n.getString("backend.baseUrl"),rt=(A=n.getOptionalConfigArray("discovery.endpoints"))==null?void 0:A.flatMap(Dt=>{const Wt=typeof Dt.get("target")=="object"?Dt.getString("target.external"):Dt.getString("target"),Kn=D.compile(Wt);return Dt.getStringArray("plugins").map($n=>[$n,Kn])});return new ue(new Map(rt),D.compile(`${et}${Pe}`))}async getBaseUrl(n){const i=this.endpoints.get(n);return i?i.getBaseUrl(n):this.defaultEndpoint.getBaseUrl(n)}}class _e{constructor(n,i){this.alertApi=n,this.errorApi=i}post(n,i){return i!=null&&i.hidden||this.alertApi.post({message:n.message,severity:"error"}),this.errorApi.post(n,i)}error$(){return this.errorApi.error$()}}var oe=Object.defineProperty,Ce=(d,n,i)=>n in d?oe(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Ne=(d,n,i)=>(Ce(d,typeof n!="symbol"?n+"":n,i),i);class We{constructor(){Ne(this,"subject",new qt)}post(n,i){this.subject.next({error:n,context:i})}error$(){return this.subject}}class pt{static forward(n,i){window.addEventListener("unhandledrejection",h=>{n.post(h.reason,i)})}}var nn=Object.defineProperty,tn=(d,n,i)=>n in d?nn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Ut=(d,n,i)=>(tn(d,typeof n!="symbol"?n+"":n,i),i);function gn(d){if(d.length<3)throw new Error(`The '${d}' feature flag must have a minimum length of three characters.`);if(d.length>150)throw new Error(`The '${d}' feature flag must not exceed 150 characters.`);if(!d.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${d}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class pn{constructor(){Ut(this,"registeredFeatureFlags",[]),Ut(this,"flags")}registerFlag(n){gn(n.name),this.registeredFeatureFlags.push(n)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(n){return this.flags||(this.flags=this.load()),this.flags.get(n)===W.F.Active}save(n){this.flags||(this.flags=this.load()),n.merge||this.flags.clear();for(const[h,A]of Object.entries(n.states))this.flags.set(h,A);const i=Array.from(this.flags.entries()).filter(([,h])=>h===W.F.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(i)))}load(){try{const n=window.localStorage.getItem("featureFlags");if(!n)return new Map;const i=JSON.parse(n);if(typeof i!="object"||i===null||Array.isArray(i))return new Map;const h=Object.entries(i).filter(([A,Pe])=>(gn(A),Pe===W.F.Active));return new Map(h)}catch{return new Map}}}function hn(d){var n;let i=d.baseImplementation||e.g.fetch;const h=[(n=d.middleware)!=null?n:[]].flat().reverse();for(const A of h)i=A.apply(i);return{fetch:i}}class En{constructor(n,i,h,A){this.identityApi=n,this.allowUrl=i,this.headerName=h,this.headerValue=A}static create(n){var i,h;const A=vn(n),Pe=((i=n.header)==null?void 0:i.name)||"authorization",et=((h=n.header)==null?void 0:h.value)||(rt=>`Bearer ${rt}`);return new En(n.identityApi,A,Pe,et)}apply(n){return async(i,h)=>{const A=new Request(i,h),{token:Pe}=await this.identityApi.getCredentials();return A.headers.get(this.headerName)||typeof Pe!="string"||!Pe||!this.allowUrl(A.url)?n(i,h):(A.headers.set(this.headerName,this.headerValue(Pe)),n(A))}}}function vn(d){return d.allowUrl?d.allowUrl:d.urlPrefixAllowlist?Yn(d.urlPrefixAllowlist):d.config?Yn([d.config.getString("backend.baseUrl")]):()=>!1}function Yn(d){const n=d.map(i=>i.replace(/\/$/,""));return i=>n.some(h=>i===h||i.startsWith(`${h}/`))}function Vn(d,n){return!n||n==="/"?d:`${d.replace(/\/$/,"")}/${n.replace(/^\//,"")}`}class In{constructor(n){this.discoveryApi=n}apply(n){return async(i,h)=>{const A=new Request(i,h),Pe="plugin://";if(!A.url.startsWith(Pe))return n(i,h);const{hostname:et,pathname:rt,search:Dt,hash:Wt,username:Kn,password:$n}=new URL(`http://${A.url.substring(Pe.length)}`);let Tn=await this.discoveryApi.getBaseUrl(et);if(Kn||$n){const kn=new URL(Tn),ir=`${Kn}${$n?`:${$n}`:""}@`;Tn=`${kn.protocol}//${ir}${kn.host}${kn.pathname}`}const nr=`${Vn(Tn,rt)}${Dt}${Wt}`;return n(nr,typeof i=="string"||xn(i)?h:i)}}}function xn(d){return typeof d=="object"&&(d==null?void 0:d.constructor)===URL}class zn{static resolvePluginProtocol(n){return new In(n.discoveryApi)}static injectIdentityAuth(n){return En.create(n)}constructor(){}}var sn=Object.defineProperty,Rn=(d,n,i)=>n in d?sn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,or=(d,n,i)=>(Rn(d,typeof n!="symbol"?n+"":n,i),i);function er(d,n){for(const i of n)if(!d.has(i))return!1;return!0}function yr(d,...n){const i=new Set(d);for(const h of n)for(const A of h)i.add(A);return i}class Br{constructor(){or(this,"requests",[]),or(this,"subject",new Ie(this.getCurrentPending()))}request(n){return new Promise((i,h)=>{this.requests.push({scopes:n,resolve:i,reject:h}),this.subject.next(this.getCurrentPending())})}resolve(n,i){this.requests=this.requests.filter(h=>er(n,h.scopes)?(h.resolve(i),!1):!0),this.subject.next(this.getCurrentPending())}reject(n){this.requests.forEach(i=>i.reject(n)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const n=this.requests.length===0?void 0:this.requests.slice(1).reduce((i,h)=>yr(i,h.scopes),this.requests[0].scopes);return{scopes:n,resolve:i=>{n&&this.resolve(n,i)},reject:i=>{n&&this.reject(i)}}}}var _r=Object.defineProperty,Jr=(d,n,i)=>n in d?_r(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Fr=(d,n,i)=>(Jr(d,typeof n!="symbol"?n+"":n,i),i);class kr{constructor(){Fr(this,"subject",new Ie([])),Fr(this,"currentRequests",[]),Fr(this,"handlerCount",0)}createAuthRequester(n){const i=new Br,h=this.handlerCount;return this.handlerCount++,i.pending().subscribe({next:A=>{const Pe=this.currentRequests.slice(),et=this.makeAuthRequest(A,n);et?Pe[h]=et:delete Pe[h],this.currentRequests=Pe,this.subject.next(Pe.filter(Boolean))}}),A=>i.request(A)}makeAuthRequest(n,i){const{scopes:h}=n;if(h)return{provider:i.provider,trigger:async()=>{const A=await i.onAuthRequest(h);n.resolve(A)},reject:()=>{const A=new Error("Login failed, rejected by user");A.name="RejectedError",n.reject(A)}}}authRequest$(){return this.subject}}var Wr=Object.defineProperty,Xr=(d,n,i)=>n in d?Wr(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,ta=(d,n,i)=>(Xr(d,typeof n!="symbol"?n+"":n,i),i);const na=new Map,da=class Eo{constructor(n,i){this.namespace=n,this.errorApi=i,ta(this,"subscribers",new Set),ta(this,"observable",new(I())(h=>(this.subscribers.add(h),()=>{this.subscribers.delete(h)})))}static create(n){var i;return new Eo((i=n.namespace)!=null?i:"",n.errorApi)}static addStorageEventListener(){window.addEventListener("storage",n=>{var i;for(const[h,A]of na.entries())(i=n.key)!=null&&i.startsWith(h)&&A.handleStorageChange(n.key)})}get(n){return this.snapshot(n).value}snapshot(n){let i,h="absent";try{const A=localStorage.getItem(this.getKeyName(n));A&&(i=JSON.parse(A,(Pe,et)=>(typeof et=="object"&&et!==null&&Object.freeze(et),et)),h="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${n}`))}return{key:n,value:i,presence:h}}forBucket(n){const i=`${this.namespace}/${n}`;return na.has(i)||na.set(i,new Eo(i,this.errorApi)),na.get(i)}async set(n,i){localStorage.setItem(this.getKeyName(n),JSON.stringify(i)),this.notifyChanges(n)}async remove(n){localStorage.removeItem(this.getKeyName(n)),this.notifyChanges(n)}observe$(n){return Eo.hasSubscribed||(Eo.addStorageEventListener(),Eo.hasSubscribed=!0),this.observable.filter(({key:i})=>i===n)}handleStorageChange(n){if(!(n!=null&&n.startsWith(this.namespace)))return;const i=n==null?void 0:n.slice(`${this.namespace}/`.length);i.includes("/")||this.notifyChanges(decodeURIComponent(i))}getKeyName(n){return`${this.namespace}/${encodeURIComponent(n)}`}notifyChanges(n){const i=this.snapshot(n);for(const h of this.subscribers)h.next(i)}};ta(da,"hasSubscribed",!1);let ra=da;const br=(0,o.createContext)(void 0);function tr(){const[d]=(0,M.is)(o.createElement(M.AW,{index:!0,element:o.createElement("div",null)}));return!d.index}const rr=(d,n)=>{try{const i=(0,g.fp)(n,{pathname:d}),h=i==null?void 0:i.filter(Dt=>{var Wt;return((Wt=Dt==null?void 0:Dt.route.routeRefs)==null?void 0:Wt.size)>0}).pop(),A=h==null?void 0:h.route;if(!A||A.path===""&&d!=="/")return;let Pe;A.routeRefs.size===1&&(Pe=A.routeRefs.values().next().value);let et;A.plugins.size===1&&(et=A.plugins.values().next().value);const rt=Object.entries((h==null?void 0:h.params)||{}).reduce((Dt,[Wt,Kn])=>(Kn!==void 0&&Wt!=="*"&&(Dt[Wt]=Kn),Dt),{});return{extension:"App",pluginId:(et==null?void 0:et.getId())||"root",...Pe?{routeRef:Pe.id}:{},_routeNodeType:A.element,params:rt}}catch{return}},Kr=({pathname:d,search:n,hash:i,attributes:h})=>{const A=(0,tt.z$)();return(0,o.useEffect)(()=>{A.captureEvent("navigate",`${d}${n}${i}`,{attributes:h})},[A,d,n,i,h]),null},wr=({routeObjects:d})=>{const{pathname:n,search:i,hash:h}=(0,M.TH)(),{params:A,...Pe}=rr(n,d)||{params:{}};return o.createElement(tt.fC,{attributes:Pe},o.createElement(Kr,{pathname:n,search:i,hash:h,attributes:A}))};function Nr(d){return tr()?at(d):""}function at(d){var n;let{pathname:i}=new URL((n=d.getOptionalString("app.baseUrl"))!=null?n:"/","http://sample.dev");return i=i.replace(/\/*$/,""),i}function pe({component:d,appIdentityProxy:n,children:i}){const[h,A]=(0,o.useState)(),Pe=(0,W.u)(W.p),et=at(Pe);return h?(n.setTarget(h,{signOutTargetUrl:et||"/"}),o.createElement(o.Fragment,null,i)):o.createElement(d,{onSignInSuccess:A})}function yt(d){const{Router:n,SignInPage:i}=(0,tt.qD)().getComponents(),h=(0,W.u)(W.p),A=at(h),Pe=`${A}/*`,et=(0,o.useContext)(br);if(!et)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:rt,appIdentityProxy:Dt}=et;return i?tr()?o.createElement(n,null,o.createElement(wr,{routeObjects:rt}),o.createElement(pe,{component:i,appIdentityProxy:Dt},o.createElement(M.Z5,null,o.createElement(M.AW,{path:Pe,element:o.createElement(o.Fragment,null,d.children)})))):o.createElement(n,{basename:A},o.createElement(wr,{routeObjects:rt}),o.createElement(pe,{component:i,appIdentityProxy:Dt},d.children)):(Dt.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:A||"/"}),tr()?o.createElement(n,null,o.createElement(wr,{routeObjects:rt}),o.createElement(M.Z5,null,o.createElement(M.AW,{path:Pe,element:o.createElement(o.Fragment,null,d.children)}))):o.createElement(n,{basename:A},o.createElement(wr,{routeObjects:rt}),d.children))}(0,tt.R5)(yt,"core.type","AppRouter");function _n(d){const n={};for(const h in d.collectors)d.collectors.hasOwnProperty(h)&&(n[h]=d.collectors[h]());const i=[{node:o.Children.toArray(d.root),parent:void 0,contexts:{}}];for(;i.length!==0;){const{node:h,parent:A,contexts:Pe}=i.shift();o.Children.forEach(h,et=>{if(!(0,o.isValidElement)(et))return;const rt={};for(const Dt in n)if(n.hasOwnProperty(Dt)){const Wt=n[Dt];rt[Dt]=Wt.visit(Wt.accumulator,et,A,Pe[Dt])}for(const Dt of d.discoverers){const Wt=Dt(et);Wt&&i.push({node:Wt,parent:et,contexts:rt})}})}return Object.fromEntries(Object.entries(n).map(([h,A])=>[h,A.accumulator]))}function Zn(d,n){return()=>({accumulator:d(),visit:n})}function Xn(d){var n;return(n=d.props)==null?void 0:n.children}function dr(d){var n,i,h;if((n=d.props)!=null&&n.path&&((i=d.props)!=null&&i.element))return(h=d.props)==null?void 0:h.element}const $r=Zn(()=>new Set,(d,n)=>{const i=(0,tt.IY)(n,"core.plugin");i&&d.add(i)}),Zr=d=>{const{children:n}=d,i=(0,W.u)(W.f),h="with"in d?i.isActive(d.with):!i.isActive(d.without);return o.createElement(o.Fragment,null,h?n:null)};(0,tt.R5)(Zr,"core.featureFlagged",!0);const lr={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function y(d){var n,i;const h=d;return h!=null&&h.type?(i=(n=h.type.displayName)!=null?n:h.type.name)!=null?i:String(h.type):String(h)}const s=d=>{const n=new Set;return d&&n.add(d),n};function b(d,n=new Array){return o.Children.forEach(d,i=>{if(!(0,o.isValidElement)(i))return;const h=(0,tt.IY)(i,"core.mountPoint");if(h){const A=(0,tt.IY)(i,"core.plugin");n.push({routeRef:h,plugin:A})}b(i.props.children,n)}),n}const B=Zn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,i,h)=>{var A,Pe,et,rt,Dt,Wt,Kn;if(h!=null&&h.isElementAncestor)return h;if((i==null?void 0:i.props.element)===n)return{...h,isElementAncestor:!0};const $n=(A=n.props)==null?void 0:A.path,Tn=(0,tt.IY)(n,"core.mountPoint");if(Tn&&$n)throw new Error(`Path property may not be set directly on a routable extension "${y(n)}"`);const nr=(et=(Pe=h==null?void 0:h.obj)==null?void 0:Pe.children)!=null?et:d.objects;if($n!==void 0){if(typeof $n!="string")throw new Error(`Element path must be a string at "${y(n)}"`);const kn=$n.startsWith("/")?$n.slice(1):$n,ir=n.props.element;if((0,tt.IY)(n,"core.gatherMountPoints")){if(ir)throw new Error(`Mount point gatherers may not have an element prop "${y(n)}"`);const qr={path:kn,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((rt=n.props)==null?void 0:rt.caseSensitive),children:[lr],plugins:new Set};return nr.push(qr),{obj:qr,gatherPath:kn,routeRef:h==null?void 0:h.routeRef,gatherRouteRef:h==null?void 0:h.routeRef}}if(ir){const[qr,...ur]=b(ir);if(ur.length>0)throw new Error(`Route element with path "${$n}" may not contain multiple routable extensions`);if(!qr)return h;const{routeRef:ca,plugin:ja}=qr,xo={path:kn,element:"mounted",routeRefs:new Set([ca]),caseSensitive:Boolean((Dt=n.props)==null?void 0:Dt.caseSensitive),children:[lr],plugins:s(ja)};return nr.push(xo),d.paths.set(ca,kn),d.parents.set(ca,h==null?void 0:h.routeRef),{obj:xo,routeRef:ca!=null?ca:h==null?void 0:h.routeRef,gatherPath:kn,gatherRouteRef:h==null?void 0:h.gatherRouteRef}}}if(Tn){if((h==null?void 0:h.gatherPath)===void 0)throw new Error(`Routable extension "${y(n)}" with mount point "${Tn}" must be assigned a path`);(Wt=h==null?void 0:h.obj)==null||Wt.routeRefs.add(Tn);const kn=(0,tt.IY)(n,"core.plugin");return kn&&((Kn=h==null?void 0:h.obj)==null||Kn.plugins.add(kn)),d.paths.set(Tn,h.gatherPath),d.parents.set(Tn,h==null?void 0:h.gatherRouteRef),{...h,routeRef:Tn}}return h}),Oe=Zn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,i,h)=>{var A,Pe,et,rt,Dt;if((i==null?void 0:i.props.element)===n)return h;let Wt=h==null?void 0:h.obj,Kn=h==null?void 0:h.routeRef,$n=h==null?void 0:h.sticky;const Tn=(A=n.props)==null?void 0:A.path,nr=(Pe=Wt==null?void 0:Wt.children)!=null?Pe:d.objects,kn=Boolean((et=n.props)==null?void 0:et.caseSensitive);let ir=h==null?void 0:h.path;if((0,tt.IY)(n,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");ir=Tn}const qr=(rt=n.props)==null?void 0:rt.element;let ur=(0,tt.IY)(n,"core.mountPoint");if(!ur&&(0,o.isValidElement)(qr)&&(ur=(0,tt.IY)(qr,"core.mountPoint")),ur){let ja=Tn;if(ir&&(ja?ir=void 0:ja=ir),!ja)throw new Error("Mounted routable extension must have a path");d.paths.set(ur,ja),Kn&&$n?(d.parents.set(ur,Kn),Tn&&(Kn=ur,$n=!1)):(d.parents.set(ur,Kn),Kn=ur),Tn?(Wt={caseSensitive:kn,path:Tn,element:"mounted",routeRefs:new Set([ur]),children:[lr],plugins:s((0,tt.IY)(n.props.element,"core.plugin"))},nr.push(Wt)):Wt==null||Wt.routeRefs.add(ur)}if((0,tt.IY)(n,"core.gatherMountPoints")&&($n=!0),(0,tt.IY)(n,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");ur||(Wt={caseSensitive:kn,path:Tn,element:"gathered",routeRefs:new Set,children:[lr],plugins:((Dt=h==null?void 0:h.obj)==null?void 0:Dt.plugins)||new Set},nr.push(Wt))}return{obj:Wt,path:ir,routeRef:Kn,sticky:$n}}),ot=Zn(()=>new Set,(d,n)=>{if(n.type===Zr){const i=n.props;d.add("with"in i?i.with:i.without)}}),At=(0,Y.uW)("route-ref-type",()=>Symbol("route-ref-type"));function xt(d){return d[At]==="absolute"}function Sn(d){return d[At]==="sub"}function Bn(d){return d[At]==="external"}function Ln(...d){const n=d.join("/").replace(/\/\/+/g,"/");return n!=="/"&&n.endsWith("/")?n.slice(0,-1):n}function fr(d,n,i){let h,A="";if(xt(d))h=d;else if(Sn(d))h=d.parent,A=d.path;else if(Bn(d)){const rt=i.get(d);if(!rt)return[void 0,""];if(xt(rt))h=rt;else if(Sn(rt))h=rt.parent,A=rt.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${rt}`)}else throw d[At]?new Error(`Unknown or invalid route ref type, ${d[At]}`):new Error(`Unknown object passed to useRouteRef, got ${d}`);if(!h)return[void 0,""];const Pe=n.get(h);if(Pe===void 0)return[void 0,""];const et=Ln(Pe,A);return[h,et]}function zr(d,n,i,h,A){var Pe;const et=(Pe=(0,g.fp)(A,n))!=null?Pe:[],rt=Array();let Dt=-1;for(let $n=d;$n&&(Dt=et.findIndex(Tn=>Tn.route.routeRefs.has($n)),Dt===-1);$n=h.get($n))rt.unshift($n);rt.length===0&&(Dt-=1);const Wt=Dt===-1?"":et[Dt].pathname,Kn=rt.slice(0,-1).map($n=>{const Tn=i.get($n);if(Tn===void 0)throw new Error(`No path for ${$n}`);if(Tn.includes(":"))throw new Error(`Cannot route to ${d} with parent ${$n} as it has parameters`);return Tn});return`${Ln(Wt,...Kn)}/`}class sa{constructor(n,i,h,A,Pe){this.routePaths=n,this.routeParents=i,this.routeObjects=h,this.routeBindings=A,this.appBasePath=Pe}resolve(n,i){const[h,A]=fr(n,this.routePaths,this.routeBindings);if(!h)return;let Pe;typeof i=="string"?Pe=this.trimPath(i):i.pathname?Pe={...i,pathname:this.trimPath(i.pathname)}:Pe=i;const et=this.appBasePath+zr(h,Pe,this.routePaths,this.routeParents,this.routeObjects);return(...[Dt])=>{const Wt=Dt&&le()(Dt,Kn=>typeof Kn=="string"?Kn.replaceAll(/[&?#;\/]/g,$n=>encodeURIComponent($n)):Kn);return Ln(et,(0,g.Gn)(A,Wt))}}trimPath(n){return n&&(n.startsWith(this.appBasePath)?n.slice(this.appBasePath.length):n)}}const Qr=(0,Y.CT)("routing-context"),to=({routePaths:d,routeParents:n,routeObjects:i,routeBindings:h,basePath:A="",children:Pe})=>{const et=new sa(d,n,i,h,A),rt=(0,Y.EI)({1:et});return o.createElement(Qr.Provider,{value:rt},Pe)};function no(d,n){const i=new Set(n.values());i.delete(void 0);for(const h of n.keys()){if(i.has(h))continue;let A=h,Pe="";for(;A;){const rt=d.get(A);if(rt===void 0)throw new Error(`No path for ${A}`);Pe=Ln(rt,Pe),A=n.get(A)}const et=Pe.match(/:(\w+)/g);if(et){for(let rt=0;rt<et.length;rt++)for(let Dt=rt+1;Dt<et.length;Dt++)if(et[Dt]===et[rt])throw new Error(`Parameter ${et[Dt]} is duplicated in path ${Pe}`)}}}function vo(d,n){for(const i of n)if(i.externalRoutes){for(const[h,A]of Object.entries(i.externalRoutes))if(!A.optional&&!d.has(A))throw new Error(`External route '${h}' of the '${i.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const yo=(0,Y.CT)("app-context"),Ha=({appContext:d,children:n})=>{const i=(0,Y.EI)({1:d});return o.createElement(yo.Provider,{value:i,children:n})};var aa=Object.defineProperty,Wa=(d,n,i)=>n in d?aa(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Sa=(d,n,i)=>(Wa(d,typeof n!="symbol"?n+"":n,i),i);function ro(d){return new Error(`Tried to access IdentityApi ${d} before app was loaded`)}function _a(d){console.warn(`WARNING: Call to ${d} is deprecated and will break in the future`)}class ma{constructor(){Sa(this,"target"),Sa(this,"waitForTarget"),Sa(this,"resolveTarget",()=>{}),Sa(this,"signOutTargetUrl","/"),this.waitForTarget=new Promise(n=>{this.resolveTarget=n})}setTarget(n,i){this.target=n,this.signOutTargetUrl=i.signOutTargetUrl,this.resolveTarget(n)}getUserId(){if(!this.target)throw ro("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return _a("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw ro("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return _a("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(n=>n.getProfileInfo())}async getBackstageIdentity(){const n=await this.waitForTarget.then(i=>i.getBackstageIdentity());return n.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${n.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),n}async getCredentials(){return this.waitForTarget.then(n=>n.getCredentials())}async getIdToken(){return this.waitForTarget.then(n=>{if(!n.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return _a("getIdToken"),n.getIdToken()})}async signOut(){await this.waitForTarget.then(n=>n.signOut()),window.location.href=this.signOutTargetUrl}}function bo(d,n,i){if(d!==void 0){const A=i.find(Pe=>Pe.id===d);if(A)return A}if(n){const A=i.find(Pe=>Pe.variant==="dark");if(A)return A}const h=i.find(A=>A.variant==="light");return h||i[0]}const ao=()=>{const d=(0,o.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[n,i]=(0,o.useState)(d.matches);return(0,o.useEffect)(()=>{const h=A=>{i(A.matches)};return d.addListener(h),()=>{d.removeListener(h)}},[d]),n};function pa({children:d}){const n=(0,W.u)(W.n),i=(0,Le.Z)(n.activeThemeId$(),n.getActiveThemeId()),h=Boolean(window.matchMedia)?ao():!1,A=bo(i,h,n.getInstalledThemes());if(!A)throw new Error("App has no themes");return o.createElement(A.Provider,{children:d})}const oo=async()=>io();function io(d=/*__APP_INJECTED_CONFIG_MARKER__*/"[{\"context\":\"app\",\"deprecatedKeys\":[],\"data\":{\"app\":{\"title\":\"Scaffolded Backstage App\",\"baseUrl\":\"http://localhost:3000\"},\"organization\":{\"name\":\"My Company\"},\"backend\":{\"baseUrl\":\"http://localhost:7007\"},\"integrations\":{\"azure\":[{\"host\":\"dev.azure.com\"}]},\"techdocs\":{\"builder\":\"local\"}}}]"/*__INJECTED_END__*/){const n=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!n)throw new Error("No static configuration provided");if(!Array.isArray(n))throw new Error("Static configuration has invalid format");const i=n.slice();if(d!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const A=JSON.parse(d);Array.isArray(A)?i.push(...A):i.push({data:A,context:"env"})}catch(A){throw new Error(`Failed to load runtime configuration, ${A}`)}const h=window.__APP_CONFIG__;return h&&i.push({context:"window",data:h}),i}var so=Object.defineProperty,Co=(d,n,i)=>n in d?so(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Po=(d,n,i)=>(Co(d,typeof n!="symbol"?n+"":n,i),i);class So{constructor(){Po(this,"apis",[])}add(n,i){return this.apis.push([n.id,i]),i}build(){return new ha(new Map(this.apis))}}class ha{constructor(n){this.apis=n}static builder(){return new So}static from(n){return new ha(new Map(n.map(([i,h])=>[i.id,h])))}static with(n,i){return new ha(new Map([[n.id,i]]))}with(n,i){return new ha(new Map([...this.apis,[n.id,i]]))}get(n){return this.apis.get(n.id)}}function lo(d){const n=new Map;return d&&d({bind:(h,A)=>{for(const[Pe,et]of Object.entries(A)){const rt=h[Pe];if(!rt)throw new Error(`Key ${Pe} is not an existing external route`);if(!et&&!rt.optional)throw new Error(`External route ${Pe} is required but was undefined`);et&&n.set(rt,et)}}}),n}var Ra=(d,n,i)=>{if(!n.has(d))throw TypeError("Cannot "+i)},Or=(d,n,i)=>(Ra(d,n,"read from private field"),i?i.call(d):n.get(d)),Ya=(d,n,i)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,i)},Ka=(d,n,i,h)=>(Ra(d,n,"write to private field"),h?h.call(d,i):n.set(d,i),i),Aa,ga,Da;const fa="language",la="en",_o=class ri{constructor(n,i){Ya(this,Aa,void 0),Ya(this,ga,void 0),Ya(this,Da,void 0),Ka(this,Aa,n),Ka(this,ga,i),Ka(this,Da,new Ie({language:Or(this,ga)}))}static create(n){var i,h;const A=(i=n==null?void 0:n.availableLanguages)!=null?i:[la];if(A.length!==new Set(A).size)throw new Error(`Supported languages may not contain duplicates, got '${A.join("', '")}'`);if(!A.includes(la))throw new Error(`Supported languages must include '${la}'`);const Pe=(h=n==null?void 0:n.defaultLanguage)!=null?h:la;if(!A.includes(Pe))throw new Error(`Initial language must be one of the supported languages, got '${Pe}'`);return new ri(A,Pe)}static createWithStorage(n){const i=ri.create(n);if(!window.localStorage)return i;const h=window.localStorage.getItem(fa),{languages:A}=i.getAvailableLanguages();return h&&A.includes(h)&&i.setLanguage(h),i.language$().subscribe(({language:Pe})=>{Pe!==window.localStorage.getItem(fa)&&window.localStorage.setItem(fa,Pe)}),window.addEventListener("storage",Pe=>{var et;if(Pe.key===fa){const rt=(et=localStorage.getItem(fa))!=null?et:void 0;rt&&i.setLanguage(rt)}}),i}getAvailableLanguages(){return{languages:Or(this,Aa).slice()}}setLanguage(n){const i=n!=null?n:la;if(i!==Or(this,ga)){if(i&&!Or(this,Aa).includes(i))throw new Error(`Failed to change language to '${i}', available languages are '${Or(this,Aa).join("', '")}'`);Ka(this,ga,i),Or(this,Da).next({language:i})}}getLanguage(){return{language:Or(this,ga)}}language$(){return Or(this,Da)}};Aa=new WeakMap,ga=new WeakMap,Da=new WeakMap;let Ro=_o;function Ao(d){const n=d;if(n.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation resource, bad version '${n.version}'`);return n}function wo(d){const n=d;if(n.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation ref, bad version '${n.version}'`);return n}var Ja=(d,n,i)=>{if(!n.has(d))throw TypeError("Cannot "+i)},ar=(d,n,i)=>(Ja(d,n,"read from private field"),i?i.call(d):n.get(d)),Gr=(d,n,i)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,i)},za=(d,n,i,h)=>(Ja(d,n,"write to private field"),h?h.call(d,i):n.set(d,i),i),oa=(d,n,i)=>(Ja(d,n,"access private method"),i),wa,Oa,Ta,xa,Ga,La,Ia,E,S,T,N,me,Te,Je,ze,ht;function Mt(d){return Object.fromEntries(Object.entries(d).filter(n=>n[1]!==null))}class Bt{constructor(n){this.onLoad=n,Gr(this,xa),Gr(this,wa,new Set),Gr(this,Oa,new Map),Gr(this,Ta,new Map)}addTranslationResource(n){const i=Ao(n);for(const h of i.resources){const A=oa(this,xa,Ga).call(this,h.language,i.id);ar(this,Ta).has(A)||ar(this,Ta).set(A,h.loader)}}needsLoading(n,i){const h=oa(this,xa,Ga).call(this,n,i);return ar(this,Ta).get(h)?!ar(this,wa).has(h):!1}async load(n,i){const h=oa(this,xa,Ga).call(this,n,i),A=ar(this,Ta).get(h);if(!A||ar(this,wa).has(h))return;const Pe=ar(this,Oa).get(h);if(Pe){await Pe;return}const et=A().then(rt=>{this.onLoad({language:n,namespace:i,messages:rt.messages}),ar(this,wa).add(h)},rt=>{throw ar(this,wa).add(h),rt});ar(this,Oa).set(h,et),await et}}wa=new WeakMap,Oa=new WeakMap,Ta=new WeakMap,xa=new WeakSet,Ga=function(d,n){return`${d}/${n}`};const mn=class Hi{constructor(n,i,h){Gr(this,N),Gr(this,Te),Gr(this,ze),Gr(this,La,void 0),Gr(this,Ia,void 0),Gr(this,E,void 0),Gr(this,S,new Set),Gr(this,T,new Set),za(this,La,n),za(this,Ia,i),za(this,E,h)}static create(n){const{languages:i}=n.languageApi.getAvailableLanguages(),h=(0,Se.Fs)({fallbackLng:la,supportedLngs:i,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(h.init(),!h.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:A}=n.languageApi.getLanguage();A!==la&&h.changeLanguage(A);const Pe=new Bt(Dt=>{h.addResourceBundle(Dt.language,Dt.namespace,Mt(Dt.messages),!1,!0)}),et=(n==null?void 0:n.resources)||[];for(let Dt=et.length-1;Dt>=0;Dt--){const Wt=et[Dt];Wt.$$type==="@backstage/TranslationResource"?Pe.addTranslationResource(Wt):Wt.$$type==="@backstage/TranslationMessages"&&h.addResourceBundle(la,Wt.id,Mt(Wt.messages),!0,!1)}const rt=new Hi(h,Pe,n.languageApi.getLanguage().language);return n.languageApi.language$().subscribe(({language:Dt})=>{var Wt;oa(Wt=rt,N,me).call(Wt,Dt)}),rt}getTranslation(n){const i=wo(n);return oa(this,ze,ht).call(this,i),oa(this,Te,Je).call(this,i)}translation$(n){const i=wo(n);return oa(this,ze,ht).call(this,i),new(I())(h=>{let A={};const Pe=()=>{A={};const rt=A;ar(this,Ia).load(ar(this,E),i.id).then(()=>{if(rt===A){const Dt=oa(this,Te,Je).call(this,i);Dt.ready&&h.next(Dt)}},Dt=>{rt===A&&h.error(Array.isArray(Dt)?Dt[0]:Dt)})},et=()=>{const rt=oa(this,Te,Je).call(this,i);rt.ready?h.next(rt):Pe()};return ar(this,Ia).needsLoading(ar(this,E),i.id)&&Pe(),ar(this,T).add(et),()=>{ar(this,T).delete(et)}})}};La=new WeakMap,Ia=new WeakMap,E=new WeakMap,S=new WeakMap,T=new WeakMap,N=new WeakSet,me=function(d){ar(this,E)!==d&&(za(this,E,d),ar(this,La).changeLanguage(d),ar(this,T).forEach(n=>n()))},Te=new WeakSet,Je=function(d){return ar(this,Ia).needsLoading(ar(this,E),d.id)?{ready:!1}:{ready:!0,t:ar(this,La).getFixedT(null,d.id)}},ze=new WeakSet,ht=function(d){if(ar(this,S).has(d.id))return;ar(this,S).add(d.id);const n=d.getDefaultMessages();ar(this,La).addResourceBundle(la,d.id,n,!0,!1);const i=d.getDefaultResource();i&&ar(this,Ia).addTranslationResource(i)};let Mn=mn;function yn(d){const n=new URL(d);return n.protocol=document.location.protocol,n.hostname=document.location.hostname,n.port=document.location.port,n.toString().replace(/\/$/,"")}function bn(d){const n=R.fromConfigs(d),i=n.getOptionalString("app.baseUrl"),h=n.getOptionalString("backend.baseUrl");let A=d,Pe,et;if(i&&h){const rt=new URL(i).origin,Dt=new URL(h).origin;if(rt===Dt){const Wt=yn(h);h!==Wt&&(Pe=Wt)}}if(i){const rt=yn(i);i!==rt&&(et=rt)}return(et||Pe)&&(A=A.concat({data:{app:et&&{baseUrl:et},backend:Pe&&{baseUrl:Pe}},context:"relative-resolver"})),A}var Wn=Object.defineProperty,Cn=(d,n,i)=>n in d?Wn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,wn=(d,n,i)=>(Cn(d,typeof n!="symbol"?n+"":n,i),i),hr=(d,n,i)=>{if(!n.has(d))throw TypeError("Cannot "+i)},Gn=(d,n,i)=>(hr(d,n,"read from private field"),i?i.call(d):n.get(d)),Hn=(d,n,i)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,i)},qn=(d,n,i,h)=>(hr(d,n,"write to private field"),h?h.call(d,i):n.set(d,i),i),cr;function Ma(d,n,i){var h;const A=Boolean(d),Pe=(0,Ze.default)(d||(()=>Promise.resolve([])));let et;if(A&&Pe.loading){const{Progress:Wt}=n;et=o.createElement(Wt,null)}else if(Pe.error){const{BootErrorPage:Wt}=n;et=o.createElement(Wt,{step:"load-config",error:Pe.error})}const{ThemeProvider:rt=pa}=n;return et?{node:o.createElement(Kt,{apis:ha.with(W.n,i)},o.createElement(rt,null,et))}:{api:R.fromConfigs((h=Pe.value)!=null&&h.length?bn(Pe.value):[])}}class Ba{constructor(n){this.app=n}getPlugins(){return this.app.getPlugins()}getSystemIcon(n){return this.app.getSystemIcon(n)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class jr{constructor(n){wn(this,"apiHolder"),wn(this,"configApi"),wn(this,"apis"),wn(this,"icons"),wn(this,"plugins"),wn(this,"featureFlags"),wn(this,"components"),wn(this,"themes"),wn(this,"configLoader"),wn(this,"defaultApis"),wn(this,"bindRoutes"),wn(this,"appLanguageApi"),wn(this,"translationResources"),wn(this,"appIdentityProxy",new ma),wn(this,"apiFactoryRegistry"),Hn(this,cr,!1);var i,h,A,Pe,et,rt,Dt,Wt,Kn;this.apis=(i=n.apis)!=null?i:[],this.icons=n.icons,this.plugins=new Set((h=n.plugins)!=null?h:[]),this.featureFlags=(A=n.featureFlags)!=null?A:[],this.components=n.components,this.themes=n.themes,this.configLoader=(Pe=n.configLoader)!=null?Pe:oo,this.defaultApis=(et=n.defaultApis)!=null?et:[],this.bindRoutes=n.bindRoutes,this.apiFactoryRegistry=new Nt,this.appLanguageApi=Ro.createWithStorage({defaultLanguage:(rt=n.__experimentalTranslations)==null?void 0:rt.defaultLanguage,availableLanguages:(Dt=n.__experimentalTranslations)==null?void 0:Dt.availableLanguages}),this.translationResources=(Kn=(Wt=n.__experimentalTranslations)==null?void 0:Wt.resources)!=null?Kn:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(n){return this.icons[n]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(n){const i=this.getProvider();return()=>o.createElement(i,null,n)}getProvider(){if(Gn(this,cr))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");qn(this,cr,!0);const n=new Ba(this);let i=!1;return({children:A})=>{const Pe=(0,o.useRef)(!0),et=(0,o.useMemo)(()=>_.createWithStorage(this.themes),[]),{routing:rt,featureFlags:Dt,routeBindings:Wt}=(0,o.useMemo)(()=>{const kn=_n({root:A,discoverers:[Xn,dr],collectors:{routing:tr()?Oe:B,collectedPlugins:$r,featureFlags:ot}});return kn.collectedPlugins.forEach(ir=>this.plugins.add(ir)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...kn,routeBindings:lo(this.bindRoutes)}},[A]);i||(i=!0,no(rt.paths,rt.parents),vo(Wt,this.plugins));const Kn=Ma(this.configLoader,this.components,et),$n="api"in Kn;if($n){const{api:kn}=Kn;this.configApi=kn}if("node"in Kn)return Kn.node;if($n&&Pe.current){Pe.current=!1;const kn=this.getApiHolder().get(W.f);if(kn){for(const ur of this.featureFlags)kn.registerFlag({...ur,pluginId:""});for(const ur of this.plugins.values())if("getFeatureFlags"in ur)for(const ca of ur.getFeatureFlags())kn.registerFlag({name:ca.name,pluginId:ur.getId()});else for(const ca of ur.output())ca.type==="feature-flag"&&kn.registerFlag({name:ca.name,pluginId:ur.getId()});const ir=kn.getRegisteredFlags(),qr=new Set(ir.map(ur=>ur.name));for(const ur of Dt)qr.has(ur)||kn.registerFlag({name:ur,pluginId:""})}}const{ThemeProvider:Tn=pa,Progress:nr}=this.components;return o.createElement(Kt,{apis:this.getApiHolder()},o.createElement(Ha,{appContext:n},o.createElement(Tn,null,o.createElement(to,{routePaths:rt.paths,routeParents:rt.parents,routeObjects:rt.objects,routeBindings:Wt,basePath:Nr(Kn.api)},o.createElement(br.Provider,{value:{routeObjects:rt.objects,appIdentityProxy:this.appIdentityProxy}},o.createElement(o.Suspense,{fallback:o.createElement(nr,null)},A))))))}}getRouter(){return yt}getApiHolder(){if(this.apiHolder){for(const n of this.plugins)for(const i of n.getApis())this.apiFactoryRegistry.get(i.api)||this.apiFactoryRegistry.register("default",i);return Ye.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:W.n,deps:{},factory:()=>_.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:W.p,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:W.v,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:we.IB,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:we.op,deps:{languageApi:we.IB},factory:({languageApi:n})=>Mn.create({languageApi:n,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:W.f,deps:{},factory:()=>new pn});for(const n of this.defaultApis)this.apiFactoryRegistry.register("default",n);for(const n of this.plugins)for(const i of n.getApis())if(!this.apiFactoryRegistry.register("default",i))throw new Error(`Plugin ${n.getId()} tried to register duplicate or forbidden API factory for ${i.api}`);for(const n of this.apis)if(!this.apiFactoryRegistry.register("app",n))throw new Error(`Duplicate or forbidden API factory for ${n.api} in app`);return Ye.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Ye(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(n){const i=new Set;for(const h of n){const A=h.getId();if(i.has(A))throw new Error(`Duplicate plugin found '${A}'`);i.add(A)}}}cr=new WeakMap;function Vr(d){return new jr(d)}let $a=!1;const Xa=d=>{const n=(0,tt.qD)(),{NotFoundErrorPage:i}=n.getComponents(),h=(0,o.useMemo)(()=>tr(),[]),Pe=[...(0,tt.vJ)(d.children,et=>et.getElements().flatMap(rt=>{var Dt;let Wt=rt.props.path;if(Wt==="")return[];Wt=(Dt=Wt==null?void 0:Wt.replace(/\/\*$/,""))!=null?Dt:"/";let Kn=h?rt:rt.props.element;return!h&&!Kn&&(Kn=rt,$a||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),$a=!0)),[{path:Wt,element:Kn,children:rt.props.children?[{path:Wt==="/"?"/":"*",element:rt.props.children}]:void 0}]}).sort((rt,Dt)=>Dt.path.localeCompare(rt.path)).map(rt=>({...rt,path:rt.path==="/"?"/":`${rt.path}/*`}))),{path:"*",element:o.createElement(i,null)}];return(0,M.V$)(Pe)};(0,tt.R5)(Xa,"core.type","FlatRoutes")},49558:(Un,Ht,e)=>{"use strict";e.d(Ht,{in:()=>En,qE:()=>_r,Oo:()=>Pi,hB:()=>cc,db:()=>hs,Oi:()=>Nr,VY:()=>Mo,yW:()=>Ci,bj:()=>wr,XF:()=>at,mn:()=>xt,NX:()=>pe,SX:()=>Bn,zG:()=>gs,ub:()=>sa,mf:()=>Ks,yu:()=>Or,fy:()=>fs,h4:()=>ko,M6:()=>za,i9:()=>Ll,aR:()=>pi,rJ:()=>wn,Oh:()=>Zl,hu:()=>Ki,Fw:()=>E,rU:()=>br,Qj:()=>rr,nU:()=>T,SA:()=>ao,J3:()=>Je,Or:()=>ht,T3:()=>No,g9:()=>Nl,Ex:()=>Mt,Gk:()=>Ka,tn:()=>hi,Ph:()=>i,YE:()=>ol,v7:()=>Fi,Hz:()=>Vo,R6:()=>Ni,tR:()=>rl,oz:()=>Cl,BV:()=>yl,k2:()=>Zi,BT:()=>ll,dh:()=>xo,vK:()=>ur,Kq:()=>ir,wA:()=>ca,VC:()=>ja,Pd:()=>qr,xT:()=>us,uw:()=>Os,qt:()=>Ps,oZ:()=>sc,iA:()=>bi,tB:()=>Es,GB:()=>ha,sidebarConfig:()=>Ua,r0:()=>Ho,mZ:()=>Oo,Pf:()=>$o});var o=e(30204),p=e(30705),m=e(61837),Y=e(37265),V=e(90436),I=e(87685),W=e(99688),tt=e(19928),Xe=e.n(tt),r=e(2784),je=e(27429),ye=e(77277),X=e(8629),Z=e(49429),l=e(38724),ne=e(79249),re=e(43434),se=e(79692),ve=e(60364),be=e(41128),u=e(15459),F=e(12420),R=e(76600),M=e(41547),g=e(86689),Ze=e(72779),we=e.n(Ze),Qe=e(76635),le=e(73557),Le=e(39857),Se=e(16060),Ke=e(95544),St=e(56553),L=e(26639),mt=e(39595),fe=e(80030),Kt=e(19353),Et=e(95074),It=e(41156),Ft=e(88188),Ye=e(13725),_t=e(11105),kt=e(97963),Qt=e(46506),Yt=e.n(Qt),Nt=e(54073),bt=e.n(Nt),Tt=e(10368),wt=e(76985),Xt=e(39829),Re=e(19574),j=e.n(Re),v=e(72164),k=e(93657),Q=e(60905);const q=e.p+"static/missingAnnotation.67f79e98..svg",Ge=e.p+"static/noInformation.4b426325..svg",U=e.p+"static/createComponent.975d1e1e..svg",x=e.p+"static/noBuild.1715fa71..svg";var he=e(11776),Fe=e(38402),dt=e(49378),qt=e(27616),Ie=e(8284),Be=e(70660),ct=e(91750),Ot=e(38016),Ct=e(32407),$t=e(28156),Pt=e(85256),$e=e(28316),qe=e(35292),Ee=e(48049),G=e(51209),de=e(3806),Ue=e(32272),nt=e(15277),it=e.n(nt),Rt=e(29862),en=e(67358),rn=e(94339),Ae=e(14503),De=e(24579),w=e(32552),H=e(27597),te=e(35585),ut=e(21324),K=e(7089),ee=e(42494),Ve=e(74603),lt=e(56939),Lt=e(12231),zt=e(73698),Gt=e(72379),an=e(74600),fn=e.n(an),on=e(37390),ln=e(97485),cn=e(15584),On=e(89571),dn=e(86136),Pn=e(50758),ce=e(79784),ae=e(19126),ke=e.n(ae),vt=e(80079),jt=e(18671),Vt=e(6487),An=e(99152),Nn=e(67222),Fn=e(21070),sr=e(90324),gr=e(98281),Jn=e(33375),pr=e(44233),Cr=e(27604),xr=e(36444),vr=e(37971),Lr=e(59709),Ar=e(17373),Mr=e(3702),ie=e(93111),He=e(4614),st=e(44311);const C=e.p+"static/mic-drop.fe3ef4d0..svg";var _=e(16173),O=e(50023),D=e(4190),ue=e(44882),_e=e(18473),oe=e(57998),Ce=e(83543),Ne=e(59797),We=e(26739),pt=e(86619),nn=e(98989),tn=e(30195),Ut=e(63955),gn=e(74828),pn=e(45455),hn=e.n(pn);function En(t){const[a,c]=(0,r.useState)([]),f=(0,o.u)(o.l),{anchorOrigin:P={vertical:"top",horizontal:"center"},transientTimeoutMs:$}=t,J=$!=null?$:5e3;(0,r.useEffect)(()=>{const xe=f.alert$().subscribe(gt=>c(ft=>ft.concat(gt)));return()=>{xe.unsubscribe()}},[f]);const[ge]=a;if((0,r.useEffect)(()=>{if(ge&&ge.display==="transient"){const xe=setTimeout(()=>{c(gt=>{const ft=gt.filter(Jt=>Jt!==ge);return ft.length===gt.length?gt:ft})},J);return()=>clearTimeout(xe)}},[ge,J]),a.length===0)return null;const Me=()=>{c(xe=>xe.filter(gt=>gt!==ge))};return r.createElement(Y.Z,{open:!0,anchorOrigin:P},r.createElement(W.Z,{action:r.createElement(m.Z,{color:"inherit",size:"small",onClick:Me,"data-testid":"error-button-close"},r.createElement(I.Z,null)),severity:ge.severity},r.createElement(V.Z,{component:"span"},String(ge.message),a.length>1&&r.createElement("em",null,` (${a.length-1} older ${Xe()("message",a.length-1)})`))))}const vn="@backstage/autologout:lastSeenOnline",Yn=({enableEffect:t,autologoutIsEnabled:a,idleTimeoutSeconds:c,lastSeenOnlineStore:f,identityApi:P})=>{useEffect(()=>{if(a&&t){const $=f.get();if($){const ge=Math.ceil(new Date().getTime()/1e3),Me=Math.ceil($.getTime()/1e3);ge-Me>c&&P.signOut()}f.save(new Date)}else f.delete()},[a,t,P,c,f])},Vn=t=>{const{idleTimer:a,setOpen:c,open:f,promptTimeoutMillis:P,remainingTime:$,setRemainingTime:J}=t;useEffect(()=>{const gt=setInterval(()=>{J(Math.ceil(a.getRemainingTime()))},500);return()=>{clearInterval(gt)}},[a,J]);const ge=()=>{c(!1),a.activate()},xe=Math.max($-P/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:f,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,"Logging out due to inactivity"),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil($/1e3)," ",xe),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:ge,color:"secondary",variant:"contained",size:"small"},"Yes! Don't log me out")))};class In{constructor(a){this.key=a}save(a){localStorage.setItem(this.key,a.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const a=localStorage.getItem(this.key);return a!==null?new Date(Date.parse(a)):null}}const xn=({idleTimeoutMinutes:t,events:a,useWorkerTimers:c,logoutIfDisconnected:f,promptBeforeIdleSeconds:P,promptOpen:$,setPromptOpen:J,remainingTimeCountdown:ge,setRemainingTimeCountdown:Me,identityApi:xe,lastSeenOnlineStore:gt})=>{const ft=P*1e3,Jt=ft>0,Zt=async()=>{J(!0),Me(ft)},un=()=>{J(!1),Me(0),xe.signOut()},Dn=()=>{J(!1),Me(0)},jn=(Ur,ea)=>{gt.save(new Date)},mr=useIdleTimer({timeout:t*60*1e3,events:a,crossTab:!0,name:"autologout-timer",timers:c?workerTimers:void 0,onIdle:un,onActive:Jt?Dn:void 0,onAction:f?jn:void 0,onPrompt:Jt?Zt:void 0,promptBeforeIdle:Jt?ft:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,Jt&&React.createElement(Vn,{idleTimer:mr,open:$,setOpen:J,remainingTime:ge,setRemainingTime:Me,promptTimeoutMillis:ft}))},zn={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},sn=null,Rn=(t,a)=>{var c,f,P,$,J,ge,Me,xe,gt,ft;return{enabled:(f=(c=t.getOptionalBoolean("auth.autologout.enabled"))!=null?c:a.enabled)!=null?f:zn.enabled,idleTimeoutMinutes:($=(P=t.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?P:a.idleTimeoutMinutes)!=null?$:zn.idleTimeoutMinutes,promptBeforeIdleSeconds:(ge=(J=t.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?J:a.promptBeforeIdleSeconds)!=null?ge:zn.promptBeforeIdleSeconds,useWorkerTimers:(xe=(Me=t.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?Me:a.useWorkerTimers)!=null?xe:zn.useWorkerTimers,logoutIfDisconnected:(ft=(gt=t.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?gt:a.logoutIfDisconnected)!=null?ft:zn.logoutIfDisconnected}},or=t=>{const a=useApi(identityApiRef),c=useApi(configApiRef),[f,P]=useState(!1);useEffect(()=>{async function Dn(jn){(await jn.getCredentials()).token?P(!0):P(!1)}Dn(a)},[a]);const{enabled:$,idleTimeoutMinutes:J,promptBeforeIdleSeconds:ge,logoutIfDisconnected:Me,useWorkerTimers:xe}=useMemo(()=>Rn(c,t),[c,t]);useEffect(()=>{if(J<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(ge<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(J*60<=ge)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[J,ge]);const gt=useMemo(()=>new In(vn),[]),[ft,Jt]=useState(!1),[Zt,un]=useState(0);return Yn({enableEffect:Me,autologoutIsEnabled:$&&f,idleTimeoutSeconds:J*60,lastSeenOnlineStore:gt,identityApi:a}),!$||!f?null:React.createElement(xn,{idleTimeoutMinutes:J,promptBeforeIdleSeconds:ge,useWorkerTimers:xe,events:sn,logoutIfDisconnected:Me,promptOpen:ft,setPromptOpen:Jt,remainingTimeCountdown:Zt,setRemainingTimeCountdown:un,identityApi:a,lastSeenOnlineStore:gt})};function er(t){let a=0;for(let f=0;f<t.length;f++)a=t.charCodeAt(f)+((a<<5)-a);let c="#";for(let f=0;f<3;f++){const P=a>>f*8&255;c+=`00${P.toString(16)}`.slice(-2)}return c}function yr(t){var a;const c=t.trim().split(" "),f=(a=c[0])!=null?a:"",P=c.length>1?c[c.length-1]:"";return f&&P?`${f.charAt(0)}${P.charAt(0)}`:f.charAt(0)}const Br=(0,se.Z)(t=>({avatar:{width:"4rem",height:"4rem",color:t.palette.common.white},avatarText:{fontWeight:t.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function _r(t){const{displayName:a,picture:c,customStyles:f}=t,P=Br();let $={...f};const J={fontFamily:$.fontFamily,fontSize:$.fontSize,fontWeight:$.fontWeight};return c||($={backgroundColor:er(a||""),...f}),r.createElement(re.Z,{alt:a,src:c,className:P.avatar,style:$},a&&r.createElement(V.Z,{variant:"h6",component:"span",className:P.avatarText,style:J},yr(a)))}function Jr(){const[t]=(0,le.is)(r.createElement(le.AW,{index:!0,element:r.createElement("div",null)}));return!t.index}const Fr=(0,se.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),kr=t=>/^([a-z+.-]+):/.test(t),Wr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Xr=window.open;if(Xr&&!Xr.__backstage){const t=function(...c){const f=String(c[0]);if(Wr.test(f))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Xr.apply(this,c)};t.__backstage=!0,window.open=t}const ta=()=>{try{return(0,o.u)(o.p).getOptionalString("app.baseUrl")}catch{return}},na=()=>{var t;const a="http://sample.dev",c=(t=ta())!=null?t:"/",{pathname:f}=new URL(c,a);return(0,Qe.trimEnd)(f,"/")},da=t=>{let a=String(t);const c=na(),f=kr(a),P=a.startsWith(c);return!f&&!P&&(a=c.concat(a)),a},ra=t=>{var a;return t instanceof Array?t.map(ra).join(" ").trim():typeof t=="object"&&t?ra((a=t==null?void 0:t.props)==null?void 0:a.children):["string","number"].includes(typeof t)?String(t):""},br=r.forwardRef(({onClick:t,noTrack:a,...c},f)=>{const P=Fr(),$=(0,p.z$)(),J=Jr()?da(c.to):c.to,ge=ra(c.children)||J,Me=kr(J),xe=Me&&!!/^https?:/.exec(J);if(Wr.test(J))throw new Error("Link component rejected javascript: URL as a security precaution");const gt=ft=>{t==null||t(ft),a||$.captureEvent("click",ge,{attributes:{to:J}})};return Me?r.createElement(g.Z,{...xe?{target:"_blank",rel:"noopener"}:{},...c,...c["aria-label"]?{"aria-label":`${c["aria-label"]}, Opens in a new window`}:{},ref:f,href:J,onClick:gt,className:we()(P.externalLink,c.className)},c.children,r.createElement(V.Z,{component:"span",className:P.visuallyHidden},", Opens in a new window")):r.createElement(g.Z,{...c,ref:f,component:Le.rU,to:J,onClick:gt})}),tr=r.forwardRef((t,a)=>r.createElement(br,{ref:a,...t,color:"initial"})),rr=r.forwardRef((t,a)=>r.createElement(ye.Z,{ref:a,component:tr,...t})),Kr=null;function wr(t){const{text:a,tooltipDelay:c=1e3,tooltipText:f="Text copied to clipboard","aria-label":P="Copy text"}=t,$=(0,o.u)(o.s),[J,ge]=(0,r.useState)(!1),[{error:Me},xe]=(0,Et.Z)();(0,r.useEffect)(()=>{Me&&$.post(Me)},[Me,$]);const gt=ft=>{ft.stopPropagation(),ge(!0),xe(a)};return r.createElement(r.Fragment,null,r.createElement(fe.ZP,{id:"copy-test-tooltip",title:f,placement:"top",leaveDelay:c,onClose:()=>ge(!1),open:J},r.createElement(m.Z,{onClick:gt,"aria-label":P},r.createElement(Kt.Z,null))))}function Nr(t){const{text:a,language:c,showLineNumbers:f=!1,highlightedNumbers:P,customStyle:$,showCopyCodeButton:J=!1}=t,ge=(0,ve.Z)(),Me=ge.palette.type==="dark"?L.Z:mt.Z,xe=ge.palette.type==="dark"?"#256bf3":"#e6ffed";return r.createElement(Ke.Z,{position:"relative"},r.createElement(St.Z,{customStyle:$,language:c,style:Me,showLineNumbers:f,wrapLines:!0,lineNumberStyle:{color:ge.palette.textVerySubtle},lineProps:gt=>P!=null&&P.includes(gt)?{style:{backgroundColor:xe}}:{}},a),J&&r.createElement(Ke.Z,{position:"absolute",top:0,right:0},r.createElement(wr,{text:a})))}function at(t){const{title:a,to:c}=t,f=(0,It.Z)(P=>P.breakpoints.down("xs"));return c?f?r.createElement(m.Z,{component:Le.rU,color:"primary",title:a,size:"small",to:c},r.createElement(Ft.Z,null)):r.createElement(ye.Z,{component:Le.rU,variant:"contained",color:"primary",to:c},a):null}var pe;(t=>{(a=>{a.TOP_BOTTOM="TB",a.BOTTOM_TOP="BT",a.LEFT_RIGHT="LR",a.RIGHT_LEFT="RL"})(t.Direction||(t.Direction={})),(a=>{a.UP_LEFT="UL",a.UP_RIGHT="UR",a.DOWN_LEFT="DL",a.DOWN_RIGHT="DR"})(t.Alignment||(t.Alignment={})),(a=>{a.NETWORK_SIMPLEX="network-simplex",a.TIGHT_TREE="tight-tree",a.LONGEST_PATH="longest-path"})(t.Ranker||(t.Ranker={})),(a=>{a.LEFT="l",a.RIGHT="r",a.CENTER="c"})(t.LabelPosition||(t.LabelPosition={}))})(pe||(pe={}));const yt=(0,se.Z)(t=>({node:{fill:t.palette.primary.light,stroke:t.palette.primary.light},text:{fill:t.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function _n({node:{id:t}}){const a=yt(),[c,f]=r.useState(0),[P,$]=r.useState(0),J=r.useRef(null);r.useLayoutEffect(()=>{if(J.current){let{height:gt,width:ft}=J.current.getBBox();gt=Math.round(gt),ft=Math.round(ft),(gt!==P||ft!==c)&&(f(ft),$(gt))}},[c,P]);const ge=10,Me=c+ge*2,xe=P+ge*2;return r.createElement("g",null,r.createElement("rect",{className:a.node,width:Me,height:xe,rx:10}),r.createElement("text",{ref:J,className:a.text,y:xe/2,x:Me/2,textAnchor:"middle",alignmentBaseline:"middle"},t))}const Zn="arrow-marker",Xn="node",dr="edge",$r="label",Zr=(0,Tt.Z)(t=>({node:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),lr=t=>r.createElement(_n,{...t});function y({render:t=lr,setNode:a,node:c}){const{width:f,height:P,x:$=0,y:J=0}=c,ge=c,Me=Zr(),xe=r.useRef(null);return r.useLayoutEffect(()=>{if(xe.current){let{height:gt,width:ft}=xe.current.getBBox();gt=Math.round(gt),ft=Math.round(ft),(gt!==P||ft!==f)&&a(c.id,{...c,height:gt,width:ft})}},[c,f,P,a]),r.createElement("g",{ref:xe,"data-testid":Xn,className:Me.node,transform:`translate(${$-f/2},${J-P/2})`},t({node:ge}))}const s=(0,Tt.Z)(t=>({text:{fill:t.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function b({edge:{label:t}}){const a=s();return r.createElement("text",{className:a.text,textAnchor:"middle"},t)}const B=(0,Tt.Z)(t=>({path:{strokeWidth:1,stroke:t.palette.textSubtle,fill:"none",transition:`${t.transitions.duration.shortest}ms`},label:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Oe=t=>r.createElement(b,{...t});function ot({render:t=Oe,setEdge:a,id:c,edge:f,curve:P}){const{x:$=0,y:J=0,width:ge,height:Me,points:xe}=f,gt=f,ft=B(),Jt=r.useRef(null);r.useLayoutEffect(()=>{if(Jt.current){let{height:Dn,width:jn}=Jt.current.getBBox();Dn=Math.round(Dn),jn=Math.round(jn),(Dn!==Me||jn!==ge)&&a(c,{...f,height:Dn,width:jn})}},[f,Me,ge,a,c]);let Zt="";const un=r.useMemo(()=>wt.Z().x(Dn=>Dn.x).y(Dn=>Dn.y).curve(Xt[P]),[P]);if(xe){const Dn=xe.filter(jn=>j()(jn.x)&&j()(jn.y));Zt=un(Dn)||""}return r.createElement(r.Fragment,null,Zt&&r.createElement("path",{"data-testid":dr,className:ft.path,d:Zt}),gt.label?r.createElement("g",{ref:Jt,"data-testid":$r,className:ft.label,transform:`translate(${$},${J})`},t({edge:gt})):null)}const At="workspace";function xt(t){var a,c;const{edges:f,nodes:P,renderNode:$,direction:J=pe.Direction.TOP_BOTTOM,align:ge,nodeMargin:Me=50,edgeMargin:xe=10,rankMargin:gt=50,paddingX:ft=0,paddingY:Jt=0,acyclicer:Zt,ranker:un=pe.Ranker.NETWORK_SIMPLEX,labelPosition:Dn=pe.LabelPosition.RIGHT,labelOffset:jn=10,edgeRanks:mr=1,edgeWeight:Ur=1,renderLabel:ea,defs:Qn,zoom:Pr="enabled",curve:Tr="curveMonotoneX",fit:Ir="grow",...Za}=t,mo=(0,kt.Z)(),[va,po]=r.useState(100),[ho,To]=r.useState(100),Er=r.useRef(new(Yt()).graphlib.Graph),[Qa,ti]=r.useState(((a=Er.current.graph())==null?void 0:a.width)||0),[Va,Io]=r.useState(((c=Er.current.graph())==null?void 0:c.height)||0),[ni,Hr]=r.useState([]),[ka,qa]=r.useState([]),ya=Math.max(Qa,va),Sr=Math.max(Va,ho),ia=Math.min(Va,ho),go=Ir==="grow"?Sr:ia,eo=r.useMemo(()=>bt()(Dr=>{if(!Dr)return;const Yr=_t.Z(Dr),Rr=_t.Z(Dr.getElementById(At));function ba(){Yr.call(Ye.sP().scaleExtent([1,1/0]).on("zoom",Na=>{Na.transform.x=Math.min(0,Math.max(Na.transform.x,ya-ya*Na.transform.k)),Na.transform.y=Math.min(0,Math.max(Na.transform.y,Sr-Sr*Na.transform.k)),Rr.attr("transform",Na.transform)}))}Pr==="enabled"?ba():Pr==="enable-on-click"&&Yr.on("click",()=>ba());const{width:Ca,height:Wo}=Dr.getBoundingClientRect();va!==Ca&&po(Ca),ho!==Wo&&To(Wo)},100),[ho,va,ya,Sr,Pr]),fo=r.useCallback(()=>{const Dr=Er.current.nodes(),Yr=Er.current.edges();Dr.forEach(Rr=>{P.some(Ca=>Ca.id===Rr)||Er.current.removeNode(Rr)}),Yr.forEach(Rr=>{f.some(Ca=>Ca.from===Rr.v&&Ca.to===Rr.w)||Er.current.removeEdge(Rr.v,Rr.w)}),P.forEach(Rr=>{const ba=Er.current.nodes().find(Ca=>Rr.id===Ca);if(ba&&Er.current.node(ba)){const{width:Ca,height:Wo,x:Na,y:mc}=Er.current.node(ba);Er.current.setNode(ba,{...Rr,width:Ca,height:Wo,x:Na,y:mc})}else Er.current.setNode(Rr.id,{...Rr,width:0,height:0})}),f.forEach(Rr=>{Er.current.setEdge(Rr.from,Rr.to,{...Rr,label:Rr.label,width:0,height:0,labelpos:Dn,labeloffset:jn,weight:Ur,minlen:mr})})},[f,P,Dn,jn,Ur,mr]),Do=r.useMemo(()=>bt()(()=>{Yt().layout(Er.current);const{height:Dr,width:Yr}=Er.current.graph(),Rr=Math.max(0,Dr||0),ba=Math.max(0,Yr||0);ti(ba),Io(Rr),Hr(Er.current.nodes()),qa(Er.current.edges())},250,{leading:!0}),[]);r.useEffect(()=>(Er.current.setGraph({rankdir:J,align:ge,nodesep:Me,edgesep:xe,ranksep:gt,marginx:ft,marginy:Jt,acyclicer:Zt,ranker:un}),fo(),Do(),Do.cancel),[Zt,ge,J,xe,ft,Jt,Me,gt,un,fo,Do]);function uc(Dr,Yr){return Er.current.setNode(Dr,Yr),Do(),Er.current}function dc(Dr,Yr){return Er.current.setEdge(Dr,Yr),Do(),Er.current}return r.createElement("svg",{ref:eo,...Za,width:"100%",height:go,viewBox:`0 0 ${ya} ${Sr}`},r.createElement("defs",null,r.createElement("marker",{id:Zn,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},r.createElement("path",{fill:mo.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Qn),r.createElement("g",{id:At},r.createElement("svg",{width:Qa,height:Va,y:Sr/2-Va/2,x:ya/2-Qa/2,viewBox:`0 0 ${Qa} ${Va}`},ka.map(Dr=>{const Yr=Er.current.edge(Dr);return Yr?r.createElement(ot,{key:`${Dr.v}-${Dr.w}`,id:Dr,setEdge:dc,render:ea,edge:Yr,curve:Tr}):null}),ni.map(Dr=>{const Yr=Er.current.node(Dr);return Yr?r.createElement(y,{key:Dr,setNode:uc,render:$,node:Yr}):null}))))}const Sn=(0,se.Z)(t=>{var a,c;return{root:{padding:t.spacing(0),marginBottom:t.spacing(0),marginTop:t.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:t.spacing(6),marginTop:-t.spacing(3),zIndex:"unset"},icon:{fontSize:t.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:t.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:t.palette.banner.link}},button:{color:(a=t.palette.banner.closeButtonColor)!=null?a:"inherit"},info:{backgroundColor:t.palette.banner.info},error:{backgroundColor:t.palette.banner.error},warning:{backgroundColor:(c=t.palette.banner.warning)!=null?c:t.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Bn=t=>{var a;const{variant:c,message:f,id:P,fixed:$=!1}=t,J=Sn(),Me=(0,o.u)(o.y).forBucket("notifications"),xe=(a=Me.snapshot("dismissedBanners").value)!=null?a:[],[gt,ft]=(0,r.useState)(new Set(xe)),Jt=(0,v.Z)(Me.observe$("dismissedBanners"));(0,r.useEffect)(()=>{var un;if(Jt!=null&&Jt.value){const Dn=(un=Jt==null?void 0:Jt.value)!=null?un:[];ft(new Set(Dn))}},[Jt==null?void 0:Jt.value]);const Zt=()=>{Me.set("dismissedBanners",[...gt,P])};return r.createElement(Y.Z,{anchorOrigin:$?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!gt.has(P),classes:{root:we()(J.root,!$&&J.topPosition)}},r.createElement(k.Z,{classes:{root:we()(J.content,J[c]),message:J.message},message:f,action:[r.createElement(m.Z,{key:"dismiss",title:"Permanently dismiss this message",className:J.button,onClick:Zt},r.createElement(I.Z,{className:J.icon}))]}))},Ln=(0,se.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),fr=({missing:t})=>{const a=Ln();switch(t){case"field":return r.createElement("img",{src:q,className:a.generalImg,alt:"annotation is missing"});case"info":return r.createElement("img",{src:Ge,alt:"no Information",className:a.generalImg});case"content":return r.createElement("img",{src:U,alt:"create Component",className:a.generalImg});case"data":return r.createElement("img",{src:x,alt:"no Build",className:a.generalImg});default:return null}},zr=(0,se.Z)(t=>({root:{backgroundColor:t.palette.background.default,padding:t.spacing(2,0,0,0)},action:{marginTop:t.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function sa(t){const{title:a,description:c,missing:f,action:P}=t,$=zr();return r.createElement(Q.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:$.root,spacing:2},r.createElement(Q.Z,{item:!0,xs:12,md:6},r.createElement(Q.Z,{container:!0,direction:"column"},r.createElement(Q.Z,{item:!0,xs:!0},r.createElement(V.Z,{variant:"h5"},a)),r.createElement(Q.Z,{item:!0,xs:!0},r.createElement(V.Z,{variant:"body1"},c)),r.createElement(Q.Z,{item:!0,xs:!0,className:$.action},P))),r.createElement(Q.Z,{item:!0,xs:12,md:6,className:$.imageContainer},typeof f=="string"?r.createElement(fr,{missing:f}):f.customImage))}const Qr=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,to=/^.*ANNOTATION.*$/m,no=Qr.match(to)[0],vo=Qr.split(`
`).findIndex(t=>to.test(t)),yo=(0,se.Z)(t=>({code:{borderRadius:6,margin:t.spacing(2,0),background:t.palette.type==="dark"?"#444":t.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Ha(t){return Array.from(Array(t+1).keys(),a=>a+vo)}function aa(t){const a=t.map(c=>no.replace("ANNOTATION",c)).join(`
`);return Qr.replace(no,a)}function Wa(t){const a=t.length<=1;return React.createElement(React.Fragment,null,"The ",a?"annotation":"annotations"," ",t.map(c=>React.createElement("code",null,c)).reduce((c,f)=>React.createElement(React.Fragment,null,c,", ",f))," ",a?"is":"are"," missing. You need to add the"," ",a?"annotation":"annotations"," to your component if you want to enable this tool.")}function Sa(t){const{annotation:a,readMoreUrl:c}=t,f=Array.isArray(a)?a:[a],P=c||"https://backstage.io/docs/features/software-catalog/well-known-annotations",$=yo();return React.createElement(sa,{missing:"field",title:"Missing Annotation",description:Wa(f),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),React.createElement(Box,{className:$.code},React.createElement(Nr,{text:aa(f),language:"yaml",showLineNumbers:!0,highlightedNumbers:Ha(f.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:br,to:P},"Read more"))})}const ro=(0,se.Z)(t=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${t.palette.border}`},"& th, & td":{border:`1px solid ${t.palette.border}`,padding:t.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:t.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:t.palette.background.paper},"& tr":{backgroundColor:t.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:t.palette.background.default},"& a":{color:t.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),_a=(t,a)=>a?typeof a=="string"?t+a:r.Children.toArray(a.props.children).reduce(_a,t):t,ma=({level:t,children:a})=>{const P=r.Children.toArray(a).reduce(_a,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return r.createElement(`h${t}`,{id:P},a)},bo={code:({inline:t,className:a,children:c,...f})=>{const P=String(c).replace(/\n+$/,""),$=/language-(\w+)/.exec(a||"");return!t&&$?r.createElement(Nr,{language:$[1],text:P}):r.createElement("code",{className:a,...f},c)},h1:ma,h2:ma,h3:ma,h4:ma,h5:ma,h6:ma};function ao(t){const{content:a,dialect:c="gfm",linkTarget:f,transformLinkUri:P,transformImageUri:$,className:J}=t,ge=ro();return r.createElement(Ct.D,{remarkPlugins:c==="gfm"?[$t.Z]:[],className:`${ge.markdown} ${J}`,children:a,components:bo,linkTarget:f,transformLinkUri:P,transformImageUri:$})}const pa=(t,a)=>(a.palette.type==="light"?be._j:be.$n)(a.palette[t].light,.6),oo=(t,a)=>(a.palette.type==="light"?be.$n:be._j)(a.palette[t].light,.9),io=(0,se.Z)(t=>({root:{marginRight:t.spacing(1),fill:({severity:a})=>pa(a,t)}})),so=({severity:t})=>{const a=io({severity:t});return r.createElement(ct.Z,{classes:a})},Co=({severity:t})=>{const a=io({severity:t});return r.createElement(Ot.Z,{classes:a})},Po=(0,se.Z)(t=>({panel:{backgroundColor:({severity:a})=>oo(a,t),color:({severity:a})=>pa(a,t),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:a})=>pa(a,t),fontWeight:t.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:a})=>pa(a,t),backgroundColor:({severity:a})=>oo(a,t)},details:{width:"100%",display:"block",color:t.palette.textContrast,backgroundColor:t.palette.background.default,border:`1px solid ${t.palette.border}`,padding:t.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),So=t=>t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1);function ha(t){const{severity:a="warning",title:c,titleFormat:f,message:P,children:$,defaultExpanded:J}=t,ge=Po({severity:a}),Me=So(a)+(c?`: ${c}`:"");return r.createElement(qt.Z,{defaultExpanded:J!=null?J:!1,className:ge.panel,role:"alert"},r.createElement(Ie.Z,{expandIcon:r.createElement(Co,{severity:a}),className:ge.summary},r.createElement(so,{severity:a}),r.createElement(V.Z,{className:ge.summaryText,variant:"subtitle1"},f==="markdown"?r.createElement(ao,{content:Me,className:ge.markdownContent}):Me)),(P||$)&&r.createElement(Be.Z,null,r.createElement(Q.Z,{container:!0},P&&r.createElement(Q.Z,{item:!0,xs:12},r.createElement(V.Z,{className:ge.message,variant:"body1"},P)),$&&r.createElement(Q.Z,{item:!0,xs:12,className:ge.details},$))))}const lo=(0,se.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageErrorPanel"}),Ra=({error:t,message:a,stack:c,children:f})=>{const P=lo();return r.createElement(he.Z,{dense:!0},r.createElement(Fe.Z,{alignItems:"flex-start"},r.createElement(dt.Z,{classes:{secondary:P.text},primary:"Error",secondary:t}),r.createElement(wr,{text:t})),r.createElement(Fe.Z,{alignItems:"flex-start"},r.createElement(dt.Z,{classes:{secondary:P.text},primary:"Message",secondary:a}),r.createElement(wr,{text:a})),c&&r.createElement(Fe.Z,{alignItems:"flex-start"},r.createElement(dt.Z,{classes:{secondary:P.text},primary:"Stack Trace",secondary:c}),r.createElement(wr,{text:c})),f)};function Or(t){const{title:a,error:c,defaultExpanded:f,titleFormat:P,children:$}=t;return r.createElement(ha,{severity:"error",title:a!=null?a:c.message,defaultExpanded:f,titleFormat:P},r.createElement(Ra,{error:c.name,message:c.message,stack:c.stack,children:$}))}const Ya=(0,se.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Ka(t){var a;const{title:c,error:f,defaultExpanded:P}=t,$=Ya();if(f.name!=="ResponseError")return r.createElement(Or,{title:c!=null?c:f.message,defaultExpanded:P,error:f});const{body:J,cause:ge}=f,{request:Me,response:xe}=J,gt=`${xe.statusCode}: ${ge.name}`,ft=Me&&`${Me.method} ${Me.url}`,Jt=ge.message.replace(/\\n/g,`
`),Zt=(a=ge.stack)==null?void 0:a.replace(/\\n/g,`
`),un=JSON.stringify(J,void 0,2);return r.createElement(Or,{title:c!=null?c:f.message,defaultExpanded:P,error:{name:gt,message:Jt,stack:Zt}},ft&&r.createElement(Fe.Z,{alignItems:"flex-start"},r.createElement(dt.Z,{classes:{secondary:$.text},primary:"Request",secondary:Me?`${ft}`:void 0}),r.createElement(wr,{text:ft})),r.createElement(r.Fragment,null,r.createElement(Pt.Z,{component:"li",className:$.divider}),r.createElement(Fe.Z,{alignItems:"flex-start"},r.createElement(dt.Z,{classes:{secondary:$.text},primary:"Full Error as JSON"})),r.createElement(Nr,{language:"json",text:un,showCopyCodeButton:!0})))}function Aa(t){const a=document.createElement("div");return a.setAttribute("id",t),a}function ga(t){document.body.insertBefore(t,document.body.lastElementChild.nextElementSibling)}function Da(t){const a=useRef(null);useEffect(function(){const P=document.querySelector(`#${t}`),$=P||Aa(t);return P||ga($),$.appendChild(a.current),function(){a.current.remove(),$.childNodes.length===-1&&$.remove()}},[t]);function c(){return a.current||(a.current=document.createElement("div")),a.current}return c()}const fa="core.calloutSeen";function la(){const[t,a]=useState(()=>{const f=localStorage.getItem(fa);return f?JSON.parse(f):{}}),c=useCallback((f,P)=>{const $=localStorage.getItem(fa),ge={...$?JSON.parse($):{},[f]:P};a(ge),localStorage.setItem(fa,JSON.stringify(ge))},[]);return{states:t,setState:c}}function _o(t){const{states:a,setState:c}=la(),f=useCallback(()=>{c(t,!0)},[c,t]);return{seen:a[t]===!0,markSeen:f}}function Ro(t){const{seen:a,markSeen:c}=_o(t);return{show:a===!1,hide:c}}const Ao=(0,se.Z)(t=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${t.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:t.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function wo(t){const{featureId:a,title:c,description:f,children:P}=t,{show:$,hide:J}=Ro(a),ge=Da("core.callout"),Me=useRef(null),[xe,gt]=useState(),ft=Ao(),Jt=useCallback(()=>{if(Me.current){const Zt=Me.current.getBoundingClientRect(),un=Math.max(Zt.width,Zt.height),Dn=800,jn=Zt.x-(un-Zt.width)/2-Dn,mr=Zt.y-(un-Zt.height)/2-Dn,Ur=un+2*Dn,ea=450,Qn=Zt.x+Zt.width/2-ea,Pr=Zt.y-(un-Zt.height)/2+un+20;gt({dotLeft:jn,dotTop:mr,dotSize:Ur,borderWidth:Dn,textTop:Pr,textLeft:Qn,textWidth:ea})}},[]);return useEffect(()=>(window.addEventListener("resize",Jt),window.addEventListener("scroll",Jt),()=>{window.removeEventListener("resize",Jt),window.removeEventListener("scroll",Jt)}),[Jt]),useLayoutEffect(Jt,[Me.current,Jt]),$?React.createElement(React.Fragment,null,React.createElement(Box,{className:ft.featureWrapper,ref:Me},P),createPortal(React.createElement(Box,{className:ft.backdrop},React.createElement(ClickAwayListener,{onClickAway:J},React.createElement(React.Fragment,null,React.createElement(Box,{className:ft.dot,"data-testid":"dot",style:{left:xe==null?void 0:xe.dotLeft,top:xe==null?void 0:xe.dotTop,width:xe==null?void 0:xe.dotSize,height:xe==null?void 0:xe.dotSize,borderWidth:xe==null?void 0:xe.borderWidth},onClick:J,onKeyDown:J,role:"button",tabIndex:0},React.createElement(Box,{className:ft.pulseCircle})),React.createElement(Box,{className:ft.text,"data-testid":"text",style:{left:xe==null?void 0:xe.textLeft,top:xe==null?void 0:xe.textTop,width:xe==null?void 0:xe.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},c),React.createElement(Typography,null,f))))),ge)):React.createElement(React.Fragment,null,P)}const Ja=(0,se.Z)(t=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:t.palette.text.secondary,cursor:"default"},primary:{color:t.palette.primary.main},secondary:{color:t.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function ar({color:t="primary",disabled:a=!1,href:c="#",icon:f=r.createElement(qe.Z,null),label:P,onClick:$,title:J}){const ge=Ja();return a?r.createElement(Ke.Z,{title:J,className:we()(ge.link,ge.disabled)},f,r.createElement(V.Z,{variant:"caption",component:"span",className:ge.label},P)):r.createElement(br,{title:J,className:we()(ge.link,ge[t]),to:c,onClick:$},f,r.createElement(V.Z,{variant:"caption",component:"span",className:ge.label},P))}const Gr=(0,se.Z)(t=>({links:{margin:t.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:t.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function za(t){const{links:a}=t,c=Gr();return r.createElement("nav",{className:c.links},a.map((f,P)=>r.createElement(ar,{key:P+1,...f})))}const oa=t=>{const a=t==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${a}) 0%,
    hsla(0, 0%, ${a}, 0.987) 8.1%,
    hsla(0, 0%, ${a}, 0.951) 15.5%,
    hsla(0, 0%, ${a}, 0.896) 22.5%,
    hsla(0, 0%, ${a}, 0.825) 29%,
    hsla(0, 0%, ${a}, 0.741) 35.3%,
    hsla(0, 0%, ${a}, 0.648) 41.2%,
    hsla(0, 0%, ${a}, 0.55) 47.1%,
    hsla(0, 0%, ${a}, 0.45) 52.9%,
    hsla(0, 0%, ${a}, 0.352) 58.8%,
    hsla(0, 0%, ${a}, 0.259) 64.7%,
    hsla(0, 0%, ${a}, 0.175) 71%,
    hsla(0, 0%, ${a}, 0.104) 77.5%,
    hsla(0, 0%, ${a}, 0.049) 84.5%,
    hsla(0, 0%, ${a}, 0.013) 91.9%,
    hsla(0, 0%, ${a}, 0) 100%
  `},wa=100,Oa=10,Ta=(0,se.Z)(t=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:wa,height:`calc(100% + ${Oa}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-Oa,background:`linear-gradient(90deg, ${oa(t.palette.type)})`},fadeRight:{right:-Oa,background:`linear-gradient(270deg, ${oa(t.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-t.spacing(2)},buttonRight:{right:-t.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function xa(t){const[[a,c],f]=React.useState([0,0]);return React.useLayoutEffect(()=>{const P=t.current;if(!P){f([0,0]);return}const $=()=>{const J=P.scrollLeft,ge=P.scrollWidth-P.offsetWidth-P.scrollLeft;f([J,ge])};return $(),P.addEventListener("scroll",$),window.addEventListener("resize",$),()=>{P.removeEventListener("scroll",$),window.removeEventListener("resize",$)}},[t]),[a,c]}function Ga(t,a,c){const[f,P]=React.useState(0);return React.useLayoutEffect(()=>{if(f===0)return;const $=window.performance.now(),J=requestAnimationFrame(ge=>{if(!t.current)return;const Me=ge-$,xe=Math.abs(f)*Me/a,ft=Math.max(c,xe)*Math.sign(f);t.current.scrollBy({left:ft});const Jt=f-ft;Math.sign(f)!==Math.sign(Jt)?P(0):P(Jt)});return()=>cancelAnimationFrame(J)},[t,f,a,c]),P}function La(t){const{scrollStep:a=100,scrollSpeed:c=50,minScrollDistance:f=5,children:P,...$}=t,J=Ta(t),ge=React.useRef(),[Me,xe]=xa(ge),gt=Ga(ge,c,f),ft=Jt=>{ge.current&&gt(Jt?a:-a)};return React.createElement(Box,{...$,className:J.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:J.container,ref:ge},P),React.createElement(Box,{className:classNames(J.fade,J.fadeLeft,{[J.fadeHidden]:Me===0})}),React.createElement(Box,{className:classNames(J.fade,J.fadeRight,{[J.fadeHidden]:xe===0})}),Me>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>ft(!1),className:classNames(J.button,J.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),xe>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>ft(!0),className:classNames(J.button,J.buttonRight,{})},React.createElement(ChevronRight,null)))}const Ia=(0,se.Z)(t=>({alpha:{color:t.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function E(t){const a=Ia(t),{shorthand:c,alpha:f}=t;return c?r.createElement(V.Z,{component:"span",className:a[f?"alpha":"beta"],style:{fontSize:"120%"}},f?r.createElement(r.Fragment,null,"\u03B1"):r.createElement(r.Fragment,null,"\u03B2")):r.createElement(V.Z,{component:"span",className:a[f?"alpha":"beta"]},f?"Alpha":"Beta")}const S=(0,r.lazy)(()=>e.e(9505).then(e.bind(e,79505)).then(t=>({default:t.RealLogViewer})));function T(t){const{Progress:a}=(0,p.qD)().getComponents();return r.createElement(r.Suspense,{fallback:r.createElement(a,null)},r.createElement(S,{...t}))}const N=(0,se.Z)(t=>({root:{paddingLeft:t.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),me=({request:t,busy:a,setBusy:c})=>{const f=N(),[P,$]=(0,r.useState)(),J=async()=>{c(!0);try{await t.trigger()}catch(Me){$((0,Ue.VZ)(Me)?Me.message:"An unspecified error occurred")}finally{c(!1)}},ge=t.provider.icon;return r.createElement(Fe.Z,{disabled:a,classes:{root:f.root}},r.createElement(de.Z,null,r.createElement(ge,{fontSize:"large"})),r.createElement(dt.Z,{primary:t.provider.title,secondary:P&&r.createElement(V.Z,{color:"error"},P)}),r.createElement(ye.Z,{color:"primary",variant:"contained",onClick:J},"Log in"))},Te=(0,se.Z)(t=>({dialog:{paddingTop:t.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:t.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:t.spacing(2,0)}}),{name:"OAuthRequestDialog"});function Je(t){var a;const c=Te(),[f,P]=(0,r.useState)(!1),$=(0,o.u)(o.x),ge=(a=(0,o.u)(o.p).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?a:!1,Me=(0,v.Z)((0,r.useMemo)(()=>$.authRequest$(),[$]),[]),xe=()=>{Me.forEach(gt=>gt.reject())};return r.createElement(X.Z,{open:Boolean(Me.length),fullWidth:!0,maxWidth:"xs",classes:{paper:c.dialog},"aria-labelledby":"oauth-req-dialog-title"},r.createElement("main",null,r.createElement(ne.Z,{classes:{root:c.title},id:"oauth-req-dialog-title"},r.createElement(V.Z,{className:c.titleHeading,variant:"h1",variantMapping:{h1:"span"}},"Login Required"),ge?r.createElement(V.Z,null,"This will trigger a http redirect to OAuth Login."):null),r.createElement(l.Z,{dividers:!0,classes:{root:c.contentList}},r.createElement(he.Z,null,Me.map(gt=>r.createElement(me,{key:gt.provider.title,request:gt,busy:f,setBusy:P}))))),r.createElement(Z.Z,{classes:{root:c.actionButtons}},r.createElement(ye.Z,{onClick:xe},"Reject All")))}const ze=(0,se.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function ht(t){var a;const[c,f]=(0,r.useState)(!1),P=(0,Rt.t)(),$=ze(),J=ge=>{P()&&f(ge)};return r.createElement(fe.ZP,{title:(a=t.title)!=null?a:t.text||"",placement:t.placement,disableHoverListener:!c},r.createElement(it(),{text:t.text,line:t.line,onToggled:J,containerClassName:$.container}))}function Mt(t){const a=(0,ve.Z)(),[c,f]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const P=setTimeout(()=>f(!0),a.transitions.duration.short);return()=>clearTimeout(P)},[a.transitions.duration.short]),c?r.createElement(en.Z,{...t,"data-testid":"progress"}):r.createElement(Ke.Z,{display:"none"})}const Bt=(0,se.Z)(t=>({root:{maxWidth:"fit-content",padding:t.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:t.palette.textSubtle},arrow:{color:t.palette.textSubtle}}),{name:"BackstageBottomLink"});function mn(t){const{link:a,title:c,onClick:f}=t,P=Bt();return r.createElement(Ke.Z,null,r.createElement(Pt.Z,null),r.createElement(br,{to:a,onClick:f,underline:"none"},r.createElement(Ke.Z,{display:"flex",alignItems:"center",className:P.root},r.createElement(Ke.Z,{className:P.boxTitle,fontWeight:"fontWeightBold",m:1},r.createElement(V.Z,null,r.createElement("strong",null,c))),r.createElement(H.Z,{className:P.arrow}))))}const Mn=t=>{const{slackChannel:a}=t;if(a){if(typeof a=="string")return r.createElement(V.Z,null,"Please contact ",a," for help.");if(!a.href)return r.createElement(V.Z,null,"Please contact ",a.name," for help.")}else return null;return r.createElement(rr,{to:a.href,variant:"contained"},a.name)},yn=class extends r.Component{constructor(a){super(a),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(a,c){console.error(`ErrorBoundary, error: ${a}, info: ${c}`),this.setState({error:a,errorInfo:c})}render(){const{slackChannel:a,children:c}=this.props,{error:f}=this.state;return f?r.createElement(Or,{title:"Something Went Wrong",error:f},r.createElement(Mn,{slackChannel:a})):c}},bn=(0,se.Z)(t=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:t.spacing(2,2,2,2.5)},headerTitle:{fontWeight:t.typography.fontWeightBold},headerSubheader:{paddingTop:t.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),Wn=(0,u.Z)(t=>({root:{display:"inline-block",padding:t.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(Ae.Z),Cn={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function wn(t){const{title:a,subheader:c,divider:f=!0,deepLink:P,slackChannel:$,errorBoundaryProps:J,variant:ge,children:Me,headerStyle:xe,headerProps:gt,icon:ft,action:Jt,actionsClassName:Zt,actions:un,cardClassName:Dn,actionsTopRight:jn,className:mr,noPadding:Ur,titleTypographyProps:ea}=t,Qn=bn();let Pr={},Tr={};ge&&ge.split(/[\s]+/g).forEach(va=>{Pr={...Pr,...Cn.card[va]},Tr={...Tr,...Cn.cardContent[va]}});const Ir=()=>!c&&!ft?null:r.createElement("div",{className:Qn.headerSubheader,"data-testid":"info-card-subheader"},c&&r.createElement("div",{className:Qn.subheader},c),ft),Za=J||($?{slackChannel:$}:{});return r.createElement(rn.Z,{style:Pr,className:mr},r.createElement(yn,{...Za},a&&r.createElement(w.Z,{classes:{root:Qn.header,title:Qn.headerTitle,subheader:Qn.headerSubheader,avatar:Qn.headerAvatar,action:Qn.headerAction,content:Qn.headerContent},title:a,subheader:Ir(),action:Jt,style:{...xe},titleTypographyProps:ea,...gt}),jn&&r.createElement(Wn,null,jn),f&&r.createElement(Pt.Z,null),r.createElement(De.Z,{className:we()(Dn,{[Qn.noPadding]:Ur}),style:Tr},Me),un&&r.createElement(Ae.Z,{className:Zt},un),P&&r.createElement(mn,{...P})))}const hr=(0,se.Z)(t=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:t.typography.pxToRem(45),fontWeight:t.typography.fontWeightBold,color:t.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Gn={fractional:!0,inverse:!1,unit:"%",max:100},Hn=({palette:t,value:a,inverse:c,max:f})=>{if(isNaN(a))return"#ddd";const P=f||Gn.max,$=c?P-a:a;return $<P/3?t.status.error:$<P*(2/3)?t.status.warning:t.status.ok};function qn(t){const[a,c]=useState(null),{getColor:f=Hn}=t,P=hr(t),{palette:$}=useTheme(),{value:J,fractional:ge,inverse:Me,unit:xe,max:gt,description:ft}={...Gn,...t},Jt=ge?Math.round(J*gt):J,Zt=gt!==100?Math.round(J):Jt,[un,Dn]=useState(!1);return useEffect(()=>{const jn=a,mr=()=>Dn(!0),Ur=()=>Dn(!1);return jn&&ft?(jn.addEventListener("mouseenter",mr),jn.addEventListener("mouseleave",Ur),()=>{jn.removeEventListener("mouseenter",mr),jn.removeEventListener("mouseleave",Ur)}):()=>{Dn(!1)}},[ft,a]),React.createElement(Box,{ref:c,className:P.root},React.createElement(Circle,{strokeLinecap:"butt",percent:Jt,strokeWidth:12,trailWidth:12,strokeColor:f({palette:$,value:Zt,inverse:Me,max:gt}),className:P.circle}),ft&&un?React.createElement(Box,{className:P.description},ft):React.createElement(Box,{className:P.overlay},isNaN(J)?"N/A":`${Zt}${xe}`))}const cr=(0,se.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function Ma(t){const a=cr(t),{title:c,subheader:f,progress:P,inverse:$,deepLink:J,description:ge,icon:Me,variant:xe,getColor:gt}=t,ft={inverse:$,description:ge,getColor:gt,value:P};return React.createElement(Box,{className:a.root},React.createElement(wn,{title:c,subheader:f,deepLink:J,variant:xe,icon:Me},React.createElement(qn,{...ft})))}function Ba(t){const{value:a,getColor:c=Hn,width:f="thick"}=t,{palette:P}=useTheme();if(isNaN(a))return null;let $=Math.round(a*100*100)/100;$>100&&($=100);const J=f==="thick"?4:1,ge=c({palette:P,value:$,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${$}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:$,strokeWidth:J,trailWidth:J,strokeColor:ge})))}const jr=(0,se.Z)(t=>(0,F.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),Vr=()=>{const t=jr();return r.createElement(Gt.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},$a=(0,se.Z)(t=>(0,F.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),Xa=()=>{const t=$a();return r.createElement(Gt.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},d=(0,u.Z)(t=>(0,F.Z)({root:{"label + &":{marginTop:t.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:t.palette.primary.main}},input:{borderRadius:t.shape.borderRadius,position:"relative",backgroundColor:t.palette.background.paper,border:"1px solid #ced4da",fontSize:t.typography.body1.fontSize,padding:t.spacing(1.25,3.25,1.25,1.5),transition:t.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:t.palette.background.paper,borderRadius:t.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(Ve.Z),n=(0,se.Z)(t=>(0,F.Z)({formControl:{margin:t.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function i(t){const{multiple:a,items:c,label:f,placeholder:P,selected:$,onChange:J,triggerReset:ge,native:Me=!1,disabled:xe=!1,margin:gt}=t,ft=n(),[Jt,Zt]=(0,r.useState)($||(a?[]:"")),[un,Dn]=(0,r.useState)(!1);(0,r.useEffect)(()=>{Zt(a?[]:"")},[ge,a]),(0,r.useEffect)(()=>{Zt($||(a?[]:""))},[$,a]);const jn=Qn=>{Zt(Qn.target.value),J(Qn.target.value)},mr=Qn=>{if(xe){Qn.preventDefault();return}Dn(Pr=>a&&!(Qn.target instanceof HTMLElement)?!0:!Pr)},Ur=()=>{Dn(!1)},ea=Qn=>()=>{const Pr=Jt.filter(Tr=>Tr!==Qn);Zt(Pr),J(Pr)};return r.createElement(Ke.Z,{className:ft.root},r.createElement(ee.Z,{className:ft.formControl},r.createElement(lt.Z,{className:ft.formLabel},f),r.createElement(zt.Z,{"aria-label":f,value:Jt,native:Me,disabled:xe,"data-testid":"select",displayEmpty:!0,multiple:a,margin:gt,onChange:jn,open:un,onOpen:mr,onClose:Ur,input:r.createElement(d,null),label:f,renderValue:Qn=>{var Pr;return a&&Jt.length!==0?r.createElement(Ke.Z,{className:ft.chips},Qn.map(Tr=>{const Ir=c.find(Za=>Za.value===Tr);return Ir?r.createElement(K.Z,{key:Ir==null?void 0:Ir.value,label:Ir==null?void 0:Ir.label,clickable:!0,onDelete:ea(Tr),className:ft.chip}):!1})):r.createElement(V.Z,null,Jt.length===0?P||"":(Pr=c.find(Tr=>Tr.value===Qn))==null?void 0:Pr.label)},IconComponent:()=>un?r.createElement(Xa,null):r.createElement(Vr,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},P&&!a&&r.createElement(Lt.Z,{value:[]},P),Me?c&&c.map(Qn=>r.createElement("option",{value:Qn.value,key:Qn.value},Qn.label)):c&&c.map(Qn=>r.createElement(Lt.Z,{key:Qn.value,value:Qn.value},a&&r.createElement(ut.Z,{color:"primary",checked:Jt.includes(Qn.value)||!1,className:ft.checkbox}),Qn.label)))))}const h=()=>{},A=r.createContext({stepperLength:0,stepIndex:0,setStepIndex:h,stepHistory:[],setStepHistory:h,onStepChange:h});function Pe(t){const{children:a,elevated:c,onStepChange:f,activeStep:P=0}=t,[$,J]=useState(P),[ge,Me]=useState([0]);useEffect(()=>{J(P)},[P]);const xe=[];let gt;return Children.forEach(a,ft=>{isValidElement(ft)&&(ft.props.end?gt=ft:xe.push(ft))}),React.createElement(React.Fragment,null,React.createElement(A.Provider,{value:{stepIndex:$,setStepIndex:J,stepHistory:ge,setStepHistory:Me,onStepChange:f,stepperLength:Children.count(a)}},React.createElement(MuiStepper,{activeStep:$,orientation:"vertical",elevation:c?2:0},xe)),$>=Children.count(a)-1&&gt)}const et=(0,se.Z)(t=>({root:{marginTop:t.spacing(3),"& button":{marginRight:t.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),rt=({text:t,handleClick:a})=>React.createElement(Button$1,{onClick:a},t||"Reset"),Dt=({text:t,handleClick:a,disabled:c,last:f,stepIndex:P})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:c,"data-testid":`nextButton-${P}`,onClick:a},t||(f?"Finish":"Next")),Wt=({text:t,handleClick:a,disabled:c,stepIndex:f})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:c,"data-testid":`skipButton-${f}`,onClick:a},t||"Skip"),Kn=({text:t,handleClick:a,disabled:c,stepIndex:f})=>React.createElement(Button$1,{onClick:a,"data-testid":`backButton-${f}`,disabled:c},t||"Back"),$n=({actions:t={},children:a})=>{const c=et(),{stepperLength:f,stepIndex:P,setStepIndex:$,stepHistory:J,setStepHistory:ge,onStepChange:Me}=useContext(A),xe=(Zt,un)=>{un&&un(),Me&&Me(P,Zt),$(Zt)},gt=()=>{const Zt=t.nextStep?t.nextStep(P,f-1):P+1;xe(Zt,t.onNext),ge([...J,Zt])},ft=()=>{J.pop(),xe(J[J.length-1],t.onBack),ge([...J])},Jt=()=>{xe(0,t.onRestart),ge([0])};return React.createElement(Box,{className:c.root},[void 0,!0].includes(t.showBack)&&P!==0&&React.createElement(Kn,{text:t.backText,handleClick:ft,disabled:P===0,stepIndex:P}),t.showSkip&&React.createElement(Wt,{text:t.skipText,handleClick:gt,disabled:!!f&&P>=f||!!t.canSkip&&!t.canSkip(),stepIndex:P}),[void 0,!0].includes(t.showNext)&&React.createElement(Dt,{text:t.nextText,handleClick:gt,disabled:!!f&&P>=f||!!t.canNext&&!t.canNext(),stepIndex:P}),t.showRestart&&P!==0&&React.createElement(rt,{text:t.restartText,handleClick:Jt,stepIndex:P}),a)},Tn=(0,se.Z)(t=>({end:{padding:t.spacing(3)}}),{name:"SimpleStepperStep"});function nr(t){const{title:a,children:c,end:f,actions:P,...$}=t,J=Tn();return f?React.createElement(Box,{className:J.end},React.createElement(Typography,{variant:"h6"},a),c,React.createElement($n,{actions:{...P||{},showNext:!1}})):React.createElement(MuiStep,{...$},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},a)),React.createElement(StepContent,null,c,React.createElement($n,{actions:P})))}const kn=(0,se.Z)(t=>({status:{fontWeight:t.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:t.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:t.palette.status.ok}},warning:{"&::before":{backgroundColor:t.palette.status.warning}},error:{"&::before":{backgroundColor:t.palette.status.error}},pending:{"&::before":{backgroundColor:t.palette.status.pending}},running:{"&::before":{backgroundColor:t.palette.status.running}},aborted:{"&::before":{backgroundColor:t.palette.status.aborted}}}),{name:"BackstageStatus"});function ir(t){const a=kn(t);return r.createElement(V.Z,{component:"span",className:we()(a.status,a.ok),"aria-label":"Status ok","aria-hidden":"true",...t})}function qr(t){const a=kn(t);return r.createElement(V.Z,{component:"span",className:we()(a.status,a.warning),"aria-label":"Status warning","aria-hidden":"true",...t})}function ur(t){const a=kn(t);return r.createElement(V.Z,{component:"span",className:we()(a.status,a.error),"aria-label":"Status error","aria-hidden":"true",...t})}function ca(t){const a=kn(t);return r.createElement(V.Z,{component:"span",className:we()(a.status,a.pending),"aria-label":"Status pending","aria-hidden":"true",...t})}function ja(t){const a=kn(t);return r.createElement(V.Z,{component:"span",className:we()(a.status,a.running),"aria-label":"Status running","aria-hidden":"true",...t})}function xo(t){const a=kn(t);return r.createElement(V.Z,{component:"span",className:we()(a.status,a.aborted),"aria-label":"Status aborted","aria-hidden":"true",...t})}const Ji=t=>(0,F.Z)({root:{fontWeight:t.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:t.spacing(4),border:"0",verticalAlign:"top"}}),Xi={root:{border:"0",verticalAlign:"top"}},Qi=t=>(0,F.Z)({root:{margin:t.spacing(0,0,-1,0)}}),qi=t=>(0,F.Z)({root:{padding:t.spacing(0,0,1,0)},random:{}}),es=(0,u.Z)(Ji,{name:"BackstageMetadataTableTitleCell"})(cn.Z),ts=(0,u.Z)(Xi,{name:"BackstageMetadataTableCell"})(cn.Z),ns=({dense:t,children:a})=>r.createElement(on.Z,{size:t?"small":"medium"},r.createElement(ln.Z,null,a)),rs=({title:t,children:a,...c})=>r.createElement(On.Z,null,t&&r.createElement(es,null,t),r.createElement(ts,{colSpan:t?1:2,...c},a)),oi=(0,u.Z)(Qi,{name:"BackstageMetadataTableList"})(({classes:t,children:a})=>r.createElement(he.Z,{disablePadding:!0,className:t.root},a)),ii=(0,u.Z)(qi,{name:"BackstageMetadataTableListItem"})(({classes:t,children:a})=>r.createElement(Fe.Z,{className:t.root},a)),si=(0,F.Z)({root:{margin:"0 0",listStyleType:"none"}}),as=t=>(0,F.Z)({root:{...si.root,paddingLeft:t.spacing(1)}}),li=(0,u.Z)(si,{name:"BackstageStructuredMetadataTableList"})(({classes:t,children:a})=>r.createElement(oi,{classes:t},a)),ci=(0,u.Z)(as,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:t,children:a})=>r.createElement(oi,{classes:t},a));function os(t,a,c){const f=t.map((P,$)=>r.createElement(ii,{key:$},Ko(P,a,c)));return c?r.createElement(ci,null,f):r.createElement(li,null,f)}function is(t,a,c){const f=Object.keys(t).map(P=>{const $=Ko(t[P],a,!0);return r.createElement(ii,{key:P},r.createElement(V.Z,{variant:"body2",component:"span"},`${a.titleFormat(P)}: `),$)});return c?r.createElement(ci,null,f):r.createElement(li,null,f)}function Ko(t,a,c){return r.isValidElement(t)?r.createElement(r.Fragment,null,t):t!==null&&typeof t=="object"&&!Array.isArray(t)?is(t,a,c):Array.isArray(t)?os(t,a,c):typeof t=="boolean"?r.createElement(r.Fragment,null,t?"\u2705":"\u274C"):r.createElement(V.Z,{variant:"body2",component:"span"},t)}const ss=({value:t,options:a})=>r.createElement(r.Fragment,null,Ko(t,a,!1)),ls=({title:t,value:a,options:c})=>r.createElement(rs,{title:c.titleFormat(t)},r.createElement(ss,{value:a,options:c}));function cs(t,a){return Object.keys(t).map(c=>r.createElement(ls,{key:c,title:c,value:t[c],options:a}))}function us(t){const{metadata:a,dense:c=!0,options:f={}}=t,P=cs(a,{titleFormat:fn(),...f});return r.createElement(ns,{dense:c},P)}function ds(t){return qs.stringify(t,{strictNullHandling:!0})}function ui(t){return qs.parse(t,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function di(t,a){return ui(t)[a]}function ms(t,a,c){const f={...ui(t),[a]:c};return ds(f)}function pc(t,a=250){const[c,f]=useSearchParams(),P=c.toString(),[$,J]=useState(di(P,t));return useEffect(()=>{const ge=di(P,t);J(Me=>isEqual(ge,Me)?Me:ge)},[P,J,t]),useDebouncedEffect(()=>{const ge=ms(P,t,$);P!==ge&&f(ge,{replace:!0})},[f,$,P,t],a),[$,J]}const ps={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function mi(){const a=(0,o.b)().get(o.p),c=a==null?void 0:a.getOptionalConfig("app.support");return c?{url:c.getString("url"),items:c.getConfigArray("items").flatMap(f=>{var P;return{title:f.getString("title"),icon:f.getOptionalString("icon"),links:((P=f.getOptionalConfigArray("links"))!=null?P:[]).flatMap($=>({url:$.getString("url"),title:$.getString("title")}))}})}:ps}function Ea(t,a){const f=(0,p.qD)().getSystemIcon(t);return f?r.createElement(f,{...a}):r.createElement(vt.Z,{...a})}function hc(t){return Ea("brokenImage",t)}function hs(t){return Ea("catalog",t)}function gc(t){return Ea("chat",t)}function fc(t){return Ea("dashboard",t)}function gs(t){return Ea("docs",t)}function Ec(t){return Ea("email",t)}function fs(t){return Ea("github",t)}function vc(t){return Ea("group",t)}function Lo(t){return Ea("help",t)}function Es(t){return Ea("user",t)}function yc(t){return Ea("warning",t)}const vs=(0,se.Z)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),ys=({icon:t})=>{var a;const c=(0,p.qD)(),f=t&&(a=c.getSystemIcon(t))!=null?a:Lo;return r.createElement(f,null)},bs=({link:t})=>{var a;return r.createElement(br,{to:t.url},(a=t.title)!=null?a:t.url)},Cs=({item:t})=>{var a;return r.createElement(Lt.Z,null,r.createElement(dn.Z,null,r.createElement(ys,{icon:t.icon})),r.createElement(dt.Z,{primary:t.title,secondary:(a=t.links)==null?void 0:a.reduce((c,f,P)=>[...c,P>0&&r.createElement("br",{key:P}),r.createElement(bs,{link:f,key:f.url})],[])}))};function Ps(t){const{title:a,items:c,children:f}=t,{items:P}=mi(),[$,J]=(0,r.useState)(!1),[ge,Me]=(0,r.useState)(null),xe=vs(),gt=(0,It.Z)(Zt=>Zt.breakpoints.down("sm")),ft=Zt=>{Me(Zt.currentTarget),J(!0)},Jt=()=>{J(!1)};return r.createElement(r.Fragment,null,r.createElement(Ke.Z,{display:"flex",ml:1},gt?r.createElement(m.Z,{color:"primary",size:"small",onClick:ft,"data-testid":"support-button","aria-label":"Support"},r.createElement(Lo,null)):r.createElement(ye.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:ft,startIcon:r.createElement(Lo,null)},"Support")),r.createElement(ce.ZP,{"data-testid":"support-button-popover",open:$,anchorEl:ge,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:Jt},r.createElement(Pn.Z,{className:xe.popoverList,autoFocusItem:Boolean(ge)},a&&r.createElement(Lt.Z,{alignItems:"flex-start",className:xe.menuItem},r.createElement(V.Z,{variant:"subtitle1"},a)),r.Children.map(f,(Zt,un)=>r.createElement(Lt.Z,{alignItems:"flex-start",key:`child-${un}`,className:xe.menuItem},Zt)),(c!=null?c:P).map((Zt,un)=>r.createElement(Cs,{item:Zt,key:`item-${un}`}))),r.createElement(Z.Z,null,r.createElement(ye.Z,{color:"primary",onClick:Jt,"aria-label":"Close"},"Close"))))}const Ss=(0,se.Z)(t=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:t.spacing(3),paddingBottom:t.spacing(3),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Mo(t){const{className:a,stretch:c,noPadding:f,children:P,...$}=t,J=Ss();return r.createElement("article",{...$,className:we()(J.root,a,{[J.stretch]:c,[J.noPadding]:f})},P)}const _s=(0,se.Z)(t=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:t.palette.background.paper,paddingLeft:t.spacing(3),minWidth:0},defaultTab:{...t.typography.caption,padding:t.spacing(3,3),textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,color:t.palette.text.secondary},selected:{color:t.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:t.palette.background.default,color:t.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function pi(t){const{tabs:a,onChange:c,selectedIndex:f}=t,[P,$]=(0,r.useState)(f!=null?f:0),J=_s(),ge=(0,r.useCallback)((Me,xe)=>{f===void 0&&$(xe),c&&c(xe)},[f,c]);return(0,r.useEffect)(()=>{f!==void 0&&$(f)},[f]),r.createElement(Ke.Z,{className:J.tabsWrapper},r.createElement(An.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:ge,value:P},a.map((Me,xe)=>r.createElement(Vt.Z,{...Me.tabProps,"data-testid":`header-tab-${xe}`,label:Me.label,key:Me.id,value:xe,className:J.defaultTab,classes:{selected:J.selected,root:J.tabRoot}}))))}function Rs(t){var a,c,f,P,$;const J=(0,le.UO)(),Me=t.map(({path:Zt,children:un})=>({caseSensitive:!1,path:`${Zt}/*`,element:un})).sort((Zt,un)=>un.path.replace(/\/\*$/,"").localeCompare(Zt.path.replace(/\/\*$/,""))),xe=(c=(0,le.V$)(Me))!=null?c:(a=t[0])==null?void 0:a.children;let gt=(f=J["*"])!=null?f:"";gt.startsWith("/")||(gt=`/${gt}`);const[ft]=(P=(0,Se.fp)(Me,gt))!=null?P:[],Jt=ft?t.findIndex(Zt=>`${Zt.path}/*`===ft.route.path):0;return{index:Jt===-1?0:Jt,element:xe,route:($=t[Jt])!=null?$:t[0]}}function hi(t){const{routes:a}=t,c=(0,le.s0)(),{index:f,route:P,element:$}=Rs(a),J=(0,r.useMemo)(()=>a.map(Me=>({id:Me.path,label:Me.title,tabProps:Me.tabProps})),[a]),ge=Me=>{let{path:xe}=a[Me];xe=xe.replace(/\/\*$/,""),xe=xe.replace(/^\//,""),c(xe)};return r.createElement(r.Fragment,null,r.createElement(pi,{tabs:J,selectedIndex:f,onChange:ge}),r.createElement(Mo,null,r.createElement(jt.q,{title:P==null?void 0:P.title}),$))}const zo=()=>null;(0,p.R5)(zo,"core.gatherMountPoints",!0);function gi(t){const a=r.createElement(zo,{path:"",title:""},r.createElement("div",null)).type;return r.Children.toArray(t).flatMap(c=>{if(!(0,r.isValidElement)(c))return[];if(c.type===r.Fragment)return gi(c.props.children);if(c.type!==a)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:f,title:P,children:$,tabProps:J}=c.props;return[{path:f,title:P,children:$,tabProps:J}]})}function As(t){const a=gi(t.children);return r.createElement(hi,{routes:a})}As.Route=zo;const ws=(0,se.Z)(t=>({value:{marginBottom:t.spacing(.75)},subvalue:{color:t.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Os(t){const{value:a,subvalue:c}=t,f=ws();return r.createElement(r.Fragment,null,r.createElement(Ke.Z,{className:f.value},a),r.createElement(Ke.Z,{className:f.subvalue},c))}const Ts=(0,se.Z)(t=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:t.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:t.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${t.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:t.spacing(2)}}}),{name:"BackstageTableFilters"}),Is=t=>{var a;const c=Ts(),{onChangeFilters:f}=t,[P,$]=(0,r.useState)({...t.selectedFilters}),[J,ge]=(0,r.useState)(!1),Me=()=>{$({}),ge(xe=>!xe)};return(0,r.useEffect)(()=>{f(P)},[P,f]),r.createElement(Ke.Z,{className:c.root},r.createElement(Ke.Z,{className:c.header},r.createElement(Ke.Z,{className:c.value},"Filters"),r.createElement(ye.Z,{color:"primary",onClick:Me},"Clear all")),r.createElement(Ke.Z,{className:c.filters},((a=t.filters)==null?void 0:a.length)&&t.filters.map(xe=>r.createElement(i,{triggerReset:J,key:xe.element.label,...xe.element,selected:P[xe.element.label],onChange:gt=>$({...P,[xe.element.label]:gt})}))))},fi={Add:(0,r.forwardRef)((t,a)=>r.createElement(Fn.Z,{...t,ref:a})),Check:(0,r.forwardRef)((t,a)=>r.createElement(gr.Z,{...t,ref:a})),Clear:(0,r.forwardRef)((t,a)=>r.createElement(Jn.Z,{...t,ref:a})),Delete:(0,r.forwardRef)((t,a)=>r.createElement(pr.Z,{...t,ref:a})),DetailPanel:(0,r.forwardRef)((t,a)=>r.createElement(G.Z,{...t,ref:a})),Edit:(0,r.forwardRef)((t,a)=>r.createElement(Cr.Z,{...t,ref:a})),Export:(0,r.forwardRef)((t,a)=>r.createElement(Mr.Z,{...t,ref:a})),Filter:(0,r.forwardRef)((t,a)=>r.createElement(xr.Z,{...t,ref:a})),FirstPage:(0,r.forwardRef)((t,a)=>r.createElement(vr.Z,{...t,ref:a})),LastPage:(0,r.forwardRef)((t,a)=>r.createElement(Lr.Z,{...t,ref:a})),NextPage:(0,r.forwardRef)((t,a)=>r.createElement(G.Z,{...t,ref:a})),PreviousPage:(0,r.forwardRef)((t,a)=>r.createElement(Ee.Z,{...t,ref:a})),ResetSearch:(0,r.forwardRef)((t,a)=>r.createElement(Jn.Z,{...t,ref:a})),Search:(0,r.forwardRef)((t,a)=>r.createElement(xr.Z,{...t,ref:a})),SortArrow:(0,r.forwardRef)((t,a)=>r.createElement(sr.Z,{...t,ref:a})),ThirdStateCheck:(0,r.forwardRef)((t,a)=>r.createElement(Ar.Z,{...t,ref:a})),ViewColumn:(0,r.forwardRef)((t,a)=>r.createElement(ie.Z,{...t,ref:a}))};function Ei(t,a){const c=a.split(".");let f=t[c[0]];for(let P=1;P<c.length;++P){if(f===void 0)return f;const $=c[P];f=f[$]}return f}const Ds=(0,u.Z)(t=>({header:{padding:t.spacing(1,2,1,2.5),borderTop:`1px solid ${t.palette.grey.A100}`,borderBottom:`1px solid ${t.palette.grey.A100}`,fontWeight:t.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(Nn.W$),vi=(0,u.Z)(t=>({root:{padding:t.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:t.typography.fontWeightBold}},searchField:{paddingRight:t.spacing(2)}}),{name:"BackstageTableToolbar"})(Nn.UW),xs=(0,se.Z)(t=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:t.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Ls=(0,se.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Ms(t,a){return t.map(c=>{var f;const P=(f=c.headerStyle)!=null?f:{};let $=c.cellStyle||{};if(c.highlight)if(P.color=a.palette.textContrast,typeof $=="object")$.fontWeight=a.typography.fontWeightBold;else{const J=$;$=(ge,Me,xe)=>({...J(ge,Me,xe),fontWeight:a.typography.fontWeightBold})}return{...c,headerStyle:P,cellStyle:$}})}function Bs(t,a){return(0,Qe.transform)(t,(c,f,P)=>{(0,Qe.isEqual)(f,a[P])||(c[P]=f)})}const yi={search:"",filtersOpen:!1,filters:{}};function $s(t){const{toolbarRef:a,setSearch:c,hasFilters:f,selectedFiltersLength:P,toggleFilters:$}=t,J=xs(),ge=(0,r.useCallback)(Me=>{t.onSearchChanged(Me),c(Me)},[t,c]);return f?r.createElement(Ke.Z,{className:J.root},r.createElement(Ke.Z,{className:J.root},r.createElement(m.Z,{onClick:$,"aria-label":"filter list"},r.createElement(xr.Z,null)),r.createElement(V.Z,{className:J.title},"Filters (",P,")")),r.createElement(vi,{...t,ref:a,onSearchChanged:ge})):r.createElement(vi,{...t,ref:a,onSearchChanged:ge})}function bi(t){const{data:a,columns:c,options:f,title:P,subtitle:$,filters:J,initialState:ge,emptyContent:Me,onStateChange:xe,components:gt,isLoading:ft,...Jt}=t,Zt=Ls(),un=(0,ve.Z)(),Dn={...yi,...ge},[jn,mr]=(0,r.useState)(Dn.filtersOpen),Ur=(0,r.useCallback)(()=>mr(Hr=>!Hr),[mr]),[ea,Qn]=(0,r.useState)(0),[Pr,Tr]=(0,r.useState)(a),[Ir,Za]=(0,r.useState)(Dn.filters),mo=Ms(c,un),[va,po]=(0,r.useState)(Dn.search);(0,r.useEffect)(()=>{if(xe){const Hr=Bs({search:va,filtersOpen:jn,filters:Ir},yi);xe(Hr)}},[va,jn,Ir,xe]);const ho={headerStyle:{textTransform:"uppercase"}},To=(0,r.useCallback)(Hr=>{var ka;return(ka=c.find(qa=>qa.title===Hr))==null?void 0:ka.field},[c]);(0,r.useEffect)(()=>{if(typeof a=="function")return;if(!Ir){Tr(a);return}const Hr=Object.values(Ir);if(a&&Hr.flat().length){const ka=a.filter(qa=>!!Object.entries(Ir).filter(([,ya])=>!!ya.length).every(([ya,Sr])=>{const ia=Ei(qa,To(ya));return Array.isArray(ia)&&Array.isArray(Sr)?ia.some(go=>Sr.includes(go)):Array.isArray(ia)?ia.includes(Sr):Array.isArray(Sr)?Sr.includes(ia):ia===Sr}));Tr(ka)}else Tr(a);Qn(Hr.flat().length)},[a,Ir,To]);const Er=(Hr,ka)=>{const qa=Sr=>{const ia=new Set,go=eo=>{eo!=null&&ia.add(eo)};return ka&&ka.forEach(eo=>{const fo=Ei(eo,To(Sr));Array.isArray(fo)?fo.forEach(go):go(fo)}),ia},ya=Sr=>({placeholder:"All results",label:Sr.column,multiple:Sr.type==="multiple-select",items:[...qa(Sr.column)].sort().map(ia=>({label:ia,value:ia}))});return Hr.map(Sr=>({type:Sr.type,element:ya(Sr)}))},Qa=!!(J!=null&&J.length),ti=(0,r.useCallback)(Hr=>r.createElement($s,{setSearch:po,hasFilters:Qa,selectedFiltersLength:ea,toggleFilters:Ur,...Hr}),[Ur,Qa,ea,po]),Va=typeof a!="function"&&a.length===0,Io=c.length,ni=(0,r.useCallback)(Hr=>ft?r.createElement("tbody",{"data-testid":"loading-indicator"},r.createElement("tr",null,r.createElement("td",{colSpan:Io},r.createElement(Ke.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},r.createElement(He.Z,{size:"5rem"}))))):Me&&Va?r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{colSpan:Io},Me))):r.createElement(Nn.os,{...Hr}),[Va,Me,Io,ft]);return r.createElement(Ke.Z,{className:Zt.root},jn&&a&&typeof a!="function"&&(J==null?void 0:J.length)&&r.createElement(Is,{filters:Er(J,a),selectedFilters:Ir,onChangeFilters:Za}),r.createElement(Nn.ZP,{components:{Header:Ds,Toolbar:ti,Body:ni,...gt},options:{...ho,...f},columns:mo,icons:fi,title:r.createElement(r.Fragment,null,r.createElement(V.Z,{variant:"h5",component:"h2"},P),$&&r.createElement(V.Z,{color:"textSecondary",variant:"body1"},$)),data:typeof a=="function"?a:Pr,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"}},...Jt}))}bi.icons=Object.freeze(fi);function Us(t,a){const c=t[t.length-1];if(c)return c>=.9?a.palette.status.ok:c>=.5?a.palette.status.warning:a.palette.status.error}function bc(t){var a;const c=useTheme();return t.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...t},t.title&&React.createElement("title",null,t.title),React.createElement(SparklinesLine,{color:(a=t.color)!=null?a:Us(t.data,c)})):null}const Zs=t=>(0,se.Z)(a=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:a.spacing(2),textAlign:t.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:a.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),ks=({title:t="Unknown page",className:a})=>r.createElement(V.Z,{variant:"h4",component:"h2",className:a,"data-testid":"header-title"},t);function Ci(t){const{description:a,title:c,titleComponent:f=void 0,children:P,textAlign:$="left"}=t,J=Zs({textAlign:$})(),ge=f||r.createElement(ks,{title:c,className:J.title});return r.createElement(r.Fragment,null,r.createElement(jt.q,{title:c}),r.createElement(Ke.Z,{className:J.container},r.createElement(Ke.Z,{className:J.leftItemsBox},ge,a&&r.createElement(V.Z,{className:J.description,variant:"body2"},a)),r.createElement(Ke.Z,{className:J.rightItemsBox},P)))}const Ns=(0,se.Z)(t=>({micDrop:{maxWidth:"60%",bottom:t.spacing(2),right:t.spacing(2),[t.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:t.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Fs=()=>{const t=Ns();return r.createElement("img",{src:C,className:t.micDrop,alt:"Girl dropping mic from her hands"})},Ws=(0,se.Z)(t=>({container:{padding:t.spacing(8),[t.breakpoints.down("xs")]:{padding:t.spacing(2)}},title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}},subtitle:{color:t.palette.textSubtle}}),{name:"BackstageErrorPage"});function Ks(t){const{status:a,statusMessage:c,additionalInfo:f,supportUrl:P}=t,$=Ws(),J=(0,le.s0)(),ge=mi();return r.createElement(Q.Z,{container:!0,spacing:0,className:$.container},r.createElement(Q.Z,{item:!0,xs:12,sm:8,md:4},r.createElement(V.Z,{"data-testid":"error",variant:"body1",className:$.subtitle},"ERROR ",a,": ",c),r.createElement(V.Z,{variant:"body1",className:$.subtitle},f),r.createElement(V.Z,{variant:"h2",className:$.title},"Looks like someone dropped the mic!"),r.createElement(V.Z,{variant:"h6"},r.createElement(br,{to:"#","data-testid":"go-back-link",onClick:()=>J(-1)},"Go back"),"... or please"," ",r.createElement(br,{to:P||ge.url},"contact support")," if you think this is a bug.")),r.createElement(Fs,null))}const zs=(0,u.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(V.Z),Go=(0,u.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(Ke.Z);function Pi(t){const{children:a,...c}=t,[f,P]=r.useState(null),$=r.Children.toArray(a),[J,ge,...Me]=$,xe=Me.length?Me.pop():$[$.length-1],gt=$.length>3,ft=un=>{P(un.currentTarget)},Jt=()=>{P(null)},Zt=Boolean(f);return r.createElement(r.Fragment,null,r.createElement(_.Z,{"aria-label":"breadcrumb",...c},$.length>1&&r.createElement(Go,{clone:!0},J),$.length>2&&r.createElement(Go,{clone:!0},ge),gt&&r.createElement(zs,{onClick:ft},"..."),r.createElement(Ke.Z,{style:{fontStyle:"italic"}},xe)),r.createElement(ce.ZP,{open:Zt,anchorEl:f,onClose:Jt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},r.createElement(he.Z,null,Me.map((un,Dn)=>r.createElement(Fe.Z,{key:Dn,button:!0},r.createElement(Go,{clone:!0},un))))))}const Bo=72,Si=24,_i=18,Ua={drawerWidthClosed:Bo,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:Bo,iconSize:Bo-Si*2,iconPadding:Si,selectedIndicatorWidth:3,userBadgePadding:_i,userBadgeDiameter:Bo-_i*2,mobileSidebarHeight:56},Gs=t=>({...Ua,...t,iconContainerWidth:Ua.drawerWidthClosed,iconSize:Ua.drawerWidthClosed-Ua.iconPadding*2,userBadgeDiameter:Ua.drawerWidthClosed-Ua.userBadgePadding*2}),Ri={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Ua.defaultOpenDelayMs+200},js=t=>({...Ri,...t}),Vs="@backstage/core/sidebar-intro-dismissed",ua=(0,r.createContext)({sidebarConfig:Ua,submenuConfig:Ri}),jo=(0,r.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),Ai={isOpen:!1,setOpen:()=>{}},wi=(0,r.createContext)(Ai),Oi=(0,_e.CT)("sidebar-open-state-context");function Ti(t){const{children:a,value:c}=t;return r.createElement(wi.Provider,{value:c},r.createElement(Oi.Provider,{value:(0,_e.EI)({1:c})},a))}const Oo=()=>{const t=(0,r.useContext)(Oi),a=(0,r.useContext)(wi);if(t===void 0)return a||Ai;const c=t.atVersion(1);if(c===void 0)throw new Error("No context found for version 1.");return c},Ii=(0,r.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Di={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},xi=(0,r.createContext)(Di),Li=(0,_e.CT)("sidebar-pin-state-context");function Hs(t){const{children:a,value:c}=t;return r.createElement(xi.Provider,{value:c},r.createElement(Li.Provider,{value:(0,_e.EI)({1:c})},a))}const $o=()=>{const t=(0,r.useContext)(Li),a=(0,r.useContext)(xi);if(t===void 0)return a||Di;const c=t.atVersion(1);if(c===void 0)throw new Error("No context found for version 1.");return c},Ys=(0,se.Z)(t=>({root:{flexGrow:0,margin:t.spacing(0,2),color:t.palette.navigation.color},selected:a=>({color:`${t.palette.navigation.selectedColor}!important`,borderTop:`solid ${a.sidebarConfig.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Js=t=>{const{to:a,label:c,icon:f,value:P}=t,{sidebarConfig:$}=(0,r.useContext)(ua),J=Ys({sidebarConfig:$}),ge=(0,le.TH)(),{selectedMenuItemIndex:Me,setSelectedMenuItemIndex:xe}=(0,r.useContext)(Ii),gt=(Jt,Zt)=>{xe(Zt===Me?-1:Zt)},ft=P===Me&&Me>=0||P!==Me&&!(Me>=0)&&a===ge.pathname;return r.createElement(oe.Z,{"aria-label":c,label:c,icon:f,component:br,to:a||ge.pathname,onChange:gt,value:P,selected:ft,classes:J})},Vo=t=>{const{children:a,to:c,label:f,icon:P,value:$}=t,{isMobile:J}=$o();return J?r.createElement(Js,{to:c,label:f,icon:P,value:$}):r.createElement(r.Fragment,null,a)},Mi=(0,se.Z)(t=>({root:{position:"fixed",backgroundColor:t.palette.navigation.background,color:t.palette.navigation.color,bottom:0,left:0,right:0,zIndex:t.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:a=>({background:t.palette.navigation.background,width:"100%",bottom:`${a.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${a.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:t.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:t.spacing(2,3)},overlayHeaderClose:{color:t.palette.navigation.color},marginMobileSidebar:a=>({marginBottom:`${a.sidebarConfig.mobileSidebarHeight}px`})})),Xs=t=>(0,Qe.orderBy)(t,({props:{priority:a}})=>Number.isInteger(a)?a:-1,"desc"),Qs=r.createElement(Vo).type,el=({children:t,label:a="Menu",open:c,onClose:f})=>{const{sidebarConfig:P}=(0,r.useContext)(ua),$=Mi({sidebarConfig:P});return r.createElement(D.ZP,{anchor:"bottom",open:c,onClose:f,ModalProps:{BackdropProps:{classes:{root:$.marginMobileSidebar}}},classes:{root:$.marginMobileSidebar,paperAnchorBottom:$.overlay}},r.createElement(Ke.Z,{className:$.overlayHeader},r.createElement(V.Z,{variant:"h3"},a),r.createElement(m.Z,{onClick:f,classes:{root:$.overlayHeaderClose}},r.createElement(I.Z,null))),r.createElement(Ke.Z,{component:"nav"},t))},tl=t=>{const{sidebarConfig:a}=(0,r.useContext)(ua),{children:c}=t,f=Mi({sidebarConfig:a}),P=(0,le.TH)(),[$,J]=(0,r.useState)(-1);(0,r.useEffect)(()=>{J(-1)},[P.pathname]);let ge=(0,p.vJ)(c,xe=>xe.getElements().filter(gt=>gt.type===Qs));if(c)ge.length?ge=Xs(ge):ge.push(r.createElement(Vo,{key:"default_menu",icon:r.createElement(ue.Z,null)},c));else return null;const Me=$>=0&&!ge[$].props.to;return r.createElement(Ti,{value:{isOpen:!0,setOpen:()=>{}}},r.createElement(Ii.Provider,{value:{selectedMenuItemIndex:$,setSelectedMenuItemIndex:J}},r.createElement(el,{label:ge[$]&&ge[$].props.label,open:Me,onClose:()=>J(-1)},ge[$]&&ge[$].props.children),r.createElement(O.Z,{className:f.root,"data-testid":"mobile-sidebar-root",component:"nav"},ge)))},Bi={getSidebarPinState(){let t;try{t=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!t},setSidebarPinState(t){return window.localStorage.setItem("sidebarPinState",JSON.stringify(t))}},nl=(0,se.Z)(t=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[t.breakpoints.up("sm")]:{paddingLeft:a=>a.isPinned?a.sidebarConfig.drawerWidthOpen:a.sidebarConfig.drawerWidthClosed},[t.breakpoints.down("xs")]:{paddingBottom:a=>a.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),$i=(0,r.createContext)({content:{contentRef:void 0}});function rl(t){const[a,c]=(0,r.useState)(()=>Bi.getSidebarPinState()),{sidebarConfig:f}=(0,r.useContext)(ua),P=(0,r.useRef)(null),$=(0,r.useMemo)(()=>({content:{contentRef:P}}),[P]);(0,r.useEffect)(()=>{Bi.setSidebarPinState(a)},[a]);const J=(0,It.Z)(xe=>xe.breakpoints.down("xs"),{noSsr:!0}),ge=()=>c(!a),Me=nl({isPinned:a,sidebarConfig:f});return r.createElement(Hs,{value:{isPinned:a,toggleSidebarPinState:ge,isMobile:J}},r.createElement($i.Provider,{value:$},r.createElement(Ke.Z,{className:Me.root},t.children)))}function Ho(){const{content:t}=(0,r.useContext)($i);return{focusContent:(0,r.useCallback)(()=>{var c,f;(f=(c=t==null?void 0:t.contentRef)==null?void 0:c.current)==null||f.focus()},[t]),contentRef:t==null?void 0:t.contentRef}}const Ui=(0,se.Z)(t=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:t.zIndex.appBar,background:t.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:a=>({width:a.sidebarConfig.drawerWidthClosed}),drawerOpen:a=>({width:a.sidebarConfig.drawerWidthOpen,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),al=t=>{const{sidebarConfig:a}=(0,r.useContext)(ua),{openDelayMs:c=a.defaultOpenDelayMs,closeDelayMs:f=a.defaultCloseDelayMs,disableExpandOnHover:P,children:$}=t,J=Ui({sidebarConfig:a}),ge=(0,It.Z)(mr=>mr.breakpoints.down("md"),{noSsr:!0}),[Me,xe]=(0,r.useState)(0),gt=(0,r.useRef)(),{isPinned:ft,toggleSidebarPinState:Jt}=$o(),Zt=()=>{ft||P||(gt.current&&(clearTimeout(gt.current),gt.current=void 0),Me!==2&&!ge&&(gt.current=window.setTimeout(()=>{gt.current=void 0,xe(2)},c),xe(1)))},un=()=>{ft||P||(gt.current&&(clearTimeout(gt.current),gt.current=void 0),Me===1?xe(0):Me===2&&(gt.current=window.setTimeout(()=>{gt.current=void 0,xe(0)},f)))},Dn=Me===2&&!ge||ft,jn=mr=>{mr?(xe(2),Jt()):(xe(0),Jt())};return r.createElement("nav",{style:{},"aria-label":"sidebar nav"},r.createElement(il,null),r.createElement(Ti,{value:{isOpen:Dn,setOpen:jn}},r.createElement(Ke.Z,{className:J.root,"data-testid":"sidebar-root",onMouseEnter:P?()=>{}:Zt,onFocus:P?()=>{}:Zt,onMouseLeave:P?()=>{}:un,onBlur:P?()=>{}:un},r.createElement(Ke.Z,{className:we()(J.drawer,J.drawerWidth,{[J.drawerOpen]:Dn})},$))))},ol=t=>{var a,c;const f=Gs((a=t.sidebarOptions)!=null?a:{}),P=js((c=t.submenuOptions)!=null?c:{}),{children:$,disableExpandOnHover:J,openDelayMs:ge,closeDelayMs:Me}=t,{isMobile:xe}=$o();return xe?r.createElement(tl,null,$):r.createElement(ua.Provider,{value:{sidebarConfig:f,submenuConfig:P}},r.createElement(al,{openDelayMs:ge,closeDelayMs:Me,disableExpandOnHover:J},$))};function il(){const{sidebarConfig:t}=(0,r.useContext)(ua),{focusContent:a,contentRef:c}=Ho(),f=Ui({sidebarConfig:t});return c!=null&&c.current?r.createElement(ye.Z,{onClick:a,variant:"contained",className:we()(f.visuallyHidden)},"Skip to content"):null}function Uo(t,a,c=!1){const f=new URLSearchParams(a.search).toString(),P=ke().parse(f),$=new URLSearchParams(t.search).toString(),J=ke().parse($),ge=c?Qe.isEqual:Qe.isMatch;return(0,Qe.isEqual)(a.pathname,t.pathname)&&ge(J,P)}const sl=(0,se.Z)(t=>{var a,c;return{item:{height:48,width:"100%","&:hover":{background:((a=t.palette.navigation.navItem)==null?void 0:a.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:t.palette.navigation.color,padding:t.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:t.palette.common.white},label:{margin:t.spacing(1.75),marginLeft:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((c=t.palette.navigation.navItem)==null?void 0:c.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor}},textContent:{color:t.palette.navigation.color,paddingLeft:t.spacing(4),paddingRight:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),ll=t=>{const{title:a,subtitle:c,to:f,icon:P,dropdownItems:$,exact:J}=t,ge=sl(),{setIsHoveredOn:Me}=(0,r.useContext)(jo),xe=()=>{Me(!1)},gt=(0,le.WU)(f!=null?f:""),ft=(0,le.TH)();let Jt=Uo(ft,gt,J);const[Zt,un]=(0,r.useState)(!1),Dn=()=>{un(!Zt)};return $!==void 0?($.some(jn=>{const mr=(0,Se.i3)(jn.to);return Jt=Uo(ft,mr,J),Jt}),r.createElement(Ke.Z,{className:ge.itemContainer},r.createElement(fe.ZP,{title:a,enterDelay:500,enterNextDelay:500},r.createElement(ye.Z,{role:"button",onClick:Dn,onTouchStart:jn=>jn.stopPropagation(),className:we()(ge.item,Jt?ge.selected:void 0)},P&&r.createElement(P,{fontSize:"small"}),r.createElement(V.Z,{variant:"subtitle1",component:"span",className:ge.label},a,r.createElement("br",null),c&&r.createElement(V.Z,{variant:"caption",component:"span",className:ge.subtitle},c)),Zt?r.createElement(Ne.Z,{className:ge.dropdownArrow}):r.createElement(Ce.Z,{className:ge.dropdownArrow}))),$&&Zt&&r.createElement(Ke.Z,{className:ge.dropdown},$.map((jn,mr)=>r.createElement(fe.ZP,{key:mr,title:jn.title,enterDelay:500,enterNextDelay:500},r.createElement(br,{to:jn.to,underline:"none",className:ge.dropdownItem,onClick:xe,onTouchStart:Ur=>Ur.stopPropagation()},r.createElement(V.Z,{component:"span",className:ge.textContent},jn.title))))))):r.createElement(Ke.Z,{className:ge.itemContainer},r.createElement(fe.ZP,{title:a,enterDelay:500,enterNextDelay:500},r.createElement(br,{to:f,underline:"none",className:we()(ge.item,Jt?ge.selected:void 0),onClick:xe,onTouchStart:jn=>jn.stopPropagation()},P&&r.createElement(P,{fontSize:"small"}),r.createElement(V.Z,{variant:"subtitle1",component:"span",className:ge.label},a,r.createElement("br",null),c&&r.createElement(V.Z,{variant:"caption",component:"span",className:ge.subtitle},c)))))},cl=(0,se.Z)(t=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:t.spacing(7)+1},drawer:a=>{var c,f;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[t.breakpoints.up("sm")]:{marginLeft:a.left,transition:t.transitions.create("margin-left",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(f=(c=t.palette.navigation.submenu)==null?void 0:c.background)!=null?f:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:a.submenuConfig.drawerWidthClosed,transitionDelay:`${a.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:a=>({width:a.submenuConfig.drawerWidthOpen,[t.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:t.spacing(3),left:0,top:0}}),title:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightMedium,color:t.palette.common.white,padding:t.spacing(2.5),[t.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Zi=t=>{const{isOpen:a}=Oo(),{sidebarConfig:c,submenuConfig:f}=(0,r.useContext)(ua),P=a?c.drawerWidthOpen:c.drawerWidthClosed,$=cl({left:P,submenuConfig:f}),{isHoveredOn:J}=(0,r.useContext)(jo),[ge,Me]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{Me(J)},[J]),r.createElement(Ke.Z,{className:we()($.drawer,{[$.drawerOpen]:ge})},r.createElement(V.Z,{variant:"h5",component:"span",className:$.title},t.title),t.children)},ul=(0,se.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),dl=()=>{const t=ul();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},ml=(0,se.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),pl=()=>{const t=ml();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},hl=t=>(0,se.Z)(a=>{var c,f,P,$;return{root:{color:a.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:t.drawerWidthClosed,justifyContent:"center"},open:{[a.breakpoints.up("sm")]:{width:t.drawerWidthOpen}},highlightable:{"&:hover":{background:(f=(c=a.palette.navigation.navItem)==null?void 0:c.hoverBackground)!=null?f:"#404040"}},highlighted:{background:($=(P=a.palette.navigation.navItem)==null?void 0:P.hoverBackground)!=null?$:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:t.iconContainerWidth,marginRight:-a.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:a.typography.fontWeightBold,fontSize:a.typography.fontSize},searchFieldHTMLInput:{padding:a.spacing(2,0,2)},searchContainer:{width:t.drawerWidthOpen-t.iconContainerWidth},secondaryAction:{width:a.spacing(6),textAlign:"center",marginRight:a.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:a.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${t.selectedIndicatorWidth}px ${a.palette.navigation.indicator}`,color:a.palette.navigation.selectedColor},"&$closed":{width:t.drawerWidthClosed},"& $closedItemIcon":{paddingRight:t.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-t.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function Zo(t){return(0,r.useMemo)(()=>hl(t),[t])()}const gl=(t,a)=>(0,p.vJ)(t.props.children,c=>{let f=!1;return c.getElements().forEach(({props:{to:P,dropdownItems:$}})=>{if(!f){if($!=null&&$.length){$.forEach(({to:J})=>f=f||Uo(a,(0,Se.i3)(J)));return}P&&(f=Uo(a,(0,Se.i3)(P)))}}),f},[a.pathname]);function Yo(t){return t.to===void 0}const fl=r.createElement(Zi).type,El=r.forwardRef(function({to:a,end:c,style:f,className:P,activeStyle:$,caseSensitive:J,activeClassName:ge="active","aria-current":Me="page",...xe},gt){let{pathname:ft}=(0,le.TH)(),{pathname:Jt}=(0,le.WU)(a);J||(ft=ft.toLocaleLowerCase("en-US"),Jt=Jt.toLocaleLowerCase("en-US"));let Zt=ft===Jt;!Zt&&!c&&(Zt=ft.startsWith(`${Jt}/`));const un=Zt?Me:void 0;return r.createElement(Le.rU,{...xe,to:a,ref:gt,"aria-current":un,style:{...f,...Zt?$:void 0},className:we()([typeof P!="function"?P:void 0,Zt?ge:void 0])})}),ki=(0,r.forwardRef)((t,a)=>{const{icon:c,text:f,hasNotifications:P=!1,hasSubmenu:$=!1,disableHighlight:J=!1,onClick:ge,noTrack:Me,children:xe,className:gt,...ft}=t,{sidebarConfig:Jt}=(0,r.useContext)(ua),Zt=Zo(Jt),{isOpen:un}=Oo(),Dn=!un&&$?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},jn=r.createElement(Ke.Z,{style:Dn},r.createElement(c,{fontSize:"small"}),!un&&$?r.createElement(nn.Z,{fontSize:"small"}):r.createElement(r.Fragment,null)),mr=r.createElement(We.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!P,className:we()({[Zt.closedItemIcon]:!un})},jn),Ur=r.createElement(r.Fragment,null,r.createElement(Ke.Z,{"data-testid":"login-button",className:Zt.iconContainer},mr),f&&r.createElement(V.Z,{variant:"subtitle2",component:"span",className:Zt.label},f),r.createElement("div",{className:Zt.secondaryAction},xe)),ea=un?Ur:mr,Qn={onClick:ge,className:we()(gt,Zt.root,un?Zt.open:Zt.closed,Yo(t)&&Zt.buttonItem,{[Zt.highlightable]:!J})},Pr=(0,p.z$)(),{pathname:Tr}=(0,le.WU)(!Yo(t)&&t.to?t.to:""),Ir=(0,r.useCallback)(Za=>{if(!Me){const mo="click",va=f!=null?f:"Sidebar Item",po=Tr?{attributes:{to:Tr}}:void 0;Pr.captureEvent(mo,va,po)}ge==null||ge(Za)},[Pr,f,Tr,Me,ge]);return Yo(t)?r.createElement(ye.Z,{role:"button","aria-label":f,...Qn,ref:a,onClick:Ir},ea):r.createElement(El,{...Qn,activeClassName:Zt.selected,to:t.to?t.to:"",ref:a,"aria-label":f||t.to,...ft,onClick:Ir},ea)}),vl=({children:t,...a})=>{const{sidebarConfig:c}=(0,r.useContext)(ua),f=Zo(c),[P,$]=(0,r.useState)(!1),J=(0,le.TH)(),ge=gl(t,J),Me=(0,It.Z)(Jt=>Jt.breakpoints.down("sm")),xe=()=>{$(!0)},gt=()=>{$(!1)},ft=()=>Me?P?r.createElement(Ne.Z,{fontSize:"small",className:f.submenuArrow}):r.createElement(Ce.Z,{fontSize:"small",className:f.submenuArrow}):!P&&r.createElement(nn.Z,{fontSize:"small",className:f.submenuArrow});return r.createElement(jo.Provider,{value:{isHoveredOn:P,setIsHoveredOn:$}},r.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:gt,onTouchStart:P?gt:xe,onMouseEnter:xe,className:we()(P&&f.highlighted)},r.createElement(ki,{hasSubmenu:!0,className:ge?f.selected:"",...a},ft()),P&&t))},Ni=(0,r.forwardRef)((t,a)=>{const[c]=(0,p.vJ)(t.children,f=>f.getElements().filter(P=>P.type===fl));return c?r.createElement(vl,{...t},c):r.createElement(ki,{...t,ref:a})});function Cc(t){const{sidebarConfig:a}=useContext(ua),[c,f]=useState(""),P=Zo(a),$=t.icon?t.icon:SearchIcon,J=()=>{t.onSearch(c),f("")},ge=ft=>{ft.key==="Enter"&&(ft.preventDefault(),J())},Me=ft=>{f(ft.target.value)},xe=ft=>{ft.preventDefault(),ft.stopPropagation()},gt=ft=>{J(),ft.preventDefault()};return React.createElement(Box,{className:P.searchRoot},React.createElement(Ni,{icon:$,to:t.to,onClick:gt,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:c,onClick:xe,onChange:Me,onKeyDown:ge,className:P.searchContainer,InputProps:{disableUnderline:!0,className:P.searchField},inputProps:{className:P.searchFieldHTMLInput}})))}const yl=(0,R.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Pc=(0,R.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),Fi=(0,R.Z)("hr")(({theme:t})=>({height:1,width:"100%",background:"#383838",border:"none",margin:t.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),bl=t=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:t.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:t.palette.text.secondary,borderRadius:"5px"}}),Cl=(0,R.Z)("div")(({theme:t})=>{const a=bl(t);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":a,"&:hover":a}}),Sc=()=>{const{sidebarConfig:t}=useContext(ua),a=Zo(t),{isOpen:c,setOpen:f}=Oo();if(useMediaQuery(J=>J.breakpoints.down("md"),{noSsr:!0}))return null;const $=()=>{f(!c)};return React.createElement(Button$1,{role:"button",onClick:$,className:a.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:a.arrows},c?React.createElement(dl,null):React.createElement(pl,null)))},Pl=(0,se.Z)(t=>({introCard:a=>({color:"#b5b5b5",fontSize:12,width:a.sidebarConfig.drawerWidthOpen,marginTop:t.spacing(2.25),marginBottom:t.spacing(1.5),paddingLeft:a.sidebarConfig.iconPadding,paddingRight:a.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:t.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:t.spacing(.5),"&:hover":{color:t.palette.linkHover,transition:t.transitions.create("color",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:t.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function Sl(t){const{sidebarConfig:a}=useContext(ua),c=Pl({sidebarConfig:a}),{text:f,onClose:P}=t,$=()=>P();return React.createElement(Box,{className:c.introCard},React.createElement(Typography,{variant:"subtitle2"},f),React.createElement(Box,{className:c.introDismiss},React.createElement(IconButton,{onClick:$,className:c.introDismissLink},React.createElement(CloseIcon,{className:c.introDismissIcon}),React.createElement(Typography,{component:"span",className:c.introDismissText},"Dismiss"))))}const Wi=t=>{const{text:a,onDismiss:c}=t,[f,P]=useState(!1),$=()=>{P(!0)};return React.createElement(Collapse,{in:!f,onExited:c},React.createElement(Sl,{text:a,onClose:$}))},_l=null,Rl="And your recently viewed plugins will pop up here!";function _c(t){const{isOpen:a}=Oo(),c={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:f,set:P}=useLocalStorageValue(Vs),{starredItemsDismissed:$,recentlyViewedItemsDismissed:J}=f!=null?f:{},ge=()=>{P(xe=>({...c,...xe,starredItemsDismissed:!0}))},Me=()=>{P(xe=>({...c,...xe,recentlyViewedItemsDismissed:!0}))};return a?React.createElement(React.Fragment,null,!$&&React.createElement(React.Fragment,null,React.createElement(Wi,{text:_l,onDismiss:ge}),React.createElement(Fi,null)),!J&&React.createElement(Wi,{text:Rl,onDismiss:Me})):null}const Al=(0,se.Z)(t=>({header:{gridArea:"pageHeader",padding:t.spacing(3),width:"100%",boxShadow:t.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:t.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[t.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:t.page.fontColor,wordBreak:"break-word",fontSize:t.typography.h3.fontSize,marginBottom:0},subtitle:{color:t.page.fontColor,opacity:.8,display:"inline-block",marginTop:t.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:t.spacing(1),color:t.page.fontColor},breadcrumb:{color:t.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-t.spacing(.3),marginBottom:t.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-t.spacing(.3),marginBottom:t.spacing(.3)}}),{name:"BackstageHeader"}),wl=({type:t,typeLink:a,classes:c,pageTitle:f})=>t?a?r.createElement(Pi,{className:c.breadcrumb},r.createElement(br,{to:a},t),r.createElement(V.Z,null,f)):r.createElement(V.Z,{className:c.type},t):null,Ol=({pageTitle:t,classes:a,tooltip:c})=>{const{contentRef:f}=Ho(),P=r.createElement(V.Z,{ref:f,tabIndex:-1,className:a.title,variant:"h1"},t);return c?r.createElement(fe.ZP,{title:c,placement:"top-start"},P):P},Tl=({classes:t,subtitle:a})=>a?typeof a!="string"?r.createElement(r.Fragment,null,a):r.createElement(V.Z,{className:t.subtitle,variant:"subtitle2",component:"span"},a):null;function ko(t){const{children:a,pageTitleOverride:c,style:f,subtitle:P,title:$,tooltip:J,type:ge,typeLink:Me}=t,xe=Al(),ft=(0,o.u)(o.p).getOptionalString("app.title")||"Backstage",Jt=c||$,Zt=$||c,un=`${Jt} | %s | ${ft}`,Dn=`${Jt} | ${ft}`;return r.createElement(r.Fragment,null,r.createElement(jt.q,{titleTemplate:un,defaultTitle:Dn}),r.createElement("header",{style:f,className:xe.header},r.createElement(Ke.Z,{className:xe.leftItemsBox},r.createElement(wl,{classes:xe,type:ge,typeLink:Me,pageTitle:Zt}),r.createElement(Ol,{classes:xe,pageTitle:Zt,tooltip:J}),r.createElement(Tl,{classes:xe,subtitle:P})),r.createElement(Q.Z,{container:!0,className:xe.rightItemsBox,spacing:4},a)))}const Il=({label:t,secondaryLabel:a,icon:c,disabled:f=!1,onClick:P})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:f,button:!0,onClick:$=>{P&&P($)}},c&&React.createElement(ListItemIcon,null,c),React.createElement(ListItemText,{primary:t,secondary:a})));function Rc(t){const{palette:{common:{white:a}}}=useTheme(),{actionItems:c}=t,[f,P]=React.useState(!1),$=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>P(!0),"data-testid":"header-action-menu",ref:$,style:{color:a,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:f,anchorEl:$.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>P(!1)},React.createElement(List,null,c.map((J,ge)=>React.createElement(Il,{key:`header-action-menu-${ge}`,...J})))))}const Dl=(0,se.Z)(t=>({root:{textAlign:"left"},label:{color:t.page.fontColor,fontWeight:t.typography.fontWeightBold,letterSpacing:0,fontSize:t.typography.fontSize,marginBottom:t.spacing(1)/2,lineHeight:1},value:{color:(0,be.Fq)(t.page.fontColor,.8),fontSize:t.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),xl=({value:t,className:a,typographyRootComponent:c})=>r.createElement(V.Z,{component:c!=null?c:typeof t=="string"?"p":"span",className:a},t);function Ll(t){const{label:a,value:c,url:f,contentTypograpyRootComponent:P}=t,$=Dl(),J=r.createElement(xl,{className:$.value,value:c||"<Unknown>",typographyRootComponent:P});return r.createElement(Q.Z,{item:!0},r.createElement(V.Z,{component:"span",className:$.root},r.createElement(V.Z,{className:$.label},a),f?r.createElement(br,{to:f},J):J))}const Ml=t=>(0,F.Z)({root:{color:t.palette.common.white,padding:t.spacing(2,2,3),backgroundImage:t.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),Bl=(0,se.Z)(Ml,{name:"BackstageItemCardHeader"});function Ki(t){const{title:a,subtitle:c,children:f}=t,P=Bl(t);return r.createElement(Ke.Z,{className:P.root},c&&r.createElement(V.Z,{variant:"subtitle2",component:"h3"},c),a&&r.createElement(V.Z,{variant:"h6",component:"h4"},a),f)}function Ac(t){const{description:a,tags:c,title:f,type:P,subtitle:$,label:J,onClick:ge,href:Me}=t;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Ki,{title:f,subtitle:$||P})),React.createElement(CardContent,null,c!=null&&c.length?React.createElement(Box,null,c.map((xe,gt)=>React.createElement(Chip,{size:"small",label:xe,key:gt}))):null,a),React.createElement(CardActions,null,!Me&&React.createElement(rr,{to:"#",onClick:ge,color:"primary"},J),Me&&React.createElement(rr,{to:Me,color:"primary"},J)))}const $l=t=>(0,F.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:t.spacing(2)}}),Ul=(0,se.Z)($l,{name:"BackstageItemCardGrid"});function Zl(t){const{children:a,...c}=t,f=Ul(c);return r.createElement(Ke.Z,{className:f.root,...c},a)}const kl=(0,se.Z)(t=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[t.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function No(t){const{themeId:a,children:c}=t,f=kl();return r.createElement(M.Z,{theme:P=>({...P,page:P.getPageTheme({themeId:a})})},r.createElement("main",{className:f.root},c))}function Nl(t){const{themeId:a,children:c,...f}=t;return r.createElement(No,{themeId:a},r.createElement(ko,{...f}),c)}const Fl=tn.z.object({providerInfo:tn.z.object({}).catchall(tn.z.unknown()).optional(),profile:tn.z.object({email:tn.z.string().optional(),displayName:tn.z.string().optional(),picture:tn.z.string().optional()}),backstageIdentity:tn.z.object({token:tn.z.string(),identity:tn.z.object({type:tn.z.literal("user"),userEntityRef:tn.z.string(),ownershipEntityRefs:tn.z.array(tn.z.string())})})});var Wl=Object.defineProperty,Kl=(t,a,c)=>a in t?Wl(t,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[a]=c,Jo=(t,a,c)=>(Kl(t,typeof a!="symbol"?a+"":a,c),c);const zi={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function zl(t){const a=new Date(Date.now()+zi.defaultTokenExpiryMillis);if(!t)return a;const[c,f,P]=t.split("."),$=JSON.parse(window.atob(f));return typeof $.exp!="number"?a:new Date($.exp*1e3-zi.tokenExpiryMarginMillis)}class Gl{constructor(a){Jo(this,"options"),Jo(this,"abortController"),Jo(this,"state"),this.options=a,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:a}=this.getSessionSync(),c=a.identity.userEntityRef,f=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(c);if(!f)throw new TypeError(`Invalid user entity reference "${c}"`);return f[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const a=this.state.type==="active"?this.state.session:void 0,c=this.fetchSession().then(f=>(this.state={type:"active",session:f,expiresAt:zl(f.backstageIdentity.token)},f),f=>{throw this.state={type:"failed",error:f},f});return this.state={type:"fetching",promise:c,previous:a},c}async fetchSession(){const a=await this.options.discoveryApi.getBaseUrl("auth"),c=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,f=new Headers(c);f.set("X-Requested-With","XMLHttpRequest");const P=await fetch(`${a}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:f,credentials:"include"});if(!P.ok)throw await ResponseError.fromResponse(P);return Fl.parse(await P.json())}}const wc=t=>{const a=useApi(discoveryApiRef),[{status:c,error:f},{execute:P}]=useAsync(async()=>{const $=new Gl({provider:t.provider,discoveryApi:a,headers:t.headers});await $.start(),t.onSignInSuccess($)});return useMountEffect(P),c==="loading"?React.createElement(Mt,null):f?React.createElement(Or,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:f}):null};class Xo{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const a="user:default/guest";return{type:"user",userEntityRef:a,ownershipEntityRefs:[a]}}async getCredentials(){return{}}async signOut(){}}function jl(t){const[a,c,f]=t.split(".");return JSON.parse(window.atob(c))}class Qo{constructor(a){this.result=a}getUserId(){return this.result.userId}static fromResult(a){return new Qo(a)}async getIdToken(){var a,c;return(c=(a=this.result).getIdToken)==null?void 0:c.call(a)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const a=await this.getIdToken();if(!a){const P=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:P,ownershipEntityRefs:[P]}}const{sub:c,ent:f}=jl(a);return{type:"user",userEntityRef:c,ownershipEntityRefs:f!=null?f:[]}}async getCredentials(){var a,c;return{token:await((c=(a=this.result).getIdToken)==null?void 0:c.call(a))}}async signOut(){var a,c;return(c=(a=this.result).signOut)==null?void 0:c.call(a)}}var Vl=Object.defineProperty,Hl=(t,a,c)=>a in t?Vl(t,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[a]=c,Yl=(t,a,c)=>(Hl(t,typeof a!="symbol"?a+"":a,c),c);class co{constructor(a,c,f){this.identity=a,this.authApi=c,this.profile=f,Yl(this,"profilePromise")}static createGuest(){return new Xo}static fromLegacy(a){return Qo.fromResult(a)}static create(a){return new co(a.identity,a.authApi,a.profile)}getUserId(){const a=this.identity.userEntityRef,c=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(a);if(!c)throw new TypeError(`Invalid user entity reference "${a}"`);return c[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(a){throw this.profilePromise=void 0,a}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const qo=(0,se.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),Fo=({children:t})=>{const a=qo();return r.createElement(Q.Z,{component:"li",item:!0,classes:a},t)},Jl={Component:({config:t,onSignInStarted:a,onSignInSuccess:c,onSignInFailure:f})=>{const{apiRef:P,title:$,message:J}=t,ge=(0,o.u)(P),Me=(0,o.u)(o.s),xe=async()=>{try{a();const gt=await ge.getBackstageIdentity({instantPopup:!0});if(!gt)throw f(),new Error(`The ${$} provider is not configured to support sign-in`);const ft=await ge.getProfile();c(co.create({identity:gt.identity,profile:ft,authApi:ge}))}catch(gt){f(),Me.post(new Ue.SP("Login failed",gt))}};return r.createElement(Fo,null,r.createElement(wn,{variant:"fullHeight",title:$,actions:r.createElement(ye.Z,{color:"primary",variant:"outlined",onClick:xe},"Sign In")},r.createElement(V.Z,{variant:"body1"},J)))},loader:async(t,a)=>{const c=t.get(a),f=await c.getBackstageIdentity({optional:!0});if(!f)return;const P=await c.getProfile();return co.create({identity:f.identity,profile:P,authApi:c})}},Xl={Component:({onSignInStarted:t,onSignInSuccess:a})=>r.createElement(Fo,null,r.createElement(wn,{title:"Guest",variant:"fullHeight",actions:r.createElement(ye.Z,{color:"primary",variant:"outlined",onClick:()=>{t(),a(new Xo)}},"Enter")},r.createElement(V.Z,{variant:"body1"},"Enter as a Guest User.",r.createElement("br",null),"You will not have a verified identity,",r.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new Xo},Ql=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,ql=(0,se.Z)(t=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:t.spacing(2)}}),{name:"BackstageCustomProvider"}),Gi=t=>{const{ref:a,...c}=t;return{inputRef:a,...c}},ec={Component:({onSignInStarted:t,onSignInSuccess:a})=>{const c=ql(),{register:f,handleSubmit:P,formState:$}=(0,Ut.cI)({mode:"onChange"}),{errors:J}=$,ge=({userId:Me,idToken:xe})=>{t(),a(co.fromLegacy({userId:Me,getIdToken:xe!==void 0?async()=>xe:void 0,profile:{email:`${Me}@example.com`}}))};return r.createElement(Fo,null,r.createElement(wn,{title:"Custom User",variant:"fullHeight"},r.createElement(V.Z,{variant:"body1"},"Enter your own User ID and credentials.",r.createElement("br",null),"This selection will not be stored."),r.createElement("form",{className:c.form,onSubmit:P(ge)},r.createElement(ee.Z,null,r.createElement(pt.Z,{...Gi(f("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(J.userId)}),J.userId&&r.createElement(gn.Z,{error:!0},J.userId.message)),r.createElement(ee.Z,null,r.createElement(pt.Z,{...Gi(f("idToken",{required:!1,validate:Me=>!Me||Ql.test(Me)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(J.idToken)}),J.idToken&&r.createElement(gn.Z,{error:!0},J.idToken.message)),r.createElement(ye.Z,{type:"submit",color:"primary",variant:"outlined",className:c.button,disabled:!($!=null&&$.isDirty)||!hn()(J)},"Continue"))))},loader:async()=>{}};class ei{constructor(a){this.config=a}static from(a){return new ei(a)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const uo="@backstage/core:SignInPage:provider",ji={guest:Xl,custom:ec,common:Jl};function Vi(t,a){if(t in a)throw new Error(`"${t}" ID is duplicated. IDs of identity providers have to be unique.`)}function tc(t){return t.reduce((c,f)=>{if(typeof f=="string")return Vi(f,c),c[f]={components:ji[f],id:f},c;const{id:P}=f;return Vi(P,c),c[P]={components:ji.common,id:P,config:f},c},{})}const nc=(t,a)=>{const c=useApi(errorApiRef),f=useApiHolder(),[P,$]=useState(!0),J=useCallback(Me=>{a(ei.from({identityApi:Me,signOut:async()=>{var xe;localStorage.removeItem(uo),await((xe=Me.signOut)==null?void 0:xe.call(Me))}}))},[a]);useLayoutEffect(()=>{var Me;if(!P)return;const xe=localStorage.getItem(uo);if(xe===null){$(!1);return}const gt=t[xe];if(!gt){$(!1);return}let ft=!1;return gt.components.loader(f,(Me=gt.config)==null?void 0:Me.apiRef).then(Jt=>{if(ft){localStorage.removeItem(uo);return}Jt?J(Jt):$(!1)}).catch(Jt=>{localStorage.removeItem(uo),!ft&&(c.post(Jt),$(!1))}),()=>{ft=!0}},[P,c,a,f,t,J]);const ge=useMemo(()=>Object.keys(t).map(Me=>{const xe=t[Me],{Component:gt}=xe.components,ft=un=>{J(un)},Jt=()=>{var un;localStorage.setItem(uo,((un=xe==null?void 0:xe.config)==null?void 0:un.id)||xe.id)},Zt=()=>{localStorage.removeItem(uo)};return React.createElement(gt,{key:xe.id,config:xe.config,onSignInStarted:Jt,onSignInSuccess:ft,onSignInFailure:Zt})}),[t,J]);return[P,ge]},rc=({onSignInSuccess:t,providers:a=[],title:c,align:f="left"})=>{const P=useApi(configApiRef),$=qo(),J=tc(a),[ge,Me]=nc(J,t);return ge?React.createElement(Mt,null):React.createElement(No,{themeId:"home"},React.createElement(ko,{title:P.getString("app.title")}),React.createElement(Mo,null,c&&React.createElement(Ci,{title:c,textAlign:f}),React.createElement(Grid,{container:!0,justifyContent:f==="center"?f:"flex-start",spacing:2,component:"ul",classes:$},Me)))},ac=({provider:t,auto:a,onSignInSuccess:c})=>{const f=qo(),P=useApi(t.apiRef),$=useApi(configApiRef),[J,ge]=useState(),[Me,xe]=useState(!1),gt=async({checkExisting:ft,showPopup:Jt})=>{try{let Zt;if(ft&&(Zt=await P.getBackstageIdentity({optional:!0})),!Zt&&(Jt||a)&&(xe(!0),Zt=await P.getBackstageIdentity({instantPopup:!0}),!Zt))throw new Error(`The ${t.title} provider is not configured to support sign-in`);if(!Zt){xe(!0);return}const un=await P.getProfile();c(co.create({identity:Zt.identity,authApi:P,profile:un}))}catch(Zt){ge(Zt),xe(!0)}};return useMountEffect(()=>gt({checkExisting:!0})),Me?React.createElement(No,{themeId:"home"},React.createElement(ko,{title:$.getString("app.title")}),React.createElement(Mo,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:f},React.createElement(Fo,null,React.createElement(wn,{variant:"fullHeight",title:t.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{gt({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},t.message),J&&J.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},J.message)))))):React.createElement(Mt,null)};function Mc(t){return"provider"in t?React.createElement(ac,{...t}):React.createElement(rc,{...t})}const oc=(0,se.Z)(t=>({root:{padding:t.spacing(0,2,0,2.5),minHeight:t.spacing(3)},indicator:{backgroundColor:t.palette.info.main,height:t.spacing(.3)}}),{name:"BackstageTabbedCard"}),ic=(0,u.Z)(t=>({root:{padding:t.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:t.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(w.Z);function sc(t){const{slackChannel:a,errorBoundaryProps:c,children:f,title:P,deepLink:$,value:J,onChange:ge}=t,Me=oc(),[xe,gt]=(0,r.useState)(0),ft=ge||((un,Dn)=>gt(Dn));let Jt;J?r.Children.map(f,un=>{r.isValidElement(un)&&(un==null?void 0:un.props.value)===J&&(Jt=un==null?void 0:un.props.children)}):r.Children.map(f,(un,Dn)=>{r.isValidElement(un)&&Dn===xe&&(Jt=un==null?void 0:un.props.children)});const Zt=c||(a?{slackChannel:a}:{});return r.createElement(rn.Z,null,r.createElement(yn,{...Zt},P&&r.createElement(ic,{title:P}),r.createElement(An.Z,{selectionFollowsFocus:!0,classes:Me,value:J||xe,onChange:ft},f),r.createElement(Pt.Z,null),r.createElement(De.Z,null,Jt),$&&r.createElement(mn,{...$})))}const lc=(0,se.Z)(t=>({root:{minWidth:t.spacing(6),minHeight:t.spacing(3),margin:t.spacing(0,2,0,0),padding:t.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:t.palette.text.primary}},selected:{fontWeight:t.typography.fontWeightBold}}),{name:"BackstageCardTab"});function cc(t){const{children:a,...c}=t,f=lc();return r.createElement(Vt.Z,{disableRipple:!0,classes:f,...c})}},83487:(Un,Ht,e)=>{"use strict";e.d(Ht,{FB:()=>ne,IB:()=>se,iH:()=>be,op:()=>re});var o=e(2784),p=e(30204);function m(U){return{$$type:"@backstage/TranslationMessages",id:U.ref.id,full:Boolean(U.full),messages:U.messages}}function Y(U){return{$$type:"@backstage/TranslationResource",version:"v1",id:U.ref.id,resources:Object.entries(U.translations).map(([x,he])=>({language:x,loader:()=>he().then(Fe=>{const dt=Fe.default;return{messages:(dt==null?void 0:dt.$$type)==="@backstage/TranslationMessages"?dt.messages:dt}})}))}}var V=Object.defineProperty,I=(U,x,he)=>x in U?V(U,x,{enumerable:!0,configurable:!0,writable:!0,value:he}):U[x]=he,W=(U,x,he)=>(I(U,typeof x!="symbol"?x+"":x,he),he),tt=(U,x,he)=>{if(!x.has(U))throw TypeError("Cannot "+he)},Xe=(U,x,he)=>(tt(U,x,"read from private field"),he?he.call(U):x.get(U)),r=(U,x,he)=>{if(x.has(U))throw TypeError("Cannot add the same private member more than once");x instanceof WeakSet?x.add(U):x.set(U,he)},je=(U,x,he,Fe)=>(tt(U,x,"write to private field"),Fe?Fe.call(U,he):x.set(U,he),he),ye,X,Z;class l{constructor(x){r(this,ye,void 0),r(this,X,void 0),r(this,Z,void 0),W(this,"$$type","@backstage/TranslationRef"),W(this,"version","v1"),je(this,ye,x.id),je(this,X,x.messages)}get id(){return Xe(this,ye)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return Xe(this,X)}setDefaultResource(x){je(this,Z,x)}getDefaultResource(){return Xe(this,Z)}toString(){return`TranslationRef{id=${this.id}}`}}ye=new WeakMap,X=new WeakMap,Z=new WeakMap;function ne(U){const x=new l(U);return U.translations&&x.setDefaultResource(Y({ref:x,translations:U.translations})),x}const re=(0,p.c)({id:"core.translation"}),se=(0,p.c)({id:"core.applanguage"}),ve=new WeakSet,be=U=>{const x=(0,p.u)(p.s),he=(0,p.u)(re),[Fe,dt]=(0,o.useState)(()=>he.getTranslation(U)),qt=(0,o.useMemo)(()=>he.translation$(U),[he,U]),Ie=(0,o.useCallback)(ct=>{if(!ve.has(U)){const Ot=`Failed to load translation resource '${U.id}'; caused by ${ct}`;console.error(Ot),x.post(new Error(Ot)),ve.add(U)}},[x,U]);(0,o.useEffect)(()=>{const ct=qt.subscribe({next(Ot){Ot.ready&&dt(Ot)},error(Ot){Ie(Ot)}});return()=>{ct.unsubscribe()}},[qt,Ie]);const Be=(0,o.useRef)(!0);if((0,o.useEffect)(()=>{Be.current?Be.current=!1:dt(he.getTranslation(U))},[he,U]),!Fe.ready)throw new Promise(ct=>{const Ot=qt.subscribe({next(Ct){Ct.ready&&(Ot.unsubscribe(),ct())},error(Ct){Ot.unsubscribe(),Ie(Ct),ct()}})});return{t:Fe.t}},u="eHgtF5hmbrXyiEvo";function F(U=Error){const{stack:x}=new U(u);if(!x)return"<unknown>";const he=x.includes(u)?x.indexOf(`
`)+1:0,Fe=x.indexOf(`
`,x.indexOf(`
`,he)+1)+1,dt=x.indexOf(`
`,Fe),qt=x.substring(Fe,dt).trim();return qt?qt.includes("(")?qt.substring(qt.indexOf("(")+1,qt.indexOf(")")):qt.includes("@")?qt.substring(qt.indexOf("@")+1):qt:"unknown"}var R=Object.defineProperty,M=(U,x,he)=>x in U?R(U,x,{enumerable:!0,configurable:!0,writable:!0,value:he}):U[x]=he,g=(U,x,he)=>(M(U,typeof x!="symbol"?x+"":x,he),he),Ze=(U,x,he)=>{if(!x.has(U))throw TypeError("Cannot "+he)},we=(U,x,he)=>(Ze(U,x,"read from private field"),he?he.call(U):x.get(U)),Qe=(U,x,he)=>{if(x.has(U))throw TypeError("Cannot add the same private member more than once");x instanceof WeakSet?x.add(U):x.set(U,he)},le=(U,x,he,Fe)=>(Ze(U,x,"write to private field"),Fe?Fe.call(U,he):x.set(U,he),he),Le,Se,Ke,St,L;function mt(U){const x=U;if(x.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${x.$$type}'`);return x}class fe{constructor(x=[],he){this.params=x,Qe(this,St),g(this,"$$type","@backstage/RouteRef"),g(this,"version","v1"),Qe(this,Le,void 0),Qe(this,Se,void 0),Qe(this,Ke,void 0),le(this,Se,x),le(this,Ke,he)}getParams(){return we(this,Se)}getDescription(){return we(this,Le)?we(this,Le):`created at '${we(this,Ke)}'`}setId(x){if(!x)throw new Error(`${we(this,St,L)} id must be a non-empty string`);if(we(this,Le))throw new Error(`${we(this,St,L)} was referenced twice as both '${we(this,Le)}' and '${x}'`);le(this,Le,x)}toString(){return`${we(this,St,L)}{${this.getDescription()}}`}}Le=new WeakMap,Se=new WeakMap,Ke=new WeakMap,St=new WeakSet,L=function(){return this.$$type.slice(11)};function Kt(U){return new fe(U==null?void 0:U.params,F())}var Et=Object.defineProperty,It=(U,x,he)=>x in U?Et(U,x,{enumerable:!0,configurable:!0,writable:!0,value:he}):U[x]=he,Ft=(U,x,he)=>(It(U,typeof x!="symbol"?x+"":x,he),he),Ye=(U,x,he)=>{if(!x.has(U))throw TypeError("Cannot "+he)},_t=(U,x,he)=>(Ye(U,x,"read from private field"),he?he.call(U):x.get(U)),kt=(U,x,he)=>{if(x.has(U))throw TypeError("Cannot add the same private member more than once");x instanceof WeakSet?x.add(U):x.set(U,he)},Qt=(U,x,he,Fe)=>(Ye(U,x,"write to private field"),Fe?Fe.call(U,he):x.set(U,he),he),Yt,Nt;const bt=/^\w+$/;function Tt(U){const x=U;if(x.$$type!=="@backstage/SubRouteRef")throw new Error(`Invalid SubRouteRef, bad type '${x.$$type}'`);return x}class wt{constructor(x,he,Fe){this.path=x,Ft(this,"$$type","@backstage/SubRouteRef"),Ft(this,"version","v1"),kt(this,Yt,void 0),kt(this,Nt,void 0),Qt(this,Yt,he),Qt(this,Nt,Fe)}getParams(){return _t(this,Yt)}getParent(){return _t(this,Nt)}getDescription(){const x=mt(_t(this,Nt));return`at ${this.path} with parent ${x.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}Yt=new WeakMap,Nt=new WeakMap;function Xt(U){const{path:x,parent:he}=U,dt=mt(he).getParams(),qt=x.split("/").filter(ct=>ct.startsWith(":")).map(ct=>ct.substring(1)),Ie=[...dt,...qt];if(dt.some(ct=>qt.includes(ct)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!x.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${x}'`);if(x.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${x}'`);for(const ct of qt)if(!bt.test(ct))throw new Error(`SubRouteRef path has invalid param, got '${ct}'`);return new wt(x,Ie,he)}var Re=Object.defineProperty,j=(U,x,he)=>x in U?Re(U,x,{enumerable:!0,configurable:!0,writable:!0,value:he}):U[x]=he,v=(U,x,he)=>(j(U,typeof x!="symbol"?x+"":x,he),he);function k(U){const x=U;if(x.$$type!=="@backstage/ExternalRouteRef")throw new Error(`Invalid ExternalRouteRef, bad type '${x.$$type}'`);return x}class Q extends null{constructor(x,he=[],Fe){super(he,Fe),this.optional=x,this.params=he,v(this,"$$type","@backstage/ExternalRouteRef")}}function q(U){return new Q(Boolean(U==null?void 0:U.optional),U==null?void 0:U.params,F())}function Ge(U){if("$$type"in U)return U;const x=U[routeRefType];if(x==="absolute"){const he=U,Fe=mt(Kt({params:he.params}));return Object.assign(he,{$$type:"@backstage/RouteRef",version:"v1",T:Fe.T,getParams(){return Fe.getParams()},getDescription(){return Fe.getDescription()},setId(dt){Fe.setId(dt)},toString(){return Fe.toString()}})}if(x==="sub"){const he=U,Fe=Tt(Xt({path:he.path,parent:Ge(he.parent)}));return Object.assign(he,{$$type:"@backstage/SubRouteRef",version:"v1",T:Fe.T,getParams(){return Fe.getParams()},getParent(){return Fe.getParent()},getDescription(){return Fe.getDescription()},toString(){return Fe.toString()}})}if(x==="external"){const he=U,Fe=k(q({params:he.params,optional:he.optional}));return Object.assign(he,{$$type:"@backstage/ExternalRouteRef",version:"v1",T:Fe.T,optional:Fe.optional,getParams(){return Fe.getParams()},getDescription(){return Fe.getDescription()},setId(dt){Fe.setId(dt)},toString(){return Fe.toString()}})}throw new Error(`Failed to convert legacy route ref, unknown type '${x}'`)}},30204:(Un,Ht,e)=>{"use strict";e.d(Ht,{F:()=>M,S:()=>tt,a:()=>ve,b:()=>m,c:()=>W,d:()=>r,e:()=>ye,f:()=>g,g:()=>Xe,h:()=>Z,i:()=>l,j:()=>ne,k:()=>re,l:()=>se,m:()=>X,n:()=>be,o:()=>je,p:()=>u,q:()=>F,r:()=>Le,s:()=>R,t:()=>Ze,u:()=>Y,v:()=>we,x:()=>Qe,y:()=>le});var o=e(2784),p=e(18473);function m(){const Se=(0,p.Vt)("api-context");if(!Se)throw new Error("API context is not available");const Ke=Se.atVersion(1);if(!Ke)throw new Error("ApiContext v1 not available");return Ke}function Y(Se){const St=m().get(Se);if(!St)throw new Error(`No implementation available for ${Se}`);return St}function V(Se){return function(St){const L=fe=>{const Kt=m(),Et={};for(const It in Se)if(Se.hasOwnProperty(It)){const Ft=Se[It],Ye=Kt.get(Ft);if(!Ye)throw new Error(`No implementation available for ${Ft}`);Et[It]=Ye}return React.createElement(St,{...fe,...Et})},mt=St.displayName||St.name||"Component";return L.displayName=`withApis(${mt})`,L}}class I{constructor(Ke){if(this.config=Ke,!Ke.id.split(".").flatMap(L=>L.split("-")).every(L=>L.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${Ke.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function W(Se){return new I(Se)}var tt=(Se=>(Se.SignedIn="SignedIn",Se.SignedOut="SignedOut",Se))(tt||{});const Xe=W({id:"core.auth.google"}),r=W({id:"core.auth.github"}),je=W({id:"core.auth.okta"}),ye=W({id:"core.auth.gitlab"}),X=W({id:"core.auth.microsoft"}),Z=W({id:"core.auth.onelogin"}),l=W({id:"core.auth.bitbucket"}),ne=W({id:"core.auth.bitbucket-server"}),re=W({id:"core.auth.atlassian"}),se=W({id:"core.alert"}),ve=W({id:"core.analytics"}),be=W({id:"core.apptheme"}),u=W({id:"core.config"}),F=W({id:"core.discovery"}),R=W({id:"core.error"});var M=(Se=>(Se[Se.None=0]="None",Se[Se.Active=1]="Active",Se))(M||{});const g=W({id:"core.featureflags"}),Ze=W({id:"core.fetch"}),we=W({id:"core.identity"}),Qe=W({id:"core.oauthrequest"}),le=W({id:"core.storage"}),Le=(0,p.uW)("route-ref-type",()=>Symbol("route-ref-type"))},30705:(Un,Ht,e)=>{"use strict";e.d(Ht,{CO:()=>Yt,IY:()=>se,NT:()=>M,Oi:()=>It,P4:()=>Qt,R5:()=>re,Rz:()=>Se,YO:()=>Nt,fC:()=>W,ni:()=>tt,qD:()=>Z,rx:()=>Re,tg:()=>Et,vJ:()=>wt,x8:()=>Kt,z$:()=>X});var o=e(18473),p=e(2784),m=e(30204),Y=e(73557);const V=(0,o.CT)("analytics-context"),I=()=>{const j=(0,p.useContext)(V);if(j===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const v=j.atVersion(1);if(v===void 0)throw new Error("No context found for version 1.");return v},W=j=>{const{attributes:v,children:k}=j,q={...I(),...v},Ge=(0,o.EI)({1:q});return p.createElement(V.Provider,{value:Ge},k)};function tt(j,v){return"id"in j?{api:j,deps:{},factory:()=>v}:j}const Xe=(0,o.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),r="_ROUTABLE-EXTENSION-RENDERED";class je{constructor(v,k={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=v,this.context=k,Xe.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{Xe.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...Xe.mostRecentGatheredNavigation,...Xe.mostRecentRoutableExtensionRender}),Xe.mostRecentGatheredNavigation=void 0,Xe.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),Xe.beforeUnloadRegistered=!0)}setContext(v){this.context=v}captureEvent(v,k,{value:Q,attributes:q}={}){const{_routeNodeType:Ge,...U}=this.context;if(v===r){Xe.mostRecentGatheredNavigation&&(Xe.mostRecentRoutableExtensionRender={context:{...U,extension:"App"}});return}if(Xe.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...Xe.mostRecentGatheredNavigation,...Xe.mostRecentRoutableExtensionRender})}catch(x){console.warn("Error during analytics event capture. %o",x)}Xe.mostRecentGatheredNavigation=void 0,Xe.mostRecentRoutableExtensionRender=void 0}if(v==="navigate"&&Ge==="gathered"&&U.pluginId==="root"){Xe.mostRecentGatheredNavigation={action:v,subject:k,value:Q,attributes:q,context:U};return}try{this.analyticsApi.captureEvent({action:v,subject:k,value:Q,attributes:q,context:U})}catch(x){console.warn("Error during analytics event capture. %o",x)}}}function ye(){try{return(0,m.u)(m.a)}catch{return{captureEvent:()=>{}}}}function X(){const j=(0,p.useRef)(null),v=I(),k=ye();function Q(){return j.current===null&&(j.current=new je(k)),j.current}const q=Q();return q.setContext(v),q}const Z=()=>{const j=(0,o.Vt)("app-context");if(!j)throw new Error("App context is not available");const v=j.atVersion(1);if(!v)throw new Error("AppContext v1 not available");return v},l=(0,o.uW)("component-data-store",()=>new WeakMap),ne="__backstage_data";function re(j,v,k){var Q;const q=j;let Ge=(Q=q[ne])!=null?Q:l.get(j);if(Ge||(Ge={map:new Map},Object.defineProperty(q,ne,{enumerable:!1,configurable:!0,writable:!1,value:Ge}),l.set(j,Ge)),Ge.map.has(v)){const U=j.displayName||j.name;throw new Error(`Attempted to attach duplicate data "${v}" to component "${U}"`)}Ge.map.set(v,k)}function se(j,v){var k;if(!j)return;const Q=j.type;if(!Q)return;const q=(k=Q[ne])!=null?k:l.get(Q);if(q)return q.map.get(v)}var ve=Object.defineProperty,be=(j,v,k)=>v in j?ve(j,v,{enumerable:!0,configurable:!0,writable:!0,value:k}):j[v]=k,u=(j,v,k)=>(be(j,typeof v!="symbol"?v+"":v,k),k),F;class R{constructor(v,k){this.id=v,this.params=k,u(this,F,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}F=m.r;function M(j){var v;return new R(j.id,(v=j.params)!=null?v:[])}var g=Object.defineProperty,Ze=(j,v,k)=>v in j?g(j,v,{enumerable:!0,configurable:!0,writable:!0,value:k}):j[v]=k,we=(j,v,k)=>(Ze(j,typeof v!="symbol"?v+"":v,k),k),Qe;const le=/^\w+$/;class Le{constructor(v,k,Q,q){this.id=v,this.path=k,this.parent=Q,this.params=q,we(this,Qe,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}Qe=m.r;function Se(j){const{id:v,path:k,parent:Q}=j,q=k.split("/").filter(x=>x.startsWith(":")).map(x=>x.substring(1)),Ge=[...Q.params,...q];if(Q.params.some(x=>q.includes(x)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!k.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${k}'`);if(k.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${k}'`);for(const x of q)if(!le.test(x))throw new Error(`SubRouteRef path has invalid param, got '${x}'`);return new Le(v,k,Q,Ge)}var Ke=Object.defineProperty,St=(j,v,k)=>v in j?Ke(j,v,{enumerable:!0,configurable:!0,writable:!0,value:k}):j[v]=k,L=(j,v,k)=>(St(j,typeof v!="symbol"?v+"":v,k),k),mt;class fe{constructor(v,k,Q){this.id=v,this.params=k,this.optional=Q,L(this,mt,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}mt=m.r;function Kt(j){var v;return new fe(j.id,(v=j.params)!=null?v:[],Boolean(j.optional))}function Et(j){const{pathname:v}=(0,Y.TH)(),k=(0,o.Vt)("routing-context");if(!k)throw new Error("Routing context is not available");const Q=k.atVersion(1),q=(0,p.useMemo)(()=>Q&&Q.resolve(j,{pathname:v}),[Q,j,v]);if(!k)throw new Error("useRouteRef used outside of routing context");if(!Q)throw new Error("RoutingContext v1 not available");const Ge="optional"in j&&j.optional;if(!q&&!Ge)throw new Error(`No path for ${j}`);return q}function It(j){return(0,Y.UO)()}var Ft=Object.defineProperty,Ye=(j,v,k)=>v in j?Ft(j,v,{enumerable:!0,configurable:!0,writable:!0,value:k}):j[v]=k,_t=(j,v,k)=>(Ye(j,typeof v!="symbol"?v+"":v,k),k);class kt extends p.Component{constructor(){super(...arguments),_t(this,"state",{error:void 0}),_t(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(v){return{error:v}}render(){const{error:v}=this.state,{app:k,plugin:Q}=this.props,{ErrorBoundaryFallback:q}=k.getComponents();return v?p.createElement(q,{error:v,resetError:this.handleErrorReset,plugin:Q}):this.props.children}}function Qt(j){const{component:v,mountPoint:k,name:Q}=j;return Nt({component:{lazy:()=>v().then(q=>{const Ge=x=>{const he=X();try{Et(k)}catch(Fe){if(typeof Fe=="object"&&Fe!==null){const{message:dt}=Fe;if(typeof dt=="string"&&dt.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${k} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw Fe}return(0,p.useEffect)(()=>{he.captureEvent(r,"")},[he]),p.createElement(q,{...x})},U=Q||q.displayName||q.name||"LazyComponent";return Ge.displayName=`RoutableExtension(${U})`,Ge},q=>U=>{const x=Z(),{BootErrorPage:he}=x.getComponents();return p.createElement(he,{step:"load-chunk",error:q})})},data:{"core.mountPoint":k},name:Q})}function Yt(j){const{component:v,name:k}=j;return Nt({component:v,name:k})}function Nt(j){const{data:v={},name:k}=j;k||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let Q;if("lazy"in j.component){const Ge=j.component.lazy;Q=(0,p.lazy)(()=>Ge().then(U=>({default:U})))}else Q=j.component.sync;const q=k||Q.displayName||Q.name||"Component";return{expose(Ge){const U=x=>{const he=Z(),{Progress:Fe}=he.getComponents(),dt=v==null?void 0:v["core.mountPoint"];return p.createElement(p.Suspense,{fallback:p.createElement(Fe,null)},p.createElement(kt,{app:he,plugin:Ge},p.createElement(W,{attributes:{pluginId:Ge.getId(),...k&&{extension:k},...dt&&{routeRef:dt.id}}},p.createElement(Q,{...x}))))};re(U,"core.plugin",Ge),re(U,"core.extensionName",k);for(const[x,he]of Object.entries(v))re(U,x,he);return U.displayName=`Extension(${q})`,U}}}function bt(j,v,k,Q){return p.Children.toArray(j).flatMap(q=>{if(!(0,p.isValidElement)(q))return[];if(q.type===p.Fragment)return bt(q.props.children,v,k,Q);if(se(q,"core.featureFlagged")){const Ge=q.props;return("with"in Ge?v.isActive(Ge.with):!v.isActive(Ge.without))?bt(q.props.children,v,k,Q):[]}if(k===void 0||k(q))return[q];if(Q)throw new Error(Q);return bt(q.props.children,v,k,Q)})}class Tt{constructor(v,k){this.node=v,this.featureFlagsApi=k}selectByComponentData(v){const k=bt(this.node,this.featureFlagsApi,Q=>se(Q,v.key)!==void 0,v.withStrictError);return new Tt(k,this.featureFlagsApi)}findComponentData(v){return bt(this.node,this.featureFlagsApi,Q=>se(Q,v.key)!==void 0).map(Q=>se(Q,v.key)).filter(Q=>Q!==void 0)}getElements(){return bt(this.node,this.featureFlagsApi)}}function wt(j,v,k=[]){const Q=(0,m.u)(m.f),q=new Tt(j,Q);return(0,p.useMemo)(()=>v(q),[j,...k])}class Xt{constructor(v){this.config=v}getId(){return this.config.id}getApis(){var v;return(v=this.config.apis)!=null?v:[]}getFeatureFlags(){var v,k;return(k=(v=this.config.featureFlags)==null?void 0:v.slice())!=null?k:[]}get routes(){var v;return(v=this.config.routes)!=null?v:{}}get externalRoutes(){var v;return(v=this.config.externalRoutes)!=null?v:{}}provide(v){return v.expose(this)}toString(){return`plugin{${this.config.id}}`}}function Re(j){return new Xt(j)}},32272:(Un,Ht,e)=>{"use strict";e.d(Ht,{BD:()=>Y,SP:()=>R,VL:()=>Qe,VZ:()=>m,dR:()=>se});var o=e(24852),p=e.n(o);function m(le){if(typeof le!="object"||le===null||Array.isArray(le))return!1;const Le=le;return!(typeof Le.name!="string"||Le.name===""||typeof Le.message!="string")}function Y(le){if(typeof le!="object"||le===null||Array.isArray(le))throw new Error(`Encountered invalid error, not an object, got '${le}'`);const Le=le;if(typeof Le.name!="string"||Le.name==="")throw new Error(`Encountered error object without a name, got '${le}'`);if(typeof Le.message!="string")throw new Error(`Encountered error object without a message, got '${le}'`)}function V(le,Le){const Ke={name:"Unknown",message:"<no reason given>",...serializeError$1(le)};return Le!=null&&Le.includeStack||delete Ke.stack,Ke}function I(le){const Le=(0,o.deserializeError)(le);return le.stack||(Le.stack=void 0),Le}function W(le){if(m(le)){const Le=String(le);return Le!=="[object Object]"?Le:`${le.name}: ${le.message}`}return`unknown error '${le}'`}var tt=Object.defineProperty,Xe=(le,Le,Se)=>Le in le?tt(le,Le,{enumerable:!0,configurable:!0,writable:!0,value:Se}):le[Le]=Se,r=(le,Le,Se)=>(Xe(le,typeof Le!="symbol"?Le+"":Le,Se),Se);class je extends Error{constructor(Le,Se){var Ke;let St=Le;if(Se!==void 0){const L=W(Se);St?St+=`; caused by ${L}`:St=`caused by ${L}`}super(St),r(this,"cause"),(Ke=Error.captureStackTrace)==null||Ke.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=m(Se)?Se:void 0}}var ye=Object.defineProperty,X=(le,Le,Se)=>Le in le?ye(le,Le,{enumerable:!0,configurable:!0,writable:!0,value:Se}):le[Le]=Se,Z=(le,Le,Se)=>(X(le,typeof Le!="symbol"?Le+"":Le,Se),Se);class l extends null{constructor(){super(...arguments),Z(this,"name","InputError")}}class ne extends null{constructor(){super(...arguments),Z(this,"name","AuthenticationError")}}class re extends null{constructor(){super(...arguments),Z(this,"name","NotAllowedError")}}class se extends je{constructor(){super(...arguments),Z(this,"name","NotFoundError")}}class ve extends null{constructor(){super(...arguments),Z(this,"name","ConflictError")}}class be extends null{constructor(){super(...arguments),Z(this,"name","NotModifiedError")}}class u extends null{constructor(){super(...arguments),Z(this,"name","NotImplementedError")}}class F extends null{}class R extends je{constructor(Le,Se){super(Le,Se),this.name=m(Se)?Se.name:"Error"}}async function M(le){var Le;try{const Se=await le.text();if(Se){if((Le=le.headers.get("content-type"))!=null&&Le.startsWith("application/json"))try{const Ke=JSON.parse(Se);if(Ke.error&&Ke.response)return Ke}catch{}return{error:{name:"Error",message:`Request failed with status ${le.status} ${le.statusText}, ${Se}`},response:{statusCode:le.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${le.status} ${le.statusText}`},response:{statusCode:le.status}}}var g=Object.defineProperty,Ze=(le,Le,Se)=>Le in le?g(le,Le,{enumerable:!0,configurable:!0,writable:!0,value:Se}):le[Le]=Se,we=(le,Le,Se)=>(Ze(le,typeof Le!="symbol"?Le+"":Le,Se),Se);class Qe extends Error{constructor(Le){super(Le.message),we(this,"response"),we(this,"body"),we(this,"cause"),this.name="ResponseError",this.response=Le.response,this.body=Le.data,this.cause=Le.cause}static async fromResponse(Le){const Se=await M(Le),Ke=Se.response.statusCode||Le.status,St=Se.error.name||Le.statusText,L=`Request failed with ${Ke} ${St}`,mt=I(Se.error);return new Qe({message:L,response:Le,data:Se,cause:mt})}}},49462:(Un,Ht,e)=>{"use strict";e.d(Ht,{Om:()=>I,ae:()=>ve,nW:()=>u,q3:()=>be,zN:()=>se});var o=e(30204),p=e(30705),m=e(1854),Y=e(73250),V=e(2784);const I=(0,o.c)({id:"core.scmauth"});var W=(F,R,M)=>{if(!R.has(F))throw TypeError("Cannot "+M)},tt=(F,R,M)=>(W(F,R,"read from private field"),M?M.call(F):R.get(F)),Xe=(F,R,M)=>{if(R.has(F))throw TypeError("Cannot add the same private member more than once");R instanceof WeakSet?R.add(F):R.set(F,M)},r=(F,R,M,g)=>(W(F,R,"write to private field"),g?g.call(F,M):R.set(F,M),M),je,ye,X,Z,l;class ne{constructor(R){Xe(this,je,void 0),r(this,je,R)}async getCredentials(R){const M=new URL(R.url),g=tt(this,je).find(Ze=>Ze.isUrlSupported(M));if(!g)throw new Error(`No auth provider available for '${R.url}', see https://backstage.io/link?scm-auth`);return g.getCredentials(R)}}je=new WeakMap;const re=class Pa{constructor(R,M,g,Ze){Xe(this,ye,void 0),Xe(this,X,void 0),Xe(this,Z,void 0),Xe(this,l,void 0),r(this,ye,M),r(this,X,g),r(this,Z,Ze),r(this,l,R)}static createDefaultApiFactory(){return(0,p.ni)({api:I,deps:{github:o.d,gitlab:o.e,azure:o.m,bitbucket:o.i},factory:({github:R,gitlab:M,azure:g,bitbucket:Ze})=>Pa.merge(Pa.forGithub(R),Pa.forGitlab(M),Pa.forAzure(g),Pa.forBitbucket(Ze))})}static forAuthApi(R,M){return new Pa("generic",R,M.host,M.scopeMapping)}static forGithub(R,M){var g;const Ze=(g=M==null?void 0:M.host)!=null?g:"github.com";return new Pa("github",R,Ze,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(R,M){var g;const Ze=(g=M==null?void 0:M.host)!=null?g:"gitlab.com";return new Pa("gitlab",R,Ze,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(R,M){var g;const Ze=(g=M==null?void 0:M.host)!=null?g:"dev.azure.com";return new Pa("azure",R,Ze,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(R,M){var g;const Ze=(g=M==null?void 0:M.host)!=null?g:"bitbucket.org";return new Pa("bitbucket",R,Ze,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...R){return new ne(R)}isUrlSupported(R){return R.host===tt(this,X)}getAdditionalScopesForProvider(R){var M,g;return!(R!=null&&R.customScopes)||tt(this,l)==="generic"?[]:(g=(M=R.customScopes)==null?void 0:M[tt(this,l)])!=null?g:[]}async getCredentials(R){const{url:M,additionalScope:g,...Ze}=R,we=tt(this,Z).default.slice();g!=null&&g.repoWrite&&we.push(...tt(this,Z).repoWrite);const Qe=this.getAdditionalScopesForProvider(g);Qe.length&&we.push(...Qe);const le=[...new Set(we)],Le=await tt(this,ye).getAccessToken(le,Ze);return{token:Le,headers:{Authorization:`Bearer ${Le}`}}}};ye=new WeakMap,X=new WeakMap,Z=new WeakMap,l=new WeakMap;let se=re;class ve{static fromConfig(R){return m.Lx.fromConfig(R)}}const be=(0,o.c)({id:"integration.scmintegrations"}),u=F=>{var R;const{type:M}=F,g=(0,p.qD)(),Ze=Y.Z,we=M&&(R=g.getSystemIcon(M))!=null?R:Ze;return V.createElement(we,null)}},1854:(Un,Ht,e)=>{"use strict";e.d(Ht,{BT:()=>In,Lx:()=>lr,MY:()=>O,ah:()=>wr});var o=e(82717),p=e.n(o),m=e(76635),Y=e.n(m),V=e(96279),I=e.n(V),W=e(72872),tt=e(89393),Xe=e(26228),r=e(48834).Buffer;function je(y){const s=new URL("http://example.com");return s.host=y,s.host===y}function ye(y){try{return new URL(y),!0}catch{return!1}}function X(y,s){return{list(){return y},byUrl(b){try{const B=typeof b=="string"?new URL(b):b;return y.find(Oe=>s(Oe)===B.host)}catch{return}},byHost(b){return y.find(B=>s(B)===b)}}}function Z(y){const{url:s,base:b,lineNumber:B}=y;try{return new URL(s),s}catch{}let Oe;if(s.startsWith("/")){const{filepath:ot}=p()(b);Oe=new URL(b);const At=(0,m.trimEnd)(Oe.pathname.substring(0,Oe.pathname.length-ot.length),"/");Oe.pathname=`${At}${s}`}else Oe=new URL(s,b);return Oe.search=new URL(b).search,B&&(Oe.hash=`L${B}`),Oe.toString()}const l="amazonaws.com";function ne(y){var s;const b=y.getOptionalString("endpoint"),B=(s=y.getOptionalBoolean("s3ForcePathStyle"))!=null?s:!1;let Oe,ot;if(b){try{const Ln=new URL(b);Oe=Ln.host,ot=Ln.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${b}' is not a valid URL`)}if(ot!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${b}'`)}else Oe=l;const At=y.getOptionalString("accessKeyId"),xt=y.getOptionalString("secretAccessKey"),Sn=y.getOptionalString("roleArn"),Bn=y.getOptionalString("externalId");return{host:Oe,endpoint:b,s3ForcePathStyle:B,accessKeyId:At,secretAccessKey:xt,roleArn:Sn,externalId:Bn}}function re(y){const s=y.map(ne);return s.some(b=>b.host===l)||s.push({host:l}),s}var se=Object.defineProperty,ve=(y,s,b)=>s in y?se(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,be=(y,s,b)=>(ve(y,typeof s!="symbol"?s+"":s,b),b);const u=class{constructor(s){this.integrationConfig=s}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){return Z(s)}resolveEditUrl(s){return s}};be(u,"factory",({config:y})=>{var s;const b=re((s=y.getOptionalConfigArray("integrations.awsS3"))!=null?s:[]);return X(b.map(B=>new u(B)),B=>B.config.host)});let F=u;var R=(y,s,b)=>{if(!s.has(y))throw TypeError("Cannot "+b)},M=(y,s,b)=>(R(y,s,"read from private field"),b?b.call(y):s.get(y)),g=(y,s,b)=>{if(s.has(y))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(y):s.set(y,b)},Ze=(y,s,b,B)=>(R(y,s,"write to private field"),B?B.call(y,b):s.set(y,b),b),we,Qe,le,Le,Se,Ke,St;const L="GB",mt=class Yi{constructor(s,b,B,Oe,ot,At){g(this,we,void 0),g(this,Qe,void 0),g(this,le,void 0),g(this,Le,void 0),g(this,Se,void 0),g(this,Ke,void 0),g(this,St,(...xt)=>{const Sn=new URL(M(this,we));return Sn.pathname=xt.map(Bn=>encodeURIComponent(Bn)).join("/"),Sn}),Ze(this,we,s),Ze(this,Qe,b),Ze(this,le,B),Ze(this,Le,Oe),Ze(this,Se,ot),Ze(this,Ke,At)}static fromRepoUrl(s){var b;const B=new URL(s);let Oe,ot,At;const xt=B.pathname.split("/").map(fr=>decodeURIComponent(fr));if(xt[2]==="_git"?(Oe=xt[1],ot=At=xt[3]):xt[3]==="_git"?(Oe=xt[1],ot=xt[2],At=xt[4]):xt[4]==="_git"&&(Oe=`${xt[1]}/${xt[2]}`,ot=xt[3],At=xt[5]),!Oe||!ot||!At)throw new Error("Azure URL must point to a git repository");const Sn=(b=B.searchParams.get("path"))!=null?b:void 0;let Bn;const Ln=B.searchParams.get("version");if(Ln){if(Ln.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");Bn=Ln.slice(2)}return new Yi(B.origin,Oe,ot,At,Sn,Bn)}toRepoUrl(){let s;return M(this,le)===M(this,Le)?s=M(this,St).call(this,M(this,Qe),"_git",M(this,Le)):s=M(this,St).call(this,M(this,Qe),M(this,le),"_git",M(this,Le)),M(this,Se)&&s.searchParams.set("path",M(this,Se)),M(this,Ke)&&s.searchParams.set("version",L+M(this,Ke)),s.toString()}toFileUrl(){if(!M(this,Se))throw new Error("Azure URL must point to a specific path to be able to download a file");const s=M(this,St).call(this,M(this,Qe),M(this,le),"_apis","git","repositories",M(this,Le),"items");return s.searchParams.set("api-version","6.0"),s.searchParams.set("path",M(this,Se)),M(this,Ke)&&s.searchParams.set("version",M(this,Ke)),s.toString()}toArchiveUrl(){const s=M(this,St).call(this,M(this,Qe),M(this,le),"_apis","git","repositories",M(this,Le),"items");return s.searchParams.set("recursionLevel","full"),s.searchParams.set("download","true"),s.searchParams.set("api-version","6.0"),M(this,Se)&&s.searchParams.set("scopePath",M(this,Se)),M(this,Ke)&&s.searchParams.set("version",M(this,Ke)),s.toString()}toCommitsUrl(){const s=M(this,St).call(this,M(this,Qe),M(this,le),"_apis","git","repositories",M(this,Le),"commits");return s.searchParams.set("api-version","6.0"),M(this,Ke)&&s.searchParams.set("searchCriteria.itemVersion.version",M(this,Ke)),s.toString()}getOwner(){return M(this,Qe)}getProject(){return M(this,le)}getRepo(){return M(this,Le)}getPath(){return M(this,Se)}getRef(){return M(this,Ke)}};we=new WeakMap,Qe=new WeakMap,le=new WeakMap,Le=new WeakMap,Se=new WeakMap,Ke=new WeakMap,St=new WeakMap;let fe=mt;const Kt="dev.azure.com",Et=["clientId","clientSecret","tenantId","personalAccessToken"],It=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function Ft(y){for(const s of It.entries()){const[b,B]=s,Oe=Et.filter(ot=>!B.includes(ot));if(B.every(ot=>y[ot]!==void 0)&&Oe.every(ot=>y[ot]===void 0))return{kind:b,organizations:y.organizations,...B.reduce((ot,At)=>(ot[At]=y[At],ot),{})}}throw new Error("is not a valid credential")}function Ye(y){var s,b,B,Oe;const ot=(s=y.getOptionalString("host"))!=null?s:Kt;let At=(b=y.getOptionalConfigArray("credentials"))==null?void 0:b.map(Bn=>({organizations:Bn.getOptionalStringArray("organizations"),personalAccessToken:Bn.getOptionalString("personalAccessToken"),tenantId:Bn.getOptionalString("tenantId"),clientId:Bn.getOptionalString("clientId"),clientSecret:Bn.getOptionalString("clientSecret")}));const xt=y.getOptionalString("token");if(y.getOptional("credential")!==void 0&&y.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(y.getOptional("token")!==void 0&&y.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(xt!==void 0){const Bn=[{personalAccessToken:xt}];At=(B=At==null?void 0:At.concat(Bn))!=null?B:Bn}if(y.getOptional("credential")!==void 0){const Bn=[{organizations:y.getOptionalStringArray("credential.organizations"),token:y.getOptionalString("credential.token"),tenantId:y.getOptionalString("credential.tenantId"),clientId:y.getOptionalString("credential.clientId"),clientSecret:y.getOptionalString("credential.clientSecret")}];At=(Oe=At==null?void 0:At.concat(Bn))!=null?Oe:Bn}if(!je(ot))throw new Error(`Invalid Azure integration config, '${ot}' is not a valid host`);let Sn;if(At!==void 0){const Bn=At==null?void 0:At.reduce((Ln,fr,zr)=>{let sa;try{Ft(fr)}catch(Qr){sa=Qr.message}return sa!==void 0&&Ln.push(`credential at position ${zr+1} ${sa}`),Ln},Array.of()).concat(Object.entries(At.filter(Ln=>Ln.organizations!==void 0&&Ln.organizations.length>0).reduce((Ln,fr,zr)=>{var sa;return(sa=fr.organizations)==null||sa.forEach(Qr=>{Ln[Qr]||(Ln[Qr]=[]),Ln[Qr].push(zr+1)}),Ln},{})).filter(([Ln,fr])=>fr.length>1).reduce((Ln,[fr,zr])=>(Ln.push(`organization ${fr} is specified multiple times in credentials at positions ${zr.slice(0,zr.length-1).join(", ")} and ${zr[zr.length-1]}`),Ln),Array.of()));if((Bn==null?void 0:Bn.length)>0)throw new Error(`Invalid Azure integration config for ${ot}: ${Bn.join("; ")}`);if(Sn=At.map(Ln=>Ft(Ln)),Sn.some(Ln=>Ln.kind!=="PersonalAccessToken")&&ot!==Kt)throw new Error(`Invalid Azure integration config for ${ot}, only personal access tokens can be used with hosts other than ${Kt}`);if(Sn.filter(Ln=>Ln.organizations===void 0||Ln.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${ot}, you cannot specify multiple credentials without organizations`)}return{host:ot,credentials:Sn}}function _t(y){const s=y.map(Ye);return s.some(b=>b.host===Kt)||s.push({host:Kt}),s}var kt=Object.defineProperty,Qt=(y,s,b)=>s in y?kt(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,Yt=(y,s,b)=>(Qt(y,typeof s!="symbol"?s+"":s,b),b);const Nt=class{constructor(s){this.integrationConfig=s}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){var b;const{url:B,base:Oe}=s;if(ye(B))return B;try{const ot=fe.fromRepoUrl(Oe),At=new URL(Oe),xt=new URL(`https://a.com${(b=ot.getPath())!=null?b:""}`),Sn=new URL(B,xt).pathname;return At.searchParams.set("path",Sn),s.lineNumber&&(At.searchParams.set("line",String(s.lineNumber)),At.searchParams.set("lineEnd",String(s.lineNumber+1)),At.searchParams.set("lineStartColumn","1"),At.searchParams.set("lineEndColumn","1")),At.toString()}catch{return new URL(B,Oe).toString()}}resolveEditUrl(s){return s}};Yt(Nt,"factory",({config:y})=>{var s;const b=_t((s=y.getOptionalConfigArray("integrations.azure"))!=null?s:[]);return X(b.map(B=>new Nt(B)),B=>B.config.host)});let bt=Nt;function Tt(y){return fe.fromRepoUrl(y).toFileUrl()}function wt(y){return fe.fromRepoUrl(y).toArchiveUrl()}function Xt(y){return fe.fromRepoUrl(y).toCommitsUrl()}var Re=Object.defineProperty,j=(y,s,b)=>s in y?Re(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,v=(y,s,b)=>(j(y,typeof s!="symbol"?s+"":s,b),b);const k=null;class Q{constructor(s){this.credential=s,v(this,"azureDevOpsScope","499b84ac-1321-427f-aa17-267ca6975798/.default"),v(this,"cached")}static fromAzureDevOpsCredential(s){switch(s.kind){case"PersonalAccessToken":return Q.fromPersonalAccessTokenCredential(s);case"ClientSecret":return Q.fromTokenCredential(new ClientSecretCredential(s.tenantId,s.clientId,s.clientSecret));case"ManagedIdentity":return Q.fromTokenCredential(new ManagedIdentityCredential(s.clientId));default:throw new Error(`Credential kind '${s.kind}' not supported`)}}static fromTokenCredential(s){return new Q(s)}static fromPersonalAccessTokenCredential(s){return new Q(s.personalAccessToken)}async getCredentials(){if(this.cached===void 0||this.cached.expiresAt!==void 0&&Date.now()>this.cached.expiresAt)if(typeof this.credential=="string")this.cached={headers:{Authorization:`Basic ${btoa(`:${this.credential}`)}`},type:"pat",token:this.credential};else{const s=await this.credential.getToken(this.azureDevOpsScope);if(!s)throw new Error("Failed to retrieve access token");this.cached={expiresAt:s.expiresOnTimestamp-k,headers:{Authorization:`Bearer ${s.token}`},type:"bearer",token:s.token}}return this.cached}}class q{constructor(s){this.providers=s}static fromIntegrations(s){const b=s.azure.list().reduce((B,Oe)=>{var ot;return(ot=Oe.config.credentials)==null||ot.forEach(At=>{var xt;if(At.organizations===void 0||At.organizations.length===0)B.get(Oe.config.host)===void 0&&B.set(Oe.config.host,Q.fromAzureDevOpsCredential(At));else{const Sn=Q.fromAzureDevOpsCredential(At);(xt=At.organizations)==null||xt.forEach(Bn=>{B.set(`${Oe.config.host}/${Bn}`,Sn)})}}),Oe.config.host==="dev.azure.com"&&B.get(Oe.config.host)===void 0&&B.set(Oe.config.host,Q.fromTokenCredential(new DefaultAzureCredential)),B},new Map);return new q(b)}forAzureDevOpsServerOrganization(s){const b=s.pathname.split("/").filter(B=>B!=="");if(s.host!=="dev.azure.com"&&b.length>0){if(b[0]!=="tfs")return this.providers.get(`${s.host}/${b[0]}`);if(b[0]==="tfs"&&b.length>1)return this.providers.get(`${s.host}/${b[1]}`)}}forAzureDevOpsOrganization(s){const b=s.pathname.split("/").filter(B=>B!=="");if(s.host==="dev.azure.com"&&b.length>0)return this.providers.get(`${s.host}/${b[0]}`)}forHost(s){return this.providers.get(s.host)}async getCredentials(s){var b,B;const Oe=new URL(s.url),ot=(B=(b=this.forAzureDevOpsOrganization(Oe))!=null?b:this.forAzureDevOpsServerOrganization(Oe))!=null?B:this.forHost(Oe);if(ot!==void 0)return ot.getCredentials(s)}}async function Ge(y,s){var b;const B=s?{...s}:{},Oe=(b=y.credentials)==null?void 0:b.filter(ot=>ot.organizations===void 0||ot.organizations.length===0)[0];if(Oe){const At=await Q.fromAzureDevOpsCredential(Oe).getCredentials();return{headers:{...At==null?void 0:At.headers,...B}}}return{headers:B}}const U="bitbucket.org",x="https://api.bitbucket.org/2.0";function he(y){var s;const b=(s=y.getOptionalString("host"))!=null?s:U;let B=y.getOptionalString("apiBaseUrl");const Oe=y.getOptionalString("token"),ot=y.getOptionalString("username"),At=y.getOptionalString("appPassword");if(!je(b))throw new Error(`Invalid Bitbucket integration config, '${b}' is not a valid host`);return B?B=(0,m.trimEnd)(B,"/"):b===U?B=x:B=`https://${b}/rest/api/1.0`,{host:b,apiBaseUrl:B,token:Oe,username:ot,appPassword:At}}function Fe(y){const s=y.map(he);return s.some(b=>b.host===U)||s.push({host:U,apiBaseUrl:x}),s}var dt=Object.defineProperty,qt=(y,s,b)=>s in y?dt(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,Ie=(y,s,b)=>(qt(y,typeof s!="symbol"?s+"":s,b),b);const Be=class{constructor(s){this.integrationConfig=s}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){const b=Z(s);if(!s.lineNumber)return b;const B=new URL(b);return this.integrationConfig.host==="bitbucket.org"?B.hash=`lines-${s.lineNumber}`:B.hash=`${s.lineNumber}`,B.toString()}resolveEditUrl(s){const b=p()(s),B=new URL(s);return B.searchParams.set("mode","edit"),B.searchParams.set("spa","0"),B.searchParams.set("at",b.ref),B.toString()}};Ie(Be,"factory",({config:y})=>{var s,b,B;const Oe=Fe((B=y.getOptionalConfigArray("integrations.bitbucket"))!=null?B:[...(s=y.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?s:[],...(b=y.getOptionalConfigArray("integrations.bitbucketServer"))!=null?b:[]]);return X(Oe.map(ot=>new Be(ot)),ot=>ot.config.host)});let ct=Be;async function Ot(y,s){const{name:b,owner:B,resource:Oe}=parseGitUrl(y),ot=Oe==="bitbucket.org";let At=ot?`${s.apiBaseUrl}/repositories/${B}/${b}`:`${s.apiBaseUrl}/projects/${B}/repos/${b}/default-branch`,xt=await fetch(At,Pt(s));if(xt.status===404&&!ot&&(At=`${s.apiBaseUrl}/projects/${B}/repos/${b}/branches/default`,xt=await fetch(At,Pt(s))),!xt.ok){const Bn=`Failed to retrieve default branch from ${At}, ${xt.status} ${xt.statusText}`;throw new Error(Bn)}let Sn;if(ot)Sn=(await xt.json()).mainbranch.name;else{const{displayId:Bn}=await xt.json();Sn=Bn}if(!Sn)throw new Error(`Failed to read default branch from ${At}. Response ${xt.status} ${xt.json()}`);return Sn}async function Ct(y,s){const{name:b,owner:B,ref:Oe,protocol:ot,resource:At,filepath:xt}=parseGitUrl(y),Sn=At==="bitbucket.org";let Bn=Oe;Bn||(Bn=await Ot(y,s));const Ln=xt?`&path=${encodeURIComponent(decodeURIComponent(xt))}`:"";return Sn?`${ot}://${At}/${B}/${b}/get/${Bn}.tar.gz`:`${s.apiBaseUrl}/projects/${B}/repos/${b}/archive?format=tgz&at=${Bn}&prefix=${B}-${b}${Ln}`}function $t(y,s){try{const{owner:b,name:B,ref:Oe,filepathtype:ot,filepath:At}=parseGitUrl(y);if(!b||!B||ot!=="browse"&&ot!=="raw"&&ot!=="src")throw new Error("Invalid Bitbucket URL or file path");const xt=At.replace(/^\//,"");if(s.host==="bitbucket.org"){if(!Oe)throw new Error("Invalid Bitbucket URL or file path");return`${s.apiBaseUrl}/repositories/${b}/${B}/src/${Oe}/${xt}`}return`${s.apiBaseUrl}/projects/${b}/repos/${B}/raw/${xt}?at=${Oe}`}catch(b){throw new Error(`Incorrect URL: ${y}, ${b}`)}}function Pt(y){const s={};if(y.token)s.Authorization=`Bearer ${y.token}`;else if(y.username&&y.appPassword){const b=r.from(`${y.username}:${y.appPassword}`,"utf8");s.Authorization=`Basic ${b.toString("base64")}`}return{headers:s}}const $e="bitbucket.org",qe="https://api.bitbucket.org/2.0";function Ee(y){const s=$e,b=qe,B=y.getString("username"),Oe=y.getString("appPassword");return{host:s,apiBaseUrl:b,username:B,appPassword:Oe}}function G(y){const s=y.map(Ee);return s.length===0&&s.push({host:$e,apiBaseUrl:qe}),s}var de=Object.defineProperty,Ue=(y,s,b)=>s in y?de(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,nt=(y,s,b)=>(Ue(y,typeof s!="symbol"?s+"":s,b),b);const it=class{constructor(s){this.integrationConfig=s}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){const b=Z(s);if(s.lineNumber){const B=new URL(b);return B.hash=`lines-${s.lineNumber}`,B.toString()}return b}resolveEditUrl(s){const b=p()(s),B=new URL(s);return B.searchParams.set("mode","edit"),B.searchParams.set("at",b.ref),B.toString()}};nt(it,"factory",({config:y})=>{var s;const b=G((s=y.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?s:[]);return X(b.map(B=>new it(B)),B=>B.config.host)});let Rt=it;async function en(y,s){const{name:b,owner:B}=parseGitUrl(y),Oe=`${s.apiBaseUrl}/repositories/${B}/${b}`,ot=await fetch(Oe,De(s));if(!ot.ok){const Sn=`Failed to retrieve default branch from ${Oe}, ${ot.status} ${ot.statusText}`;throw new Error(Sn)}const xt=(await ot.json()).mainbranch.name;if(!xt)throw new Error(`Failed to read default branch from ${Oe}. Response ${ot.status} ${ot.json()}`);return xt}async function rn(y,s){const{name:b,owner:B,ref:Oe,protocol:ot,resource:At}=parseGitUrl(y);let xt=Oe;return xt||(xt=await en(y,s)),`${ot}://${At}/${B}/${b}/get/${xt}.tar.gz`}function Ae(y,s){try{const{owner:b,name:B,ref:Oe,filepathtype:ot,filepath:At}=parseGitUrl(y);if(!b||!B||ot!=="src"&&ot!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const xt=At.replace(/^\//,"");if(!Oe)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${s.apiBaseUrl}/repositories/${b}/${B}/src/${Oe}/${xt}`}catch(b){throw new Error(`Incorrect URL: ${y}, ${b}`)}}function De(y){const s={};if(y.username&&y.appPassword){const b=r.from(`${y.username}:${y.appPassword}`,"utf8");s.Authorization=`Basic ${b.toString("base64")}`}return{headers:s}}function w(y){const s=y.getString("host");let b=y.getOptionalString("apiBaseUrl");const B=y.getOptionalString("token"),Oe=y.getOptionalString("username"),ot=y.getOptionalString("password");if(!je(s))throw new Error(`Invalid Bitbucket Server integration config, '${s}' is not a valid host`);return b?b=(0,m.trimEnd)(b,"/"):b=`https://${s}/rest/api/1.0`,{host:s,apiBaseUrl:b,token:B,username:Oe,password:ot}}function H(y){return y.map(w)}var te=Object.defineProperty,ut=(y,s,b)=>s in y?te(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,K=(y,s,b)=>(ut(y,typeof s!="symbol"?s+"":s,b),b);const ee=class{constructor(s){this.integrationConfig=s}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){const b=Z(s);if(s.lineNumber){const B=new URL(b);return B.hash=s.lineNumber.toString(),B.toString()}return b}resolveEditUrl(s){return s.includes("?")?s.substring(0,s.indexOf("?")):s}};K(ee,"factory",({config:y})=>{var s;const b=H((s=y.getOptionalConfigArray("integrations.bitbucketServer"))!=null?s:[]);return X(b.map(B=>new ee(B)),B=>B.config.host)});let Ve=ee;async function lt(y,s){const{name:b,owner:B}=parseGitUrl(y);let Oe=`${s.apiBaseUrl}/projects/${B}/repos/${b}/default-branch`,ot=await fetch(Oe,Gt(s));if(ot.status===404&&(Oe=`${s.apiBaseUrl}/projects/${B}/repos/${b}/branches/default`,ot=await fetch(Oe,Gt(s))),!ot.ok){const Sn=`Failed to retrieve default branch from ${Oe}, ${ot.status} ${ot.statusText}`;throw new Error(Sn)}const{displayId:At}=await ot.json(),xt=At;if(!xt)throw new Error(`Failed to read default branch from ${Oe}. Response ${ot.status} ${ot.json()}`);return xt}async function Lt(y,s){const{name:b,owner:B,ref:Oe,filepath:ot}=parseGitUrl(y);let At=Oe;At||(At=await lt(y,s));const xt=ot?`&path=${encodeURIComponent(decodeURIComponent(ot))}`:"";return`${s.apiBaseUrl}/projects/${B}/repos/${b}/archive?format=tgz&at=${At}&prefix=${B}-${b}${xt}`}function zt(y,s){try{const{owner:b,name:B,ref:Oe,filepathtype:ot,filepath:At}=parseGitUrl(y);if(!b||!B||ot!=="browse"&&ot!=="raw"&&ot!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const xt=At.replace(/^\//,"");return`${s.apiBaseUrl}/projects/${b}/repos/${B}/raw/${xt}?at=${Oe}`}catch(b){throw new Error(`Incorrect URL: ${y}, ${b}`)}}function Gt(y){const s={};if(y.token)s.Authorization=`Bearer ${y.token}`;else if(y.username&&y.password){const b=r.from(`${y.username}:${y.password}`,"utf8");s.Authorization=`Basic ${b.toString("base64")}`}return{headers:s}}function an(y){const s=y.getString("host");let b=y.getOptionalString("baseUrl"),B=y.getOptionalString("cloneUrl"),Oe=y.getOptionalString("gitilesBaseUrl");const ot=y.getOptionalString("username"),At=y.getOptionalString("password");if(je(s)){if(b&&!ye(b))throw new Error(`Invalid Gerrit integration config, '${b}' is not a valid baseUrl`);if(B&&!ye(B))throw new Error(`Invalid Gerrit integration config, '${B}' is not a valid cloneUrl`);if(Oe&&!ye(Oe))throw new Error(`Invalid Gerrit integration config, '${Oe}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${s}' is not a valid host`);return b?b=(0,m.trimEnd)(b,"/"):b=`https://${s}`,Oe?Oe=(0,m.trimEnd)(Oe,"/"):Oe=`https://${s}`,B?B=(0,m.trimEnd)(B,"/"):B=b,{host:s,baseUrl:b,cloneUrl:B,gitilesBaseUrl:Oe,username:ot,password:At}}function fn(y){return y.map(an)}const on=")]}'";function ln(y,s){const b=new URL(y.gitilesBaseUrl),B=new URL(s),ot=B.pathname.substring(B.pathname.startsWith("/a/")?2:0).replace(b.pathname,"").split("/").filter(fr=>!!fr),At=ot.indexOf("+");if(At<=0)throw new Error(`Unable to parse project from url: ${s}`);const xt=(0,m.trimStart)(ot.slice(0,At).join("/"),"/"),Sn=ot.indexOf("heads");if(Sn<=0)throw new Error(`Unable to parse branch from url: ${s}`);const Bn=ot[Sn+1],Ln=ot.slice(Sn+2).join("/");return{branch:Bn,filePath:Ln===""?"/":Ln,project:xt}}function cn(y,s,b,B){return`${y.gitilesBaseUrl}/${s}/+/refs/heads/${b}/${(0,m.trimStart)(B,"/")}`}function On(y,s,b,B){const Oe=B==="/"||B===""?".tar.gz":`/${B}.tar.gz`;return`${Pn(y)}/${s}/+archive/refs/heads/${b}${Oe}`}function dn(y){return y.password?"/a/":"/"}function Pn(y){if(!y.baseUrl||!y.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(y.gitilesBaseUrl.startsWith(y.baseUrl))return y.gitilesBaseUrl.replace(y.baseUrl.concat("/"),y.baseUrl.concat(dn(y)));if(y.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return y.gitilesBaseUrl}function ce(y,s){const{branch:b,project:B}=ln(y,s);return`${y.baseUrl}${dn(y)}projects/${encodeURIComponent(B)}/branches/${b}`}function ae(y,s){const{project:b}=ln(y,s);return`${y.cloneUrl}${dn(y)}${b}`}function ke(y,s){const{branch:b,filePath:B,project:Oe}=ln(y,s);return`${y.baseUrl}${dn(y)}projects/${encodeURIComponent(Oe)}/branches/${b}/files/${encodeURIComponent(B)}/content`}function vt(y){return`${y.baseUrl}${dn(y)}projects/`}function jt(y){const s={};if(!y.password)return s;const b=r.from(`${y.username}:${y.password}`,"utf8");return s.Authorization=`Basic ${b.toString("base64")}`,{headers:s}}async function Vt(y){const s=await y.text();if(s.startsWith(on))try{return JSON.parse(s.slice(on.length))}catch(b){throw new Error(`Invalid response from Gerrit: ${s.slice(0,10)} - ${b}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${s.slice(0,10)}`)}var An=Object.defineProperty,Nn=(y,s,b)=>s in y?An(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,Fn=(y,s,b)=>(Nn(y,typeof s!="symbol"?s+"":s,b),b);const sr=class{constructor(s){this.integrationConfig=s}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){const{url:b,base:B,lineNumber:Oe}=s;let ot;if(b.startsWith("/")){const{branch:At,project:xt}=ln(this.config,B);return cn(this.config,xt,At,b)}return b?ot=new URL(b,B):ot=new URL(B),Oe&&(ot.hash=Oe.toString()),ot.toString()}resolveEditUrl(s){return s}};Fn(sr,"factory",({config:y})=>{var s;const b=fn((s=y.getOptionalConfigArray("integrations.gerrit"))!=null?s:[]);return X(b.map(B=>new sr(B)),B=>B.config.host)});let gr=sr;function Jn(y){const s=y.getString("host");let b=y.getOptionalString("baseUrl");const B=y.getOptionalString("username"),Oe=y.getOptionalString("password");if(!je(s))throw new Error(`Invalid Gitea integration config, '${s}' is not a valid host`);return b?b=(0,m.trimEnd)(b,"/"):b=`https://${s}`,{host:s,baseUrl:b,username:B,password:Oe}}function pr(y,s){var b;try{const B=(b=y.baseUrl)!=null?b:`https://${y.host}`,[Oe,ot,At,xt,Sn,Bn,...Ln]=s.replace(B,"").split("/"),fr=Ln.join("/").replace(/^\//,"");return`${B}/${ot}/${At}/_edit/${Bn}/${fr}`}catch(B){throw new Error(`Incorrect URL: ${s}, ${B}`)}}function Cr(y,s){var b;try{const B=(b=y.baseUrl)!=null?b:`https://${y.host}`,[Oe,ot,At,xt,Sn,Bn,...Ln]=s.replace(B,"").split("/"),fr=Ln.join("/").replace(/^\//,"");return`${B}/api/v1/repos/${ot}/${At}/contents/${fr}?ref=${Bn}`}catch(B){throw new Error(`Incorrect URL: ${s}, ${B}`)}}function xr(y){const s={},{username:b,password:B}=y;return B?(b?s.Authorization=`basic ${r.from(`${b}:${B}`).toString("base64")}`:s.Authorization=`token ${B}`,{headers:s}):s}var vr=Object.defineProperty,Lr=(y,s,b)=>s in y?vr(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,Ar=(y,s,b)=>(Lr(y,typeof s!="symbol"?s+"":s,b),b);const Mr=class{constructor(s){this.config=s}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(s){return Z(s)}resolveEditUrl(s){return pr(this.config,s)}};Ar(Mr,"factory",({config:y})=>{var s;const B=((s=y.getOptionalConfigArray("integrations.gitea"))!=null?s:[]).map(Oe=>Jn(Oe));return X(B.map(Oe=>new Mr(Oe)),Oe=>Oe.config.host)});let ie=Mr;const He="github.com",st="https://api.github.com",C="https://raw.githubusercontent.com";function _(y){var s,b;const B=(s=y.getOptionalString("host"))!=null?s:He;let Oe=y.getOptionalString("apiBaseUrl"),ot=y.getOptionalString("rawBaseUrl");const At=y.getOptionalString("token"),xt=(b=y.getOptionalConfigArray("apps"))==null?void 0:b.map(Sn=>({appId:Sn.getNumber("appId"),clientId:Sn.getString("clientId"),clientSecret:Sn.getString("clientSecret"),webhookSecret:Sn.getString("webhookSecret"),privateKey:Sn.getString("privateKey"),allowedInstallationOwners:Sn.getOptionalStringArray("allowedInstallationOwners")}));if(!je(B))throw new Error(`Invalid GitHub integration config, '${B}' is not a valid host`);return Oe?Oe=(0,m.trimEnd)(Oe,"/"):B===He&&(Oe=st),ot?ot=(0,m.trimEnd)(ot,"/"):B===He&&(ot=C),{host:B,apiBaseUrl:Oe,rawBaseUrl:ot,token:At,apps:xt}}function O(y){const s=y.map(_);return s.some(b=>b.host===He)||s.push({host:He,apiBaseUrl:st,rawBaseUrl:C}),s}function D(y,s,b){try{const{owner:B,name:Oe,ref:ot,filepathtype:At,filepath:xt}=parseGitUrl(y);if(!B||!Oe||!ot||At!=="blob"&&At!=="raw"&&At!=="tree")throw new Error("Invalid GitHub URL or file path");const Sn=xt.replace(/^\//,"");return _e(s,b)==="api"?`${s.apiBaseUrl}/repos/${B}/${Oe}/contents/${Sn}?ref=${ot}`:`${s.rawBaseUrl}/${B}/${Oe}/${ot}/${Sn}`}catch(B){throw new Error(`Incorrect URL: ${y}, ${B}`)}}function ue(y,s){const b={};return _e(y,s)==="api"&&(b.Accept="application/vnd.github.v3.raw"),s.token&&(b.Authorization=`token ${s.token}`),{headers:b}}function _e(y,s){return y.apiBaseUrl&&(s.token||!y.rawBaseUrl)?"api":"raw"}var oe=Object.defineProperty,Ce=(y,s,b)=>s in y?oe(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,Ne=(y,s,b)=>(Ce(y,typeof s!="symbol"?s+"":s,b),b);class We{constructor(){Ne(this,"tokenCache",new Map),Ne(this,"isExpired",s=>Xe.ou.local()>s)}async getOrCreateToken(s,b,B){let Oe=this.tokenCache.get(s);if((!Oe||this.isExpired(Oe.expiresAt))&&(Oe=await B(),Oe.expiresAt=Oe.expiresAt.minus({minutes:10}),this.tokenCache.set(s,Oe)),!this.appliesToRepo(Oe,b))throw new Error(`The Backstage GitHub application used in the ${s} organization does not have access to a repository with the name ${b}`);return{accessToken:Oe.token}}appliesToRepo(s,b){return b===void 0?!0:s.repositories!==void 0?s.repositories.includes(b):!0}}const pt={Accept:"application/vnd.github.machine-man-preview+json"};class nn{constructor(s,b){Ne(this,"appClient"),Ne(this,"baseUrl"),Ne(this,"baseAuthConfig"),Ne(this,"cache",new We),Ne(this,"allowedInstallationOwners"),this.allowedInstallationOwners=s.allowedInstallationOwners,this.baseUrl=b,this.baseAuthConfig={appId:s.appId,privateKey:s.privateKey.replace(/\\n/gm,`
`)},this.appClient=new tt.v({baseUrl:b,headers:pt,authStrategy:W.i,auth:this.baseAuthConfig})}async getInstallationCredentials(s,b){var B;return this.allowedInstallationOwners&&!((B=this.allowedInstallationOwners)!=null&&B.includes(s))?{accessToken:void 0}:this.cache.getOrCreateToken(s,b,async()=>{var Oe;const{installationId:ot,suspended:At}=await this.getInstallationData(s);if(At)throw new Error(`The GitHub application for ${s} is suspended`);const xt=await this.appClient.apps.createInstallationAccessToken({installation_id:ot,headers:pt});let Sn;if(xt.data.repository_selection==="selected"){const Bn=new tt.v({baseUrl:this.baseUrl,auth:xt.data.token}),Ln=await Bn.paginate(Bn.apps.listReposAccessibleToInstallation);Sn=((Oe=Ln.repositories)!=null?Oe:Ln).map(zr=>zr.name)}return{token:xt.data.token,expiresAt:Xe.ou.fromISO(xt.data.expires_at),repositories:Sn}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(s){const B=(await this.getInstallations()).find(ot=>{var At;return ot.account&&"login"in ot.account&&((At=ot.account.login)==null?void 0:At.toLocaleLowerCase("en-US"))===s.toLocaleLowerCase("en-US")});if(B)return{installationId:B.id,suspended:Boolean(B.suspended_by)};const Oe=new Error(`No app installation found for ${s} in ${this.baseAuthConfig.appId}`);throw Oe.name="NotFoundError",Oe}}class tn{constructor(s){Ne(this,"apps");var b,B;this.apps=(B=(b=s.apps)==null?void 0:b.map(Oe=>new nn(Oe,s.apiBaseUrl)))!=null?B:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(b=>b.getInstallations()))).flat():[]}async getAppToken(s,b){if(this.apps.length===0)return;const B=await Promise.all(this.apps.map(xt=>xt.getInstallationCredentials(s,b).then(Sn=>({credentials:Sn,error:void 0}),Sn=>({credentials:void 0,error:Sn})))),Oe=B.find(xt=>{var Sn;return(Sn=xt.credentials)==null?void 0:Sn.accessToken});if(Oe)return Oe.credentials.accessToken;const At=B.map(xt=>xt.error).find(xt=>(xt==null?void 0:xt.name)!=="NotFoundError");if(At)throw At}}const Ut=class{constructor(s,b){this.githubAppCredentialsMux=s,this.token=b}async getCredentials(s){const b=p()(s.url),B=b.owner||b.name,Oe=b.owner?b.name:void 0;let ot="app",At=await this.githubAppCredentialsMux.getAppToken(B,Oe);return At||(ot="token",At=this.token),{headers:At?{Authorization:`Bearer ${At}`}:void 0,token:At,type:ot}}};Ne(Ut,"create",y=>new Ut(new tn(y),y.token));let gn=null;class pn{constructor(s){this.providers=s}static fromIntegrations(s){const b=new Map;return s.github.list().forEach(B=>{const Oe=gn.create(B.config);b.set(B.config.host,Oe)}),new pn(b)}async getCredentials(s){const b=new URL(s.url),B=this.providers.get(b.host);if(!B)throw new Error(`There is no GitHub integration that matches ${s.url}. Please add a configuration for an integration.`);return B.getCredentials(s)}}var hn=Object.defineProperty,En=(y,s,b)=>s in y?hn(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,vn=(y,s,b)=>(En(y,typeof s!="symbol"?s+"":s,b),b);const Yn=class{constructor(s){this.integrationConfig=s}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){return In(Z(s),"tree")}resolveEditUrl(s){return In(s,"edit")}};vn(Yn,"factory",({config:y})=>{var s;const b=O((s=y.getOptionalConfigArray("integrations.github"))!=null?s:[]);return X(b.map(B=>new Yn(B)),B=>B.config.host)});let Vn=Yn;function In(y,s){return y.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(b,B,Oe,ot)=>`//${B}/${Oe}/${ot}/${s}/`)}var xn=Object.defineProperty,zn=(y,s,b)=>s in y?xn(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,sn=(y,s,b)=>(zn(y,typeof s!="symbol"?s+"":s,b),b);const Rn=null;class or extends Vn{constructor(s){super(s)}get config(){return super.config}}sn(or,"factory",Vn.factory);const er=null,yr=null,Br=null,_r="gitlab.com",Jr="https://gitlab.com/api/v4";function Fr(y){const s=y.getString("host");let b=y.getOptionalString("apiBaseUrl");const B=y.getOptionalString("token");let Oe=y.getOptionalString("baseUrl");if(b?b=(0,m.trimEnd)(b,"/"):s===_r&&(b=Jr),Oe?Oe=(0,m.trimEnd)(Oe,"/"):Oe=`https://${s}`,je(s)){if(!b||!ye(b))throw new Error(`Invalid GitLab integration config, '${b}' is not a valid apiBaseUrl`);if(!ye(Oe))throw new Error(`Invalid GitLab integration config, '${Oe}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${s}' is not a valid host`);return{host:s,token:B,apiBaseUrl:b,baseUrl:Oe}}function kr(y){const s=y.map(Fr);return s.some(b=>b.host===_r)||s.push({host:_r,apiBaseUrl:Jr,baseUrl:`https://${_r}`}),s}function Wr(y){let s="";return y.host!==_r&&(s=new URL(y.baseUrl).pathname),trimEnd(s,"/")}async function Xr(y,s){const b=await da(y,s);return na(y,b,s).toString()}function ta(y){const{token:s=""}=y;return{headers:{"PRIVATE-TOKEN":s}}}function na(y,s,b){try{const B=new URL(y),Oe=B.pathname.split("/blob/").slice(1).join("/blob/"),[ot,...At]=Oe.split("/"),xt=Wr(b);return B.pathname=[...xt?[xt]:[],"api/v4/projects",s,"repository/files",encodeURIComponent(decodeURIComponent(At.join("/"))),"raw"].join("/"),B.search=`?ref=${ot}`,B}catch(B){throw new Error(`Incorrect url: ${y}, ${B}`)}}async function da(y,s){const b=new URL(y);if(!b.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let B=b.pathname.split("/-/blob/")[0].split("/blob/")[0];const Oe=Wr(s);Oe&&(B=B.replace(Oe,""));const ot=new URL(`${b.origin}${Oe}/api/v4/projects/${encodeURIComponent(B.replace(/^\//,""))}`),At=await fetch(ot.toString(),ta(s)),xt=await At.json();if(!At.ok)throw new Error(`GitLab Error '${xt.error}', ${xt.error_description}`);return Number(xt.id)}catch(B){throw new Error(`Could not get GitLab project ID for: ${y}, ${B}`)}}var ra=Object.defineProperty,br=(y,s,b)=>s in y?ra(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,tr=(y,s,b)=>(br(y,typeof s!="symbol"?s+"":s,b),b);const rr=class{constructor(s){this.integrationConfig=s}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){return Z(s)}resolveEditUrl(s){return wr(s,"edit")}};tr(rr,"factory",({config:y})=>{var s;const b=kr((s=y.getOptionalConfigArray("integrations.gitlab"))!=null?s:[]);return X(b.map(B=>new rr(B)),B=>B.config.host)});let Kr=rr;function wr(y,s){return y.replace(/\/\-\/(blob|tree|edit)\//,`/-/${s}/`)}var Nr=Object.defineProperty,at=(y,s,b)=>s in y?Nr(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,pe=(y,s,b)=>(at(y,typeof s!="symbol"?s+"":s,b),b);const yt=class{constructor(s){this.token=s}async getCredentials(s){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};pe(yt,"create",y=>new yt(y.token));let _n=null;class Zn{constructor(s){this.providers=s}static fromIntegrations(s){const b=new Map;return s.gitlab.list().forEach(B=>{const Oe=_n.create(B.config);b.set(B.config.host,Oe)}),new Zn(b)}async getCredentials(s){const b=new URL(s.url),B=this.providers.get(b.host);if(!B)throw new Error(`There is no GitLab integration that matches ${s.url}. Please add a configuration for an integration.`);return B.getCredentials(s)}}function Xn(y){if(!y)return{};if(!y.has("clientEmail")&&!y.has("privateKey"))return{};const s=y.getString("privateKey").split("\\n").join(`
`);return{clientEmail:y.getString("clientEmail"),privateKey:s}}var dr=Object.defineProperty,$r=(y,s,b)=>s in y?dr(y,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[s]=b,Zr=(y,s,b)=>($r(y,typeof s!="symbol"?s+"":s,b),b);class lr{constructor(s){Zr(this,"byType"),this.byType=s}static fromConfig(s){return new lr({awsS3:F.factory({config:s}),azure:bt.factory({config:s}),bitbucket:ct.factory({config:s}),bitbucketCloud:Rt.factory({config:s}),bitbucketServer:Ve.factory({config:s}),gerrit:gr.factory({config:s}),github:Vn.factory({config:s}),gitlab:Kr.factory({config:s}),gitea:ie.factory({config:s})})}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(s=>s.list())}byUrl(s){let b=Object.values(this.byType).map(B=>B.byUrl(s)).filter(Boolean);if(b.length>1){const B=b.filter(Oe=>!(Oe instanceof ct));B.length!==0&&(b=B)}return b[0]}byHost(s){return Object.values(this.byType).map(b=>b.byHost(s)).find(Boolean)}resolveUrl(s){const b=this.byUrl(s.base);return b?b.resolveUrl(s):Z(s)}resolveEditUrl(s){const b=this.byUrl(s);return b?b.resolveEditUrl(s):s}}},71900:(Un,Ht,e)=>{"use strict";e.d(Ht,{Cy:()=>Se,DC:()=>U,OO:()=>Fe,RE:()=>Qe,XQ:()=>he,Yq:()=>Ft,ap:()=>qt,bM:()=>Xt,cm:()=>j,d1:()=>q,fP:()=>we,fe:()=>v,gC:()=>dt,hK:()=>Ge,hs:()=>k,nE:()=>Ye,x1:()=>x,zJ:()=>Q});var o=e(2784),p=e(73557),m=e(49558),Y=e(30705),V=e(30204),I=e(49477),W=e(64304),tt=e(78373),Xe=e(99688),r=e(13737),je=e(60364),ye=e(90436),X=e(79692),Z=e(95544),l=e(8629),ne=e(79249),re=e(38724),se=e(99152),ve=e(6487),be=e(49429),u=e(77277),F=e(34520),R=e(15933);const M=(0,Y.NT)({id:"api-docs"}),g=(0,Y.x8)({id:"register-component",optional:!0}),Ze=[I.C.columns.createTitleColumn({hidden:!0}),I.C.columns.createNameColumn({defaultKind:"API"}),I.C.columns.createSystemColumn(),I.C.columns.createOwnerColumn(),I.C.columns.createSpecTypeColumn(),I.C.columns.createSpecLifecycleColumn(),I.C.columns.createMetadataDescriptionColumn(),I.C.columns.createTagsColumn()],we=Ie=>{var Be;const{initiallySelectedFilter:ct="all",columns:Ot,actions:Ct}=Ie,Pt=`${(Be=(0,V.u)(V.p).getOptionalString("organization.name"))!=null?Be:"Backstage"} API Explorer`,$e=(0,Y.tg)(g);return o.createElement(m.g9,{themeId:"apis",title:"APIs",subtitle:Pt,pageTitleOverride:"APIs"},o.createElement(m.VY,null,o.createElement(m.yW,{title:""},o.createElement(m.XF,{title:"Register Existing API",to:$e==null?void 0:$e()}),o.createElement(m.qt,null,"All your APIs")),o.createElement(W.UO,null,o.createElement(W._i,null,o.createElement(W._i.Filters,null,o.createElement(W.tW,{initialFilter:"api",hidden:!0}),o.createElement(W.sL,null),o.createElement(W.EW,{initialFilter:ct}),o.createElement(W.dq,null),o.createElement(W.df,null),o.createElement(W.xE,null)),o.createElement(W._i.Content,null,o.createElement(I.C,{columns:Ot||Ze,actions:Ct}))))))},Qe=Ie=>(0,p.pC)()||o.createElement(we,{...Ie}),le=(0,V.c)({id:"plugin.api-docs.config"}),Le=Ie=>o.createElement(m.Oi,{text:Ie.definition,language:Ie.language,showCopyCodeButton:!0}),Se=()=>{var Ie;const{entity:Be}=(0,tt.u)(),ct=(0,V.u)(le),{getApiDefinitionWidget:Ot}=ct;if(!Be)return o.createElement(Xe.Z,{severity:"error"},"Could not fetch the API");const Ct=Ot(Be),$t=(Ie=Be.metadata.title)!=null?Ie:Be.metadata.name;return Ct?o.createElement(m.oZ,{title:$t},o.createElement(m.hB,{label:Ct.title,key:"widget"},Ct.component(Be.spec.definition)),o.createElement(m.hB,{label:"Raw",key:"raw"},o.createElement(Le,{definition:Be.spec.definition,language:Ct.rawLanguage||Be.spec.type}))):o.createElement(m.oZ,{title:$t,children:[o.createElement(m.hB,{label:Be.spec.type,key:"raw"},o.createElement(Le,{definition:Be.spec.definition,language:Be.spec.type}))]})},Ke=o.lazy(()=>Promise.all([e.e(1978),e.e(8847),e.e(4971)]).then(e.bind(e,64971)).then(Ie=>({default:Ie.AsyncApiDefinition}))),St=Ie=>o.createElement(o.Suspense,{fallback:o.createElement(m.Ex,null)},o.createElement(Ke,{...Ie})),L=o.lazy(()=>e.e(7851).then(e.bind(e,77851)).then(Ie=>({default:Ie.GraphQlDefinition}))),mt=Ie=>o.createElement(o.Suspense,{fallback:o.createElement(m.Ex,null)},o.createElement(L,{...Ie})),fe=o.lazy(()=>Promise.all([e.e(1978),e.e(7843)]).then(e.bind(e,97843)).then(Ie=>({default:Ie.OpenApiDefinition}))),Kt=Ie=>o.createElement(o.Suspense,{fallback:o.createElement(m.Ex,null)},o.createElement(fe,{...Ie})),Et=Ie=>{const Be=(0,je.Z)();return o.createElement(m.Oi,{customStyle:{backgroundColor:Be.palette.background.default},text:Ie.definition,language:"protobuf",showCopyCodeButton:!0})},It=Ie=>{const{definition:Be}=Ie,ct=(0,je.Z)();return o.createElement(m.Oi,{customStyle:{backgroundColor:ct.palette.background.default},text:Be,language:"typescript",showCopyCodeButton:!0})};function Ft(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:Ie=>o.createElement(Kt,{definition:Ie})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:Ie=>o.createElement(St,{definition:Ie})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:Ie=>o.createElement(mt,{definition:Ie})},{type:"grpc",title:"gRPC",component:Ie=>o.createElement(Et,{definition:Ie})},{type:"trpc",title:"tRPC",component:Ie=>o.createElement(It,{definition:Ie})}]}const Ye=Ie=>{const{apiEntity:Be}=Ie,Ot=(0,V.u)(le).getApiDefinitionWidget(Be),Ct=Ot?Ot.title:Be.spec.type;return o.createElement(ye.Z,{component:"span"},Ct)},_t=(0,X.Z)(Ie=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${Ie.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:Ie.palette.text.primary,wordBreak:"break-word",fontSize:Ie.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:Ie.spacing(1),color:Ie.palette.text.primary}}));function kt(Ie){const{children:Be,value:ct,index:Ot,...Ct}=Ie,$t=_t();return o.createElement("div",{role:"tabpanel",hidden:ct!==Ot,id:`vertical-tabpanel-${Ot}`,"aria-labelledby":`vertical-tab-${Ot}`,className:$t.tabContents,...Ct},ct===Ot&&o.createElement(Z.Z,{pl:3,pr:3},Be))}function Qt(Ie){return{id:`vertical-tab-${Ie}`,"aria-controls":`vertical-tabpanel-${Ie}`}}function Yt(Ie){var Be,ct,Ot;const{open:Ct,entity:$t,onClose:Pt}=Ie,[$e,qe]=o.useState(0),Ee=_t();(0,o.useEffect)(()=>{qe(0)},[Ct]);const de=(0,V.u)(le).getApiDefinitionWidget($t);let Ue=0,nt=0;return o.createElement(l.Z,{fullWidth:!0,maxWidth:"xl",open:Ct,onClose:Pt,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:Ee.fullHeightDialog}},o.createElement(ne.Z,{id:"api-definition-dialog-title",disableTypography:!0},o.createElement(ye.Z,{className:Ee.type},"API - ",(Be=de==null?void 0:de.title)!=null?Be:"Raw"),o.createElement(ye.Z,{className:Ee.title,variant:"h1"},(ct=$t.metadata.title)!=null?ct:$t.metadata.name)),o.createElement(re.Z,{dividers:!0,className:Ee.root},o.createElement(se.Z,{orientation:"vertical",variant:"scrollable",value:$e,onChange:(it,Rt)=>qe(Rt),"aria-label":"API definition options",className:Ee.tabs},de?o.createElement(ve.Z,{label:de.title,...Qt(Ue++)}):null,o.createElement(ve.Z,{label:"Raw",...Qt(Ue++)})),de?o.createElement(kt,{value:$e,index:nt++},de.component($t.spec.definition)):null,o.createElement(kt,{value:$e,index:nt++},o.createElement(Le,{definition:$t.spec.definition,language:(Ot=de==null?void 0:de.rawLanguage)!=null?Ot:$t.spec.type}))),o.createElement(be.Z,null,o.createElement(u.Z,{onClick:Pt,color:"primary"},"Close")))}function Nt(){return{title:"Type",field:"spec.type",render:Ie=>o.createElement(Ye,{apiEntity:Ie})}}const bt=({apiEntity:Ie})=>{const[Be,ct]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(r.Z,{"aria-label":"Toggle API Definition Dialog",onClick:()=>ct(!Be)},o.createElement(R.Z,null)),o.createElement(Yt,{entity:Ie,open:Be,onClose:()=>ct(!1)}))};function Tt(){return{title:"API Definition",render:Ie=>o.createElement(bt,{apiEntity:Ie})}}const wt=[W.u3.columns.createEntityRefColumn({defaultKind:"API"}),W.u3.columns.createSystemColumn(),W.u3.columns.createOwnerColumn(),Nt(),W.u3.columns.createSpecLifecycleColumn(),W.u3.columns.createMetadataDescriptionColumn(),Tt()],Xt=Ie=>{const{variant:Be="gridItem",columns:ct=wt}=Ie,{entity:Ot}=(0,tt.u)(),{entities:Ct,loading:$t,error:Pt}=(0,W.eK)(Ot,{type:F.Dg});return $t?o.createElement(m.rJ,{variant:Be,title:"Consumed APIs"},o.createElement(m.Ex,null)):Pt||!Ct?o.createElement(m.rJ,{variant:Be,title:"Consumed APIs"},o.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:o.createElement(m.Oi,{text:`${Pt}`,language:"text"})})):o.createElement(W.u3,{title:"Consumed APIs",variant:Be,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(ye.Z,{variant:"body1"},"This ",Ot.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),o.createElement(ye.Z,{variant:"body2"},o.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:ct,entities:Ct})},Re=[W.u3.columns.createEntityRefColumn({defaultKind:"API"}),W.u3.columns.createOwnerColumn(),Nt(),W.u3.columns.createSpecLifecycleColumn(),W.u3.columns.createMetadataDescriptionColumn()],j=Ie=>{const{variant:Be="gridItem",columns:ct=Re}=Ie,{entity:Ot}=(0,tt.u)(),{entities:Ct,loading:$t,error:Pt}=(0,W.eK)(Ot,{type:F.aS,kind:"API"});return $t?o.createElement(m.rJ,{variant:Be,title:"APIs"},o.createElement(m.Ex,null)):Pt||!Ct?o.createElement(m.rJ,{variant:Be,title:"APIs"},o.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:o.createElement(m.Oi,{text:`${Pt}`,language:"text"})})):o.createElement(W.u3,{title:"APIs",variant:Be,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(ye.Z,{variant:"body1"},"This ",Ot.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),o.createElement(ye.Z,{variant:"body2"},o.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:ct,entities:Ct})},v=Ie=>{const{variant:Be="gridItem",columns:ct=wt}=Ie,{entity:Ot}=(0,tt.u)(),{entities:Ct,loading:$t,error:Pt}=(0,W.eK)(Ot,{type:F.M_});return $t?o.createElement(m.rJ,{variant:Be,title:"Provided APIs"},o.createElement(m.Ex,null)):Pt||!Ct?o.createElement(m.rJ,{variant:Be,title:"Provided APIs"},o.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:o.createElement(m.Oi,{text:`${Pt}`,language:"text"})})):o.createElement(W.u3,{title:"Provided APIs",variant:Be,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(ye.Z,{variant:"body1"},"This ",Ot.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),o.createElement(ye.Z,{variant:"body2"},o.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:ct,entities:Ct})},k=Ie=>{const{variant:Be="gridItem"}=Ie,{entity:ct}=(0,tt.u)(),{entities:Ot,loading:Ct,error:$t}=(0,W.eK)(ct,{type:F.X9});return Ct?o.createElement(m.rJ,{variant:Be,title:"Consumers"},o.createElement(m.Ex,null)):$t||!Ot?o.createElement(m.rJ,{variant:Be,title:"Consumers"},o.createElement(m.GB,{severity:"error",title:"Could not load components",message:o.createElement(m.Oi,{text:`${$t}`,language:"text"})})):o.createElement(W.u3,{title:"Consumers",variant:Be,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(ye.Z,{variant:"body1"},"No component consumes this API."),o.createElement(ye.Z,{variant:"body2"},o.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:W.u3.componentEntityColumns,entities:Ot})},Q=Ie=>{const{variant:Be="gridItem"}=Ie,{entity:ct}=(0,tt.u)(),{entities:Ot,loading:Ct,error:$t}=(0,W.eK)(ct,{type:F.Zj});return Ct?o.createElement(m.rJ,{variant:Be,title:"Providers"},o.createElement(m.Ex,null)):$t||!Ot?o.createElement(m.rJ,{variant:Be,title:"Providers"},o.createElement(m.GB,{severity:"error",title:"Could not load components",message:o.createElement(m.Oi,{text:`${$t}`,language:"text"})})):o.createElement(W.u3,{title:"Providers",variant:Be,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(ye.Z,{variant:"body1"},"No component provides this API."),o.createElement(ye.Z,{variant:"body2"},o.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:W.u3.componentEntityColumns,entities:Ot})},q=(0,Y.rx)({id:"api-docs",routes:{root:M},apis:[(0,Y.ni)({api:le,deps:{},factory:()=>{const Ie=Ft();return{getApiDefinitionWidget:Be=>Ie.find(ct=>ct.type===Be.spec.type)}}})],externalRoutes:{registerApi:g}}),Ge=q.provide((0,Y.P4)({name:"ApiExplorerPage",component:()=>e.e(9591).then(e.bind(e,49591)).then(Ie=>Ie.ApiExplorerIndexPage),mountPoint:M})),U=q.provide((0,Y.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(9640).then(e.bind(e,49640)).then(Ie=>Ie.ApiDefinitionCard)}})),x=q.provide((0,Y.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(2190).then(e.bind(e,32190)).then(Ie=>Ie.ConsumedApisCard)}})),he=q.provide((0,Y.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(8229).then(e.bind(e,98229)).then(Ie=>Ie.ConsumingComponentsCard)}})),Fe=q.provide((0,Y.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(2190).then(e.bind(e,32190)).then(Ie=>Ie.ProvidedApisCard)}})),dt=q.provide((0,Y.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(8229).then(e.bind(e,98229)).then(Ie=>Ie.ProvidingComponentsCard)}})),qt=q.provide((0,Y.CO)({name:"EntityHasApisCard",component:{lazy:()=>e.e(2190).then(e.bind(e,32190)).then(Ie=>Ie.HasApisCard)}}))},75650:(Un,Ht,e)=>{"use strict";e.d(Ht,{j8:()=>V,x7:()=>Y});var o=e(5083);const p="catalog-entity",m=(0,o.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:p}),Y=(0,o.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),V=(0,o.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:p}),I=(0,o.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:p}),W=(0,o.J$)({name:"catalog.location.read",attributes:{action:"read"}}),tt=(0,o.J$)({name:"catalog.location.create",attributes:{action:"create"}}),Xe=(0,o.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),r=[m,Y,V,I,W,tt,Xe]},98487:(Un,Ht,e)=>{"use strict";e.d(Ht,{Az:()=>L,Ho:()=>Se,Nm:()=>M,_U:()=>Le,t0:()=>mt,vw:()=>R});var o=e(34520),p=e(49558),m=e(30705),Y=e(30204),V=e(79692),I=e(60364),W=e(4614),tt=e(72779),Xe=e.n(tt),r=e(2784),je=e(10368),ye=e(64304),X=e(39412),Z=e(48760),l=e(14162),ne=e.n(l),re=e(69294);const se=(0,je.Z)(fe=>({text:{fill:fe.palette.textContrast},secondary:{fill:fe.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function ve({edge:{relations:fe}}){const Kt=se();return r.createElement("text",{className:Kt.text,textAnchor:"middle"},fe.map((Et,It)=>r.createElement("tspan",{key:Et,className:Xe()(It>0&&Kt.secondary)},It>0&&r.createElement("tspan",null," / "),Et)))}function be({kind:fe,...Kt}){var Et;const Ft=(Et=(0,m.qD)().getSystemIcon(`kind:${fe.toLocaleLowerCase("en-US")}`))!=null?Et:X.Z;return r.createElement(Ft,{...Kt})}const u=(0,V.Z)(fe=>({node:{fill:fe.palette.grey[300],stroke:fe.palette.grey[300],"&.primary":{fill:fe.palette.primary.light,stroke:fe.palette.primary.light},"&.secondary":{fill:fe.palette.secondary.light,stroke:fe.palette.secondary.light}},text:{fill:fe.palette.getContrastText(fe.palette.grey[300]),"&.primary":{fill:fe.palette.primary.contrastText},"&.secondary":{fill:fe.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function F({node:{id:fe,entity:Kt,color:Et="default",focused:It,onClick:Ft}}){const Ye=u(),[_t,kt]=(0,r.useState)(0),[Qt,Yt]=(0,r.useState)(0),Nt=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{if(Nt.current){let{height:Ge,width:U}=Nt.current.getBBox();Ge=Math.round(Ge),U=Math.round(U),(Ge!==Qt||U!==_t)&&(kt(U),Yt(Ge))}},[_t,Qt]);const{kind:bt,metadata:{name:Tt,namespace:wt=o.zG,title:Xt}}=Kt,Re=10,j=Qt,v=bt?j+Re:0,k=v+_t+Re*2,Q=Qt+Re*2,q=Xt!=null?Xt:bt&&Tt&&wt?(0,ye.$3)({kind:bt,name:Tt,namespace:wt}):fe;return r.createElement("g",{onClick:Ft,className:Xe()(Ft&&Ye.clickable)},r.createElement("rect",{className:Xe()(Ye.node,Et==="primary"&&"primary",Et==="secondary"&&"secondary"),width:k,height:Q,rx:10}),bt&&r.createElement(be,{kind:bt,y:Re,x:Re,width:j,height:j,className:Xe()(Ye.text,It&&"focused",Et==="primary"&&"primary",Et==="secondary"&&"secondary")}),r.createElement("text",{ref:Nt,className:Xe()(Ye.text,It&&"focused",Et==="primary"&&"primary",Et==="secondary"&&"secondary"),y:Q/2,x:v+(_t+Re*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},q))}const R=[[o.$1,o.S4],[o.Dg,o.X9],[o.Zj,o.M_],[o.aS,o.cz],[o._b,o.wP],[o.KS,o.hr],[o.nP,o.w$]];var M=(fe=>(fe.TOP_BOTTOM="TB",fe.BOTTOM_TOP="BT",fe.LEFT_RIGHT="LR",fe.RIGHT_LEFT="RL",fe))(M||{});const g=ne()(10);function Ze(){const fe=(0,Y.u)(ye.Ah),Kt=(0,r.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[Et,It]=(0,r.useState)({}),Ft=(0,r.useCallback)(()=>{const{cachedEntities:Nt,requestedEntities:bt}=Kt.current,Tt={};bt.forEach(wt=>{const Xt=Nt.get(wt);Xt&&(Tt[wt]=Xt)}),It(Tt)},[Kt,It]),[Ye,_t]=(0,re.default)(async()=>{const{requestedEntities:Nt,outstandingEntities:bt,cachedEntities:Tt}=Kt.current;await Promise.all(Array.from(Nt).map(wt=>g(async()=>{if(Tt.has(wt))return;if(bt.has(wt)){await bt.get(wt);return}const Xt=fe.getEntityByRef(wt);bt.set(wt,Xt);try{const Re=await Xt;Re&&(Tt.set(wt,Re),Ft())}finally{bt.delete(wt)}})))},[Kt,Ft]),{loading:kt,error:Qt}=Ye,Yt=(0,r.useCallback)(Nt=>{const bt=new Set(Nt),{requestedEntities:Tt}=Kt.current;(bt.size!==Tt.size||Array.from(bt).some(wt=>!Tt.has(wt)))&&(Kt.current.requestedEntities=bt,_t(),Ft())},[Kt,_t,Ft]);return{entities:Et,loading:kt,error:Qt,requestEntities:Yt}}function we({rootEntityRefs:fe,filter:{maxDepth:Kt=Number.POSITIVE_INFINITY,relations:Et,kinds:It}={}}){const{entities:Ft,loading:Ye,error:_t,requestEntities:kt}=Ze();return(0,r.useEffect)(()=>{const Qt=new Set([...fe]),Yt=new Set;let Nt=[...fe],bt=0;for(;Nt.length>0&&(!isFinite(Kt)||bt<Kt);){const Tt=Nt;for(Nt=[];Tt.length>0;){const wt=Tt.shift(),Xt=Ft[wt];if(Yt.add(wt),Xt&&Xt.relations)for(const Re of Xt.relations)(!Et||Et.includes(Re.type))&&(!It||It.some(j=>Re.targetRef.startsWith(`${j.toLocaleLowerCase("en-US")}:`)))&&(Yt.has(Re.targetRef)||(Nt.push(Re.targetRef),Qt.add(Re.targetRef)))}++bt}kt([...Qt])},[Ft,fe,Kt,Et,It,kt]),{entities:Ft,loading:Ye,error:_t}}function Qe({rootEntityRefs:fe,maxDepth:Kt=Number.POSITIVE_INFINITY,unidirectional:Et=!0,mergeRelations:It=!0,kinds:Ft,relations:Ye,onNodeClick:_t,relationPairs:kt=R}){const[Qt,Yt]=(0,r.useState)({}),{entities:Nt,loading:bt,error:Tt}=we({rootEntityRefs:fe,filter:{maxDepth:Kt,kinds:Ft,relations:Ye}});return(0,Z.Z)(()=>{var wt;if(!Nt||Object.keys(Nt).length===0){Yt({});return}const Xt=Object.entries(Nt).map(([k,Q])=>{const q=fe.includes(k),Ge={id:k,entity:Q,focused:q,color:q?"secondary":"primary",kind:Q.kind,name:Q.metadata.name,namespace:Q.metadata.namespace||o.zG,title:Q.metadata.title,spec:Q.spec};return _t&&(Ge.onClick=U=>_t(Ge,U)),Ge}),Re=[],j=new Set,v=[...fe];for(;v.length>0;){const k=v.pop(),Q=Nt[k];j.add(k),Q&&((wt=Q==null?void 0:Q.relations)==null||wt.forEach(q=>{var Ge;if(Nt[q.targetRef]&&!(Ye&&!Ye.includes(q.type))&&!(Ft&&!Ft.some(U=>q.targetRef.startsWith(`${U.toLocaleLowerCase("en-US")}:`)))){if(!Et||!j.has(q.targetRef))if(It){const U=(Ge=kt.find(([he,Fe])=>he===q.type||Fe===q.type))!=null?Ge:[q.type],[x]=U;Re.push({from:x===q.type?k:q.targetRef,to:x===q.type?q.targetRef:k,relations:U,label:"visible"})}else Re.push({from:k,to:q.targetRef,relations:[q.type],label:"visible"});j.has(q.targetRef)||(v.push(q.targetRef),j.add(q.targetRef))}}))}Yt({nodes:Xt,edges:Re})},100,[Nt,fe,Ft,Ye,Et,It,_t,kt]),{loading:bt,error:Tt,...Qt}}const le=(0,V.Z)(fe=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${fe.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),Le=fe=>{const{rootEntityNames:Kt,maxDepth:Et=2,unidirectional:It=!0,mergeRelations:Ft=!0,kinds:Ye,relations:_t,direction:kt=M.LEFT_RIGHT,onNodeClick:Qt,relationPairs:Yt=R,className:Nt,zoom:bt="enabled",renderNode:Tt,renderLabel:wt,curve:Xt}=fe,Re=(0,I.Z)(),j=le(),v=(0,r.useMemo)(()=>(Array.isArray(Kt)?Kt:[Kt]).map(x=>(0,o.eE)(x)),[Kt]),k=(0,Y.u)(Y.s),{loading:Q,error:q,nodes:Ge,edges:U}=Qe({rootEntityRefs:v,maxDepth:Et,unidirectional:It,mergeRelations:Ft,kinds:Ye,relations:_t,onNodeClick:Qt,relationPairs:Yt});return(0,r.useEffect)(()=>{q&&k.post(q)},[k,q]),r.createElement("div",{className:Xe()(j.container,Nt)},Q&&r.createElement(W.Z,{className:j.progress}),Ge&&U&&r.createElement(p.mn,{nodes:Ge,edges:U,renderNode:Tt||F,renderLabel:wt||ve,direction:kt,className:j.graph,paddingX:Re.spacing(4),paddingY:Re.spacing(4),labelPosition:p.NX.LabelPosition.RIGHT,labelOffset:Re.spacing(1),zoom:bt,curve:Xt}))},Se=(0,m.NT)({id:"catalog-graph"}),Ke=(0,m.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),St=(0,m.rx)({id:"catalog-graph",routes:{catalogGraph:Se},externalRoutes:{catalogEntity:Ke}}),L=St.provide((0,m.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(9842).then(e.bind(e,59842)).then(fe=>fe.CatalogGraphCard)}})),mt=St.provide((0,m.P4)({name:"CatalogGraphPage",component:()=>e.e(1440).then(e.bind(e,71440)).then(fe=>fe.CatalogGraphPage),mountPoint:Se}))},84241:(Un,Ht,e)=>{"use strict";e.d(Ht,{C:()=>u,a:()=>Xe,c:()=>be,d:()=>je,g:()=>ye});var o=e(30204),p=e(30705),m=e(49462),Y=e(64304),V=e(89393),I=e(49431),W=e(82717),tt=e.n(W);const Xe=(0,o.c)({id:"plugin.catalog-import.service"}),r=(F,R)=>{const M=F.github.byUrl(R);if(!M)return;const{name:g,owner:Ze}=tt()(R);return{repo:g,owner:Ze,githubIntegrationConfig:M.config}};function je(F){const{ref:R,...M}=F;return{inputRef:R,...M}}function ye(F){var R;return(R=F.getOptionalString("catalog.import.entityFilename"))!=null?R:"catalog-info.yaml"}function X(F){var R;return(R=F.getOptionalString("catalog.import.pullRequestBranchName"))!=null?R:"backstage-integration"}var Z=Object.defineProperty,l=(F,R,M)=>R in F?Z(F,R,{enumerable:!0,configurable:!0,writable:!0,value:M}):F[R]=M,ne=(F,R,M)=>(l(F,typeof R!="symbol"?R+"":R,M),M);class re{constructor(R){ne(this,"discoveryApi"),ne(this,"identityApi"),ne(this,"scmAuthApi"),ne(this,"scmIntegrationsApi"),ne(this,"catalogApi"),ne(this,"configApi"),this.discoveryApi=R.discoveryApi,this.scmAuthApi=R.scmAuthApi,this.identityApi=R.identityApi,this.scmIntegrationsApi=R.scmIntegrationsApi,this.catalogApi=R.catalogApi,this.configApi=R.configApi}async analyzeUrl(R){var M;if(new URL(R).pathname.match(/\.ya?ml$/)||(M=new URL(R).searchParams.get("path"))!=null&&M.match(/.ya?ml$/)){const we=await this.catalogApi.addLocation({type:"url",target:R,dryRun:!0});return{type:"locations",locations:[{exists:we.exists,target:we.location.target,entities:we.entities.map(Qe=>{var le;return{kind:Qe.kind,namespace:(le=Qe.metadata.namespace)!=null?le:"default",name:Qe.metadata.name}})}]}}if(!r(this.scmIntegrationsApi,R)){const we=this.scmIntegrationsApi.byUrl(R),Qe=ye(this.configApi);throw we?new Error(`The ${we.title} integration only supports full URLs to ${Qe} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${Qe} file instead.`)}const Ze=await this.analyzeLocation({repo:R});if(Ze.existingEntityFiles.length>0){const we=Ze.existingEntityFiles.reduce((Qe,le)=>{var Le;return Qe[le.location.target]={target:le.location.target,exists:le.isRegistered,entities:[...le.location.target in Qe?Qe[le.location.target].entities:[],{name:le.entity.metadata.name,namespace:(Le=le.entity.metadata.namespace)!=null?Le:"default",kind:le.entity.kind}]},Qe},{});return{type:"locations",locations:Object.values(we)}}return{type:"repository",integrationType:"github",url:R,generatedEntities:Ze.generateEntities.map(we=>we.entity)}}async preparePullRequest(){var R;const M=(R=this.configApi.getOptionalString("app.title"))!=null?R:"Backstage",g=this.configApi.getString("app.baseUrl");return{title:`Add ${ye(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${M} software catalog](${g}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(R){const{repositoryUrl:M,fileContent:g,title:Ze,body:we}=R,Qe=r(this.scmIntegrationsApi,M);if(Qe)return await this.submitGitHubPrToRepo({...Qe,repositoryUrl:M,fileContent:g,title:Ze,body:we});throw new Error("unimplemented!")}async analyzeLocation(R){const{token:M}=await this.identityApi.getCredentials(),g=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...M&&{Authorization:`Bearer ${M}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:R.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(we=>{throw new Error(`Failed to generate entity definitions, ${we.message}`)});if(!g.ok)throw new Error(`Failed to generate entity definitions. Received http response ${g.status}: ${g.statusText}`);return await g.json()}async submitGitHubPrToRepo(R){const{owner:M,repo:g,title:Ze,body:we,fileContent:Qe,repositoryUrl:le,githubIntegrationConfig:Le}=R,{token:Se}=await this.scmAuthApi.getCredentials({url:le,additionalScope:{repoWrite:!0}}),Ke=new V.v({auth:Se,baseUrl:Le.apiBaseUrl}),St=X(this.configApi),L=ye(this.configApi),mt=await Ke.repos.get({owner:M,repo:g}).catch(Et=>{throw new Error(se("Couldn't fetch repo data",Et))}),fe=await Ke.git.getRef({owner:M,repo:g,ref:`heads/${mt.data.default_branch}`}).catch(Et=>{throw new Error(se("Couldn't fetch default branch data",Et))});return await Ke.git.createRef({owner:M,repo:g,ref:`refs/heads/${St}`,sha:fe.data.object.sha}).catch(Et=>{throw new Error(se(`Couldn't create a new branch with name '${St}'`,Et))}),await Ke.repos.createOrUpdateFileContents({owner:M,repo:g,path:L,message:Ze,content:I.DS.encode(Qe),branch:St}).catch(Et=>{throw new Error(se(`Couldn't create a commit with ${L} file added`,Et))}),{link:(await Ke.pulls.create({owner:M,repo:g,title:Ze,head:St,body:we,base:mt.data.default_branch}).catch(Et=>{throw new Error(se(`Couldn't create a pull request for ${St} branch`,Et))})).data.html_url,location:`https://${Le.host}/${M}/${g}/blob/${mt.data.default_branch}/${L}`}}}function se(F,R){return`${F}, received http response status code ${R.status}: ${R.message}`}const ve=(0,p.NT)({id:"catalog-import"}),be=(0,p.rx)({id:"catalog-import",apis:[(0,p.ni)({api:Xe,deps:{discoveryApi:o.q,scmAuthApi:m.Om,identityApi:o.v,scmIntegrationsApi:m.q3,catalogApi:Y.Ah,configApi:o.p},factory:({discoveryApi:F,scmAuthApi:R,identityApi:M,scmIntegrationsApi:g,catalogApi:Ze,configApi:we})=>new re({discoveryApi:F,scmAuthApi:R,scmIntegrationsApi:g,identityApi:M,catalogApi:Ze,configApi:we})})],routes:{importPage:ve}}),u=be.provide((0,p.P4)({name:"CatalogImportPage",component:()=>e.e(3591).then(e.bind(e,23591)).then(F=>F.ImportPage),mountPoint:ve}))},78373:(Un,Ht,e)=>{"use strict";e.d(Ht,{A:()=>W,a:()=>r,g:()=>V,u:()=>Xe});var o=e(34520),p=e(30705),m=e(18473),Y=e(2784);function V(je,ye,X){var Z;let l=((Z=je==null?void 0:je.relations)==null?void 0:Z.filter(ne=>ne.type===ye).map(ne=>(0,o.of)(ne.targetRef)))||[];return X!=null&&X.kind&&(l=l.filter(ne=>ne.kind.toLocaleLowerCase("en-US")===X.kind.toLocaleLowerCase("en-US"))),l}const I=(0,m.CT)("entity-context"),W=je=>{const{children:ye,entity:X,loading:Z,error:l,refresh:ne}=je,re={entity:X,loading:Z,error:l,refresh:ne};return Y.createElement(I.Provider,{value:(0,m.EI)({1:re})},Y.createElement(p.fC,{attributes:{...X?{entityRef:(0,o.eE)(X)}:void 0}},ye))},tt=je=>React.createElement(W,{entity:je.entity,loading:!Boolean(je.entity),error:void 0,refresh:void 0,children:je.children});function Xe(){const je=(0,m.Vt)("entity-context");if(!je)throw new Error("Entity context is not available");const ye=je.atVersion(1);if(!ye)throw new Error("EntityContext v1 not available");if(!ye.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:ye.entity}}function r(){const je=(0,m.Vt)("entity-context");if(!je)throw new Error("Entity context is not available");const ye=je.atVersion(1);if(!ye)throw new Error("EntityContext v1 not available");const{entity:X,loading:Z,error:l,refresh:ne}=ye;return{entity:X,loading:Z,error:l,refresh:ne}}},64304:(Un,Ht,e)=>{"use strict";e.d(Ht,{_i:()=>Nn,co:()=>rr,tW:()=>En,df:()=>or,UO:()=>_e,ph:()=>Oa,dq:()=>br,nl:()=>oa,dx:()=>Nr,rI:()=>pe,nN:()=>y,u3:()=>ot,xE:()=>xt,sL:()=>Sn,LH:()=>Ln,U_:()=>Ya,sk:()=>La,pp:()=>Da,EW:()=>Ja,Ah:()=>Gt,n8:()=>ln,XI:()=>an,wi:()=>Kr,CV:()=>Jn,$3:()=>er,p3:()=>ce,wp:()=>oe,ZW:()=>Ut,Uh:()=>Ce,eK:()=>Ne,CR:()=>pt});var o=e(30204),p=e(30705),m=e(34520),Y=e(43642),V=e(77224),I=e(15933),W=e(86737),tt=e(78898),Xe=e(4989),r=e(44407),je=e(84219),ye=e(98685),X=e(72579),Z=e.n(X),l=e(2784),ne=e(82394),re=e(41156),se=e(60364),ve=e(77277),be=e(4190),u=e(95544),F=e(90436),R=e(60905),M=e(21324),g=e(5806),Ze=e(79692),we=e(86619),Qe=e(80030),le=e(15223),Le=e(42494),Se=e(29611),Ke=e(50581),St=e(61837),L=e(15459),mt=e(55999),fe=e(49378),Kt=e(54506),Et=e(94339),It=e(24579),Ft=e(38402),Ye=e(86136),_t=e(11776),kt=e(9520),Qt=e(8629),Yt=e(79249),Nt=e(38724),bt=e(99152),Tt=e(6487),wt=e(49429),Xt=e(85256),Re=e(12231),j=e(36444),v=e(49558),k=e(78373),Q=e(76635),q=e(19126),Ge=e.n(q),U=e(73557),x=e(69294),he=e(48760),Fe=e(90736),dt=e(64279),qt=e(18149),Ie=e.n(qt),Be=e(829),ct=e.n(Be),Ot=e(72164),Ct=e(38016),$t=e(88013),Pt=e(99688),$e=e(19996),qe=e(25505),Ee=e(72779),G=e.n(Ee);function de(E){(0,l.useEffect)(()=>{E()},[])}function Ue(E){const S=(0,l.useRef)(E);return S.current=E,(0,l.useMemo)(()=>Object.freeze({get current(){return S.current}}),[])}function nt(E){const S=Ue(E);(0,l.useEffect)(()=>()=>{S.current()},[])}function it(E,S,T,N=0){const me=(0,l.useRef)(),Te=(0,l.useRef)(),Je=(0,l.useRef)(),ze=()=>{me.current&&(clearTimeout(me.current),me.current=void 0),Te.current&&(clearTimeout(Te.current),Te.current=void 0)};return nt(ze),(0,l.useMemo)(()=>{const ht=()=>{if(!Je.current)return;const Bt=Je.current;Je.current=void 0,E.apply(Bt.this,Bt.args),ze()},Mt=function(...Bt){me.current&&clearTimeout(me.current),Je.current={args:Bt,this:this},me.current=setTimeout(ht,T),N>0&&!Te.current&&(Te.current=setTimeout(ht,N))};return Object.defineProperties(Mt,{length:{value:E.length},name:{value:`${E.name||"anonymous"}__debounced__${T}`}}),Mt},[T,N,...S])}function Rt(E,S,T,N=0){(0,l.useEffect)(it(E,S,T,N),S)}var en=e(62367),rn=e(18473),Ae=e(33375),De=e(21853),w=e(11640),H=e(28347),te=e(39412),ut=e(27685),K=e(3440),ee=e.n(K),Ve=e(10921),lt=e(32272),Lt=e(47603),zt=e(38408);const Gt=(0,o.c)({id:"plugin.catalog.service"}),an=(0,o.c)({id:"plugin.catalog.entity-presentation"}),fn=W.Z,on={api:I.Z,component:r.Z,system:V.Z,domain:Y.Z,location:Xe.Z,user:ye.Z,group:je.Z,template:tt.Z};function ln(E,S){const{kind:T,namespace:N,name:me,title:Te,description:Je,displayName:ze,type:ht}=cn(E),Mt=T&&on[T.toLocaleLowerCase("en-US")]||fn,Bt=(0,m.eE)({kind:T||"unknown",namespace:N||m.zG,name:me||"unknown"}),mn=On({kind:T,namespace:N,name:me,context:S}),Mn=[ze,Te,mn].find(bn=>bn&&typeof bn=="string"),yn=[Mn!==Bt?Bt:void 0,ht,Je].filter(bn=>bn&&typeof bn=="string").join(" | ");return{entityRef:Bt,primaryTitle:Mn,secondaryTitle:yn||void 0,Icon:Mt}}function cn(E){if(typeof E=="string"){let S=E.indexOf(":");const T=E.indexOf("/");T!==-1&&T<S&&(S=-1);const N=S===-1?void 0:E.slice(0,S),me=T===-1?void 0:E.slice(S+1,T),Te=E.slice(Math.max(S+1,T+1));return{kind:N,namespace:me,name:Te}}if(typeof E=="object"&&E!==null){const S=[Z()(E,"kind")].find(ht=>ht&&typeof ht=="string"),T=[Z()(E,"metadata.namespace"),Z()(E,"namespace")].find(ht=>ht&&typeof ht=="string"),N=[Z()(E,"metadata.name"),Z()(E,"name")].find(ht=>ht&&typeof ht=="string"),me=[Z()(E,"metadata.title")].find(ht=>ht&&typeof ht=="string"),Te=[Z()(E,"metadata.description")].find(ht=>ht&&typeof ht=="string"),Je=[Z()(E,"spec.profile.displayName")].find(ht=>ht&&typeof ht=="string"),ze=[Z()(E,"spec.type")].find(ht=>ht&&typeof ht=="string");return{kind:S,namespace:T,name:N,title:me,description:Te,displayName:Je,type:ze}}return{}}function On(E){var S,T,N,me,Te;const Je=((S=E.kind)==null?void 0:S.toLocaleLowerCase("en-US"))||"unknown",ze=E.namespace||m.zG,ht=E.name||"unknown",Mt=(N=(T=E.context)==null?void 0:T.defaultKind)==null?void 0:N.toLocaleLowerCase("en-US"),Bt=(Te=(me=E.context)==null?void 0:me.defaultNamespace)==null?void 0:Te.toLocaleLowerCase("en-US");let mn=ht;return(Bt&&ze.toLocaleLowerCase("en-US")!==Bt||ze!==m.zG)&&(mn=`${ze}/${mn}`),Mt&&Je.toLocaleLowerCase("en-US")!==Mt&&(mn=`${Je}:${mn}`),mn}function dn(E,S,T){const[N,me]=(0,l.useState)(E);return(0,l.useEffect)(()=>{me(E);const Te=S==null?void 0:S.subscribe({next:Je=>{me(Je)},complete:()=>{Te==null||Te.unsubscribe()}});return()=>{Te==null||Te.unsubscribe()}},T),N}function Pn(E,S){const N=(0,o.b)().get(an),me=[N,JSON.stringify(E),JSON.stringify(S||null)],Te=(0,l.useMemo)(()=>N?N.forEntity(typeof E=="string"||"metadata"in E?E:(0,m.eE)(E),S):{snapshot:ln(E,S)},me);return dn(Te.snapshot,Te.update$,[Te])}const ce=(0,o.c)({id:"catalog-react.starred-entities"});var ae=Object.defineProperty,ke=(E,S,T)=>S in E?ae(E,S,{enumerable:!0,configurable:!0,writable:!0,value:T}):E[S]=T,vt=(E,S,T)=>(ke(E,typeof S!="symbol"?S+"":S,T),T);class jt{constructor(){vt(this,"starredEntities",new Set),vt(this,"subscribers",new Set),vt(this,"observable",new ObservableImpl(S=>(S.next(new Set(this.starredEntities)),this.subscribers.add(S),()=>{this.subscribers.delete(S)})))}async toggleStarred(S){this.starredEntities.delete(S)||this.starredEntities.add(S);for(const T of this.subscribers)T.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const Vt=E=>{var S,T;const N=(0,re.Z)(ze=>{var ht,Mt;return ze.breakpoints.down((Mt=(ht=E.options)==null?void 0:ht.drawerBreakpoint)!=null?Mt:"md")}),me=(0,se.Z)(),[Te,Je]=(0,l.useState)(!1);return N?l.createElement(l.Fragment,null,l.createElement(ve.Z,{style:{marginTop:me.spacing(1),marginLeft:me.spacing(1)},onClick:()=>Je(!0),startIcon:l.createElement(j.Z,null)},"Filters"),l.createElement(be.ZP,{open:Te,onClose:()=>Je(!1),anchor:(T=(S=E.options)==null?void 0:S.drawerAnchor)!=null?T:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},l.createElement(u.Z,{m:2},l.createElement(F.Z,{variant:"h6",component:"h2",style:{marginBottom:me.spacing(1)}},"Filters"),E.children))):l.createElement(R.Z,{item:!0,lg:2},E.children)},An=E=>l.createElement(R.Z,{item:!0,xs:12,lg:10},E.children),Nn=E=>l.createElement(R.Z,{container:!0,style:{position:"relative"}},E.children);Nn.Filters=Vt,Nn.Content=An;function Fn(E){return E.reduce((S,T)=>({...S,...T.getCatalogFilters?T.getCatalogFilters():{}}),{})}function sr(E){const S={};return E.forEach(T=>{var N;T instanceof Ar||T instanceof ie||T instanceof He||T instanceof st||T instanceof C||T instanceof O||T instanceof Mr||T instanceof _||Object.assign(S,((N=T.getCatalogFilters)==null?void 0:N.call(T))||{})}),S}function gr(E){return S=>E.every(T=>!T.filterEntity||T.filterEntity(S))}function Jn(E,S){var T;const N=(T=E.metadata.annotations)==null?void 0:T[m.M6];if(N)try{const me=(0,m.Ou)(N),Te=S.byUrl(me.target);return{locationTargetUrl:me.target,integrationType:Te==null?void 0:Te.type}}catch{return}}var pr=Object.defineProperty,Cr=(E,S,T)=>S in E?pr(E,S,{enumerable:!0,configurable:!0,writable:!0,value:T}):E[S]=T,xr=(E,S,T)=>(Cr(E,typeof S!="symbol"?S+"":S,T),T);class vr{constructor(S){this.value=S}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class Lr{constructor(S){this.value=S}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class Ar{constructor(S){this.values=S}filterEntity(S){return this.values.every(T=>{var N;return((N=S.metadata.tags)!=null?N:[]).includes(T)})}getCatalogFilters(){return{"metadata.tags":this.values}}toQueryValue(){return this.values}}class Mr{constructor(S){this.value=S}filterEntity(S){const T=this.toUpperArray(this.value.split(/\s/)),N=this.toUpperArray([S.metadata.tags]),me=this.toUpperArray([S.metadata.name,S.metadata.title]);for(const Te of T)if(N.every(Je=>Je!==Te)&&me.every(Je=>!Je.includes(Te)))return!1;return!0}toUpperArray(S){return S.flat().filter(T=>Boolean(T)).map(T=>T.toLocaleUpperCase("en-US"))}}class ie{constructor(S){xr(this,"values"),this.values=S.reduce((T,N)=>{try{return T.push((0,m.eE)((0,m.of)(N,{defaultKind:"Group"}))),T}catch{return T}},[])}getCatalogFilters(){return{"relations.ownedBy":this.values}}filterEntity(S){return this.values.some(T=>(0,k.g)(S,m.S4).some(N=>(0,m.eE)(N)===T))}toQueryValue(){return this.values}}class He{constructor(S){this.values=S}getCatalogFilters(){return{"spec.lifecycle":this.values}}filterEntity(S){return this.values.some(T=>{var N;return((N=S.spec)==null?void 0:N.lifecycle)===T})}toQueryValue(){return this.values}}class st{constructor(S){this.values=S}getCatalogFilters(){return{"metadata.namespace":this.values}}filterEntity(S){return this.values.some(T=>S.metadata.namespace===T)}toQueryValue(){return this.values}}class C{constructor(S,T){this.value=S,this.refs=T}static owned(S){return new C("owned",S)}static all(){return new C("all")}static starred(S){return new C("starred",S)}getCatalogFilters(){var S,T,N;return this.value==="owned"?{"relations.ownedBy":(S=this.refs)!=null?S:[]}:this.value==="starred"?{"metadata.name":(N=(T=this.refs)==null?void 0:T.map(me=>(0,m.of)(me).name))!=null?N:[]}:{}}filterEntity(S){var T,N,me,Te;if(this.value==="starred")return(N=(T=this.refs)==null?void 0:T.includes((0,m.eE)(S)))!=null?N:!0;if(this.value==="owned"){const Je=(0,k.g)(S,m.S4);return(Te=(me=this.refs)==null?void 0:me.some(ze=>Je.some(ht=>(0,m.eE)(ht)===ze)))!=null?Te:!1}return!0}toQueryValue(){return this.value}}class _{constructor(S,T,N){this.value=S,this.isOwnedEntity=T,this.isStarredEntity=N}filterEntity(S){switch(this.value){case"owned":return this.isOwnedEntity(S);case"starred":return this.isStarredEntity(S);default:return!0}}toQueryValue(){return this.value}}class O{constructor(S){this.value=S}getCatalogFilters(){return this.value?{"metadata.annotations.backstage.io/orphan":String(this.value)}:{}}filterEntity(S){var T;const N=(T=S.metadata.annotations)==null?void 0:T["backstage.io/orphan"];return N!==void 0&&this.value.toString()===N}}class D{constructor(S){this.value=S}filterEntity(S){var T,N;const me=((N=(T=S==null?void 0:S.status)==null?void 0:T.items)==null?void 0:N.length)>0;return me!==void 0&&this.value===me}}const ue=(0,l.createContext)(void 0),_e=E=>{const S=(0,Fe.default)(),T=(0,o.u)(Gt),[N,me]=(0,l.useState)({}),Te=(0,U.TH)(),Je=(0,l.useMemo)(()=>{var bn;return(bn=Ge().parse(Te.search,{ignoreQueryPrefix:!0}).filters)!=null?bn:{}},[Te]),[ze,ht]=(0,l.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:Mt,error:Bt},mn]=(0,x.default)(async()=>{var bn;const Wn=(0,Q.compact)(Object.values(N)),Cn=gr(Wn),wn=sr(Wn),hr=sr((0,Q.compact)(Object.values(ze.appliedFilters))),Gn=Object.keys(N).reduce((Hn,qn)=>{const cr=N[qn];return cr!=null&&cr.toQueryValue&&(Hn[qn]=cr.toQueryValue()),Hn},{});if((0,Q.isEqual)(hr,wn))ht({appliedFilters:N,backendEntities:ze.backendEntities,entities:ze.backendEntities.filter(Cn)});else{const Hn=await T.getEntities({filter:wn});ht({appliedFilters:N,backendEntities:Hn.items,entities:Hn.items.filter(Cn)})}if(S()){const Hn=Ge().parse(Te.search,{ignoreQueryPrefix:!0}),qn=Ge().stringify({...Hn,filters:Gn},{addQueryPrefix:!0,arrayFormat:"repeat"}),cr=`${window.location.pathname}${qn}`;(bn=window.history)==null||bn.replaceState(null,document.title,cr)}},[T,Je,N,ze],{loading:!0});(0,he.Z)(mn,10,[N]);const Mn=(0,l.useCallback)(bn=>{me(Wn=>{const Cn=typeof bn=="function"?bn(Wn):bn;return{...Wn,...Cn}})},[]),yn=(0,l.useMemo)(()=>({filters:ze.appliedFilters,entities:ze.entities,backendEntities:ze.backendEntities,updateFilters:Mn,queryParameters:Je,loading:Mt,error:Bt}),[ze,Mn,Je,Mt,Bt]);return l.createElement(ue.Provider,{value:yn},E.children)};function oe(){const E=(0,l.useContext)(ue);if(!E)throw new Error("useEntityList must be used within EntityListProvider");return E}function Ce(){var E;const S=(0,o.u)(Gt),{filters:{kind:T,type:N},queryParameters:{type:me},updateFilters:Te}=oe(),Je=(0,l.useMemo)(()=>[me].flat().filter(Boolean),[me]),[ze,ht]=(0,l.useState)(Je.length?Je:(E=N==null?void 0:N.getTypes())!=null?E:[]);(0,l.useEffect)(()=>{Je.length&&ht(Je)},[Je]);const[Mt,Bt]=(0,l.useState)([]),mn=(0,l.useMemo)(()=>T==null?void 0:T.value,[T]),{error:Mn,loading:yn,value:bn}=(0,dt.default)(async()=>mn?await S.getEntityFacets({filter:{kind:mn},facets:["spec.type"]}).then(wn=>wn.facets["spec.type"]||[]):[],[mn,S]),Wn=(0,l.useRef)(bn);return(0,l.useEffect)(()=>{const Cn=Wn.current;if(Wn.current=bn,yn||!mn||Cn===bn||!bn)return;const wn=[...new Set(ct()(bn,Gn=>-Gn.count).map(Gn=>Gn.value.toLocaleLowerCase("en-US")))];Bt(wn);const hr=ze.filter(Gn=>wn.includes(Gn));Ie()(ze,hr)||ht(hr)},[yn,mn,ze,ht,bn]),(0,l.useEffect)(()=>{Te({type:ze.length?new Lr(ze):void 0})},[ze,Te]),{loading:yn,error:Mn,availableTypes:Mt,selectedTypes:ze,setSelectedTypes:ht}}function Ne(E,S){var T,N;const me=(T=S==null?void 0:S.type)==null?void 0:T.toLocaleLowerCase("en-US"),Te=(N=S==null?void 0:S.kind)==null?void 0:N.toLocaleLowerCase("en-US"),Je=(0,o.u)(Gt),{loading:ze,value:ht,error:Mt}=(0,dt.default)(async()=>{var Bt;const mn=(Bt=E.relations)==null?void 0:Bt.filter(yn=>(!me||yn.type.toLocaleLowerCase("en-US")===me)&&(!Te||(0,m.of)(yn.targetRef).kind===Te));if(!(mn!=null&&mn.length))return[];const{items:Mn}=await Je.getEntitiesByRefs({entityRefs:mn.map(yn=>yn.targetRef)});return Mn.filter(yn=>Boolean(yn))},[E,me,Te]);return{entities:ht,loading:ze,error:Mt}}function We(E){return typeof E=="string"?E:(0,m.eE)(E)}function pt(){const E=(0,o.u)(ce),S=(0,Ot.Z)((0,l.useMemo)(()=>E.starredEntitie$(),[E]),new Set),T=(0,l.useCallback)(me=>S.has(We(me)),[S]),N=(0,l.useCallback)(me=>E.toggleStarred(We(me)).then(),[E]);return{starredEntities:S,toggleStarredEntity:N,isStarredEntity:T}}function nn(E){return typeof E=="string"?E:(0,m.eE)(E)}function tn(E){const S=(0,o.u)(ce),[T,N]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{const Te=S.starredEntitie$().subscribe({next(Je){N(Je.has(nn(E)))}});return()=>{Te.unsubscribe()}},[E,S]),{toggleStarredEntity:(0,l.useCallback)(()=>S.toggleStarred(nn(E)).then(),[E,S]),isStarredEntity:T}}function Ut(){const E=(0,o.u)(o.v),{loading:S,value:T}=(0,dt.default)(async()=>{const{ownershipEntityRefs:me}=await E.getBackstageIdentity();return me},[]),N=(0,l.useMemo)(()=>{const me=new Set(T!=null?T:[]);return Te=>{const Je=(0,k.g)(Te,m.S4).map(m.eE);for(const ze of Je)if(me.has(ze))return!0;return!1}},[T]);return{loading:S,isOwnedEntity:N}}function gn(){const E=(0,o.u)(Gt),{error:S,loading:T,value:N}=(0,dt.default)(async()=>await E.getEntityFacets({facets:["kind"]}).then(Te=>{var Je;return((Je=Te.facets.kind)==null?void 0:Je.map(ze=>ze.value).sort())||[]}),[E]);return{loading:T,error:S,allKinds:N!=null?N:[]}}function pn(E,S,T){let N=E;return S&&(N=N.filter(Te=>S.some(Je=>Je.toLocaleLowerCase("en-US")===Te.toLocaleLowerCase("en-US")))),T&&!E.some(Te=>Te.toLocaleLowerCase("en-US")===T.toLocaleLowerCase("en-US"))&&(N=N.concat([T])),N.sort().reduce((Te,Je)=>(Te[Je.toLocaleLowerCase("en-US")]=Je,Te),{})}function hn(E){var S,T;const{filters:N,queryParameters:{kind:me},updateFilters:Te}=oe(),Je=(0,l.useMemo)(()=>[me].flat()[0],[me]),[ze,ht]=(0,l.useState)((T=Je!=null?Je:(S=N.kind)==null?void 0:S.value)!=null?T:E.initialFilter);(0,l.useEffect)(()=>{Je&&ht(Je)},[Je]),(0,l.useEffect)(()=>{var Mn,yn;(Mn=N.kind)!=null&&Mn.value&&ht((yn=N.kind)==null?void 0:yn.value)},[N.kind]),(0,l.useEffect)(()=>{Te({kind:ze?new vr(ze):void 0})},[ze,Te]);const{allKinds:Mt,loading:Bt,error:mn}=gn();return{loading:Bt,error:mn,allKinds:Mt!=null?Mt:[],selectedKind:ze,setSelectedKind:ht}}const En=E=>{const{allowedKinds:S,hidden:T,initialFilter:N="component"}=E,me=(0,o.u)(o.l),{error:Te,allKinds:Je,selectedKind:ze,setSelectedKind:ht}=hn({initialFilter:N});if((0,l.useEffect)(()=>{Te&&me.post({message:"Failed to load entity kinds",severity:"error"})},[Te,me]),Te)return null;const Mt=pn(Je,S,ze),Bt=Object.keys(Mt).map(mn=>({value:mn,label:Mt[mn]}));return T?null:l.createElement(u.Z,{pb:1,pt:1},l.createElement(v.Ph,{label:"Kind",items:Bt,selected:ze.toLocaleLowerCase("en-US"),onChange:mn=>ht(String(mn))}))},vn=l.createElement(qe.Z,{fontSize:"small"}),Yn=l.createElement($e.Z,{fontSize:"small"});function Vn({selected:E}){return l.createElement(M.Z,{icon:vn,checkedIcon:Yn,checked:E})}const In=(0,l.memo)(E=>{const{selected:S,value:T,availableOptions:N,showCounts:me}=E,Te=me?`${T} (${N==null?void 0:N[T]})`:T;return l.createElement(g.Z,{control:l.createElement(Vn,{selected:S}),label:Te,onClick:Je=>Je.preventDefault()})}),xn=(0,Ze.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function zn(E){const S=xn();return l.createElement(we.Z,{variant:"outlined",...E,className:G()(S.input,E.className)})}function sn(E){var S,T;const{label:N,name:me,path:Te,showCounts:Je,Filter:ze,InputProps:ht,initialSelectedOptions:Mt=[]}=E,{updateFilters:Bt,filters:mn,queryParameters:{[me]:Mn}}=oe(),yn=(0,o.u)(Gt),{value:bn}=(0,dt.default)(async()=>{var qn;const cr=Te,{facets:Ma}=await yn.getEntityFacets({facets:[cr],filter:(qn=mn.kind)==null?void 0:qn.getCatalogFilters()});return Object.fromEntries(Ma[cr].map(({value:Ba,count:jr})=>[Ba,jr]))},[mn.kind]),Wn=(0,l.useMemo)(()=>[Mn].flat().filter(Boolean),[Mn]),[Cn,wn]=(0,l.useState)(Wn.length?Wn:(T=(S=mn[me])==null?void 0:S.values)!=null?T:Mt);(0,l.useEffect)(()=>{Wn.length&&wn(Wn)},[Wn]);const hr=Object.keys(bn!=null?bn:{}),Gn=Cn.length&&hr.length;(0,l.useEffect)(()=>{Bt({[me]:Gn?new ze(Cn):void 0})},[me,Gn,Cn,ze,Bt]);const Hn=mn[me];return Hn&&typeof Hn=="object"&&!("values"in Hn)||!hr.length||hr.length<=1?null:l.createElement(u.Z,{pb:1,pt:1},l.createElement(F.Z,{variant:"button",component:"label"},N,l.createElement($t.ZP,{multiple:!0,disableCloseOnSelect:!0,options:hr,value:Cn,onChange:(qn,cr)=>wn(cr),renderOption:(qn,{selected:cr})=>l.createElement(In,{selected:cr,value:qn,availableOptions:bn,showCounts:!!Je}),size:"small",popupIcon:l.createElement(Ct.Z,{"data-testid":`${String(me)}-picker-expand`}),renderInput:qn=>l.createElement(zn,{...qn,...ht})})))}const Rn=(0,Ze.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),or=E=>{const{initialFilter:S=[]}=E,T=Rn();return l.createElement(sn,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:He,InputProps:{className:T.input},initialSelectedOptions:S})};function er(E,S){const T=S==null?void 0:S.defaultKind;let N,me,Te;return"metadata"in E?(N=E.kind,me=E.metadata.namespace,Te=E.metadata.name):(N=E.kind,me=E.namespace,Te=E.name),(me===void 0||me==="")&&(me=m.zG),(S==null?void 0:S.defaultNamespace)!==void 0?(S==null?void 0:S.defaultNamespace)===me&&(me=void 0):me===m.zG&&(me=void 0),N=N.toLocaleLowerCase("en-US"),N=T&&T.toLocaleLowerCase("en-US")===N?void 0:N,`${N?`${N}:`:""}${me?`${me}/`:""}${Te}`}function yr(E,S){for(const T of["spec.profile.displayName","metadata.title"]){const N=Z()(E,T);if(N&&typeof N=="string")return N}return S}function Br({enabled:E}){const S=(0,o.u)(Gt),[T]=(0,l.useState)(async()=>{if(!E)return[];const N="relations.ownedBy";return S.getEntityFacets({facets:[N]}).then(me=>me.facets[N].map(Te=>Te.value).map(Te=>{const{kind:Je,name:ze,namespace:ht}=(0,m.of)(Te);return{apiVersion:"backstage.io/v1beta1",kind:Je,metadata:{name:ze,namespace:ht}}}).sort((Te,Je)=>(Te.metadata.namespace||"").localeCompare(Je.metadata.namespace||"","en-US")||Te.metadata.name.localeCompare(Je.metadata.name,"en-US")||Te.kind.localeCompare(Je.kind,"en-US"))).catch(()=>[])});return(0,x.default)(async(N,me)=>{var Te;const Je=await T;if(!Je)return{items:[]};const ze=(Te=me==null?void 0:me.limit)!=null?Te:20,{text:ht,start:Mt}=_r(N),Bt=Je.filter(Mn=>kr(ht,Mn)),mn=Mt+ze;return{items:Bt.slice(0,mn),...Fr({entities:Bt,limit:mn,payload:{text:ht,start:mn}})}},[T],{loading:!0,value:{items:[]}})}function _r(E){return Jr(E)&&E.cursor?JSON.parse(atob(E.cursor)):{text:E.text||"",start:0}}function Jr(E){return!!E.cursor}function Fr({entities:E,limit:S,payload:T}){return E.length>S?{cursor:btoa(JSON.stringify(T))}:{}}function kr(E,S){var T;const N=E.trim();return S.kind.includes(N)||((T=S.metadata.namespace)==null?void 0:T.includes(N))||S.metadata.name.includes(N)}function Wr(){const E=(0,o.u)(Gt);return(0,x.default)(async(S,T)=>{var N;const me=S,Te=S,Je=(N=T==null?void 0:T.limit)!=null?N:20;if(Te.cursor){const ht=await E.queryEntities({cursor:Te.cursor,limit:Je});return{cursor:ht.pageInfo.nextCursor,items:[...Te.items,...ht.items]}}const ze=await E.queryEntities({fullTextFilter:{term:me.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:Je});return{cursor:ze.pageInfo.nextCursor,items:ze.items}},[],{loading:!0})}function Xr({mode:E,initialSelectedOwnersRefs:S}){const T=E==="owners-only",N=Wr(),me=Br({enabled:T}),[Te,Je]=T?me:N;return[Te,Je,ta({enabled:!T,initialSelectedOwnersRefs:S})]}function ta({enabled:E,initialSelectedOwnersRefs:S}){const T=(0,l.useRef)({}),N=(0,o.u)(Gt),[,me]=(0,x.default)(async()=>{(await N.getEntitiesByRefs({entityRefs:S})).items.forEach(Je=>{Je&&(T.current[(0,m.eE)(Je)]=Je)})},[]);return de(()=>{E&&S.length>0&&me()}),{getEntity:Te=>T.current[Te],setEntity:Te=>{T.current[(0,m.eE)(Te)]=Te}}}const na=(0,Ze.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),da=l.createElement(qe.Z,{fontSize:"small"}),ra=l.createElement($e.Z,{fontSize:"small"}),br=E=>{var S,T,N;const me=na(),{mode:Te="owners-only"}=E||{},{updateFilters:Je,filters:ze,queryParameters:{owners:ht}}=oe(),[Mt,Bt]=(0,l.useState)(""),mn=(0,l.useMemo)(()=>[ht].flat().filter(Boolean),[ht]),[Mn,yn]=(0,l.useState)(mn.length?mn:(T=(S=ze.owners)==null?void 0:S.values)!=null?T:[]),[{value:bn,loading:Wn},Cn,wn]=Xr({mode:Te,initialSelectedOwnersRefs:Mn});Rt(()=>Cn({text:Mt}),[Mt,Cn],250);const hr=(bn==null?void 0:bn.items)||[];return(0,l.useEffect)(()=>{if(mn.length){const Gn=new ie(mn);yn(Gn.values)}},[mn]),(0,l.useEffect)(()=>{Je({owners:Mn.length?new ie(Mn):void 0})},[Mn,Je]),["user","group"].includes(((N=ze.kind)==null?void 0:N.value.toLocaleLowerCase("en-US"))||"")?null:l.createElement(u.Z,{pb:1,pt:1},l.createElement(F.Z,{variant:"button",component:"label"},"Owner",l.createElement($t.ZP,{multiple:!0,disableCloseOnSelect:!0,loading:Wn,options:hr,value:Mn,getOptionSelected:(Gn,Hn)=>typeof Hn=="string"?(0,m.eE)(Gn)===Hn:Gn===Hn,getOptionLabel:Gn=>{const Hn=typeof Gn=="string"?wn.getEntity(Gn)||(0,m.of)(Gn,{defaultKind:"group",defaultNamespace:"default"}):Gn;return yr(Hn,er(Hn))},onChange:(Gn,Hn)=>{Bt(""),yn(Hn.map(qn=>{const cr=typeof qn=="string"?qn:(0,m.eE)(qn);return typeof qn!="string"&&wn.setEntity(qn),cr}))},filterOptions:Gn=>Gn,renderOption:(Gn,{selected:Hn})=>{const qn=Gn.kind.toLocaleLowerCase("en-US")==="group";return l.createElement(g.Z,{control:l.createElement(M.Z,{icon:da,checkedIcon:ra,checked:Hn}),onClick:cr=>cr.preventDefault(),label:l.createElement(u.Z,{display:"flex",flexWrap:"wrap",alignItems:"center"},qn?l.createElement(en.Z,{fontSize:"small"}):l.createElement(ye.Z,{fontSize:"small"}),"\xA0",yr(Gn,er(Gn,{defaultKind:Gn.kind})))})},size:"small",popupIcon:l.createElement(Ct.Z,{"data-testid":"owner-picker-expand"}),renderInput:Gn=>l.createElement(we.Z,{...Gn,className:me.input,onChange:Hn=>{Bt(Hn.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:Gn=>{const Hn=Gn.currentTarget;Math.abs(Hn.scrollHeight-Hn.clientHeight-Hn.scrollTop)<1&&(bn!=null&&bn.cursor)&&Cn({items:bn.items,cursor:bn.cursor})},"data-testid":"owner-picker-listbox"}})))},tr=(0,Ze.Z)(E=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:E.spacing(.5),color:E.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),rr=E=>{const{entityRef:S,hideIcon:T,disableTooltip:N,defaultKind:me,defaultNamespace:Te}=E,Je=tr(),{primaryTitle:ze,secondaryTitle:ht,Icon:Mt}=Pn(S,{defaultKind:me,defaultNamespace:Te});let Bt=l.createElement(l.Fragment,null,ze);return Bt=l.createElement(u.Z,{component:"span",className:Je.root},Mt&&!T?l.createElement(u.Z,{component:"span",className:Je.icon},l.createElement(Mt,{fontSize:"inherit"})):null,Bt),ht&&!N&&(Bt=l.createElement(Qe.ZP,{enterDelay:1500,title:ht},Bt)),Bt},Kr=(0,rn.uW)("catalog:entity-route-ref",()=>(0,p.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function wr(E){var S,T;return{kind:E.kind.toLocaleLowerCase("en-US"),namespace:(T=(S=E.metadata.namespace)==null?void 0:S.toLocaleLowerCase("en-US"))!=null?T:DEFAULT_NAMESPACE,name:E.metadata.name}}const Nr=(0,l.forwardRef)((E,S)=>{var T;const{entityRef:N,defaultKind:me,defaultNamespace:Te,title:Je,children:ze,hideIcon:ht,...Mt}=E,Bt=at(E.entityRef),mn=(T=ze!=null?ze:Je)!=null?T:l.createElement(rr,{entityRef:N,defaultKind:me,defaultNamespace:Te,hideIcon:ht});return l.createElement(v.rU,{...Mt,ref:S,to:Bt},mn)});function at(E){var S;const T=(0,p.tg)(Kr);let N,me,Te;if(typeof E=="string"){const ze=(0,m.of)(E);N=ze.kind,me=ze.namespace,Te=ze.name}else"metadata"in E?(N=E.kind,me=E.metadata.namespace,Te=E.metadata.name):(N=E.kind,me=E.namespace,Te=E.name);N=N.toLocaleLowerCase("en-US"),me=(S=me==null?void 0:me.toLocaleLowerCase("en-US"))!=null?S:m.zG;const Je={kind:encodeURIComponent(N),namespace:encodeURIComponent(me),name:encodeURIComponent(Te)};return T(Je)}function pe(E){const{entityRefs:S,hideIcons:T,...N}=E;return l.createElement(l.Fragment,null,S.map((me,Te)=>{const Je=typeof me=="string"?me:(0,m.eE)(me);return l.createElement(l.Fragment,{key:`${Te}.${Je}`},Te>0&&", ",l.createElement(Nr,{...N,entityRef:me,hideIcon:T}))}))}const yt=E=>{const S=useRouteRef(Kr);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:S(getCompoundEntityRef(E.entity))},React.createElement(InfoIcon,null))},_n=E=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${E.email}`,to:`mailto:${E.email}`},React.createElement(EmailIcon,null)),Zn=E=>{var S;const T=(S=E.entity.spec.profile)==null?void 0:S.email;return T?React.createElement(_n,{email:T}):null},Xn=E=>{var S;const T=(S=E.entity.spec.profile)==null?void 0:S.email;return T?React.createElement(_n,{email:T}):null},dr=(0,Ze.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),$r=4,Zr=E=>{var S,T,N,me;const{entityRef:Te,children:Je,delayTime:ze=500}=E,ht=dr(),Mt=useApiHolder(),Bt=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[mn,Mn]=useState(!1),yn=useMemo(()=>debounce(()=>Mn(!0),ze),[ze]),[{loading:bn,error:Wn,value:Cn},wn]=useAsyncFn(async()=>{const Gn=Mt.get(Gt);if(Gn){const Hn=await Gn.getEntityByRef(Te);if(!Hn)throw new Error(`${Te} not found`);return Hn}},[Mt,Te]),hr=()=>{Mn(!1),yn.cancel()};return useEffect(()=>{Bt.isOpen&&!Cn&&!Wn&&!bn&&wn()},[Bt.isOpen,wn,Cn,Wn,bn]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:yn},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(Bt)},Je)),mn&&React.createElement(HoverPopover,{PaperProps:{className:ht.popoverPaper},...bindPopover(Bt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:hr},React.createElement(Card,null,React.createElement(CardContent,null,Wn&&React.createElement(ResponseErrorPanel,{error:Wn}),bn&&React.createElement(Progress,null),Cn&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},Cn.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},Cn.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},Cn.kind),Cn.metadata.description&&React.createElement(Typography,{className:ht.descriptionTypography,paragraph:!0},Cn.metadata.description),React.createElement(Typography,null,(T=(S=Cn.spec)==null?void 0:S.type)==null?void 0:T.toString()),React.createElement(Box,{marginTop:"0.5em"},(Cn.metadata.tags||[]).slice(0,$r).map(Gn=>React.createElement(Chip,{key:Gn,size:"small",label:Gn})),((N=Cn.metadata.tags)==null?void 0:N.length)&&((me=Cn.metadata.tags)==null?void 0:me.length)>$r&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!Wn&&Cn&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(Cn)&&React.createElement(Xn,{entity:Cn}),isGroupEntity(Cn)&&React.createElement(Zn,{entity:Cn}),React.createElement(yt,{entity:Cn}))))))},lr=(0,Ze.Z)(E=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),y=()=>{var E,S;const T=lr(),{filters:N,updateFilters:me}=oe(),[Te,Je]=(0,l.useState)((S=(E=N.text)==null?void 0:E.value)!=null?S:"");return(0,he.Z)(()=>{me({text:Te.length?new Mr(Te):void 0})},250,[Te,me]),l.createElement(le.Z,{className:T.searchToolbar},l.createElement(Le.Z,null,l.createElement(Se.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:T.input,placeholder:"Search",autoComplete:"off",onChange:ze=>Je(ze.target.value),value:Te,startAdornment:l.createElement(Ke.Z,{position:"start"},l.createElement(De.Z,null)),endAdornment:l.createElement(Ke.Z,{position:"end"},l.createElement(St.Z,{"aria-label":"clear search",onClick:()=>Je(""),edge:"end",disabled:Te.length===0},l.createElement(Ae.Z,null)))})))},s=Object.freeze({createEntityRefColumn(E){const{defaultKind:S}=E;function T(N){var me;return((me=N.metadata)==null?void 0:me.title)||er(N,{defaultKind:S})}return{title:"Name",highlight:!0,customFilterAndSearch(N,me){return T(me).includes(N)},customSort(N,me){return T(N).localeCompare(T(me))},render:N=>{var me;return l.createElement(Nr,{entityRef:N,defaultKind:S,title:(me=N.metadata)==null?void 0:me.title})}}},createEntityRelationColumn(E){const{title:S,relation:T,defaultKind:N,filter:me}=E;function Te(ze){return(0,k.g)(ze,T,me)}function Je(ze){return Te(ze).map(ht=>er(ht,{defaultKind:N})).join(", ")}return{title:S,customFilterAndSearch(ze,ht){return Je(ht).includes(ze)},customSort(ze,ht){return Je(ze).localeCompare(Je(ht))},render:ze=>l.createElement(pe,{entityRefs:Te(ze),defaultKind:N})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:m.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:m.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:m.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:E=>l.createElement(v.Or,{text:E.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),b=[s.createEntityRefColumn({defaultKind:"system"}),s.createDomainColumn(),s.createOwnerColumn(),s.createMetadataDescriptionColumn()],B=[s.createEntityRefColumn({defaultKind:"component"}),s.createSystemColumn(),s.createOwnerColumn(),s.createSpecTypeColumn(),s.createSpecLifecycleColumn(),s.createMetadataDescriptionColumn()],Oe=(0,Ze.Z)(E=>({empty:{padding:E.spacing(2),display:"flex",justifyContent:"center"}})),ot=E=>{const{entities:S,title:T,emptyContent:N,variant:me="gridItem",columns:Te,tableOptions:Je={}}=E,ze=Oe(),ht={minWidth:"0",width:"100%"};return me==="gridItem"&&(ht.height="calc(100% - 10px)"),l.createElement(v.iA,{columns:Te,title:T,style:ht,emptyContent:N&&l.createElement("div",{className:ze.empty},N),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...Je},data:S})};ot.columns=s,ot.systemEntityColumns=b,ot.componentEntityColumns=B;const At=(0,Ze.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),xt=E=>{const S=At();return l.createElement(sn,{label:"Tags",name:"tags",path:"metadata.tags",Filter:Ar,showCounts:E.showCounts,InputProps:{className:S.input}})},Sn=E=>{var S;const{hidden:T,initialFilter:N}=E,me=(0,o.u)(o.l),{error:Te,availableTypes:Je,selectedTypes:ze,setSelectedTypes:ht}=Ce();if((0,l.useEffect)(()=>{Te&&me.post({message:"Failed to load entity types",severity:"error"}),N&&ht([N])},[Te,me,N,ht]),Je.length===0||Te)return null;const Mt=[{value:"all",label:"all"},...Je.map(Bt=>({value:Bt,label:Bt}))];return T?null:l.createElement(u.Z,{pb:1,pt:1},l.createElement(v.Ph,{label:"Type",items:Mt,selected:(S=Mt.length>1?ze[0]:void 0)!=null?S:"all",onChange:Bt=>ht(Bt==="all"?[]:[String(Bt)])}))},Bn=(0,L.Z)({root:{color:"#f3ba37"}})(w.Z),Ln=E=>{const{toggleStarredEntity:S,isStarredEntity:T}=tn(E.entity);return l.createElement(St.Z,{"aria-label":"favorite",color:"inherit",...E,onClick:()=>S()},l.createElement(Qe.ZP,{title:T?"Remove from favorites":"Add to favorites"},T?l.createElement(Bn,null):l.createElement(H.Z,null)))},fr=te.Z;function zr(E,S){if(E)return E.toLocaleLowerCase("en-US");if(S)try{return(0,m.of)(S).kind.toLocaleLowerCase("en-US")}catch{return}}function sa(E,S){const T=(0,p.qD)(),N=zr(E,S);return N&&T.getSystemIcon(`kind:${N}`)||fr}function Qr(E){const{kind:S,entityRef:T,...N}=E,me=sa(S,T);return l.createElement(me,{...N})}const to=(0,Ze.Z)(E=>({node:{fill:E.palette.grey[300],stroke:E.palette.grey[300],"&.primary":{fill:E.palette.primary.light,stroke:E.palette.primary.light},"&.secondary":{fill:E.palette.secondary.light,stroke:E.palette.secondary.light}},text:{fill:E.palette.getContrastText(E.palette.grey[300]),"&.primary":{fill:E.palette.primary.contrastText},"&.secondary":{fill:E.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function no(E){const S=(0,o.u)(Gt),T=(0,m.eE)(E),{loading:N,error:me,value:Te}=(0,dt.default)(async()=>{const Je=await S.getEntityAncestors({entityRef:T}),ze=new Array,ht=new Array;for(const Mt of Je.items){const Bt=(0,m.eE)(Mt.entity),mn=Bt===Je.rootEntityRef;ze.push({id:Bt,root:mn,...Mt.entity});for(const Mn of Mt.parentEntityRefs)ht.push({from:Bt,to:Mn})}return{nodes:ze,edges:ht}},[T]);return{loading:N,error:me,nodes:(Te==null?void 0:Te.nodes)||[],edges:(Te==null?void 0:Te.edges)||[]}}function vo({node:E}){const S=to(),T=(0,U.s0)(),N=(0,p.tg)(Kr),[me,Te]=(0,l.useState)(0),[Je,ze]=(0,l.useState)(0),ht=(0,l.useRef)(null);(0,l.useLayoutEffect)(()=>{if(ht.current){let{height:Cn,width:wn}=ht.current.getBBox();Cn=Math.round(Cn),wn=Math.round(wn),(Cn!==Je||wn!==me)&&(Te(wn),ze(Cn))}},[me,Je]);const Mt=10,Bt=Je,mn=Bt+Mt,Mn=mn+me+Mt*2,yn=Je+Mt*2,bn=E.metadata.title||(E.kind&&E.metadata.name&&E.metadata.namespace?er({kind:E.kind,name:E.metadata.name,namespace:E.metadata.namespace||""}):E.id),Wn=()=>{T(N({kind:E.kind,namespace:E.metadata.namespace||m.zG,name:E.metadata.name}))};return l.createElement("g",{onClick:Wn,className:S.clickable},l.createElement("rect",{className:G()(S.node,E.root?"secondary":"primary"),width:Mn,height:yn,rx:10}),l.createElement(Qr,{kind:E.kind,y:Mt,x:Mt,width:Bt,height:Bt,className:G()(S.text,E.root?"secondary":"primary")}),l.createElement("text",{ref:ht,className:G()(S.text,E.root?"secondary":"primary"),y:yn/2,x:mn+(me+Mt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},bn))}function yo(E){const{loading:S,error:T,nodes:N,edges:me}=no(E.entity);return S?l.createElement(v.Ex,null):T?l.createElement(v.Gk,{error:T}):l.createElement(l.Fragment,null,l.createElement(mt.Z,{variant:"h2"},"Ancestry"),l.createElement(mt.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",l.createElement(v.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),l.createElement(u.Z,{mt:4},l.createElement(v.mn,{nodes:N,edges:me,renderNode:vo,direction:v.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const Ha=(0,Ze.Z)(E=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:E.spacing(2)},helpIcon:{marginLeft:E.spacing(1),color:E.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function aa(E){const S=Ha();return l.createElement(fe.Z,{...E,primaryTypographyProps:{className:S.monospace},secondaryTypographyProps:{className:S.monospace}})}function Wa(E){const S=Ha();return l.createElement(Kt.Z,{className:S.monospace},E.children)}function Sa(E){return l.createElement(u.Z,{mt:2},l.createElement(Et.Z,{variant:"outlined"},l.createElement(It.Z,null,l.createElement(F.Z,{variant:"h6",gutterBottom:!0},E.title,E.helpLink&&l.createElement(ma,{to:E.helpLink})),E.children)))}function ro(E){if(E.match(/^url:https?:\/\//))return E.slice(4);if(E.match(/^https?:\/\//))return E}function _a(E){const[S,T]=E.entry,N=ro(T);return l.createElement(Ft.Z,null,E.indent&&l.createElement(Ye.Z,null),l.createElement(aa,{primary:S,secondary:N?l.createElement(v.rU,{to:N},T):T}))}function ma(E){const S=Ha();return l.createElement(v.rU,{to:E.to,className:S.helpIcon},l.createElement(ut.Z,{fontSize:"inherit"}))}const bo=(0,Ze.Z)({root:{display:"flex",flexDirection:"column"}});function ao(E){var S,T;const N=(0,o.u)(Gt),me=(0,m.eE)(E),Te=(S=E.metadata.annotations)==null?void 0:S[m.P1],Je=(T=E.metadata.annotations)==null?void 0:T[m.q1],{loading:ze,error:ht,value:Mt}=(0,dt.default)(async()=>!Te&&!Je?[]:(await N.getEntities({filter:[...Te?[{[`metadata.annotations.${m.P1}`]:Te}]:[],...Je?[{[`metadata.annotations.${m.q1}`]:Je}]:[]]})).items,[Te,Je]);return{loading:ze,error:ht,location:Te,originLocation:Je,colocatedEntities:Mt==null?void 0:Mt.filter(Bt=>(0,m.eE)(Bt)!==me)}}function pa(E){return l.createElement(_t.Z,{dense:!0},E.header&&l.createElement(_a,{key:"header",entry:E.header}),E.entities.map(S=>l.createElement(Ft.Z,{key:(0,m.eE)(S)},l.createElement(Ye.Z,null,l.createElement(Qr,{kind:S.kind})),l.createElement(aa,{primary:l.createElement(Nr,{entityRef:S})}))))}function oo(E){const{entity:S}=E,{loading:T,error:N,location:me,originLocation:Te,colocatedEntities:Je}=ao(S);if(T)return l.createElement(v.Ex,null);if(N)return l.createElement(v.Gk,{error:N});if(!me&&!Te)return l.createElement(Pt.Z,{severity:"warning"},"Entity had no location information.");if(!(Je!=null&&Je.length))return l.createElement(Pt.Z,{severity:"info"},"There were no other entities on this location.");if(me===Te)return l.createElement(pa,{entities:Je});const ze=Je.filter(Mt=>{var Bt;return((Bt=Mt.metadata.annotations)==null?void 0:Bt[m.P1])===me}),ht=Je.filter(Mt=>{var Bt;return((Bt=Mt.metadata.annotations)==null?void 0:Bt[m.q1])===Te});return l.createElement(l.Fragment,null,ze.length>0&&l.createElement(pa,{entities:ze,header:["At the same location",me]}),ht.length>0&&l.createElement(pa,{entities:ht,header:["At the same origin",Te]}))}function io(E){const S=bo();return l.createElement(l.Fragment,null,l.createElement(mt.Z,{variant:"h2"},"Colocated"),l.createElement(mt.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),l.createElement("div",{className:S.root},l.createElement(oo,{entity:E.entity})))}function so(E){return Object.fromEntries([...Object.entries(E)].sort((S,T)=>S[0]<T[0]?-1:1))}function Co(E){return l.createElement(l.Fragment,null,l.createElement(mt.Z,{variant:"h2"},"Entity as JSON"),l.createElement(mt.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),l.createElement(mt.Z,null,l.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},l.createElement(v.Oi,{text:JSON.stringify(so(E.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const Po=(0,Ze.Z)({root:{display:"flex",flexDirection:"column"}});function So(E){var S,T,N;const me=Po(),{apiVersion:Te,kind:Je,metadata:ze,spec:ht,relations:Mt=[],status:Bt={}}=E.entity,mn=ee()(ct()(Mt,yn=>yn.targetRef),"type"),Mn=(0,m.eE)(E.entity);return l.createElement(l.Fragment,null,l.createElement(mt.Z,{variant:"h2"},"Overview"),l.createElement("div",{className:me.root},l.createElement(Sa,{title:"Identity"},l.createElement(_t.Z,{dense:!0},l.createElement(Ft.Z,null,l.createElement(aa,{primary:"apiVersion",secondary:Te})),l.createElement(Ft.Z,null,l.createElement(aa,{primary:"kind",secondary:Je})),(ht==null?void 0:ht.type)&&l.createElement(Ft.Z,null,l.createElement(aa,{primary:"spec.type",secondary:(S=ht.type)==null?void 0:S.toString()})),ze.uid&&l.createElement(Ft.Z,null,l.createElement(aa,{primary:"uid",secondary:ze.uid}),l.createElement(kt.Z,null,l.createElement(v.bj,{text:ze.uid}))),ze.etag&&l.createElement(Ft.Z,null,l.createElement(aa,{primary:"etag",secondary:ze.etag}),l.createElement(kt.Z,null,l.createElement(v.bj,{text:ze.etag}))),l.createElement(Ft.Z,null,l.createElement(aa,{primary:"entityRef",secondary:Mn}),l.createElement(kt.Z,null,l.createElement(v.bj,{text:Mn}))))),l.createElement(Sa,{title:"Metadata"},!!Object.keys(ze.annotations||{}).length&&l.createElement(_t.Z,{dense:!0,subheader:l.createElement(Wa,null,"Annotations",l.createElement(ma,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(ze.annotations).map(yn=>l.createElement(_a,{key:yn[0],indent:!0,entry:yn}))),!!Object.keys(ze.labels||{}).length&&l.createElement(_t.Z,{dense:!0,subheader:l.createElement(Wa,null,"Labels")},Object.entries(ze.labels).map(yn=>l.createElement(_a,{key:yn[0],indent:!0,entry:yn}))),!!((T=ze.tags)!=null&&T.length)&&l.createElement(_t.Z,{dense:!0,subheader:l.createElement(Wa,null,"Tags")},ze.tags.map((yn,bn)=>l.createElement(Ft.Z,{key:`${yn}-${bn}`},l.createElement(Ye.Z,null),l.createElement(aa,{primary:yn}))))),!!Mt.length&&l.createElement(Sa,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(mn).map(([yn,bn],Wn)=>l.createElement("div",{key:Wn},l.createElement(_t.Z,{dense:!0,subheader:l.createElement(Wa,null,yn)},bn.map(Cn=>l.createElement(Ft.Z,{key:Cn.targetRef},l.createElement(Ye.Z,null,l.createElement(Qr,{entityRef:Cn.targetRef})),l.createElement(aa,{primary:l.createElement(Nr,{entityRef:Cn.targetRef})}))))))),!!((N=Bt.items)!=null&&N.length)&&l.createElement(Sa,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},Bt.items.map((yn,bn)=>l.createElement("div",{key:bn},l.createElement(F.Z,null,yn.level,": ",yn.type),l.createElement(u.Z,{ml:2},yn.message))))))}function ha(E){return l.createElement(l.Fragment,null,l.createElement(mt.Z,{variant:"h2"},"Entity as YAML"),l.createElement(mt.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),l.createElement(mt.Z,null,l.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},l.createElement(v.Oi,{text:Ve.ZP.stringify(so(E.entity)),language:"yaml",showCopyCodeButton:!0}))))}const lo=(0,Ze.Z)(E=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:E.palette.background.paper},tabs:{borderRight:`1px solid ${E.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Ra(E){const{children:S,value:T,index:N,...me}=E,Te=lo();return l.createElement("div",{role:"tabpanel",hidden:T!==N,id:`vertical-tabpanel-${N}`,"aria-labelledby":`vertical-tab-${N}`,className:Te.tabContents,...me},T===N&&l.createElement(u.Z,{pl:3,pr:3},S))}function Or(E){return{id:`vertical-tab-${E}`,"aria-controls":`vertical-tabpanel-${E}`}}function Ya(E){const S=lo(),[T,N]=l.useState(0);return(0,l.useEffect)(()=>{N(0)},[E.open]),E.entity?l.createElement(Qt.Z,{fullWidth:!0,maxWidth:"xl",open:E.open,onClose:E.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:S.fullHeightDialog}},l.createElement(Yt.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),l.createElement(Nt.Z,{dividers:!0},l.createElement("div",{className:S.root},l.createElement(bt.Z,{orientation:"vertical",variant:"scrollable",value:T,onChange:(me,Te)=>N(Te),"aria-label":"Inspector options",className:S.tabs},l.createElement(Tt.Z,{label:"Overview",...Or(0)}),l.createElement(Tt.Z,{label:"Ancestry",...Or(1)}),l.createElement(Tt.Z,{label:"Colocated",...Or(2)}),l.createElement(Tt.Z,{label:"Raw JSON",...Or(3)}),l.createElement(Tt.Z,{label:"Raw YAML",...Or(4)})),l.createElement(Ra,{value:T,index:0},l.createElement(So,{entity:E.entity})),l.createElement(Ra,{value:T,index:1},l.createElement(yo,{entity:E.entity})),l.createElement(Ra,{value:T,index:2},l.createElement(io,{entity:E.entity})),l.createElement(Ra,{value:T,index:3},l.createElement(Co,{entity:E.entity})),l.createElement(Ra,{value:T,index:4},l.createElement(ha,{entity:E.entity})))),l.createElement(wt.Z,null,l.createElement(ve.Z,{onClick:E.onClose,color:"primary"},"Close"))):null}function Ka(E){var S;const T=(0,o.u)(Gt),N=(S=E.metadata.annotations)==null?void 0:S[m.q1],me=E.metadata.uid,Te=N==="bootstrap:bootstrap",Je=(0,dt.default)(async()=>{const bn=T.getLocationByRef(N);let Wn;if(!N)Wn=Promise.resolve([]);else{const Cn=`metadata.annotations.${m.q1}`;Wn=T.getEntities({filter:{[Cn]:N},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(wn=>wn.items)}return Promise.all([bn,Wn]).then(([Cn,wn])=>({location:Cn,colocatedEntities:wn}))},[T,E]),ze=(0,l.useCallback)(async function(){const{location:Wn}=Je.value;await T.removeLocationById(Wn.id)},[T,Je]),ht=(0,l.useCallback)(async function(){await T.removeEntityByUid(me)},[T,me]);if(Te)return{type:"bootstrap",location:N,deleteEntity:ht};const{loading:Mt,error:Bt,value:mn}=Je;if(Mt)return{type:"loading"};if(Bt)return{type:"error",error:Bt};const{location:Mn,colocatedEntities:yn}=mn;return Mn?{type:"unregister",location:N,colocatedEntities:yn.map(m.iB),unregisterLocation:ze,deleteEntity:ht}:{type:"only-delete",deleteEntity:ht}}const Aa=(0,Ze.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),ga=({entity:E,onConfirm:S,onClose:T})=>{var N;const me=(0,o.u)(o.l),Te=(0,o.u)(o.p),Je=Aa(),ze=Ka(E),[ht,Mt]=(0,l.useState)(!1),[Bt,mn]=(0,l.useState)(!1),Mn=(N=Te.getOptionalString("app.title"))!=null?N:"Backstage",yn=(0,l.useCallback)(async function(){if("unregisterLocation"in ze){mn(!0);try{await ze.unregisterLocation(),S()}catch(wn){(0,lt.BD)(wn),me.post({message:wn.message})}finally{mn(!1)}}},[me,S,ze]),bn=(0,l.useCallback)(async function(){var wn;if("deleteEntity"in ze){mn(!0);try{await ze.deleteEntity();const hr=(wn=E.metadata.title)!=null?wn:E.metadata.name;S(),me.post({message:`Removed entity ${hr}`,severity:"success",display:"transient"})}catch(hr){(0,lt.BD)(hr),me.post({message:hr.message})}finally{mn(!1)}}},[me,S,ze,E]),Wn=()=>l.createElement(wt.Z,{className:Je.dialogActions},l.createElement(ve.Z,{onClick:T,color:"primary"},"Cancel"));return ze.type==="loading"?l.createElement(v.Ex,null):ze.type==="error"?l.createElement(v.Gk,{error:ze.error}):ze.type==="bootstrap"?l.createElement(l.Fragment,null,l.createElement(Pt.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',ze.location,'"). If you believe this is in error, please contact the ',Mn," ","integrator."),l.createElement(u.Z,{marginTop:2},!ht&&l.createElement(l.Fragment,null,l.createElement(ve.Z,{variant:"text",size:"small",color:"primary",className:Je.advancedButton,onClick:()=>Mt(!0)},"Advanced Options"),l.createElement(Wn,null)),ht&&l.createElement(l.Fragment,null,l.createElement(mt.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),l.createElement(ve.Z,{variant:"contained",color:"secondary",disabled:Bt,onClick:bn},"Delete Entity"),l.createElement(Wn,null)))):ze.type==="only-delete"?l.createElement(l.Fragment,null,l.createElement(mt.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),l.createElement(ve.Z,{variant:"contained",color:"secondary",disabled:Bt,onClick:bn},"Delete Entity"),l.createElement(Wn,null)):ze.type==="unregister"?l.createElement(l.Fragment,null,l.createElement(mt.Z,null,"This action will unregister the following entities:"),l.createElement(mt.Z,{component:"ul"},ze.colocatedEntities.map(Cn=>l.createElement("li",{key:`${Cn.kind}:${Cn.namespace}/${Cn.name}`},l.createElement(Nr,{entityRef:Cn})))),l.createElement(mt.Z,null,"Located at the following location:"),l.createElement(mt.Z,{component:"ul"},l.createElement("li",null,ze.location)),l.createElement(mt.Z,null,"To undo, just re-register the entity in ",Mn,"."),l.createElement(u.Z,{marginTop:2},l.createElement(ve.Z,{variant:"contained",color:"secondary",disabled:Bt,onClick:yn},"Unregister Location"),!ht&&l.createElement(u.Z,{component:"span",marginLeft:2},l.createElement(ve.Z,{variant:"text",size:"small",color:"primary",className:Je.advancedButton,onClick:()=>Mt(!0)},"Advanced Options"))),ht&&l.createElement(l.Fragment,null,l.createElement(u.Z,{paddingTop:4,paddingBottom:4},l.createElement(Xt.Z,null)),l.createElement(mt.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),l.createElement(ve.Z,{variant:"contained",color:"secondary",disabled:Bt,onClick:bn},"Delete Entity"))):l.createElement(Pt.Z,{severity:"error"},"Internal error: Unknown state")},Da=E=>{const{open:S,onConfirm:T,onClose:N,entity:me}=E;return l.createElement(Qt.Z,{open:S,onClose:N},l.createElement(Yt.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),l.createElement(Nt.Z,null,l.createElement(ga,{entity:me,onConfirm:T,onClose:N})))};function fa(){const E=(0,o.u)(o.v),S=(0,o.u)(Gt),{filters:T}=oe(),{value:N,loading:me}=(0,dt.default)(async()=>(await E.getBackstageIdentity()).ownershipEntityRefs,[]),{user:Te,owners:Je,...ze}=T,{["metadata.name"]:ht,...Mt}=Fn((0,Q.compact)(Object.values(ze))),[{value:Bt,loading:mn},Mn]=(0,x.default)(async bn=>{const Wn=la(bn.owners,bn.ownershipEntityRefs);if(Wn===void 0)return 0;const{totalItems:Cn}=await S.queryEntities({filter:{...bn.filter,"relations.ownedBy":Wn},limit:0});return Cn},[],{loading:!0});return(0,zt.Z)(()=>{Object.keys(Mt).length!==0&&N!==void 0&&Mn({ownershipEntityRefs:N,owners:Je,filter:Mt})},[N,Je,Mt]),{count:Bt,loading:me||mn,filter:(0,l.useMemo)(()=>C.owned(N!=null?N:[]),[N]),ownershipEntityRefs:N}}function la(E,S){var T;if(S===void 0)return;const N=(T=E==null?void 0:E.values)!=null?T:[];if(N.length){const me=(0,Q.intersection)(N,S);return me.length===0?void 0:me}return S}function _o(){const E=(0,o.u)(Gt),{filters:S}=oe(),T=(0,l.useRef)(),N=(0,l.useMemo)(()=>{const{user:Je,...ze}=S,ht=(0,Q.compact)(Object.values(ze)),Mt=Fn(ht),Bt={filter:Mt,limit:0};return Object.keys(Mt).length===0?(T.current=void 0,T.current):(0,Q.isEqual)(Bt,T.current)?T.current:(T.current=Bt,Bt)},[S]),{value:me,loading:Te}=(0,dt.default)(async()=>{if(N===void 0)return 0;const{totalItems:Je}=await E.queryEntities(N);return Je},[N]);return{count:me,loading:Te}}function Ro(){const E=(0,o.u)(Gt),{filters:S}=oe(),{starredEntities:T}=pt(),N=(0,l.useRef)(),me=(0,l.useMemo)(()=>{const{user:ht,...Mt}=S,Bt=(0,Q.compact)(Object.values(Mt)),yn={filter:{...Fn(Bt),["metadata.name"]:Array.from(T).map(bn=>(0,m.of)(bn).name)},limit:1e3};return(0,Q.isEqual)(yn,N.current)?N.current:(N.current=yn,yn)},[S,T]),{value:Te,loading:Je}=(0,dt.default)(async()=>T.size?(await E.queryEntities(me)).items.map(Mt=>(0,m.eE)({kind:Mt.kind,namespace:Mt.metadata.namespace,name:Mt.metadata.name})).filter(Mt=>T.has(Mt)).length:0,[me,T]),ze=(0,l.useMemo)(()=>C.starred(Array.from(T)),[T]);return{count:Te,loading:Je,filter:ze}}const Ao=(0,Ze.Z)(E=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:E.spacing(1,0,1,0)},title:{margin:E.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:E.palette.text.primary},menuItem:{minHeight:E.spacing(6)},groupWrapper:{margin:E.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function wo(E){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:Lt.Z},{id:"starred",label:"Starred",icon:w.Z}]},{name:E!=null?E:"Company",items:[{id:"all",label:"All"}]}]}const Ja=E=>{var S;const{initialFilter:T,availableFilters:N}=E,me=Ao(),Je=(S=(0,o.u)(o.p).getOptionalString("organization.name"))!=null?S:"Company",{filters:ze,updateFilters:ht,queryParameters:{kind:Mt,user:Bt}}=oe(),mn=["starred","all"],Mn=wo(Je).map(jr=>({...jr,items:jr.items.filter(({id:Vr})=>["group","user"].some($a=>$a===Mt)?mn.includes(Vr):!N||N.includes(Vr))})).filter(({items:jr})=>!!jr.length),{count:yn,loading:bn,filter:Wn}=fa(),{count:Cn}=_o(),{count:wn,filter:hr,loading:Gn}=Ro(),Hn=(0,l.useMemo)(()=>[Bt].flat()[0],[Bt]),[qn,cr]=(0,l.useState)(Hn!=null?Hn:T),Ma=(0,l.useMemo)(()=>({all:Cn,starred:wn,owned:yn}),[wn,yn,Cn]);(0,l.useEffect)(()=>{Hn&&cr(Hn)},[Hn]);const Ba=bn||Gn;return(0,l.useEffect)(()=>{!Ba&&qn&&qn!=="all"&&Ma[qn]===0&&cr("all")},[Ba,Ma,qn,cr]),(0,l.useEffect)(()=>{if(!qn||Ba)return;ht({user:(()=>qn==="owned"?Wn:qn==="starred"?hr:C.all())()})},[qn,hr,Wn,ht,Ba]),l.createElement(Et.Z,{className:me.root},Mn.map(jr=>l.createElement(l.Fragment,{key:jr.name},l.createElement(F.Z,{variant:"subtitle2",component:"span",className:me.title},jr.name),l.createElement(Et.Z,{className:me.groupWrapper},l.createElement(_t.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":jr.name},jr.items.map(Vr=>{var $a,Xa;return l.createElement(Re.Z,{role:"none presentation",key:Vr.id,divider:!0,onClick:()=>cr(Vr.id),selected:Vr.id===(($a=ze.user)==null?void 0:$a.value),className:me.menuItem,disabled:Ma[Vr.id]===0,"data-testid":`user-picker-${Vr.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Vr.icon&&l.createElement(Ye.Z,{className:me.listIcon},l.createElement(Vr.icon,{fontSize:"small"})),l.createElement(fe.Z,null,l.createElement(F.Z,{variant:"body1"},Vr.label," ")),l.createElement(kt.Z,null,(Xa=Ma[Vr.id])!=null?Xa:"-"))}))))))},ar=(0,Ze.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),Gr=l.createElement(qe.Z,{fontSize:"small"}),za=l.createElement($e.Z,{fontSize:"small"}),oa=()=>{const E=ar(),{updateFilters:S}=oe(),[T,N]=(0,l.useState)([]);function me(ze){S({orphan:ze?new O(ze):void 0})}function Te(ze){S({error:ze?new D(ze):void 0})}const Je=["Is Orphan","Has Error"];return l.createElement(u.Z,{pb:1,pt:1},l.createElement(F.Z,{variant:"button",component:"label"},"Processing Status",l.createElement($t.ZP,{multiple:!0,disableCloseOnSelect:!0,options:Je,value:T,onChange:(ze,ht)=>{N(ht),me(ht.includes("Is Orphan")),Te(ht.includes("Has Error"))},renderOption:(ze,{selected:ht})=>l.createElement(g.Z,{control:l.createElement(M.Z,{icon:Gr,checkedIcon:za,checked:ht}),onClick:Mt=>Mt.preventDefault(),label:ze}),size:"small",popupIcon:l.createElement(Ct.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:ze=>l.createElement(we.Z,{...ze,className:E.input,variant:"outlined"})})))},wa=(0,Ze.Z)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),Oa=()=>{const E=wa();return l.createElement(sn,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:st,InputProps:{className:E.input}})},Ta=(0,Ze.Z)(E=>({code:{borderRadius:6,margin:E.spacing(2,0),background:E.palette.type==="dark"?"#444":E.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function xa(E,S){var T,N;const me=(S==null?void 0:S.kind)||"Component",Te=(S==null?void 0:S.metadata.name)||"example",Je=((T=S==null?void 0:S.spec)==null?void 0:T.type)||"website",ze=((N=S==null?void 0:S.spec)==null?void 0:N.owner)||"user:default/guest",ht=`apiVersion: backstage.io/v1alpha1
kind: ${me}
metadata:
  name: ${Te}
  annotations:${E.map(mn=>`
    ${mn}: value`).join("")}
spec:
  type: ${Je}
  owner: ${ze}`;let Mt=6;const Bt=[];return E.forEach(()=>{Bt.push(Mt),Mt++}),{yamlText:ht,lineNumbers:Bt}}function Ga(E,S="Component"){const T=E.length<=1;return l.createElement(l.Fragment,null,"The ",T?"annotation":"annotations"," ",E.map(N=>l.createElement("code",null,N)).reduce((N,me)=>l.createElement(l.Fragment,null,N,", ",me))," ",T?"is":"are"," missing. You need to add the"," ",T?"annotation":"annotations"," to your ",S," if you want to enable this tool.")}function La(E){let S;try{S=(0,k.u)().entity}catch{}const{annotation:T,readMoreUrl:N}=E,me=Array.isArray(T)?T:[T],Te=N||"https://backstage.io/docs/features/software-catalog/well-known-annotations",Je=Ta(),ze=(S==null?void 0:S.kind)||"Component",{yamlText:ht,lineNumbers:Mt}=xa(me,S);return l.createElement(v.ub,{missing:"field",title:"Missing Annotation",description:Ga(me,ze),action:l.createElement(l.Fragment,null,l.createElement(F.Z,{variant:"body1"},"Add the annotation to your ",ze," YAML as shown in the highlighted example below:"),l.createElement(u.Z,{className:Je.code},l.createElement(v.Oi,{text:ht,language:"yaml",showLineNumbers:!0,highlightedNumbers:Mt,customStyle:{background:"inherit",fontSize:"115%"}})),l.createElement(ve.Z,{color:"primary",component:v.rU,to:Te},"Read more"))})}function Ia(E){var S;const{children:T,value:N}=E,[me,Te]=useState((S=N==null?void 0:N.filters)!=null?S:{}),Je=useCallback(Mt=>{Te(Bt=>{const mn=typeof Mt=="function"?Mt(Bt):Mt;return{...Bt,...mn}})},[]),ze=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),ht=useMemo(()=>{var Mt,Bt,mn,Mn,yn;return{entities:(Mt=N==null?void 0:N.entities)!=null?Mt:ze.entities,backendEntities:(Bt=N==null?void 0:N.backendEntities)!=null?Bt:ze.backendEntities,updateFilters:(mn=N==null?void 0:N.updateFilters)!=null?mn:Je,filters:me,loading:(Mn=N==null?void 0:N.loading)!=null?Mn:!1,queryParameters:(yn=N==null?void 0:N.queryParameters)!=null?yn:ze.queryParameters,error:N==null?void 0:N.error}},[N,ze,me,Je]);return React.createElement(ue.Provider,{value:ht},T)}},49477:(Un,Ht,e)=>{"use strict";e.d(Ht,{C:()=>u});var o=e(34520),p=e(49558),m=e(64304),Y=e(78373),V=e(90436),I=e(15459),W=e(93750),tt=e(27604),Xe=e(2997),r=e(11640),je=e(28347),ye=e(76635),X=e.n(ye),Z=e(19928),l=e.n(Z),ne=e(2784),re=e(7089);const se=Object.freeze({createNameColumn(F){function R(M){var g;return((g=M.metadata)==null?void 0:g.title)||(0,m.$3)(M,{defaultKind:F==null?void 0:F.defaultKind})}return{title:"Name",field:"resolved.entityRef",highlight:!0,customSort({entity:M},{entity:g}){return R(M).localeCompare(R(g))},render:({entity:M})=>ne.createElement(m.dx,{entityRef:M,defaultKind:(F==null?void 0:F.defaultKind)||"Component"})}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:F})=>ne.createElement(m.rI,{entityRefs:F.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:F})=>ne.createElement(m.rI,{entityRefs:F.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:F})=>{var R,M;return ne.createElement(ne.Fragment,null,(((R=F==null?void 0:F.spec)==null?void 0:R.targets)||((M=F==null?void 0:F.spec)==null?void 0:M.target))&&ne.createElement(p.Or,{text:(F.spec.targets||[F.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(){return{title:"Type",field:"entity.spec.type",hidden:!0,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:F})=>ne.createElement(p.Or,{text:F.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:F})=>ne.createElement(ne.Fragment,null,F.metadata.tags&&F.metadata.tags.map(R=>ne.createElement(re.Z,{key:R,label:R,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(F){return{title:"Title",field:"entity.metadata.title",hidden:F==null?void 0:F.hidden,searchable:!0}},createLabelColumn(F,R){return{title:(R==null?void 0:R.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:M})=>{var g;const Ze=(g=M.metadata)==null?void 0:g.labels,we=Ze&&Ze[F]||(R==null?void 0:R.defaultValue);return ne.createElement(ne.Fragment,null,we&&ne.createElement(re.Z,{key:we,label:we,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}}),ve=(0,I.Z)({root:{color:"#f3ba37"}})(r.Z),be=(F,R)=>{const M=g=>g.metadata.title||(0,m.$3)(g,{defaultKind:"Component"});return M(F).localeCompare(M(R))},u=F=>{var R,M,g,Ze,we;const{columns:Qe,actions:le,tableOptions:Le,subtitle:Se,emptyContent:Ke}=F,{isStarredEntity:St,toggleStarredEntity:L}=(0,m.CR)(),{loading:mt,error:fe,entities:Kt,filters:Et}=(0,m.wp)(),It=(0,ne.useMemo)(()=>{var wt;return[se.createTitleColumn({hidden:!0}),se.createNameColumn({defaultKind:(wt=Et.kind)==null?void 0:wt.value}),...Xt(),se.createMetadataDescriptionColumn(),se.createTagsColumn()];function Xt(){var Re;const j=[se.createSystemColumn(),se.createOwnerColumn(),se.createSpecTypeColumn(),se.createSpecLifecycleColumn()];switch((Re=Et.kind)==null?void 0:Re.value){case"user":return[];case"domain":case"system":return[se.createOwnerColumn()];case"group":case"template":return[se.createSpecTypeColumn()];case"location":return[se.createSpecTypeColumn(),se.createSpecTargetsColumn()];default:return Kt.every(v=>v.metadata.namespace==="default")?j:[...j,se.createNamespaceColumn()]}}},[(R=Et.kind)==null?void 0:R.value,Kt]),Ft=Et.type===void 0,Ye=(0,ye.capitalize)((g=(M=Et.user)==null?void 0:M.value)!=null?g:"all");if(fe)return ne.createElement("div",null,ne.createElement(p.GB,{severity:"error",title:"Could not fetch catalog entities."},ne.createElement(p.Oi,{language:"text",text:fe.toString()})));const _t=[({entity:wt})=>{var Xt;const Re=(Xt=wt.metadata.annotations)==null?void 0:Xt[o.l2],j="View";return{icon:()=>ne.createElement(ne.Fragment,null,ne.createElement(V.Z,{style:W.Z},j),ne.createElement(Xe.Z,{fontSize:"small"})),tooltip:j,disabled:!Re,onClick:()=>{Re&&window.open(Re,"_blank")}}},({entity:wt})=>{var Xt;const Re=(Xt=wt.metadata.annotations)==null?void 0:Xt[o.Tf],j="Edit";return{icon:()=>ne.createElement(ne.Fragment,null,ne.createElement(V.Z,{style:W.Z},j),ne.createElement(tt.Z,{fontSize:"small"})),tooltip:j,disabled:!Re,onClick:()=>{Re&&window.open(Re,"_blank")}}},({entity:wt})=>{const Xt=St(wt),Re=Xt?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>ne.createElement(ne.Fragment,null,ne.createElement(V.Z,{style:W.Z},Re),Xt?ne.createElement(ve,null):ne.createElement(je.Z,null)),tooltip:Re,onClick:()=>L(wt)}}],kt=Kt.sort(be).map(wt=>{const Xt=(0,Y.g)(wt,o.cz,{kind:"system"}),Re=(0,Y.g)(wt,o.S4);return{entity:wt,resolved:{name:(0,m.$3)(wt,{defaultKind:"Component"}),entityRef:(0,o.eE)(wt),ownedByRelationsTitle:Re.map(j=>(0,m.$3)(j,{defaultKind:"group"})).join(", "),ownedByRelations:Re,partOfSystemRelationTitle:Xt.map(j=>(0,m.$3)(j,{defaultKind:"system"})).join(", "),partOfSystemRelations:Xt}}}),Qt=(Qe||It).find(wt=>wt.title==="Type");Qt&&(Qt.hidden=!Ft);const Yt=kt.length>20,Nt=((Ze=Et.kind)==null?void 0:Ze.value)||"",bt=((we=Et.type)==null?void 0:we.value)||"",Tt=[Ye,bt,l()(Nt)].filter(wt=>wt).join(" ");return ne.createElement(p.iA,{isLoading:mt,columns:Qe||It,options:{paging:Yt,pageSize:20,actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!mt,padding:"dense",pageSizeOptions:[20,50,100],...Le},title:`${Tt} (${Kt.length})`,data:kt,actions:le||_t,subtitle:Se,emptyContent:Ke})};u.columns=se},34445:(Un,Ht,e)=>{"use strict";e.d(Ht,{E:()=>Pn});var o=e(34520),p=e(49558),m=e(30204),Y=e(30705),V=e(64304),I=e(78373),W=e(12231),tt=e(86136),Xe=e(49378),r=e(85256),je=e(80030),ye=e(61837),X=e(79784),Z=e(50758),l=e(95544),ne=e(99688),re=e(2784),se=e(73557),ve=e(79692),be=e(31654),u=e(43054),F=e(65759),R=e(18473),M=e(29641);const g=(0,m.c)({id:"core.app-tree"});var Ze=Object.defineProperty,we=(ce,ae,ke)=>ae in ce?Ze(ce,ae,{enumerable:!0,configurable:!0,writable:!0,value:ke}):ce[ae]=ke,Qe=(ce,ae,ke)=>(we(ce,typeof ae!="symbol"?ae+"":ae,ke),ke);const le=({plugin:ce,error:ae,resetError:ke})=>{const vt=`Error in ${ce==null?void 0:ce.id}`;return React.createElement(ErrorPanel,{title:vt,error:ae,defaultExpanded:!0},React.createElement(Button,{variant:"outlined",onClick:ke},"Retry"))};class Le extends null{constructor(){super(...arguments),Qe(this,"state",{error:void 0}),Qe(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(ae){return{error:ae}}render(){const{error:ae}=this.state,{plugin:ke,children:vt}=this.props;return ae?React.createElement(le,{plugin:ke,error:ae,resetError:this.handleErrorReset}):vt}}function Se(ce){const{children:ae}=ce,ke=useApp(),{Progress:vt}=ke.getComponents();return React.createElement(Suspense,{fallback:React.createElement(vt,null)},ae)}(0,R.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1}));const Ke="_ROUTABLE-EXTENSION-RENDERED",St=ce=>{const{disableTracking:ae,children:ke}=ce,vt=useAnalytics();return useEffect(()=>{ae||vt.captureEvent(Ke,"")},[vt,ae]),React.createElement(React.Fragment,null,ke)};function L(ce){const{id:ae,source:ke,routable:vt,children:jt}=ce,Vt={extension:ae,pluginId:ke==null?void 0:ke.id};return React.createElement(Se,null,React.createElement(Le,{plugin:ke},React.createElement(AnalyticsContext,{attributes:Vt},React.createElement(St,{disableTracking:!vt},jt))))}function mt(ce){return{id:ce,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}}}}const fe={reactElement:mt("core.reactElement"),routePath:mt("core.routing.path"),apiFactory:mt("core.api.factory"),routeRef:mt("core.routing.ref"),navTarget:mt("core.nav.target"),theme:mt("core.theme")};function Kt(ce){var ae,ke;return{...ce,disabled:(ae=ce.disabled)!=null?ae:!1,$$type:"@backstage/Extension",inputs:(ke=ce.inputs)!=null?ke:{},factory({inputs:vt,...jt}){return ce.factory({inputs:vt,...jt})}}}function Et(ce,ae){return{$$type:"@backstage/ExtensionInput",extensionData:ce,config:{singleton:Boolean(ae==null?void 0:ae.singleton),optional:Boolean(ae==null?void 0:ae.optional)}}}function It(ce){var ae,ke,vt;return{...ce,routes:(ae=ce.routes)!=null?ae:{},externalRoutes:(ke=ce.externalRoutes)!=null?ke:{},extensions:(vt=ce.extensions)!=null?vt:[],$$type:"@backstage/BackstagePlugin"}}function Ft(ce){return{$$type:"@backstage/ExtensionOverrides",version:"v1",extensions:ce.extensions}}function Ye(ce){const{factory:ae,configSchema:ke,inputs:vt}=ce,jt="api"in ce?ce.api:ae.api;return Kt({id:`apis.${jt.id}`,attachTo:{id:"core",input:"apis"},inputs:vt,configSchema:ke,output:{api:fe.apiFactory},factory({config:Vt,inputs:An}){return typeof ae=="function"?{api:ae({config:Vt,inputs:An})}:{api:ae}}})}function _t(ce){const ae=ce(z);return{parse:ke=>{const vt=ae.safeParse(ke);if(vt.success)return vt.data;throw new Error(vt.error.issues.map(kt).join("; "))},schema:zodToJsonSchema(ae)}}function kt(ce){if(ce.code==="invalid_union")return kt(ce.unionErrors[0].issues[0]);let ae=ce.message;return ae==="Required"&&(ae="Missing required value"),ce.path.length&&(ae+=` at '${ce.path.join(".")}'`),ae}function Qt(ce){var ae;const{id:ke}=ce,vt="configSchema"in ce?ce.configSchema:_t(jt=>jt.object({path:jt.string().default(ce.defaultPath)}));return Kt({id:ke,attachTo:(ae=ce.attachTo)!=null?ae:{id:"core.routes",input:"routes"},configSchema:vt,inputs:ce.inputs,disabled:ce.disabled,output:{element:fe.reactElement,path:fe.routePath,routeRef:fe.routeRef.optional()},factory({config:jt,inputs:Vt,source:An}){const Nn=lazy(()=>ce.loader({config:jt,inputs:Vt}).then(Fn=>({default:()=>Fn})));return{path:jt.path,routeRef:ce.routeRef,element:React.createElement(L,{id:ke,source:An,routable:!0},React.createElement(Nn,null))}}})}function Yt(ce){const{id:ae,routeRef:ke,title:vt,icon:jt}=ce;return Kt({id:ae,attachTo:{id:"core.nav",input:"items"},configSchema:_t(Vt=>Vt.object({title:Vt.string().default(vt)})),output:{navTarget:fe.navTarget},factory:({config:Vt})=>({navTarget:{title:Vt.title,icon:jt,routeRef:ke}})})}function Nt(ce){return Kt({id:`themes.${ce.id}`,attachTo:{id:"core",input:"themes"},output:{theme:fe.theme},factory:()=>({theme:ce})})}const bt="eHgtF5hmbrXyiEvo";function Tt(ce=Error){const{stack:ae}=new ce(bt);if(!ae)return"<unknown>";const ke=ae.includes(bt)?ae.indexOf(`
`)+1:0,vt=ae.indexOf(`
`,ae.indexOf(`
`,ke)+1)+1,jt=ae.indexOf(`
`,vt),Vt=ae.substring(vt,jt).trim();return Vt?Vt.includes("(")?Vt.substring(Vt.indexOf("(")+1,Vt.indexOf(")")):Vt.includes("@")?Vt.substring(Vt.indexOf("@")+1):Vt:"unknown"}var wt=Object.defineProperty,Xt=(ce,ae,ke)=>ae in ce?wt(ce,ae,{enumerable:!0,configurable:!0,writable:!0,value:ke}):ce[ae]=ke,Re=(ce,ae,ke)=>(Xt(ce,typeof ae!="symbol"?ae+"":ae,ke),ke),j=(ce,ae,ke)=>{if(!ae.has(ce))throw TypeError("Cannot "+ke)},v=(ce,ae,ke)=>(j(ce,ae,"read from private field"),ke?ke.call(ce):ae.get(ce)),k=(ce,ae,ke)=>{if(ae.has(ce))throw TypeError("Cannot add the same private member more than once");ae instanceof WeakSet?ae.add(ce):ae.set(ce,ke)},Q=(ce,ae,ke,vt)=>(j(ce,ae,"write to private field"),vt?vt.call(ce,ke):ae.set(ce,ke),ke),q,Ge,U,x,he;function Fe(ce){const ae=ce;if(ae.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${ae.$$type}'`);return ae}class dt{constructor(ae=[],ke){this.params=ae,k(this,x),Re(this,"$$type","@backstage/RouteRef"),Re(this,"version","v1"),k(this,q,void 0),k(this,Ge,void 0),k(this,U,void 0),Q(this,Ge,ae),Q(this,U,ke)}getParams(){return v(this,Ge)}getDescription(){return v(this,q)?v(this,q):`created at '${v(this,U)}'`}setId(ae){if(!ae)throw new Error(`${v(this,x,he)} id must be a non-empty string`);if(v(this,q))throw new Error(`${v(this,x,he)} was referenced twice as both '${v(this,q)}' and '${ae}'`);Q(this,q,ae)}toString(){return`${v(this,x,he)}{${this.getDescription()}}`}}q=new WeakMap,Ge=new WeakMap,U=new WeakMap,x=new WeakSet,he=function(){return this.$$type.slice(11)};function qt(ce){return new dt(ce==null?void 0:ce.params,Tt())}var Ie=Object.defineProperty,Be=(ce,ae,ke)=>ae in ce?Ie(ce,ae,{enumerable:!0,configurable:!0,writable:!0,value:ke}):ce[ae]=ke,ct=(ce,ae,ke)=>(Be(ce,typeof ae!="symbol"?ae+"":ae,ke),ke),Ot=(ce,ae,ke)=>{if(!ae.has(ce))throw TypeError("Cannot "+ke)},Ct=(ce,ae,ke)=>(Ot(ce,ae,"read from private field"),ke?ke.call(ce):ae.get(ce)),$t=(ce,ae,ke)=>{if(ae.has(ce))throw TypeError("Cannot add the same private member more than once");ae instanceof WeakSet?ae.add(ce):ae.set(ce,ke)},Pt=(ce,ae,ke,vt)=>(Ot(ce,ae,"write to private field"),vt?vt.call(ce,ke):ae.set(ce,ke),ke),$e,qe;const Ee=/^\w+$/;class G{constructor(ae,ke,vt){this.path=ae,ct(this,"$$type","@backstage/SubRouteRef"),ct(this,"version","v1"),$t(this,$e,void 0),$t(this,qe,void 0),Pt(this,$e,ke),Pt(this,qe,vt)}getParams(){return Ct(this,$e)}getParent(){return Ct(this,qe)}getDescription(){const ae=Fe(Ct(this,qe));return`at ${this.path} with parent ${ae.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}$e=new WeakMap,qe=new WeakMap;function de(ce){const{path:ae,parent:ke}=ce,jt=Fe(ke).getParams(),Vt=ae.split("/").filter(Fn=>Fn.startsWith(":")).map(Fn=>Fn.substring(1)),An=[...jt,...Vt];if(jt.some(Fn=>Vt.includes(Fn)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!ae.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${ae}'`);if(ae.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${ae}'`);for(const Fn of Vt)if(!Ee.test(Fn))throw new Error(`SubRouteRef path has invalid param, got '${Fn}'`);return new G(ae,An,ke)}var Ue=Object.defineProperty,nt=(ce,ae,ke)=>ae in ce?Ue(ce,ae,{enumerable:!0,configurable:!0,writable:!0,value:ke}):ce[ae]=ke,it=(ce,ae,ke)=>(nt(ce,typeof ae!="symbol"?ae+"":ae,ke),ke);class Rt extends null{constructor(ae,ke=[],vt){super(ke,vt),this.optional=ae,this.params=ke,it(this,"$$type","@backstage/ExternalRouteRef")}}function en(ce){return new Rt(Boolean(ce==null?void 0:ce.optional),ce==null?void 0:ce.params,Tt())}function rn(ce){const{pathname:ae}=useLocation(),ke=useVersionedContext("routing-context");if(!ke)throw new Error("Routing context is not available");const vt=ke.atVersion(1),jt=useMemo(()=>vt&&vt.resolve(ce,{pathname:ae}),[vt,ce,ae]);if(!ke)throw new Error("useRouteRef used outside of routing context");if(!vt)throw new Error("RoutingContext v1 not available");const Vt="optional"in ce&&ce.optional;if(!jt&&!Vt)throw new Error(`No path for ${ce}`);return jt}function Ae(ce){return useParams()}var De=e(56563);function w(ce,ae){const ke=new Set([...getEntityRelations(ce,RELATION_MEMBER_OF,{kind:"group"}),...ce?[getCompoundEntityRef(ce)]:[]].map(stringifyEntityRef)),vt=getEntityRelations(ae,RELATION_OWNED_BY).map(stringifyEntityRef);for(const jt of vt)if(ke.has(jt))return!0;return!1}function H(ce){const{entity:ae,loading:ke,error:vt}=(0,I.a)(),{allowed:jt,loading:Vt,error:An}=(0,De.gI)({permission:ce,resourceRef:ae?(0,o.eE)(ae):void 0});return ke||Vt?{loading:!0,allowed:!1}:vt?{loading:!1,allowed:!1,error:vt}:{loading:!1,allowed:jt,error:An}}const te=mt("plugin.catalog.entity.content.title"),ut=mt("plugin.catalog.entity.filter");function K(ce,ae){return ce?ce.toLocaleLowerCase("en-US")===(ae==null?void 0:ae.toLocaleLowerCase("en-US")):!0}function ee(ce,ae){return ke=>{var vt;return((vt=ce.filter)==null?void 0:vt.some(Vt=>{var An,Nn;const Fn=K(Vt.isKind,ke.entity.kind),sr=K(Vt.isType,(Nn=(An=ke.entity.spec)==null?void 0:An.type)==null?void 0:Nn.toString());return Fn&&sr}))?!0:ae?ae(ke):!0}}function Ve(ce){var ae,ke;const vt=`entity.cards.${ce.id}`;return createExtension({id:vt,attachTo:(ae=ce.attachTo)!=null?ae:{id:"entity.content.overview",input:"cards"},disabled:(ke=ce.disabled)!=null?ke:!0,output:{element:coreExtensionData.reactElement,filter:ut},inputs:ce.inputs,configSchema:createSchemaFromZod(jt=>jt.object({filter:jt.array(jt.object({isKind:jt.string().optional(),isType:jt.string().optional()})).optional()})),factory({config:jt,inputs:Vt,source:An}){const Nn=lazy(()=>ce.loader({inputs:Vt}).then(Fn=>({default:()=>Fn})));return{element:React.createElement(ExtensionBoundary,{id:vt,source:An},React.createElement(Nn,null)),filter:ee(jt,ce.filter)}}})}function lt(ce){var ae,ke;const vt=`entity.content.${ce.id}`;return createExtension({id:vt,attachTo:(ae=ce.attachTo)!=null?ae:{id:"plugin.catalog.page.entity",input:"contents"},disabled:(ke=ce.disabled)!=null?ke:!0,output:{element:coreExtensionData.reactElement,path:coreExtensionData.routePath,routeRef:coreExtensionData.routeRef.optional(),title:te,filter:ut},inputs:ce.inputs,configSchema:createSchemaFromZod(jt=>jt.object({path:jt.string().default(ce.defaultPath),title:jt.string().default(ce.defaultTitle),filter:jt.array(jt.object({isKind:jt.string().optional(),isType:jt.string().optional()})).optional()})),factory({config:jt,inputs:Vt,source:An}){const Nn=lazy(()=>ce.loader({inputs:Vt}).then(Fn=>({default:()=>Fn})));return{path:jt.path,title:jt.title,routeRef:ce.routeRef,element:React.createElement(ExtensionBoundary,{id:vt,source:An,routable:!0},React.createElement(Nn,null)),filter:ee(jt,ce.filter)}}})}var Lt=e(75650),zt=e(49166);function Gt(ce){var ae;const{unregisterEntityOptions:ke,isUnregisterAllowed:vt,onUnregisterEntity:jt,onClose:Vt}=ce,An=typeof(ke==null?void 0:ke.disableUnregister)=="boolean",Nn=(ae=!vt||(An?!!(ke!=null&&ke.disableUnregister):(ke==null?void 0:ke.disableUnregister)==="disable"))!=null?ae:!1;let Fn=re.createElement(re.Fragment,null);return(ke==null?void 0:ke.disableUnregister)!=="hidden"&&(Fn=re.createElement(W.Z,{onClick:()=>{Vt(),jt()},disabled:Nn},re.createElement(tt.Z,null,re.createElement(zt.Z,{fontSize:"small"})),re.createElement(Xe.Z,{primary:"Unregister entity"}))),re.createElement(re.Fragment,null,Fn)}const an=(0,ve.Z)(ce=>({button:{color:ce.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function fn(ce){const{UNSTABLE_extraContextMenuItems:ae,UNSTABLE_contextMenuOptions:ke,onUnregisterEntity:vt,onInspectEntity:jt}=ce,[Vt,An]=(0,re.useState)(),Nn=an(),sr=H(Lt.j8).allowed,gr=vr=>{An(vr.currentTarget)},Jn=()=>{An(void 0)},pr=(0,m.u)(m.l),Cr=(0,re.useCallback)(()=>{window.navigator.clipboard.writeText(window.location.toString()).then(()=>pr.post({message:"Copied!",severity:"info",display:"transient"}))},[pr]),xr=ae&&[...ae.map(vr=>re.createElement(W.Z,{key:vr.title,onClick:()=>{Jn(),vr.onClick()}},re.createElement(tt.Z,null,re.createElement(vr.Icon,{fontSize:"small"})),re.createElement(Xe.Z,{primary:vr.title}))),re.createElement(r.Z,{key:"the divider is here!"})];return re.createElement(re.Fragment,null,re.createElement(je.ZP,{title:"More",arrow:!0},re.createElement(ye.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!Vt,role:"button",onClick:gr,"data-testid":"menu-button",className:Nn.button,id:"long-menu"},re.createElement(u.Z,null))),re.createElement(X.ZP,{open:Boolean(Vt),onClose:Jn,anchorEl:Vt,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},re.createElement(Z.Z,{autoFocusItem:Boolean(Vt)},xr,re.createElement(Gt,{unregisterEntityOptions:ke,isUnregisterAllowed:sr,onUnregisterEntity:vt,onClose:Jn}),re.createElement(W.Z,{onClick:()=>{Jn(),jt()}},re.createElement(tt.Z,null,re.createElement(be.Z,{fontSize:"small"})),re.createElement(Xe.Z,{primary:"Inspect entity"})),re.createElement(W.Z,{onClick:()=>{Jn(),Cr()}},re.createElement(tt.Z,null,re.createElement(F.Z,{fontSize:"small"})),re.createElement(Xe.Z,{primary:"Copy entity URL"})))))}const on="plugin.catalog.entityLayoutRoute",ln=()=>null;(0,Y.R5)(ln,on,!0),(0,Y.R5)(ln,"core.gatherMountPoints",!0);function cn(ce){const{entity:ae,title:ke}=ce;return re.createElement(l.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},re.createElement(l.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},ae?re.createElement(V.co,{entityRef:ae,hideIcon:!0}):ke),ae&&re.createElement(V.LH,{entity:ae}))}function On(ce,ae,ke,vt){var jt,Vt,An,Nn,Fn;const sr=(jt=ce!=null?ce:vt==null?void 0:vt.kind)!=null?jt:"",gr=(Vt=ae!=null?ae:vt==null?void 0:vt.metadata.namespace)!=null?Vt:"";return{headerTitle:`${(Fn=(Nn=(An=vt==null?void 0:vt.metadata.title)!=null?An:ke)!=null?Nn:vt==null?void 0:vt.metadata.name)!=null?Fn:""}${gr&&gr!==o.zG?` in ${gr}`:""}`,headerType:(()=>{let pr=sr.toLocaleLowerCase("en-US");return vt&&vt.spec&&"type"in vt.spec&&(pr+=" \u2014 ",pr+=vt.spec.type.toLocaleLowerCase("en-US")),pr})()}}function dn(ce){var ae,ke;const{entity:vt}=ce,jt=(0,I.g)(vt,o.S4);return re.createElement(re.Fragment,null,jt.length>0&&re.createElement(p.i9,{label:"Owner",contentTypograpyRootComponent:"p",value:re.createElement(V.rI,{entityRefs:jt,defaultKind:"Group",color:"inherit"})}),((ae=vt.spec)==null?void 0:ae.lifecycle)&&re.createElement(p.i9,{label:"Lifecycle",value:(ke=vt.spec.lifecycle)==null?void 0:ke.toString()}))}const Pn=ce=>{var ae,ke,vt;const{UNSTABLE_extraContextMenuItems:jt,UNSTABLE_contextMenuOptions:Vt,children:An,NotFoundComponent:Nn}=ce,{kind:Fn,namespace:sr,name:gr}=(0,Y.Oi)(V.wi),{entity:Jn,loading:pr,error:Cr}=(0,I.a)(),xr=(0,se.TH)(),vr=(0,Y.vJ)(An,O=>O.selectByComponentData({key:on,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:D})=>{if(Jn){if(D.if&&!D.if(Jn))return[]}else return[];return[{path:D.path,title:D.title,children:D.children,tabProps:D.tabProps}]}),[Jn]),{headerTitle:Lr,headerType:Ar}=On(Fn,sr,gr,Jn),[Mr,ie]=(0,re.useState)(!1),[He,st]=(0,re.useState)(!1),C=(0,se.s0)(),_=async()=>{ie(!1),st(!1),C("/")};return(0,re.useEffect)(()=>{ie(!1),st(!1)},[xr.pathname]),re.createElement(p.T3,{themeId:(vt=(ke=(ae=Jn==null?void 0:Jn.spec)==null?void 0:ae.type)==null?void 0:ke.toString())!=null?vt:"home"},re.createElement(p.h4,{title:re.createElement(cn,{title:Lr,entity:Jn}),pageTitleOverride:Lr,type:Ar},Jn&&re.createElement(re.Fragment,null,re.createElement(dn,{entity:Jn}),re.createElement(fn,{UNSTABLE_extraContextMenuItems:jt,UNSTABLE_contextMenuOptions:Vt,onUnregisterEntity:()=>ie(!0),onInspectEntity:()=>st(!0)}))),pr&&re.createElement(p.Ex,null),Jn&&re.createElement(p.tn,{routes:vr}),Cr&&re.createElement(p.VY,null,re.createElement(ne.Z,{severity:"error"},Cr.toString())),!pr&&!Cr&&!Jn&&re.createElement(p.VY,null,Nn||re.createElement(p.GB,{title:"Entity not found"},"There is no ",Fn," with the requested"," ",re.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),re.createElement(V.pp,{open:Mr,entity:Jn,onConfirm:_,onClose:()=>ie(!1)}),re.createElement(V.U_,{open:He,entity:Jn,onClose:()=>st(!1)}))};Pn.Route=ln},28814:(Un,Ht,e)=>{"use strict";e.d(Ht,{D:()=>Nt,a:()=>Ye,b:()=>wt,c:()=>bt,r:()=>Xt,v:()=>Tt});var o=e(34520);function p(Re){const{years:j=0,months:v=0,weeks:k=0,days:Q=0,hours:q=0,minutes:Ge=0,seconds:U=0,milliseconds:x=0}=Re;return((((j*365+v*30+k*7+Q)*24+q)*60+Ge)*60+U)*1e3+x}var m=e(99798),Y=e.n(m),V=e(12830),I=e.n(V),W=e(82394),tt=e.n(W),Xe=e(64304),r=e(43642),je=e(77224),ye=e(15933),X=e(78898),Z=e(4989),l=e(44407),ne=e(84219),re=e(98685),se=e(76635),ve=e(30705);const be={seconds:10},u={milliseconds:50},F={api:ye.Z,component:l.Z,system:je.Z,domain:r.Z,location:Z.Z,user:re.Z,group:ne.Z,template:X.Z};function R(Re){return{async:Re.async,render:({entityRef:j,entity:v,context:k})=>({snapshot:(0,Xe.n8)(v||j,k),loadEntity:Re.async})}}var M=(Re,j,v)=>{if(!j.has(Re))throw TypeError("Cannot "+v)},g=(Re,j,v)=>(M(Re,j,"read from private field"),v?v.call(Re):j.get(Re)),Ze=(Re,j,v)=>{if(j.has(Re))throw TypeError("Cannot add the same private member more than once");j instanceof WeakSet?j.add(Re):j.set(Re,v)},we=(Re,j,v,k)=>(M(Re,j,"write to private field"),k?k.call(Re,v):j.set(Re,v),v),Qe=(Re,j,v)=>(M(Re,j,"access private method"),v),le,Le,Se,Ke,St,L,mt,fe,Kt,Et,It;const Ft=class ai{constructor(j){Ze(this,L),Ze(this,fe),Ze(this,Et),Ze(this,le,void 0),Ze(this,Le,void 0),Ze(this,Se,void 0),Ze(this,Ke,void 0),Ze(this,St,void 0);var v,k,Q,q;const Ge=(v=j.cacheTtl)!=null?v:be,U=(k=j.batchDelay)!=null?k:u,x=(Q=j.renderer)!=null?Q:R({async:!0}),he={};if(Object.entries((q=j.kindIcons)!=null?q:F).forEach(([Fe,dt])=>{he[Fe.toLocaleLowerCase("en-US")]=dt}),x.async){if(!j.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");we(this,Se,Qe(this,fe,Kt).call(this,{cacheTtl:Ge,batchDelay:U,renderer:x,catalogApi:j.catalogApi}))}we(this,Le,p(Ge)),we(this,le,new Map),we(this,Ke,he),we(this,St,x)}static createLocal(){return new ai({renderer:R({async:!1})})}static create(j){return new ai(j)}forEntity(j,v){const{entityRef:k,kind:Q,entity:q,needsLoad:Ge}=Qe(this,L,mt).call(this,j),U=Fe=>{const{snapshot:dt}=g(this,St).render({entityRef:k,loading:Fe.loading,entity:Fe.entity,context:v||{}});return{...dt,entityRef:k,Icon:Qe(this,Et,It).call(this,dt.Icon,Q)}};let x;try{x=U({loading:Ge,entity:q})}catch{x={primaryTitle:k,entityRef:k}}const he=Ge?new(tt())(Fe=>{let dt=!1;return Promise.resolve().then(()=>{var qt;return(qt=g(this,Se))==null?void 0:qt.load(k)}).then(qt=>{if(!dt&&qt&&qt.metadata.etag!==(q==null?void 0:q.metadata.etag)){const Ie=U({loading:!1,entity:qt});Fe.next(Ie)}}).catch(()=>{}).finally(()=>{dt||Fe.complete()}),()=>{dt=!0}}):void 0;return{snapshot:x,update$:he}}};le=new WeakMap,Le=new WeakMap,Se=new WeakMap,Ke=new WeakMap,St=new WeakMap,L=new WeakSet,mt=function(Re){if(typeof Re!="string")return{entity:Re,kind:Re.kind,entityRef:(0,o.eE)(Re),needsLoad:!1};const j=g(this,le).get(Re),v=j==null?void 0:j.entity,Q=(!j||Date.now()-j.updatedAt>g(this,Le))&&g(this,St).async!==!1&&g(this,Se)!==void 0;return{entity:v,kind:(0,o.of)(Re).kind,entityRef:Re,needsLoad:Q}},fe=new WeakSet,Kt=function(Re){const j=p(Re.cacheTtl),v=p(Re.batchDelay);return new(Y())(async k=>{const{items:Q}=await Re.catalogApi.getEntitiesByRefs({entityRefs:k}),q=Date.now();return k.forEach((Ge,U)=>{g(this,le).set(Ge,{updatedAt:q,entity:Q[U]})}),Q},{name:"DefaultEntityPresentationApi",cacheMap:new(I())(j),maxBatchSize:100,batchScheduleFn:v?k=>setTimeout(k,v):void 0})},Et=new WeakSet,It=function(Re,j){return Re||(Re===!1?!1:g(this,Ke)[j.toLocaleLowerCase("en-US")])};let Ye=Ft;async function _t({storageApi:Re}){var j;const v=Re.forBucket("settings"),k=Re.forBucket("starredEntities"),Q=v.snapshot("starredEntities").value;if(!(0,se.isArray)(Q))return;const q=new Set((j=k.snapshot("entityRefs").value)!=null?j:[]);Q.filter(se.isString).map(Ge=>Ge.split(":")).filter(Ge=>Ge.length===4&&Ge[0]==="entity").map(([Ge,U,x,he])=>(0,o.eE)({kind:U,namespace:x,name:he})).forEach(Ge=>q.add(Ge)),await k.set("entityRefs",Array.from(q)),await v.remove("starredEntities")}var kt=Object.defineProperty,Qt=(Re,j,v)=>j in Re?kt(Re,j,{enumerable:!0,configurable:!0,writable:!0,value:v}):Re[j]=v,Yt=(Re,j,v)=>(Qt(Re,typeof j!="symbol"?j+"":j,v),v);class Nt{constructor(j){Yt(this,"settingsStore"),Yt(this,"starredEntities"),Yt(this,"subscribers",new Set),Yt(this,"observable",new(tt())(k=>(k.next(new Set(this.starredEntities)),this.subscribers.add(k),()=>{this.subscribers.delete(k)})));var v;_t(j).then(),this.settingsStore=j.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((v=this.settingsStore.snapshot("entityRefs").value)!=null?v:[]),this.settingsStore.observe$("entityRefs").subscribe({next:k=>{var Q;this.starredEntities=new Set((Q=k.value)!=null?Q:[]),this.notifyChanges()}})}async toggleStarred(j){this.starredEntities.has(j)?this.starredEntities.delete(j):this.starredEntities.add(j),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const j of this.subscribers)j.next(new Set(this.starredEntities))}}const bt=(0,ve.x8)({id:"create-component",optional:!0}),Tt=(0,ve.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),wt=(0,ve.x8)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),Xt=(0,ve.NT)({id:"catalog"})},16673:(Un,Ht,e)=>{"use strict";e.d(Ht,{BL:()=>Be,Cy:()=>Ct,Eq:()=>fe,FZ:()=>Ee,Kf:()=>j,PA:()=>mt,Tu:()=>he,VU:()=>It,_l:()=>Re,bM:()=>dt,dN:()=>Fe,f2:()=>qt,im:()=>_t,jF:()=>$t,mr:()=>kt,o6:()=>$e,oU:()=>Ot,p$:()=>Nt,rR:()=>x,vA:()=>Et,yf:()=>ct});var o=e(28814),p=e(2784),m=e(79692),Y=e(12420),V=e(8629),I=e(79249),W=e(49429),tt=e(77277),Xe=e(95544),r=e(64304),je=e(78373),ye=e(19928),X=e.n(ye),Z=e(30204),l=e(30705),ne=e(64279),re=e(99688),se=e(73557),ve=e(32272),be=e(49558),u=e(34520),F=e(88285),R=e(42054),M=e(99798),g=e.n(M),Ze=e(82394),we=e.n(Ze),Qe=e(76635),le=e.n(Qe);function Le(){const G=useApi(catalogApiRef),{error:de,loading:Ue,value:nt}=useAsync(async()=>await G.getEntityFacets({facets:["kind"]}).then(Rt=>{var en;return((en=Rt.facets.kind)==null?void 0:en.map(rn=>rn.value).sort())||[]}),[G]);return{loading:Ue,error:de,allKinds:nt!=null?nt:[]}}function Se(G,de,Ue){let nt=G;return de&&(nt=nt.filter(Rt=>de.some(en=>en.toLocaleLowerCase("en-US")===Rt.toLocaleLowerCase("en-US")))),Ue&&!G.some(Rt=>Rt.toLocaleLowerCase("en-US")===Ue.toLocaleLowerCase("en-US"))&&(nt=nt.concat([Ue])),nt.sort().reduce((Rt,en)=>(Rt[en.toLocaleLowerCase("en-US")]=en,Rt),{})}const Ke=(0,m.Z)(G=>(0,Y.Z)({root:{...G.typography.h4}}));function St(G){var de,Ue;const{initialFilter:nt="component",allowedKinds:it}=G,Rt=Ke(),{allKinds:en}=Le(),{filters:rn,updateFilters:Ae,queryParameters:{kind:De}}=useEntityList(),w=useMemo(()=>[De].flat()[0],[De]),[H,te]=useState((Ue=w!=null?w:(de=rn.kind)==null?void 0:de.value)!=null?Ue:nt);useEffect(()=>{w&&te(w)},[w]),useEffect(()=>{var K,ee;(K=rn.kind)!=null&&K.value&&te((ee=rn.kind)==null?void 0:ee.value)},[rn.kind]),useEffect(()=>{Ae({kind:H?new EntityKindFilter(H):void 0})},[H,Ae]);const ut=Se(en,it,H);return React.createElement(Select,{input:React.createElement(InputBase,null),value:H.toLocaleLowerCase("en-US"),onChange:K=>te(K.target.value),classes:Rt},Object.keys(ut).map(K=>React.createElement(MenuItem,{value:K,key:K},`${pluralize(ut[K])}`)))}function L(G){const{open:de,onClose:Ue,onConfirm:nt,entity:it}=G,[Rt,en]=(0,p.useState)(!1),rn=(0,Z.u)(r.Ah),Ae=(0,Z.u)(Z.l),De=async()=>{en(!0);try{const w=it.metadata.uid;await rn.removeEntityByUid(w),nt()}catch(w){(0,ve.BD)(w),Ae.post({message:w.message})}finally{en(!1)}};return p.createElement(V.Z,{open:de,onClose:Ue},p.createElement(I.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),p.createElement(W.Z,null,p.createElement(tt.Z,{variant:"contained",color:"secondary",disabled:Rt,onClick:De},"Delete"),p.createElement(tt.Z,{onClick:Ue,color:"primary"},"Cancel")))}function mt(G){var de,Ue;return((Ue=(de=G==null?void 0:G.metadata)==null?void 0:de.annotations)==null?void 0:Ue["backstage.io/orphan"])==="true"}function fe(){const G=(0,se.s0)(),de=(0,l.tg)(o.r),[Ue,nt]=(0,p.useState)(!1),{entity:it}=(0,je.u)(),Rt=async()=>{nt(!1),G(de())};return p.createElement(p.Fragment,null,p.createElement(re.Z,{severity:"warning",onClick:()=>nt(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),p.createElement(L,{open:Ue,entity:it,onConfirm:Rt,onClose:()=>nt(!1)}))}async function Kt(G,de){var Ue;const nt=(Ue=G.relations)==null?void 0:Ue.map(Rt=>Rt.targetRef);if(!nt||(nt==null?void 0:nt.length)<1||nt.length>1e3)return[];const it=await de.getEntitiesByRefs({entityRefs:nt,fields:["kind","metadata.name","metadata.namespace"]});return nt.filter((Rt,en)=>it.items[en]===void 0)}async function Et(G,de){const Ue=de.apis.get(r.Ah);if(!Ue)throw new Error(`No implementation available for ${r.Ah}`);return(await Kt(G,Ue)).length>0}function It(){const{entity:G}=(0,je.u)(),de=(0,Z.u)(r.Ah),{loading:Ue,error:nt,value:it}=(0,ne.default)(async()=>Kt(G,de),[G,de]);return nt?p.createElement(Xe.Z,{mb:1},p.createElement(be.Gk,{error:nt})):Ue||!it||it.length===0?null:p.createElement(p.Fragment,null,p.createElement(re.Z,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",p.createElement("br",null),"Entities not found are: ",it.join(", ")))}const Ft=G=>G.error&&G.level==="error"&&G.type===F.mk;async function Ye(G,de){return{items:(await de.getEntityAncestors({entityRef:G})).items.map(it=>{var Rt,en;return{errors:((en=(Rt=it.entity.status)==null?void 0:Rt.items)!=null?en:[]).filter(Ft).map(De=>De.error).filter(De=>Boolean(De)),entity:it.entity}}).filter(it=>it.errors.length>0)}}async function _t(G,de){const Ue=de.apis.get(r.Ah);if(!Ue)throw new Error(`No implementation available for ${r.Ah}`);return(await Ye((0,u.eE)(G),Ue)).items.length>0}function kt(){const{entity:G}=(0,je.u)(),de=(0,u.eE)(G),Ue=(0,Z.u)(r.Ah),{loading:nt,error:it,value:Rt}=(0,ne.default)(async()=>Ye(de,Ue),[de,Ue]);return it?p.createElement(Xe.Z,{mb:1},p.createElement(be.Gk,{error:it})):nt||!Rt?null:p.createElement(p.Fragment,null,Rt.items.map((en,rn)=>p.createElement(Xe.Z,{key:rn,mb:1},(0,u.eE)(G)!==(0,u.eE)(en.entity)&&p.createElement(Xe.Z,{p:1},"The error below originates from"," ",p.createElement(r.dx,{entityRef:en.entity})),en.errors.map((Ae,De)=>p.createElement(be.Gk,{key:De,error:Ae})))))}const Qt="core.backstage.entitySwitch",Yt=G=>null;(0,l.R5)(Yt,Qt,!0);const Nt=G=>{var de,Ue;const{entity:nt,loading:it}=(0,je.a)(),Rt=(0,Z.b)(),en=(0,l.vJ)(G.children,Ae=>Ae.selectByComponentData({key:Qt,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(De=>{if(it&&!nt)return[];const{if:w,children:H}=De.props;return nt?[{if:w==null?void 0:w(nt,{apis:Rt}),children:H}]:[{if:w===void 0,children:H}]}),[Rt,nt,it]);if(en.some(Ae=>typeof Ae.if=="object"&&"then"in Ae.if))return p.createElement(bt,{results:en,renderMultipleMatches:G.renderMultipleMatches});if(G.renderMultipleMatches==="all"){const Ae=en.filter(De=>De.if).map(De=>De.children);return Ae.length===0?Tt(en):p.createElement(p.Fragment,null,Ae)}return(Ue=(de=en.find(Ae=>Ae.if))==null?void 0:de.children)!=null?Ue:Tt(en)};function bt({results:G,renderMultipleMatches:de}){const{loading:Ue,value:nt}=(0,ne.default)(async()=>{var it;const Rt=G.map(async({if:en,children:rn})=>{try{if(await en)return rn}catch{}return null});if(de==="all"){const en=(await Promise.all(Rt)).filter(Boolean);return en.length===0?Tt(G):p.createElement(p.Fragment,null,en)}return(it=(await Promise.all(Rt)).find(Boolean))!=null?it:Tt(G)},[G]);return Ue||!nt?null:nt}function Tt(G){var de,Ue;return(Ue=(de=G.filter(nt=>nt.if===void 0)[0])==null?void 0:de.children)!=null?Ue:null}Nt.Case=Yt;function wt(G,de){return Boolean(G&&typeof G=="string"&&(G==null?void 0:G.toLocaleLowerCase("en-US"))===(de==null?void 0:de.toLocaleLowerCase("en-US")))}function Xt(G,de){return typeof de=="string"?wt(G,de):de.length===0||de.some(Ue=>wt(G,Ue))}function Re(G){return k({kind:G})}function j(G){return k({kind:"component",type:G})}function v(G){return k({kind:"resource",type:G})}function k(G){return de=>{var Ue;return!(G.kind&&!Xt(de.kind,G.kind)||G.type&&!Xt((Ue=de.spec)==null?void 0:Ue.type,G.type))}}function Q(G){return de=>{var Ue;return Xt((Ue=de.metadata)==null?void 0:Ue.namespace,G)}}const q=null,Ge=r._i.Filters,U=r._i.Content,x=(0,l.rx)({id:"catalog",apis:[(0,l.ni)({api:r.Ah,deps:{discoveryApi:Z.q,fetchApi:Z.t},factory:({discoveryApi:G,fetchApi:de})=>new F.MS({discoveryApi:G,fetchApi:de})}),(0,l.ni)({api:r.p3,deps:{storageApi:Z.y},factory:({storageApi:G})=>new o.D({storageApi:G})}),(0,l.ni)({api:r.XI,deps:{catalogApi:r.Ah},factory:({catalogApi:G})=>o.a.create({catalogApi:G})})],routes:{catalogIndex:o.r,catalogEntity:r.wi},externalRoutes:{createComponent:o.c,viewTechDoc:o.v,createFromTemplate:o.b}}),he=x.provide((0,l.P4)({name:"CatalogIndexPage",component:()=>e.e(9302).then(e.bind(e,69302)).then(G=>G.CatalogPage),mountPoint:o.r})),Fe=x.provide((0,l.P4)({name:"CatalogEntityPage",component:()=>e.e(4897).then(e.bind(e,84897)).then(G=>G.CatalogEntityPage),mountPoint:r.wi})),dt=x.provide((0,l.CO)({name:"EntityAboutCard",component:{lazy:()=>e.e(7468).then(e.bind(e,37468)).then(G=>G.AboutCard)}})),qt=x.provide((0,l.CO)({name:"EntityLinksCard",component:{lazy:()=>e.e(9448).then(e.bind(e,69448)).then(G=>G.EntityLinksCard)}})),Ie=x.provide((0,l.CO)({name:"EntityLabelsCard",component:{lazy:()=>e.e(1296).then(e.bind(e,1296)).then(G=>G.EntityLabelsCard)}})),Be=x.provide((0,l.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(4745).then(e.bind(e,34745)).then(G=>G.HasSystemsCard)}})),ct=x.provide((0,l.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(5932).then(e.bind(e,5932)).then(G=>G.HasComponentsCard)}})),Ot=x.provide((0,l.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(4949).then(e.bind(e,74949)).then(G=>G.HasSubcomponentsCard)}})),Ct=x.provide((0,l.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(2842).then(e.bind(e,2842)).then(G=>G.HasResourcesCard)}})),$t=x.provide((0,l.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(748).then(e.bind(e,20748)).then(G=>G.DependsOnComponentsCard)}})),Pt=x.provide((0,l.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(6146).then(e.bind(e,36146)).then(G=>G.DependencyOfComponentsCard)}})),$e=x.provide((0,l.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(7127).then(e.bind(e,47127)).then(G=>G.DependsOnResourcesCard)}})),qe=x.provide((0,l.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(9489).then(e.bind(e,59489)).then(G=>G.RelatedEntitiesCard)}})),Ee=x.provide((0,R.c)({name:"CatalogSearchResultListItem",component:()=>e.e(4329).then(e.bind(e,14329)).then(G=>G.CatalogSearchResultListItem),predicate:G=>G.type==="software-catalog"}))},42214:(Un,Ht,e)=>{"use strict";e.d(Ht,{IJ:()=>H,Oz:()=>ut,Q3:()=>Rt,fX:()=>k,i4:()=>w});var o=e(30204),p=e(30705),m=e(1854),Y=e(89393),V=e(49462),I=e(2784),W=e(78373),tt=e(64304),Xe=e(39857),r=e(73557),je=e(79692),ye=e(27616),X=e(8284),Z=e(90436),l=e(4614),ne=e(80030),re=e(69087),se=e(35111),ve=e(14498),be=e(89571),u=e(15584),F=e(49378),R=e(70660),M=e(91256),g=e(37390),Ze=e(95544),we=e(67358),Qe=e(27556),le=e(97485),Le=e(61837),Se=e(77277),Ke=e(38016),St=e(69001),L=e(26228),mt=e(49558),fe=e(64279),Kt=e(30254),Et=e(34520),It=e(82717),Ft=e.n(It),Ye=e(43266),_t=e(58838),kt=e(77446),Qt=e(26883);const Yt=(0,o.c)({id:"plugin.githubactions.service"});var Nt=Object.defineProperty,bt=(K,ee,Ve)=>ee in K?Nt(K,ee,{enumerable:!0,configurable:!0,writable:!0,value:Ve}):K[ee]=Ve,Tt=(K,ee,Ve)=>(bt(K,typeof ee!="symbol"?ee+"":ee,Ve),Ve);class wt{constructor(ee){Tt(this,"configApi"),Tt(this,"scmAuthApi"),this.configApi=ee.configApi,this.scmAuthApi=ee.scmAuthApi}async getOctokit(ee="github.com"){var Ve;const{token:lt}=await this.scmAuthApi.getCredentials({url:`https://${ee}/`,additionalScope:{customScopes:{github:["repo"]}}}),zt=(0,m.MY)((Ve=this.configApi.getOptionalConfigArray("integrations.github"))!=null?Ve:[]).find(an=>an.host===ee),Gt=zt==null?void 0:zt.apiBaseUrl;return new Y.v({auth:lt,baseUrl:Gt})}async reRunWorkflow(ee){const{hostname:Ve,owner:lt,repo:Lt,runId:zt}=ee;return(await this.getOctokit(Ve)).actions.reRunWorkflow({owner:lt,repo:Lt,run_id:zt})}async listWorkflowRuns(ee){const{hostname:Ve,owner:lt,repo:Lt,pageSize:zt=100,page:Gt=0,branch:an}=ee;return(await(await this.getOctokit(Ve)).actions.listWorkflowRunsForRepo({owner:lt,repo:Lt,per_page:zt,page:Gt,...an?{branch:an}:{}})).data}async getWorkflow(ee){const{hostname:Ve,owner:lt,repo:Lt,id:zt}=ee;return(await(await this.getOctokit(Ve)).actions.getWorkflow({owner:lt,repo:Lt,workflow_id:zt})).data}async getWorkflowRun(ee){const{hostname:Ve,owner:lt,repo:Lt,id:zt}=ee;return(await(await this.getOctokit(Ve)).actions.getWorkflowRun({owner:lt,repo:Lt,run_id:zt})).data}async listJobsForWorkflowRun(ee){const{hostname:Ve,owner:lt,repo:Lt,id:zt,pageSize:Gt=100,page:an=0}=ee;return(await(await this.getOctokit(Ve)).actions.listJobsForWorkflowRun({owner:lt,repo:Lt,run_id:zt,per_page:Gt,page:an})).data}async downloadJobLogsForWorkflowRun(ee){const{hostname:Ve,owner:lt,repo:Lt,runId:zt}=ee;return(await(await this.getOctokit(Ve)).actions.downloadJobLogsForWorkflowRun({owner:lt,repo:Lt,job_id:zt})).data}}var Xt=(K=>(K[K.success=0]="success",K[K.failure=1]="failure",K[K.pending=2]="pending",K[K.running=3]="running",K))(Xt||{});const Re=(0,p.NT)({id:"github-actions"}),j=(0,p.Rz)({id:"github-actions/build",path:"/:id",parent:Re}),v=(0,p.rx)({id:"github-actions",apis:[(0,p.ni)({api:Yt,deps:{configApi:o.p,scmAuthApi:V.Om},factory:({configApi:K,scmAuthApi:ee})=>new wt({configApi:K,scmAuthApi:ee})})],routes:{entityContent:Re}}),k=v.provide((0,p.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return rn}).then(K=>K.Router),mountPoint:Re})),Q=v.provide((0,p.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(2546).then(e.bind(e,52546)).then(K=>K.LatestWorkflowRunCard)}})),q=v.provide((0,p.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(2546).then(e.bind(e,52546)).then(K=>K.LatestWorkflowsForBranchCard)}})),Ge=v.provide((0,p.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(2546).then(e.bind(e,52546)).then(K=>K.RecentWorkflowRunsCard)}})),U="github.com/project-slug",x=K=>{var ee,Ve;return(Ve=(ee=K==null?void 0:K.metadata.annotations)==null?void 0:ee[U])!=null?Ve:""},he=K=>I.createElement(I.Fragment,null,I.createElement(Fe,{...K}),dt(K));function Fe({status:K,conclusion:ee}){if(K===void 0)return null;switch(K.toLocaleLowerCase("en-US")){case"queued":return I.createElement(mt.wA,null);case"in_progress":return I.createElement(mt.VC,null);case"completed":switch(ee==null?void 0:ee.toLocaleLowerCase("en-US")){case"skipped":return I.createElement(mt.dh,null);case"timed_out":return I.createElement(mt.Pd,null);case"failure":return I.createElement(mt.vK,null);default:return I.createElement(mt.Kq,null)}default:return I.createElement(mt.wA,null)}}function dt({status:K,conclusion:ee}){if(K===void 0)return"";switch(K.toLocaleLowerCase("en-US")){case"queued":return"Queued";case"in_progress":return"In progress";case"completed":switch(ee==null?void 0:ee.toLocaleLowerCase("en-US")){case"skipped":return"Aborted";case"timed_out":return"Timed out";case"failure":return"Error";default:return"Completed"}default:return"Pending"}}const qt=({hostname:K,owner:ee,repo:Ve})=>{const lt=(0,o.u)(Yt),{id:Lt}=(0,p.Oi)(j);return(0,fe.default)(async()=>{if(!Ve||!ee)throw new Error("No repo/owner provided");const zt=await lt.listJobsForWorkflowRun({hostname:K,owner:ee,repo:Ve,id:parseInt(Lt,10)});return{total_count:zt.total_count,jobs:zt.jobs.map(Gt=>{var an,fn,on,ln;return{html_url:(an=Gt.html_url)!=null?an:void 0,status:Gt.status,conclusion:(fn=Gt.conclusion)!=null?fn:void 0,started_at:Gt.started_at,completed_at:(on=Gt.completed_at)!=null?on:void 0,id:Gt.id,name:Gt.name,steps:(ln=Gt.steps)==null?void 0:ln.map(cn=>{var On,dn,Pn;return{name:cn.name,status:cn.status,conclusion:(On=cn.conclusion)!=null?On:void 0,number:cn.number,started_at:(dn=cn.started_at)!=null?dn:void 0,completed_at:(Pn=cn.completed_at)!=null?Pn:void 0}})}})}},[Ve,ee,Lt])},Ie=({hostname:K,owner:ee,repo:Ve})=>{const lt=(0,o.u)(Yt),{id:Lt}=(0,p.Oi)(j);return(0,fe.default)(async()=>Ve&&ee?lt.getWorkflowRun({hostname:K,owner:ee,repo:Ve,id:parseInt(Lt,10)}):Promise.reject(new Error("No repo/owner provided")),[Ve,ee,Lt])},Be=({hostname:K,owner:ee,repo:Ve,id:lt})=>{const Lt=(0,o.u)(Yt);return(0,fe.default)(async()=>Ve&&ee?Lt.downloadJobLogsForWorkflowRun({hostname:K,owner:ee,repo:Ve,runId:lt}):Promise.reject("No repo/owner provided"),[Ve,ee,lt])},ct=K=>{var ee,Ve,lt;const Lt=(lt=(ee=K==null?void 0:K.metadata.annotations)==null?void 0:ee[Et.M6])!=null?lt:(Ve=K==null?void 0:K.metadata.annotations)==null?void 0:Ve[Et.P1];return Lt!=null&&Lt.startsWith("url:")?Ft()(Lt.slice(4)).resource:void 0},Ot=(0,je.Z)(K=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:K.palette.background.default}})),Ct=({entity:K,runId:ee,inProgress:Ve})=>{const lt=Ot(),Lt=x(K),zt=ct(K),[Gt,an]=Lt&&Lt.split("/")||[],fn=Be({hostname:zt,owner:Gt,repo:an,id:ee}),on=fn.value?String(fn.value):void 0,[ln,cn]=I.useState(!1),On=()=>{cn(!0)},dn=()=>{cn(!1)};return I.createElement(ye.Z,{TransitionProps:{unmountOnExit:!0},disabled:Ve},I.createElement(X.Z,{expandIcon:I.createElement(Ke.Z,null),IconButtonProps:{className:lt.button}},I.createElement(Z.Z,{variant:"button"},fn.loading?I.createElement(l.Z,null):"Job Log"),I.createElement(ne.ZP,{title:"Open Log",TransitionComponent:re.Z,arrow:!0},I.createElement(Kt.Z,{onClick:Pn=>{Pn.stopPropagation(),On()},style:{marginLeft:"auto"}})),I.createElement(se.Z,{className:lt.modal,onClick:Pn=>Pn.stopPropagation(),open:ln,onClose:dn},I.createElement(ve.Z,{in:ln},I.createElement("div",{className:lt.modalLogContainer},I.createElement(mt.nU,{text:on!=null?on:"No Values Found",classes:{root:lt.log}}))))),on&&I.createElement("div",{className:lt.normalLogContainer},I.createElement(mt.nU,{text:on,classes:{root:lt.log}})))},$t=(0,je.Z)(K=>({root:{maxWidth:720,margin:K.spacing(2)},title:{padding:K.spacing(1,0,2,0)},table:{padding:K.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),Pt=(K,ee)=>{if(!K||!ee)return"";const Ve=L.ou.fromISO(K);return(ee?L.ou.fromISO(ee):L.ou.now()).diff(Ve).toFormat("m 'minutes' s 'seconds'")},$e=({step:K})=>{var ee;return I.createElement(be.Z,null,I.createElement(u.Z,null,I.createElement(F.Z,{primary:K.name,secondary:Pt(K.started_at,K.completed_at)})),I.createElement(u.Z,null,I.createElement(he,{status:K.status.toLocaleUpperCase("en-US"),conclusion:(ee=K.conclusion)==null?void 0:ee.toLocaleUpperCase("en-US")})))},qe=({job:K,className:ee,entity:Ve})=>{var lt;const Lt=$t();return I.createElement(ye.Z,{TransitionProps:{unmountOnExit:!0},className:ee},I.createElement(X.Z,{expandIcon:I.createElement(Ke.Z,null),IconButtonProps:{className:Lt.button}},I.createElement(Z.Z,{variant:"button"},K.name," (",Pt(K.started_at,K.completed_at),")")),I.createElement(R.Z,{className:Lt.accordionDetails},I.createElement(M.Z,null,I.createElement(g.Z,null,(lt=K.steps)==null?void 0:lt.map(zt=>I.createElement($e,{key:zt.number,step:zt}))))),K.status==="queued"||K.status==="in_progress"?I.createElement(Ct,{runId:K.id,inProgress:!0,entity:Ve}):I.createElement(Ct,{runId:K.id,inProgress:!1,entity:Ve}))},Ee=({jobs:K,entity:ee})=>{const Ve=$t();return I.createElement(Ze.Z,null,K&&K.total_count>0&&K.jobs.map(lt=>I.createElement(qe,{key:lt.id,job:lt,className:lt.status!=="success"?Ve.failed:Ve.success,entity:ee})))},G=({entity:K})=>{var ee,Ve,lt,Lt,zt,Gt,an,fn,on,ln,cn,On,dn,Pn,ce;const ae=x(K),ke=ct(K),[vt,jt]=ae&&ae.split("/")||[],Vt=Ie({hostname:ke,owner:vt,repo:jt}),An=qt({hostname:ke,owner:vt,repo:jt}),Nn=$t();return Vt.error&&Vt.error.message?I.createElement(Z.Z,{variant:"h6",color:"error"},"Failed to load build, ",Vt.error.message):Vt.loading?I.createElement(we.Z,null):I.createElement("div",{className:Nn.root},I.createElement(Ze.Z,{mb:3},I.createElement(mt.Oo,{"aria-label":"breadcrumb"},I.createElement(mt.rU,{to:".."},"Workflow runs"),I.createElement(Z.Z,null,"Workflow run details"))),I.createElement(M.Z,{component:Qe.Z,className:Nn.table},I.createElement(g.Z,null,I.createElement(le.Z,null,I.createElement(be.Z,null,I.createElement(u.Z,null,I.createElement(Z.Z,{noWrap:!0},"Branch")),I.createElement(u.Z,null,(ee=Vt.value)==null?void 0:ee.head_branch)),I.createElement(be.Z,null,I.createElement(u.Z,null,I.createElement(Z.Z,{noWrap:!0},"Message")),I.createElement(u.Z,null,(lt=(Ve=Vt.value)==null?void 0:Ve.head_commit)==null?void 0:lt.message)),I.createElement(be.Z,null,I.createElement(u.Z,null,I.createElement(Z.Z,{noWrap:!0},"Commit ID")),I.createElement(u.Z,null,(zt=(Lt=Vt.value)==null?void 0:Lt.head_commit)==null?void 0:zt.id)),I.createElement(be.Z,null,I.createElement(u.Z,null,I.createElement(Z.Z,{noWrap:!0},"Workflow")),I.createElement(u.Z,null,(Gt=Vt.value)==null?void 0:Gt.name)),I.createElement(be.Z,null,I.createElement(u.Z,null,I.createElement(Z.Z,{noWrap:!0},"Status")),I.createElement(u.Z,null,I.createElement(he,{status:((an=Vt.value)==null?void 0:an.status)||void 0,conclusion:((fn=Vt.value)==null?void 0:fn.conclusion)||void 0}))),I.createElement(be.Z,null,I.createElement(u.Z,null,I.createElement(Z.Z,{noWrap:!0},"Author")),I.createElement(u.Z,null,`${(cn=(ln=(on=Vt.value)==null?void 0:on.head_commit)==null?void 0:ln.author)==null?void 0:cn.name} (${(Pn=(dn=(On=Vt.value)==null?void 0:On.head_commit)==null?void 0:dn.author)==null?void 0:Pn.email})`)),I.createElement(be.Z,null,I.createElement(u.Z,null,I.createElement(Z.Z,{noWrap:!0},"Links")),I.createElement(u.Z,null,((ce=Vt.value)==null?void 0:ce.html_url)&&I.createElement(mt.rU,{to:Vt.value.html_url},"Workflow runs on GitHub"," ",I.createElement(St.Z,{className:Nn.externalLinkIcon})))),I.createElement(be.Z,null,I.createElement(u.Z,{colSpan:2},I.createElement(Z.Z,{noWrap:!0},"Jobs"),An.loading?I.createElement(l.Z,null):I.createElement(Ee,{jobs:An.value,entity:K})))))))};function de({hostname:K,owner:ee,repo:Ve,branch:lt,initialPageSize:Lt=5}){const zt=(0,o.u)(Yt),Gt=(0,o.u)(o.s),[an,fn]=(0,I.useState)(0),[on,ln]=(0,I.useState)(0),[cn,On]=(0,I.useState)(Lt),{loading:dn,value:Pn,retry:ce,error:ae}=(0,kt.Z)(async()=>{const ke=await zt.listWorkflowRuns({hostname:K,owner:ee,repo:Ve,pageSize:cn,page:on+1,branch:lt});return fn(ke.total_count),ke.workflow_runs.map(vt=>{var jt,Vt,An,Nn,Fn,sr,gr,Jn,pr;return{workflowName:(jt=vt.name)!=null?jt:void 0,message:(Vt=vt.head_commit)==null?void 0:Vt.message,id:`${vt.id}`,onReRunClick:async()=>{try{await zt.reRunWorkflow({hostname:K,owner:ee,repo:Ve,runId:vt.id})}catch(Cr){Gt.post(new Error(`Failed to rerun the workflow: ${Cr.message}`))}},source:{branchName:(An=vt.head_branch)!=null?An:void 0,commit:{hash:(Nn=vt.head_commit)==null?void 0:Nn.id,url:(gr=(Fn=vt.head_repository)==null?void 0:Fn.branches_url)==null?void 0:gr.replace("{/branch}",(sr=vt.head_branch)!=null?sr:"")}},status:(Jn=vt.status)!=null?Jn:void 0,conclusion:(pr=vt.conclusion)!=null?pr:void 0,url:vt.url,githubUrl:vt.html_url}})},[on,cn,Ve,ee]);return[{page:on,pageSize:cn,loading:dn,runs:Pn,projectName:`${ee}/${Ve}`,total:an,error:ae},{runs:Pn,setPage:ln,setPageSize:On,retry:ce}]}const Ue=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:K=>{const ee=()=>{const Ve=(0,p.tg)(j);return I.createElement(mt.rU,{component:Xe.rU,to:Ve({id:K.id})},K.message)};return I.createElement(ee,null)}},{title:"Source",render:K=>{var ee,Ve;return I.createElement(Z.Z,{variant:"body2",noWrap:!0},I.createElement(Z.Z,{paragraph:!0,variant:"body2"},(ee=K.source)==null?void 0:ee.branchName),I.createElement(Z.Z,{paragraph:!0,variant:"body2"},(Ve=K.source)==null?void 0:Ve.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",customSort:(K,ee)=>dt(K).localeCompare(dt(ee)),render:K=>I.createElement(Ze.Z,{display:"flex",alignItems:"center"},I.createElement(he,{status:K.status,conclusion:K.conclusion}))},{title:"Actions",render:K=>I.createElement(ne.ZP,{title:"Rerun workflow"},I.createElement(Le.Z,{onClick:K.onReRunClick},I.createElement(Ye.Z,null))),width:"10%"}],nt=({projectName:K,loading:ee,pageSize:Ve,page:lt,retry:Lt,runs:zt,onChangePage:Gt,onChangePageSize:an,total:fn})=>I.createElement(mt.iA,{isLoading:ee,options:{paging:!0,pageSize:Ve,padding:"dense"},totalCount:fn,page:lt,actions:[{icon:()=>I.createElement(Qt.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Lt()}],data:zt!=null?zt:[],onPageChange:Gt,onRowsPerPageChange:an,style:{width:"100%"},title:I.createElement(Ze.Z,{display:"flex",alignItems:"center"},I.createElement(_t.Z,null),I.createElement(Ze.Z,{mr:1}),I.createElement(Z.Z,{variant:"h6"},K)),columns:Ue}),it=({entity:K,branch:ee})=>{const Ve=x(K),lt=ct(K),[Lt,zt]=(Ve!=null?Ve:"/").split("/"),[{runs:Gt,...an},{retry:fn,setPage:on,setPageSize:ln}]=de({hostname:lt,owner:Lt,repo:zt,branch:ee}),cn=lt||"github.com";return!an.loading&&!Gt?I.createElement(mt.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:I.createElement(Se.Z,{variant:"contained",color:"primary",href:`https://${cn}/${Ve}/actions/new`},"Create new Workflow")}):I.createElement(nt,{...an,runs:Gt,loading:an.loading,retry:fn,onChangePageSize:ln,onChangePage:on})},Rt=K=>{var ee;return Boolean((ee=K.metadata.annotations)==null?void 0:ee[U])};var rn=Object.freeze({__proto__:null,isGithubActionsAvailable:Rt,Router:()=>{const{entity:K}=(0,W.u)();return Rt(K)?I.createElement(r.Z5,null,I.createElement(r.AW,{path:"/",element:I.createElement(it,{entity:K})}),I.createElement(r.AW,{path:`${j.path}`,element:I.createElement(G,{entity:K})}),")"):I.createElement(tt.sk,{annotation:U})}});const Ae=(0,je.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),De=K=>{var ee;const{error:Ve,loading:lt,lastRun:Lt,branch:zt}=K,Gt=Ae();return Ve?I.createElement(Z.Z,null,"Couldn't fetch latest ",zt," run"):lt?I.createElement(we.Z,null):I.createElement(mt.xT,{metadata:{status:I.createElement(I.Fragment,null,I.createElement(he,{status:Lt.status,conclusion:Lt.conclusion})),message:Lt.message,url:I.createElement(mt.rU,{to:(ee=Lt.githubUrl)!=null?ee:""},"See more on GitHub"," ",I.createElement(St.Z,{className:Gt.externalLinkIcon}))}})},w=K=>{var ee,Ve,lt;const{branch:Lt="master",variant:zt}=K,{entity:Gt}=(0,W.u)(),an=(0,o.u)(o.s),fn=ct(Gt),[on,ln]=((Ve=(ee=Gt==null?void 0:Gt.metadata.annotations)==null?void 0:ee[U])!=null?Ve:"/").split("/"),[{runs:cn,loading:On,error:dn}]=de({hostname:fn,owner:on,repo:ln,branch:Lt}),Pn=(lt=cn==null?void 0:cn[0])!=null?lt:{};return(0,I.useEffect)(()=>{dn&&an.post(dn)},[dn,an]),I.createElement(mt.rJ,{title:`Last ${Lt} build`,variant:zt},I.createElement(De,{error:dn,loading:On,branch:Lt,lastRun:Pn}))},H=K=>{const{branch:ee="master",variant:Ve}=K,{entity:lt}=(0,W.u)();return I.createElement(mt.rJ,{title:`Last ${ee} build`,variant:Ve},I.createElement(it,{branch:ee,entity:lt}))},te=K=>K.split(`
`)[0],ut=K=>{var ee,Ve;const{branch:lt,dense:Lt=!1,limit:zt=5,variant:Gt}=K,{entity:an}=(0,W.u)(),fn=(0,o.u)(o.s),on=ct(an),[ln,cn]=((Ve=(ee=an==null?void 0:an.metadata.annotations)==null?void 0:ee[U])!=null?Ve:"/").split("/"),[{runs:On=[],loading:dn,error:Pn}]=de({hostname:on,owner:ln,repo:cn,branch:lt,initialPageSize:zt});(0,I.useEffect)(()=>{Pn&&fn.post(Pn)},[Pn,fn]);const ce=on||"github.com",ae=(0,p.tg)(j);return Pn?I.createElement(mt.yu,{title:Pn.message,error:Pn}):I.createElement(mt.rJ,{title:"Recent Workflow Runs",subheader:lt?`Branch: ${lt}`:"All Branches",noPadding:!0,variant:Gt},On.length?I.createElement(mt.iA,{isLoading:dn,options:{search:!1,paging:!1,padding:Lt?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:ke=>{var vt;return I.createElement(mt.rU,{component:Xe.rU,to:ae({id:ke.id})},te((vt=ke.message)!=null?vt:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:he}],data:On}):I.createElement("div",{style:{textAlign:"center"}},I.createElement(Z.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),I.createElement(Z.Z,{variant:"body2"},I.createElement(mt.rU,{to:`https://${ce}/${ln}/${cn}/actions/new`},"Create a new workflow"))))}},59235:(Un,Ht,e)=>{"use strict";e.d(Ht,{$M:()=>_t,Eg:()=>Qt,Jh:()=>U,Yq:()=>$e,jJ:()=>qe,jQ:()=>Yt,oy:()=>q,qJ:()=>j,rw:()=>kt,w1:()=>Ye});var o=e(30705),p=e(30204),m=e(34520),Y=e(78373),V=e(64304),I=e(79692),W=e(12420),tt=e(60905),Xe=e(95544),r=e(90436),je=e(82938),ye=e(38402),X=e(86136),Z=e(49378),l=e(85256),ne=e(61837),re=e(11776),se=e(80030),ve=e(9520),be=e(76637),u=e(2784),F=e(64279),R=e(49558),M=e(73655),g=e(99688),Ze=e(52866),we=e(27604),Qe=e(13384),le=e(62367),Le=e(52160),Se=e(98685),Ke=e(19928),St=e.n(Ke),L=e(14162),mt=e.n(L),fe=e(19126),Kt=e.n(fe),Et=e(76635),It=e.n(Et);const Ft=(0,o.x8)({id:"catalog-index"}),Ye=(0,o.rx)({id:"org",externalRoutes:{catalogIndex:Ft}}),_t=Ye.provide((0,o.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(4802).then(e.bind(e,84802)).then(Ee=>Ee.GroupProfileCard)}})),kt=Ye.provide((0,o.CO)({name:"EntityMembersListCard",component:{lazy:()=>e.e(4802).then(e.bind(e,84802)).then(Ee=>Ee.MembersListCard)}})),Qt=Ye.provide((0,o.CO)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(4802).then(e.bind(e,84802)).then(Ee=>Ee.OwnershipCard)}})),Yt=Ye.provide((0,o.CO)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(4802).then(e.bind(e,84802)).then(Ee=>Ee.UserProfileCard)}})),Nt=async(Ee,G)=>(Ee.length===0?{items:[]}:await G.getEntities({filter:{kind:"User","relations.memberof":Ee.map(Ue=>(0,m.eE)({kind:"group",namespace:Ue.namespace.toLocaleLowerCase("en-US"),name:Ue.name.toLocaleLowerCase("en-US")}))}})).items,bt=async(Ee,G)=>{var de;const Ue=new Map,it=[{kind:Ee.kind,namespace:(de=Ee.metadata.namespace)!=null?de:m.zG,name:Ee.metadata.name}],Rt=[];for(;it.length>0;){const en=it.shift(),rn=await G.getEntityByRef(en);Ue.set((0,m.eE)(en),!0);const Ae=(0,Y.g)(rn,m._b,{kind:"Group"}).filter(De=>!Ue.has((0,m.eE)(De)));Ae.forEach(De=>Ue.set((0,m.eE)(De),!0)),it.push(...Ae),Rt.push(...Ae)}return Rt},Tt=async(Ee,G)=>Nt(await bt(Ee,G),G),wt=Ee=>{const G=new Map;return Ee.filter(de=>{const Ue=(0,m.eE)(de),nt=G.has(Ue);return G.set(Ue,!0),!nt})},Xt=(0,I.Z)(Ee=>(0,W.Z)({card:{border:`1px solid ${Ee.palette.divider}`,boxShadow:Ee.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:Ee.spacing(4,1,1),flex:"1",minWidth:"0px"}})),Re=Ee=>{var G;const de=Xt(),{metadata:{name:Ue,description:nt},spec:{profile:it}}=Ee.member,Rt=(G=it==null?void 0:it.displayName)!=null?G:Ue;return u.createElement(tt.Z,{item:!0,container:!0,xs:12,sm:6,md:4,xl:2},u.createElement(Xe.Z,{className:de.card},u.createElement(Xe.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},u.createElement(R.qE,{displayName:Rt,picture:it==null?void 0:it.picture,customStyles:{position:"absolute",top:"-2rem"}}),u.createElement(Xe.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},u.createElement(r.Z,{variant:"h6"},u.createElement(V.dx,{"data-testid":"user-link",entityRef:Ee.member,title:Rt})),(it==null?void 0:it.email)&&u.createElement(R.rU,{to:`mailto:${it.email}`},u.createElement(R.Or,{text:it.email})),nt&&u.createElement(r.Z,{variant:"subtitle2"},nt)))))},j=Ee=>{var G;const{memberDisplayTitle:de="Members",pageSize:Ue=50,showAggregateMembersToggle:nt}=Ee,{entity:it}=(0,Y.u)(),{metadata:{name:Rt,namespace:en},spec:{profile:rn}}=it,Ae=(0,p.u)(V.Ah),De=(G=rn==null?void 0:rn.displayName)!=null?G:Rt,w=en||m.zG,[H,te]=u.useState(1),ut=(cn,On)=>{te(On)},[K,ee]=(0,u.useState)(!1),{loading:Ve,value:lt}=(0,F.default)(async()=>nt?await Tt(it,Ae):[],[Ae,it,nt]),{loading:Lt,error:zt,value:Gt}=(0,F.default)(async()=>(await Ae.getEntities({filter:{kind:"User","relations.memberof":[(0,m.eE)({kind:"group",namespace:w.toLocaleLowerCase("en-US"),name:Rt.toLocaleLowerCase("en-US")})]}})).items,[Ae,it]),an=wt([...Gt!=null?Gt:[],...lt&&K?lt:[]].sort((cn,On)=>(0,m.eE)(cn).localeCompare((0,m.eE)(On))));if(Lt)return u.createElement(R.Ex,null);if(zt)return u.createElement(R.Gk,{error:zt});const fn=Math.ceil(((an==null?void 0:an.length)||0)/Ue),on=fn<2?"":`, page ${H} of ${fn}`,ln=u.createElement(be.Z,{count:fn,page:H,onChange:ut,showFirstButton:!0,showLastButton:!0});return u.createElement(tt.Z,{item:!0},u.createElement(R.rJ,{title:`${de} (${(an==null?void 0:an.length)||0}${on})`,subheader:`of ${De}`,...fn<=1?{}:{actions:ln}},nt&&u.createElement(u.Fragment,null,"Direct Members",u.createElement(je.Z,{color:"primary",checked:K,onChange:()=>{ee(!K)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),K&&Ve?u.createElement(R.Ex,null):u.createElement(tt.Z,{container:!0,spacing:3},an&&an.length>0?an.slice(Ue*(H-1),Ue*H).map(cn=>u.createElement(Re,{member:cn,key:cn.metadata.uid})):u.createElement(Xe.Z,{p:2},u.createElement(r.Z,null,"This group has no ",de.toLocaleLowerCase(),".")))))},v=({href:Ee,Icon:G,text:de})=>u.createElement(ye.Z,{key:Ee},u.createElement(X.Z,null,G?u.createElement(G,null):u.createElement(Le.Z,null)),u.createElement(Z.Z,null,u.createElement(R.rU,{to:Ee},de))),k=({links:Ee})=>{const G=(0,o.qD)(),de=Ue=>{var nt;return Ue&&(nt=G.getSystemIcon(Ue))!=null?nt:Le.Z};return Ee===void 0?null:u.createElement(u.Fragment,null,u.createElement(l.Z,null),Ee.map(Ue=>u.createElement(v,{key:Ue.url,href:Ue.url,text:Ue.title,Icon:de(Ue.icon)})))},Q=Ee=>u.createElement(Xe.Z,{display:"flex",alignItems:"center"},u.createElement(le.Z,{fontSize:"inherit"}),u.createElement(Xe.Z,{ml:1},Ee.title)),q=Ee=>{var G,de,Ue;const nt=(0,p.u)(V.Ah),it=(0,p.u)(p.l),{entity:Rt}=(0,Y.u)(),en=(0,u.useCallback)(async()=>{await nt.refreshEntity((0,m.eE)(Rt)),it.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[nt,it,Rt]);if(!Rt)return u.createElement(g.Z,{severity:"error"},"Group not found");const{metadata:{name:rn,description:Ae,title:De,annotations:w,links:H},spec:{profile:te}}=Rt,ut=(0,Y.g)(Rt,m._b,{kind:"Group"}),K=(0,Y.g)(Rt,m.wP,{kind:"group"}),ee=w==null?void 0:w[m.P1],Ve=(ee==null?void 0:ee.startsWith("url:"))||(ee==null?void 0:ee.startsWith("file:")),lt=(G=Rt.metadata.annotations)==null?void 0:G[m.Tf],Lt=(Ue=(de=te==null?void 0:te.displayName)!=null?de:De)!=null?Ue:rn,zt=te!=null&&te.email?`mailto:${te.email}`:"#",Gt=lt?u.createElement(ne.Z,{"aria-label":"Edit",title:"Edit Metadata",component:R.rU,to:lt},u.createElement(we.Z,null)):u.createElement(ne.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},u.createElement(we.Z,null));return u.createElement(R.rJ,{title:u.createElement(Q,{title:Lt}),subheader:Ae,variant:Ee.variant,action:u.createElement(u.Fragment,null,Ve&&u.createElement(ne.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:en},u.createElement(Ze.Z,null)),Gt)},u.createElement(tt.Z,{container:!0,spacing:3},u.createElement(tt.Z,{item:!0,xs:12,sm:2,xl:1},u.createElement(R.qE,{displayName:Lt,picture:te==null?void 0:te.picture})),u.createElement(tt.Z,{item:!0,md:10,xl:11},u.createElement(re.Z,null,(te==null?void 0:te.email)&&u.createElement(ye.Z,null,u.createElement(X.Z,null,u.createElement(se.ZP,{title:"Email"},u.createElement(Qe.Z,null))),u.createElement(Z.Z,{primary:u.createElement(R.rU,{to:zt},te.email),secondary:"Email"})),u.createElement(ye.Z,null,u.createElement(X.Z,null,u.createElement(se.ZP,{title:"Parent Group"},u.createElement(M.Z,null))),u.createElement(Z.Z,{primary:K.length?u.createElement(V.rI,{entityRefs:K,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),u.createElement(ye.Z,null,u.createElement(X.Z,null,u.createElement(se.ZP,{title:"Child Groups"},u.createElement(le.Z,null))),u.createElement(Z.Z,{primary:ut.length?u.createElement(V.rI,{entityRefs:ut,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(Ee==null?void 0:Ee.showLinks)&&u.createElement(k,{links:H})))))},Ge=Ee=>Ee.title?u.createElement(Xe.Z,{display:"flex",alignItems:"center"},u.createElement(Se.Z,{fontSize:"inherit"}),u.createElement(Xe.Z,{ml:1},Ee.title)):null,U=Ee=>{var G,de;const{entity:Ue}=(0,Y.u)();if(!Ue)return u.createElement(g.Z,{severity:"error"},"User not found");const nt=(G=Ue.metadata.annotations)==null?void 0:G[m.Tf],{metadata:{name:it,description:Rt,links:en},spec:{profile:rn}}=Ue,Ae=(de=rn==null?void 0:rn.displayName)!=null?de:it,De=rn!=null&&rn.email?`mailto:${rn.email}`:void 0,w=(0,Y.g)(Ue,m.hr,{kind:"Group"});return u.createElement(R.rJ,{title:u.createElement(Ge,{title:Ae}),subheader:Rt,variant:Ee.variant,action:u.createElement(u.Fragment,null,nt&&u.createElement(ne.Z,{"aria-label":"Edit",title:"Edit Metadata",component:R.rU,to:nt},u.createElement(we.Z,null)))},u.createElement(tt.Z,{container:!0,spacing:3,alignItems:"flex-start"},u.createElement(tt.Z,{item:!0,xs:12,sm:2,xl:1},u.createElement(R.qE,{displayName:Ae,picture:rn==null?void 0:rn.picture})),u.createElement(tt.Z,{item:!0,md:10,xl:11},u.createElement(re.Z,null,(rn==null?void 0:rn.email)&&u.createElement(ye.Z,null,u.createElement(X.Z,null,u.createElement(se.ZP,{title:"Email"},u.createElement(Qe.Z,null))),u.createElement(Z.Z,null,u.createElement(R.rU,{to:De!=null?De:""},rn.email))),u.createElement(ye.Z,null,u.createElement(X.Z,null,u.createElement(se.ZP,{title:"Member of"},u.createElement(le.Z,null))),u.createElement(Z.Z,null,u.createElement(V.rI,{entityRefs:w,defaultKind:"Group"}))),(Ee==null?void 0:Ee.showLinks)&&u.createElement(k,{links:en})))))},x=mt()(10),he=(Ee,G)=>{const{kind:de,type:Ue}=G,nt=Ee.map(Rt=>(0,V.$3)((0,m.of)(Rt),{defaultKind:"group"})),it={kind:de.toLocaleLowerCase("en-US"),type:Ue,owners:nt,user:"all"};return Kt().stringify({filters:it},{arrayFormat:"repeat"})},Fe=Ee=>[...(0,Y.g)(Ee,m.hr,{kind:"Group"}).map(({kind:Ue,namespace:nt,name:it})=>(0,m.eE)({kind:Ue,namespace:nt,name:it})),(0,m.eE)(Ee)],dt=Ee=>Ee!==void 0,qt=async(Ee,G,de=[])=>{const Ue=(0,Y.g)(Ee,m._b,{kind:"Group"}),nt=Ue.length>0,it=(0,m.eE)(Ee);if(nt){const Rt=Ue.map(w=>(0,m.eE)(w)),Ae=(await G.getEntitiesByRefs({fields:["kind","metadata.namespace","metadata.name","relations"],entityRefs:Rt})).items.filter(dt).filter(w=>!de.includes((0,m.eE)(w))),De=(await Promise.all(Ae.map(w=>x(()=>qt(w,G,[...de,it]))))).flatMap(w=>w);return(0,Et.uniq)([...De,it])}return[it]},Ie=async(Ee,G,de)=>{const Ue=Ee.kind==="Group",nt=G==="aggregated",it=Ee.kind==="User";return nt&&Ue?qt(Ee,de):nt&&it?Fe(Ee):[(0,m.eE)(Ee)]},Be=(Ee,G,de)=>de.getEntities({filter:[{kind:G,"relations.ownedBy":Ee}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]});function ct(Ee,G,de,Ue=6){const nt=(0,p.u)(V.Ah),it=de!=null?de:["Component","API","System"],{loading:Rt,error:en,value:rn}=(0,F.default)(async()=>{const Ae=await Ie(Ee,G,nt);return(await Be(Ae,it,nt)).items.reduce((te,ut)=>{var K,ee;const Ve=te.find(lt=>{var Lt;return lt.kind===ut.kind&&lt.type===((Lt=ut.spec)==null?void 0:Lt.type)});return Ve?Ve.count+=1:te.push({kind:ut.kind,type:(ee=(K=ut.spec)==null?void 0:K.type)==null?void 0:ee.toString(),count:1}),te},[]).sort((te,ut)=>ut.count-te.count).slice(0,Ue).map(te=>({counter:te.count,type:te.type,kind:te.kind,queryParams:he(Ae,te)}))},[nt,Ee,G]);return{componentsWithCounters:rn,loading:Rt,error:en}}const Ot=(0,I.Z)(Ee=>(0,W.Z)({card:{border:`1px solid ${Ee.palette.divider}`,boxShadow:Ee.shadows[2],borderRadius:"4px",padding:Ee.spacing(2),transition:`${Ee.transitions.duration.standard}ms`,"&:hover":{boxShadow:Ee.shadows[4]},height:"100%"},bold:{fontWeight:Ee.typography.fontWeightBold},smallFont:{fontSize:Ee.typography.body2.fontSize},entityTypeBox:{background:G=>Ee.getPageTheme({themeId:G.type}).backgroundImage,color:G=>Ee.getPageTheme({themeId:G.type}).fontColor}})),Ct=({counter:Ee,type:G,kind:de,url:Ue})=>{const nt=Ot({type:G!=null?G:de}),it=G!=null?G:de,Rt=it.length>10;return u.createElement(R.rU,{to:Ue,variant:"body2"},u.createElement(Xe.Z,{className:`${nt.card} ${nt.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},u.createElement(r.Z,{className:nt.bold,variant:"h6"},Ee),u.createElement(Xe.Z,{sx:{width:"100%",textAlign:"center"}},u.createElement(r.Z,{className:`${nt.bold} ${Rt&&nt.smallFont}`,variant:"h6"},u.createElement(R.Or,{text:St()(it.toLocaleUpperCase("en-US"),Ee)}))),G&&u.createElement(r.Z,{variant:"subtitle1"},de)))},$t=({entity:Ee,relationsType:G,entityFilterKind:de,entityLimit:Ue=6})=>{const nt=(0,o.tg)(Ft),{componentsWithCounters:it,loading:Rt,error:en}=ct(Ee,G,de,Ue);return Rt?u.createElement(R.Ex,null):en?u.createElement(R.Gk,{error:en}):u.createElement(tt.Z,{container:!0},it==null?void 0:it.map(rn=>{var Ae;return u.createElement(tt.Z,{item:!0,xs:6,md:6,lg:4,key:(Ae=rn.type)!=null?Ae:rn.kind},u.createElement(Ct,{counter:rn.counter,kind:rn.kind,type:rn.type,url:`${nt()}/?${rn.queryParams}`}))}))},Pt=(0,I.Z)(Ee=>({list:{[Ee.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[Ee.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[Ee.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),$e=Ee=>{const{variant:G,entityFilterKind:de,hideRelationsToggle:Ue,relationsType:nt,entityLimit:it=6}=Ee,Rt=Ue===void 0?!1:Ue,en=Pt(),{entity:rn}=(0,Y.u)(),Ae=rn.kind==="User"?"aggregated":"direct",[De,w]=(0,u.useState)(nt!=null?nt:Ae);return(0,u.useEffect)(()=>{nt||w(Ae)},[w,Ae,nt]),u.createElement(R.rJ,{title:"Ownership",variant:G},!Rt&&u.createElement(re.Z,{dense:!0},u.createElement(ye.Z,{className:en.list},u.createElement(Z.Z,{className:en.listItemText}),u.createElement(ve.Z,{className:en.listItemSecondaryAction},"Direct Relations",u.createElement(se.ZP,{placement:"top",arrow:!0,title:`${De==="direct"?"Direct":"Aggregated"} Relations`},u.createElement(je.Z,{color:"primary",checked:De!=="direct",onChange:()=>{w(De==="direct"?"aggregated":"direct")},name:"pin",inputProps:{"aria-label":"Ownership Type Switch"}})),"Aggregated Relations"))),u.createElement($t,{entity:rn,entityLimit:it,relationsType:De,entityFilterKind:de}))},qe=Ee=>{const{singularTitle:G,pluralTitle:de,icon:Ue,filter:nt}=Ee,it=(0,p.u)(p.v),Rt=(0,p.u)(V.Ah),en=(0,o.tg)(V.wi),{value:rn}=(0,F.default)(async()=>{const Ae=await it.getBackstageIdentity();return(await Rt.getEntities({filter:[{kind:"group","relations.hasMember":Ae.userEntityRef,...nt!=null?nt:{}}],fields:["metadata","kind"]})).items},[]);if(!(rn!=null&&rn.length))return null;if(rn.length===1){const Ae=rn[0];return u.createElement(R.R6,{text:G,to:en((0,m.iB)(Ae)),icon:Ue})}return u.createElement(R.R6,{icon:Ue,text:de},u.createElement(R.k2,{title:de},rn==null?void 0:rn.map(function(De){return u.createElement(R.BT,{title:De.metadata.title||De.metadata.name,subtitle:De.metadata.namespace!==m.zG?De.metadata.namespace:void 0,to:en((0,m.iB)(De)),icon:Ue,key:(0,m.eE)(De)})})))}},5083:(Un,Ht,e)=>{"use strict";e.d(Ht,{J$:()=>Z,Y2:()=>F,g2:()=>tt,rG:()=>I});var o=e(32272),p=e(96279),m=e.n(p),Y=e(9571),V=e(30195),I=(R=>(R.DENY="DENY",R.ALLOW="ALLOW",R.CONDITIONAL="CONDITIONAL",R))(I||{});function W(R,M){return R.name===M.name}function tt(R,M){return"resourceType"in R?!M||R.resourceType===M:!1}function Xe(R){return R.attributes.action==="create"}function r(R){return R.attributes.action==="read"}function je(R){return R.attributes.action==="update"}function ye(R){return R.attributes.action==="delete"}function X(R){return{authorize:async(M,g)=>await R.authorize(M,g),authorizeConditional(M,g){const Ze=M;return R.authorize(Ze,g)}}}function Z({name:R,attributes:M,resourceType:g}){return g?{type:"resource",name:R,attributes:M,resourceType:g}:{type:"basic",name:R,attributes:M}}var l=Object.defineProperty,ne=(R,M,g)=>M in R?l(R,M,{enumerable:!0,configurable:!0,writable:!0,value:g}):R[M]=g,re=(R,M,g)=>(ne(R,typeof M!="symbol"?M+"":M,g),g);const se=V.z.lazy(()=>V.z.object({rule:V.z.string(),resourceType:V.z.string(),params:V.z.record(V.z.any()).optional()}).or(V.z.object({anyOf:V.z.array(se).nonempty()})).or(V.z.object({allOf:V.z.array(se).nonempty()})).or(V.z.object({not:se}))),ve=V.z.object({result:V.z.literal(I.ALLOW).or(V.z.literal(I.DENY))}),be=V.z.union([V.z.object({result:V.z.literal(I.ALLOW).or(V.z.literal(I.DENY))}),V.z.object({result:V.z.literal(I.CONDITIONAL),pluginId:V.z.string(),resourceType:V.z.string(),conditions:se})]),u=(R,M)=>V.z.object({items:V.z.array(V.z.intersection(V.z.object({id:V.z.string()}),R)).refine(g=>g.length===M.size&&g.every(({id:Ze})=>M.has(Ze)),{message:"Items in response do not match request"})});class F{constructor(M){re(this,"enabled"),re(this,"discovery");var g;this.discovery=M.discovery,this.enabled=(g=M.config.getOptionalBoolean("permission.enabled"))!=null?g:!1}async authorize(M,g){return this.makeRequest(M,ve,g)}async authorizeConditional(M,g){return this.makeRequest(M,be,g)}async makeRequest(M,g,Ze){if(!this.enabled)return M.map(St=>({result:I.ALLOW}));const we={items:M.map(St=>({id:Y.Z(),...St}))},Qe=await this.discovery.getBaseUrl("permission"),le=await m()(`${Qe}/authorize`,{method:"POST",body:JSON.stringify(we),headers:{...this.getAuthorizationHeader(Ze==null?void 0:Ze.token),"content-type":"application/json"}});if(!le.ok)throw await o.VL.fromResponse(le);const Le=await le.json(),Ke=u(g,new Set(we.items.map(({id:St})=>St))).parse(Le).items.reduce((St,L)=>(St[L.id]=L,St),{});return we.items.map(St=>Ke[St.id])}getAuthorizationHeader(M){return M?{Authorization:`Bearer ${M}`}:{}}}},56563:(Un,Ht,e)=>{"use strict";e.d(Ht,{RV:()=>I,gI:()=>tt,iM:()=>W,un:()=>r});var o=e(2784),p=e(30204),m=e(30705),Y=e(5083),V=e(69984);const I=(0,p.c)({id:"plugin.permission.api"});class W{constructor(ye,X){this.permissionClient=ye,this.identityApi=X}static create(ye){const{config:X,discovery:Z,identity:l}=ye,ne=new Y.Y2({discovery:Z,config:X});return new W(ne,l)}async authorize(ye){return(await this.permissionClient.authorize([ye],await this.identityApi.getCredentials()))[0]}}function tt(je){const ye=(0,p.u)(I),{data:X,error:Z}=(0,V.ZP)(je,async l=>{if((0,Y.g2)(l.permission)&&!l.resourceRef)return Y.rG.DENY;const{result:ne}=await ye.authorize(l);return ne});return Z?{error:Z,loading:!1,allowed:!1}:X===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:X===Y.rG.ALLOW}}const Xe=je=>{const{permission:ye,resourceRef:X,errorComponent:Z,...l}=je,ne=tt(isResourcePermission(ye)?{permission:ye,resourceRef:X}:{permission:ye}),re=useApp(),{NotFoundErrorPage:se}=re.getComponents();let ve=Z===void 0?React.createElement(se,null):Z;return ne.loading?ve=null:ne.allowed&&(ve=je.element),React.createElement(Route,{...l,element:ve})};function r(je){const{permission:ye,resourceRef:X}=je,Z=tt((0,Y.g2)(ye)?{permission:ye,resourceRef:X}:{permission:ye}),l=(0,m.qD)();if(Z.loading)return null;if(Z.allowed)return o.createElement(o.Fragment,null,je.children);if(je.errorPage)return o.createElement(o.Fragment,null,je.errorPage);const{NotFoundErrorPage:ne}=l.getComponents();return o.createElement(ne,null)}},67898:(Un,Ht,e)=>{"use strict";e.d(Ht,{t:()=>r});var o=e(34520),p="http://json-schema.org/draft-07/schema",m="TemplateV1beta3",Y="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",V=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",type:"website",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],I=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],W={$schema:p,$id:m,description:Y,examples:V,allOf:I};const tt=(0,o.wI)(W),Xe={async check(je){return tt(je)===je}},r=je=>je.apiVersion==="scaffolder.backstage.io/v1beta3"&&je.kind==="Template"},31011:(Un,Ht,e)=>{"use strict";e.d(Ht,{Iy:()=>Nn,Lp:()=>Cr,_G:()=>Mr,br:()=>it,h4:()=>ke,l0:()=>zt,mg:()=>Ee,ow:()=>ce,v9:()=>vr,vF:()=>an,zP:()=>He});var o=e(30204),p=e(30705),m=e(79692),Y=e(42494),V=e(90436),I=e(67358),W=e(31625),tt=e(31377),Xe=e(34546),r=e(77277),je=e(60364),ye=e(94339),X=e(24579),Z=e(60905),l=e(95544),ne=e(85256),re=e(7089),se=e(14503),ve=e(27556),be=e(4614),u=e(97136),F=e(5806),R=e(21324),M=e(86619),g=e(2784),Ze=e(51251),we=e(49558),Qe=e(11280),le=e(19126),Le=e.n(le),Se=e(64279),Ke=e(60885),St=e(9850),L=e.n(St),mt=e(95303),fe=e(93804),Kt=e(90137),Et=e(34520),It=e(64304),Ft=e(78373),Ye=e(52160),_t=e(67898),kt=e(27057),Qt=e(71140),Yt=e(34063),Nt=e(72779),bt=e.n(Nt),Tt=e(34812),wt=e(91750),Xt=e(70218),Re=e(26228),j=e(75951),v=e.n(j),k=e(52084),Q=e(82108),q=e.n(Q),Ge=e(19996),U=e(25505),x=e(38016),he=e(88013),Fe=e(61837),dt=e(86136),qt=e(49378),Ie=e(12231),Be=e(50758),ct=e(79784),Ot=e(30254),Ct=e(27604),$t=e(33882),Pt=e(43054);function $e(C){return typeof C=="object"&&C!==null&&!Array.isArray(C)}function qe(C,_){if(!$e(C))return;const{properties:O,items:D,anyOf:ue,oneOf:_e,allOf:oe,dependencies:Ce,then:Ne,else:We}=C;for(const pt in C)C.hasOwnProperty(pt)&&pt.startsWith("ui:")&&(_[pt]=C[pt],delete C[pt]);if($e(O))for(const pt in O){if(!O.hasOwnProperty(pt))continue;const nn=O[pt];if(!$e(nn))continue;const tn={};_[pt]=tn,qe(nn,tn)}if($e(D)){const pt={};_.items=pt,qe(D,pt)}if(Array.isArray(ue))for(const pt of ue)$e(pt)&&qe(pt,_);if(Array.isArray(_e))for(const pt of _e)$e(pt)&&qe(pt,_);if(Array.isArray(oe))for(const pt of oe)$e(pt)&&qe(pt,_);if($e(Ce))for(const pt of Object.keys(Ce)){const nn=Ce[pt];$e(nn)&&qe(nn,_)}$e(Ne)&&qe(Ne,_),$e(We)&&qe(We,_)}const Ee=C=>{const _={},O=JSON.parse(JSON.stringify(C));return qe(O,_),{uiSchema:_,schema:O}},G=()=>{const C={__errors:[],addError:_=>{var O;(O=C.__errors)==null||O.push(_)}};return C};function de(C){return!!C&&"__errors"in C}function Ue(C){var _;if(!C)return!1;for(const O of Object.values(C)){if(de(O)){if(((_=O.__errors)!=null?_:[]).length>0)return!0;continue}if(Ue(O))return!0}return!1}function nt(C){return typeof C=="object"&&C!==null&&!Array.isArray(C)}const it=(C,_,O)=>{async function D(ue,_e="#",oe=ue){var Ce,Ne;const We=new Ze.NL(C),pt={},nn=async(tn,Ut,gn,pn,hn)=>{const En=_[tn];if(En){const vn=G();try{await En(gn,vn,{...O,formData:ue,schema:pn,uiSchema:hn})}catch(Yn){vn.addError(Yn.message)}pt[Ut]=vn}};for(const[tn,Ut]of Object.entries(oe)){const gn=`${_e}/${tn}`,pn=We.getSchema(gn,ue),{schema:hn,uiSchema:En}=Ee(pn),vn=pn&&pn.items,Yn=async(In,xn,zn)=>{await nn(In["ui:field"],tn,Ut,xn,zn)},Vn=async In=>{if("ui:field"in In){const{schema:xn,uiSchema:zn}=Ee(pn.items);await Yn(In,xn,zn)}};if(pn&&"ui:field"in pn)await Yn(pn,hn,En);else if(vn&&"ui:field"in pn.items)await Vn(pn.items);else if(vn&&pn.items.type==="object"){const In=(Ne=(Ce=pn.items)==null?void 0:Ce.properties)!=null?Ne:[];for(const[,xn]of Object.entries(In))await Vn(xn)}else nt(Ut)&&(pt[tn]=await D(ue,gn,Ut))}return pt}return async ue=>await D(ue)},Rt=C=>{const _=Object.fromEntries(Object.entries(C.formState).map(([O,D])=>{var ue;for(const _e of C.schemas){const Ce=new Ze.NL(_e.mergedSchema).getSchema(`#/${O}`,C.formState);if(Ce){const Ne=(ue=Ce["ui:backstage"])==null?void 0:ue.review;if(Ne){if(Ne.mask)return[O,Ne.mask];if(Ne.show===!1)return[]}if(Ce["ui:widget"]==="password")return[O,"******"]}}return[O,D]}));return g.createElement(we.xT,{metadata:_})},en=C=>{const _=(0,o.u)(o.f),D=C.steps.map(({title:ue,description:_e,schema:oe})=>({title:ue,description:_e,mergedSchema:oe,...Ee(oe)})).filter(ue=>{var _e;const oe=(_e=ue.uiSchema["ui:backstage"])==null?void 0:_e.featureFlag;return oe?_.isActive(oe):!0}).map(ue=>{var _e,oe;return{...ue,schema:{...ue.schema,title:void 0,properties:Object.fromEntries(Object.entries((oe=(_e=ue.schema)==null?void 0:_e.properties)!=null?oe:[]).filter(([Ce])=>{var Ne,We;const pt=(We=(Ne=ue.uiSchema[Ce])==null?void 0:Ne["ui:backstage"])==null?void 0:We.featureFlag;return pt?_.isActive(pt):!0}))}}});return{presentation:C.presentation,steps:D}},rn=C=>(0,g.useState)(()=>{if(C)return C;const _=Le().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(_.formData)}catch{return{}}}),Ae=C=>{const _=(0,o.u)(Ke.s),{value:O,loading:D,error:ue}=(0,Se.default)(()=>_.getTemplateParameterSchema(C),[_,C]);return{manifest:O,loading:D,error:ue}},De=C=>{const _="backstage:featureFlag",O=(0,o.u)(o.f);if(!C)return;const D=C==null?void 0:C.steps.filter(ue=>{const _e=ue.schema[_];return typeof _e!="string"||O.isActive(_e)}).map(ue=>{var _e;const oe=L()(ue),Ce=[];return oe.schema.properties&&(oe.schema.properties=Object.fromEntries(Object.entries(oe.schema.properties).filter(([Ne,We])=>We[_]?O.isActive(We[_])?!0:(Ce.push(Ne),!1):!0)),oe.schema.required=Array.isArray(oe.schema.required)?(_e=oe.schema.required)==null?void 0:_e.filter(Ne=>!Ce.includes(Ne)):oe.schema.required),oe});return{...C,steps:D}},w=(C,_={})=>{var O;const{layouts:D=[]}=_,ue=C==null?void 0:C.uiSchema["ui:ObjectFieldTemplate"];if(typeof ue!="string")return C;const _e=(O=D.find(oe=>oe.name===ue))==null?void 0:O.component;return _e?{...C,uiSchema:{...C.uiSchema,["ui:ObjectFieldTemplate"]:_e}}:C};var te=Object.freeze({__proto__:null,DescriptionField:({description:C})=>C&&g.createElement(we.SA,{content:C,linkTarget:"_blank"})});const ut=(0,m.Z)(C=>({markdownDescription:{fontSize:C.typography.caption.fontSize,margin:0,color:C.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),K=C=>{const{children:_,displayLabel:O=!0,rawErrors:D=[],errors:ue,help:_e,rawDescription:oe,required:Ce,disabled:Ne}=C,We=ut();return g.createElement(Y.Z,{fullWidth:!0,error:!!D.length,required:Ce,disabled:Ne},_,O&&oe?g.createElement(we.SA,{content:oe,className:We.markdownDescription}):null,ue,_e)},ee=C=>{const{id:_,children:O,classNames:D,style:ue,disabled:_e,displayLabel:oe,hidden:Ce,label:Ne,onDropPropertyClick:We,onKeyChange:pt,readonly:nn,required:tn,rawErrors:Ut=[],errors:gn,help:pn,rawDescription:hn,schema:En,uiSchema:vn,registry:Yn}=C,Vn=(0,fe.LI)(vn),In=(0,fe.t4)("WrapIfAdditionalTemplate",Yn,Vn);return Ce?g.createElement("div",{style:{display:"none"}},O):g.createElement(In,{classNames:D,style:ue,disabled:_e,id:_,label:Ne,onDropPropertyClick:We,onKeyChange:pt,readonly:nn,required:tn,schema:En,uiSchema:vn,registry:Yn},g.createElement(K,{displayLabel:oe,rawErrors:Ut,help:pn,disabled:_e,rawDescription:hn,errors:gn,required:tn},O))},Ve=(0,m.Z)(C=>({markdownDescription:{fontSize:C.typography.caption.fontSize,margin:0,color:C.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),lt=C=>{const{id:_,description:O}=C,D=Ve();return O?typeof O=="string"?g.createElement(we.SA,{content:O,className:D.markdownDescription}):g.createElement(V.Z,{id:_,variant:"subtitle2",style:{marginTop:"5px"}},O):null},Lt=(0,mt.Zz)(Kt.Q2),zt=C=>{const _=g.useMemo(()=>{var D;return Object.fromEntries(Object.entries((D=C.fields)!=null?D:{}).map(([ue,_e])=>[ue,oe=>{var Ce,Ne;return g.createElement(_e,{...oe,uiSchema:(Ce=oe.uiSchema)!=null?Ce:{},formData:oe.formData,rawErrors:(Ne=oe.rawErrors)!=null?Ne:[]})}]))},[C.fields]),O=g.useMemo(()=>({FieldTemplate:ee,DescriptionFieldTemplate:lt,...C.templates}),[C.templates]);return g.createElement(Lt,{...C,templates:O,fields:_})},Gt=(0,m.Z)(C=>({backButton:{marginRight:C.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:C.spacing(2)},formWrapper:{padding:C.spacing(2)}})),an=C=>{var _,O,D,ue,_e,oe,Ce;const{layouts:Ne=[],components:We={},...pt}=C,{ReviewStateComponent:nn=Rt,ReviewStepComponent:tn,backButtonText:Ut="Back",createButtonText:gn="Create",reviewButtonText:pn="Review"}=We,hn=(0,p.z$)(),{presentation:En,steps:vn}=en(pt.manifest),Yn=(0,o.b)(),[Vn,In]=(0,g.useState)(0),[xn,zn]=(0,g.useState)(!1),[sn,Rn]=rn(pt.initialState),[or,er]=(0,g.useState)(),yr=Gt(),Br=(0,g.useMemo)(()=>Object.fromEntries(pt.extensions.map(({name:tr,component:rr})=>[tr,rr])),[pt.extensions]),_r=(0,g.useMemo)(()=>({...te,...Br}),[Br]),Jr=(0,g.useMemo)(()=>Object.fromEntries(pt.extensions.map(({name:tr,validation:rr})=>[tr,rr])),[pt.extensions]),Fr=(0,g.useMemo)(()=>{var tr;return it((tr=vn[Vn])==null?void 0:tr.mergedSchema,Jr,{apiHolder:Yn})},[vn,Vn,Jr,Yn]),kr=()=>{In(tr=>tr-1)},Wr=(0,g.useCallback)(tr=>Rn(rr=>({...rr,...tr.formData})),[Rn]),Xr=(0,g.useCallback)(()=>{var tr;pt.onCreate(sn);const rr=typeof sn.name=="string"?sn.name:void 0;hn.captureEvent("create",(tr=rr!=null?rr:pt.templateName)!=null?tr:"unknown")},[pt,sn,hn]),ta=w(vn[Vn],{layouts:Ne}),na=async({formData:tr={}})=>{er(void 0),zn(!0);const rr=await Fr(tr);zn(!1),Ue(rr)?er(rr):(er(void 0),In(Kr=>{const wr=Kr+1;return hn.captureEvent("click",`Next Step (${wr})`),wr})),Rn(Kr=>({...Kr,...tr}))},da=(O=(_=En==null?void 0:En.buttonLabels)==null?void 0:_.backButtonText)!=null?O:Ut,ra=(ue=(D=En==null?void 0:En.buttonLabels)==null?void 0:D.createButtonText)!=null?ue:gn,br=(oe=(_e=En==null?void 0:En.buttonLabels)==null?void 0:_e.reviewButtonText)!=null?oe:pn;return g.createElement(g.Fragment,null,xn&&g.createElement(I.Z,{variant:"indeterminate"}),g.createElement(W.Z,{activeStep:Vn,alternativeLabel:!0,variant:"elevation"},vn.map((tr,rr)=>g.createElement(tt.Z,{key:rr},g.createElement(Xe.Z,null,tr.title))),g.createElement(tt.Z,null,g.createElement(Xe.Z,null,"Review"))),g.createElement("div",{className:yr.formWrapper},Vn<vn.length?g.createElement(zt,{validator:Qe.ZP,extraErrors:or,formData:sn,formContext:{formData:sn},schema:ta.schema,uiSchema:ta.uiSchema,onSubmit:na,fields:_r,showErrorList:!1,onChange:Wr,...(Ce=pt.formProps)!=null?Ce:{}},g.createElement("div",{className:yr.footer},g.createElement(r.Z,{onClick:kr,className:yr.backButton,disabled:Vn<1||xn},da),g.createElement(r.Z,{variant:"contained",color:"primary",type:"submit",disabled:xn},Vn===vn.length-1?br:"Next"))):tn?g.createElement(tn,{disableButtons:xn,formData:sn,handleBack:kr,handleReset:()=>{},steps:vn,handleCreate:Xr}):g.createElement(g.Fragment,null,g.createElement(nn,{formState:sn,schemas:vn}),g.createElement("div",{className:yr.footer},g.createElement(r.Z,{onClick:kr,className:yr.backButton,disabled:Vn<1},"Back"),g.createElement(r.Z,{variant:"contained",color:"primary",onClick:Xr},ra)))))},fn=(0,m.Z)(()=>({header:{backgroundImage:({cardBackgroundImage:C})=>C,color:({cardFontColor:C})=>C},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),on=C=>{const{template:{metadata:{title:_,name:O},spec:{type:D}}}=C,{getPageTheme:ue}=(0,je.Z)(),_e=ue({themeId:D}),oe=fn({cardFontColor:_e.fontColor,cardBackgroundImage:_e.backgroundImage}),Ce=g.createElement("div",{className:oe.subtitleWrapper},g.createElement("div",null,D),g.createElement("div",null,g.createElement(It.LH,{entity:C.template,style:{padding:0}})));return g.createElement(we.hu,{title:_!=null?_:O,subtitle:Ce,classes:{root:oe.header}})},ln=(0,m.Z)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),cn=({icon:C,text:_,url:O})=>{const D=ln();return g.createElement("div",{className:D.linkText},g.createElement(C,{fontSize:"small"}),g.createElement(we.rU,{style:{marginLeft:"8px"},to:O},_||O))},On=(0,m.Z)(C=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:C.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:C.palette.link}})),dn=C=>{var _,O,D,ue,_e,oe,Ce;const{template:Ne}=C,We=On(),pt=(0,Ft.g)(Ne,Et.S4),nn=(0,p.qD)(),tn=Ut=>{var gn;return Ut&&(gn=nn.getSystemIcon(Ut))!=null?gn:Ye.Z};return g.createElement(ye.Z,null,g.createElement(on,{template:Ne}),g.createElement(X.Z,null,g.createElement(Z.Z,{container:!0,spacing:2},g.createElement(Z.Z,{item:!0,xs:12},g.createElement(l.Z,{className:We.box},g.createElement(we.SA,{className:We.markdown,content:(_=Ne.metadata.description)!=null?_:"No description"}))),((D=(O=Ne.metadata.tags)==null?void 0:O.length)!=null?D:0)>0&&g.createElement(g.Fragment,null,g.createElement(Z.Z,{item:!0,xs:12},g.createElement(ne.Z,null)),g.createElement(Z.Z,{item:!0,xs:12},g.createElement(Z.Z,{container:!0,spacing:2},(ue=Ne.metadata.tags)==null?void 0:ue.map(Ut=>g.createElement(Z.Z,{item:!0},g.createElement(re.Z,{style:{margin:0},size:"small",label:Ut,key:Ut})))))),(C.additionalLinks||((_e=Ne.metadata.links)==null?void 0:_e.length))&&g.createElement(g.Fragment,null,g.createElement(Z.Z,{item:!0,xs:12},g.createElement(ne.Z,null)),g.createElement(Z.Z,{item:!0,xs:12},g.createElement(Z.Z,{container:!0,spacing:2},(oe=C.additionalLinks)==null?void 0:oe.map(({icon:Ut,text:gn,url:pn},hn)=>g.createElement(Z.Z,{className:We.linkText,item:!0,xs:6,key:hn},g.createElement(cn,{icon:Ut,text:gn,url:pn}))),(Ce=Ne.metadata.links)==null?void 0:Ce.map(({url:Ut,icon:gn,title:pn},hn)=>g.createElement(Z.Z,{className:We.linkText,item:!0,xs:6,key:hn},g.createElement(cn,{icon:tn(gn),text:pn||Ut,url:Ut})))))))),g.createElement(se.Z,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},g.createElement("div",{className:We.footer},g.createElement("div",{className:We.ownedBy},pt.length>0&&g.createElement(g.Fragment,null,g.createElement(we.tB,{fontSize:"small"}),g.createElement(It.rI,{style:{marginLeft:"8px"},entityRefs:pt,defaultKind:"Group",hideIcons:!0}))),g.createElement(r.Z,{size:"small",variant:"outlined",color:"primary",onClick:()=>{var Ut;return(Ut=C.onSelected)==null?void 0:Ut.call(C,Ne)}},"Choose"))))},Pn=C=>{const{templates:_,title:O,components:{CardComponent:D}={},onSelected:ue}=C,_e=typeof O=="string"?g.createElement(we.yW,{title:O}):O;if(_.length===0)return null;const oe=D||dn;return g.createElement(we.VY,null,_e,g.createElement(we.Oh,null,_.map(({template:Ce,additionalLinks:Ne})=>g.createElement(oe,{key:(0,Et.eE)(Ce),additionalLinks:Ne,template:Ce,onSelected:ue}))))},ce=C=>{const{loading:_,error:O,entities:D}=(0,It.wp)(),{groups:ue,templateFilter:_e,TemplateCardComponent:oe,onTemplateSelected:Ce}=C,Ne=(0,o.u)(o.s),We=(0,g.useCallback)(pt=>{Ce==null||Ce(pt)},[Ce]);return _?g.createElement(we.Ex,null):O?(Ne.post(O),null):!D||!D.length?g.createElement(V.Z,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",g.createElement(we.rU,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):g.createElement(g.Fragment,null,ue.map(({title:pt,filter:nn},tn)=>{const Ut=D.filter(_t.t).filter(gn=>_e?_e(gn):!0).filter(nn).map(gn=>{var pn,hn;const En=(hn=(pn=C.additionalLinksForEntity)==null?void 0:pn.call(C,gn))!=null?hn:[];return{template:gn,additionalLinks:En}});return g.createElement(Pn,{key:tn,templates:Ut,title:pt,components:{CardComponent:oe},onSelected:We})}))},ae=(0,m.Z)(()=>({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}})),ke=C=>{var _;const{title:O,description:D,namespace:ue,templateName:_e,...oe}=C,Ce=ae(),Ne=(0,Et.eE)({kind:"Template",namespace:ue,name:_e}),We=(0,o.u)(o.s),{loading:pt,manifest:nn,error:tn}=Ae(Ne),Ut=De(nn);return(0,g.useEffect)(()=>{tn&&We.post(new Error(`Failed to load template, ${tn}`))},[tn,We]),tn?oe.onError(tn):g.createElement(we.VY,null,pt&&g.createElement(we.Ex,null),Ut&&g.createElement(we.rJ,{title:O!=null?O:Ut.title,subheader:g.createElement(we.SA,{className:Ce.markdown,content:(_=D!=null?D:Ut.description)!=null?_:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(an,{manifest:Ut,templateName:_e,...oe})))},vt=C=>React.createElement(SecretsContextProvider,null,React.createElement(ke,{...C})),jt=(0,m.Z)({root:{"&:hover":{textDecoration:"none"}}}),Vt=C=>{const{links:_=[]}=C.output,O=jt(),D=(0,p.qD)(),ue=(0,p.tg)(It.wi),_e=oe=>{var Ce;return(Ce=D.getSystemIcon(oe))!=null?Ce:kt.Z};return g.createElement(g.Fragment,null,_.filter(({url:oe,entityRef:Ce})=>oe||Ce).map(({url:oe,entityRef:Ce,title:Ne,icon:We})=>{if(Ce){const pt=(0,Et.of)(Ce),nn=ue(pt);return{title:Ne,icon:We,url:nn}}return{title:Ne,icon:We,url:oe}}).map(({url:oe,title:Ce,icon:Ne},We)=>{const pt=_e(Ne);return g.createElement(we.rU,{to:oe,key:We,classes:{root:O.root}},g.createElement(r.Z,{startIcon:g.createElement(pt,null),component:"div",color:"primary"},Ce))}))},An=C=>{const{output:{text:_=[]},index:O,setIndex:D}=C,ue=(0,p.qD)(),_e=oe=>{var Ce;return(Ce=ue.getSystemIcon(oe))!=null?Ce:kt.Z};return g.createElement(g.Fragment,null,_.filter(({content:oe})=>oe!==void 0).map(({title:oe,icon:Ce},Ne)=>{const We=_e(Ce);return g.createElement(r.Z,{key:Ne,startIcon:g.createElement(We,null),component:"div",color:"primary",onClick:()=>D==null?void 0:D(O!==Ne?Ne:void 0),variant:O===Ne?"outlined":void 0},oe)}))},Nn=C=>{var _,O;const[D,ue]=(0,g.useState)(),_e=(0,g.useMemo)(()=>{var oe,Ce;return D!==void 0?(Ce=(oe=C.output)==null?void 0:oe.text)==null?void 0:Ce[D]:null},[C.output,D]);return C.output?g.createElement(g.Fragment,null,g.createElement(l.Z,{paddingBottom:2},g.createElement(ve.Z,null,g.createElement(l.Z,{padding:2,justifyContent:"center",display:"flex",gridGap:16},g.createElement(An,{output:C.output,index:D,setIndex:ue}),g.createElement(Vt,{output:C.output})))),_e?g.createElement(l.Z,{paddingBottom:2},g.createElement(we.rJ,{title:(_=_e.title)!=null?_:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(l.Z,{padding:2,height:"100%"},g.createElement(we.SA,{content:(O=_e.content)!=null?O:""})))):null):null},Fn=(0,m.Z)(C=>({root:{color:C.palette.text.disabled},completed:{color:C.palette.status.ok},error:{color:C.palette.status.error}})),sr=C=>{const _=Fn(),{active:O,completed:D,error:ue,skipped:_e}=C,oe=()=>O?g.createElement(be.Z,{size:"20px"}):D?g.createElement(Tt.Z,null):ue?g.createElement(wt.Z,null):_e?g.createElement(Qt.Z,null):g.createElement(Yt.Z,null);return g.createElement("div",{className:bt()(_.root,{[_.completed]:D,[_.error]:ue})},oe())},gr=C=>{const[_,O]=(0,g.useState)(""),{step:D}=C,ue=()=>D.startedAt&&D.endedAt&&_?null:D.startedAt&&D.endedAt?1:1e3,_e=(0,g.useCallback)(()=>{if(!D.startedAt){O("");return}const oe=D.endedAt?Re.ou.fromISO(D.endedAt):Re.ou.local(),Ce=Re.ou.fromISO(D.startedAt),Ne=Re.Xp.fromDateTimes(Ce,oe).toDuration().valueOf();O(v()(Ne,{round:!0}))},[D.endedAt,D.startedAt]);return(0,k.n)(_e),(0,Xt.Z)(_e,ue()),g.createElement(V.Z,{variant:"caption"},_)},Jn=(0,m.Z)(C=>({failed:{backgroundColor:C.palette.error.main},success:{backgroundColor:C.palette.success.main}})),pr=C=>{const _=Jn();return C.isComplete?g.createElement(I.Z,{variant:"determinate",classes:{bar:C.isError?_.failed:_.success},value:100}):g.createElement(I.Z,{variant:"indeterminate"})},Cr=C=>{var _,O;return g.createElement(ve.Z,{style:{position:"relative",overflow:"hidden"}},g.createElement(pr,{isComplete:(_=C.isComplete)!=null?_:!1,isError:(O=C.isError)!=null?O:!1}),g.createElement(l.Z,{padding:2},g.createElement(W.Z,{activeStep:C.activeStep,alternativeLabel:!0,variant:"elevation"},C.steps.map(D=>{const ue=D.status==="completed",_e=D.status==="failed",oe=D.status==="processing",Ce=D.status==="skipped",Ne={completed:ue,error:_e,active:oe,skipped:Ce};return g.createElement(tt.Z,{key:D.id},g.createElement(u.Z,null,g.createElement(Xe.Z,{StepIconProps:Ne,StepIconComponent:sr,"data-testid":"step-label"},g.createElement(l.Z,null,D.name),!Ce&&g.createElement(gr,{step:D}))))}))))},xr=(0,m.Z)({root:{width:"100%",height:"100%",position:"relative"}}),vr=C=>{const _=xr();return g.createElement("div",{className:_.root},g.createElement(we.nU,{text:Object.values(C.logs).map(O=>O.join(`
`)).filter(Boolean).join(`
`)}))},Lr=g.createElement(U.Z,{fontSize:"small"}),Ar=g.createElement(Ge.Z,{fontSize:"small"}),Mr=()=>{const C=(0,o.u)(o.l),{error:_,loading:O,availableTypes:D,selectedTypes:ue,setSelectedTypes:_e}=(0,It.Uh)();return O?g.createElement(we.Ex,null):_?(C.post({message:`Failed to load entity types with error: ${_}`,severity:"error"}),null):D?g.createElement(l.Z,{pb:1,pt:1},g.createElement(V.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),g.createElement(he.ZP,{multiple:!0,id:"categories-picker",options:D,value:ue,onChange:(oe,Ce)=>_e(Ce),renderOption:(oe,{selected:Ce})=>g.createElement(F.Z,{control:g.createElement(R.Z,{icon:Lr,checkedIcon:Ar,checked:Ce}),label:q()(oe)}),size:"small",popupIcon:g.createElement(x.Z,null),renderInput:oe=>g.createElement(M.Z,{...oe,variant:"outlined"})})):null},ie=(0,m.Z)(C=>({button:{color:C.page.fontColor}}));function He(C){const{onEditorClicked:_,onActionsClicked:O,onTasksClicked:D}=C,ue=ie(),[_e,oe]=(0,g.useState)();if(!_&&!O)return null;const Ce=We=>{oe(We.currentTarget)},Ne=()=>{oe(void 0)};return g.createElement(g.Fragment,null,g.createElement(Fe.Z,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!_e,"aria-haspopup":"true",role:"button",onClick:Ce,"data-testid":"menu-button",color:"inherit",className:ue.button},g.createElement(Pt.Z,null)),g.createElement(ct.ZP,{"aria-labelledby":"long-menu",open:Boolean(_e),onClose:Ne,anchorEl:_e,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(Be.Z,null,_&&g.createElement(Ie.Z,{onClick:_},g.createElement(dt.Z,null,g.createElement(Ct.Z,{fontSize:"small"})),g.createElement(qt.Z,{primary:"Template Editor"})),O&&g.createElement(Ie.Z,{onClick:O},g.createElement(dt.Z,null,g.createElement(Ot.Z,{fontSize:"small"})),g.createElement(qt.Z,{primary:"Installed Actions"})),D&&g.createElement(Ie.Z,{onClick:D},g.createElement(dt.Z,null,g.createElement($t.Z,{fontSize:"small"})),g.createElement(qt.Z,{primary:"Task List"})))))}function st(C){return{expose(){const _=()=>null;return attachComponentData(_,FIELD_EXTENSION_KEY,C),_}}}},60885:(Un,Ht,e)=>{"use strict";e.d(Ht,{F:()=>Y,S:()=>W,a:()=>V,s:()=>Xe,u:()=>tt});var o=e(18473),p=e(2784),m=e(30204);const Y="scaffolder.extensions.wrapper.v1",V="scaffolder.extensions.field.v1",I=(0,o.CT)("secrets-context"),W=r=>{const[je,ye]=(0,p.useState)({});return p.createElement(I.Provider,{value:(0,o.EI)({1:{secrets:je,setSecrets:ye}})},r.children)},tt=()=>{var r;const je=(r=(0,p.useContext)(I))==null?void 0:r.atVersion(1);if(!je)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:ye,secrets:X={}}=je;return{setSecrets:(0,p.useCallback)(l=>{ye(ne=>({...ne,...l}))},[ye]),secrets:X}},Xe=(0,o.uW)("scaffolder:scaffolder-api-ref",()=>(0,m.c)({id:"plugin.scaffolder.service"}))},12053:(Un,Ht,e)=>{"use strict";e.d(Ht,{PT:()=>tt,WQ:()=>X,eP:()=>I,zS:()=>je});var o=e(30705),p=e(30204),m=e(60885),Y=e(92233),V=e(2784);function I(ne){return{expose(){const re=()=>null;return(0,o.R5)(re,m.a,ne),re}}}const W=()=>null;(0,o.R5)(W,m.F,!0);const tt=ne=>(0,o.vJ)(ne,re=>re.selectByComponentData({key:m.F}).findComponentData({key:m.a})),Xe="scaffolder.layout.v1",r="scaffolder.layouts.wrapper.v1",je=ne=>(0,o.vJ)(ne,re=>re.selectByComponentData({key:r}).findComponentData({key:Xe}));function ye(ne,re){var se,ve,be;switch(re.type){case"INIT":{ne.steps=re.data.spec.steps.reduce((u,F)=>(u[F.id]={status:"open",id:F.id},u),{}),ne.stepLogs=re.data.spec.steps.reduce((u,F)=>(u[F.id]=[],u),{}),ne.loading=!1,ne.error=void 0,ne.completed=!1,ne.task=re.data;return}case"LOGS":{const u=re.data;for(const F of u){const R=`${F.createdAt} ${F.body.message}`;if(!F.body.stepId||!((se=ne.steps)!=null&&se[F.body.stepId]))continue;const M=(ve=ne.stepLogs)==null?void 0:ve[F.body.stepId],g=(be=ne.steps)==null?void 0:be[F.body.stepId];F.body.status&&F.body.status!==g.status&&(g.status=F.body.status,g.status==="processing"&&(g.startedAt=F.createdAt),["cancelled","completed","failed"].includes(g.status)&&(g.endedAt=F.createdAt)),M==null||M.push(R)}return}case"COMPLETED":{ne.completed=!0,ne.output=re.data.body.output,ne.error=re.data.body.error;return}case"CANCELLED":{ne.cancelled=!0;return}case"ERROR":{ne.error=re.data,ne.loading=!1,ne.completed=!0;return}default:return}}const X=ne=>{const re=(0,p.u)(m.s),[se,ve]=(0,Y.C)(ye,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,V.useEffect)(()=>{let be=!1,u,F,R=1;const M=()=>re.getTask(ne).then(g=>{if(be)return;ve({type:"INIT",data:g});const Ze=re.streamLogs({taskId:ne}),we=new Array;function Qe(){if(we.length){const le=we.splice(0,we.length);ve({type:"LOGS",data:le})}}F=setInterval(Qe,500),u=Ze.subscribe({next:le=>{switch(le.type){case"log":return we.push(le);case"cancelled":ve({type:"CANCELLED"});return;case"completion":Qe(),ve({type:"COMPLETED",data:le});return;default:throw new Error(`Unhandled event type ${le.type} in observer`)}},error:le=>{Qe(),le.message||(le.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${R}/3 retries)`),R<=3&&setTimeout(()=>{R+=1,M()},15e3),ve({type:"ERROR",data:le})}})},g=>{be||ve({type:"ERROR",data:g})});return M(),()=>{be=!0,u&&u.unsubscribe(),F&&clearInterval(F)}},[re,ve,ne]),se};function Z(ne){return{expose(){const re=()=>null;return attachComponentData(re,Xe,ne),re}}}const l=()=>null;(0,o.R5)(l,r,!0)},35632:(Un,Ht,e)=>{"use strict";e.d(Ht,{A:()=>qe,B:()=>$t,C:()=>$e,D:()=>an,F:()=>Gt,G:()=>K,H:()=>nt,I:()=>de,J:()=>G,K:()=>lt,N:()=>Ve,P:()=>jt,T:()=>Ar,d:()=>Jn,e:()=>st,i:()=>it,l:()=>vt,o:()=>On,p:()=>ae,q:()=>ce,r:()=>ln,s:()=>Vt,t:()=>Pn,u:()=>fn,v:()=>on,w:()=>dn,x:()=>cn,y:()=>Be,z:()=>Ie});var o=e(49462),p=e(60885),m=e(12053),Y=e(34520),V=e(32272),I=e(19126),W=e.n(I),tt=e(82394),Xe=e.n(tt),r=e(31734),je=e.n(r),ye=e(88285),X=e(30204),Z=e(30705),l=e(64304),ne=e(86619),re=e(95544),se=e(90436),ve=e(85256),be=e(42494),u=e(5806),F=e(21324),R=e(79692),M=e(60364),g=e(61837),Ze=e(79784),we=e(50758),Qe=e(12231),le=e(86136),Le=e(49378),Se=e(27556),Ke=e(77277),St=e(88013),L=e(2784),mt=e(64279),fe=e(30195),Kt=e(29641),Et=e(74828),It=e(29611),Ft=e(56939),Ye=e(49558),_t=e(48760),kt=e(62155),Qt=e(82108),Yt=e.n(Qt),Nt=e(19996),bt=e(25505),Tt=e(38016),wt=e(73557),Xt=e(51967),Re=e(49166),j=e(93269),v=e(8198),k=e(15026),Q=e(43054),q=e(31011),Ge=Object.defineProperty,U=(C,_,O)=>_ in C?Ge(C,_,{enumerable:!0,configurable:!0,writable:!0,value:O}):C[_]=O,x=(C,_,O)=>(U(C,typeof _!="symbol"?_+"":_,O),O);class he{constructor(_){x(this,"discoveryApi"),x(this,"scmIntegrationsApi"),x(this,"fetchApi"),x(this,"identityApi"),x(this,"useLongPollingLogs");var O,D;this.discoveryApi=_.discoveryApi,this.fetchApi=(O=_.fetchApi)!=null?O:{fetch},this.scmIntegrationsApi=_.scmIntegrationsApi,this.useLongPollingLogs=(D=_.useLongPollingLogs)!=null?D:!1,this.identityApi=_.identityApi}async listTasks(_){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const O=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:D}=await this.identityApi.getBackstageIdentity(),ue=W().stringify(_.filterByOwnership==="owned"?{createdBy:D}:{}),_e=await this.fetchApi.fetch(`${O}/v2/tasks?${ue}`);if(!_e.ok)throw await V.VL.fromResponse(_e);return await _e.json()}async getIntegrationsList(_){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(D=>!this.scmIntegrationsApi.bitbucketCloud.byHost(D.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(D.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(D=>({type:D.type,title:D.title,host:D.config.host})).filter(D=>_.allowedHosts.includes(D.host))}}async getTemplateParameterSchema(_){const{namespace:O,kind:D,name:ue}=(0,Y.of)(_,{defaultKind:"template"}),_e=await this.discoveryApi.getBaseUrl("scaffolder"),oe=[O,D,ue].map(pt=>encodeURIComponent(pt)).join("/"),Ce=`${_e}/v2/templates/${oe}/parameter-schema`,Ne=await this.fetchApi.fetch(Ce);if(!Ne.ok)throw await V.VL.fromResponse(Ne);return await Ne.json()}async scaffold(_){const{templateRef:O,values:D,secrets:ue={}}=_,_e=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,oe=await this.fetchApi.fetch(_e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:O,values:{...D},secrets:ue})});if(oe.status!==201){const Ne=`${oe.status} ${oe.statusText}`,We=await oe.text();throw new Error(`Backend request failed, ${Ne} ${We.trim()}`)}const{id:Ce}=await oe.json();return{taskId:Ce}}async getTask(_){const D=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(_)}`,ue=await this.fetchApi.fetch(D);if(!ue.ok)throw await V.VL.fromResponse(ue);return await ue.json()}streamLogs(_){return this.useLongPollingLogs?this.streamLogsPolling(_):this.streamLogsEventStream(_)}async dryRun(_){const O=await this.discoveryApi.getBaseUrl("scaffolder"),D=await this.fetchApi.fetch(`${O}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:_.template,values:_.values,secrets:_.secrets,directoryContents:_.directoryContents})});if(!D.ok)throw await V.VL.fromResponse(D);return D.json()}streamLogsEventStream({taskId:_,after:O}){return new(Xe())(D=>{var ue;const _e=new URLSearchParams;O!==void 0&&_e.set("after",String(Number(O))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(ue=this.identityApi)==null?void 0:ue.getCredentials()]).then(([oe,Ce])=>{const Ne=`${oe}/v2/tasks/${encodeURIComponent(_)}/eventstream`,We=nn=>{if(nn.data)try{D.next(JSON.parse(nn.data))}catch(tn){D.error(tn)}},pt=new r.EventSourcePolyfill(Ne,{withCredentials:!0,headers:Ce!=null&&Ce.token?{Authorization:`Bearer ${Ce.token}`}:{}});pt.addEventListener("log",We),pt.addEventListener("cancelled",We),pt.addEventListener("completion",nn=>{We(nn),pt.close(),D.complete()}),pt.addEventListener("error",nn=>{D.error(nn)})},oe=>{D.error(oe)})})}streamLogsPolling({taskId:_,after:O}){let D=O;return new(Xe())(ue=>{this.discoveryApi.getBaseUrl("scaffolder").then(async _e=>{for(;!ue.closed;){const oe=`${_e}/v2/tasks/${encodeURIComponent(_)}/events?${W().stringify({after:D})}`,Ce=await this.fetchApi.fetch(oe);if(!Ce.ok){await new Promise(We=>setTimeout(We,1e3));continue}const Ne=await Ce.json();for(const We of Ne)if(D=Number(We.id),ue.next(We),We.type==="completion"){ue.complete();return}}})})}async listActions(){const _=await this.discoveryApi.getBaseUrl("scaffolder"),O=await this.fetchApi.fetch(`${_}/v2/actions`);if(!O.ok)throw await V.VL.fromResponse(O);return await O.json()}async cancelTask(_){const D=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(_)}/cancel`,ue=await this.fetchApi.fetch(D,{method:"POST"});if(!ue.ok)throw await V.VL.fromResponse(ue);return await ue.json()}}function Fe(C,_){return{schema:{returnValue:(0,Kt.ZP)(C),uiOptions:_?(0,Kt.ZP)(_):void 0},type:null,uiOptionsType:null}}const dt=fe.z.record(fe.z.string().or(fe.z.object({exists:fe.z.boolean().optional()})).or(fe.z.array(fe.z.string()))),Ie=Fe(fe.z.string(),fe.z.object({allowedKinds:fe.z.array(fe.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:fe.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:fe.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:fe.z.union([fe.z.string(),fe.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:fe.z.array(dt).or(dt).optional().describe("List of key-value filter expression for entities")})).schema,Be=C=>{var _,O,D,ue,_e;const{onChange:oe,schema:{title:Ce="Entity",description:Ne="An entity from the catalog"},required:We,uiSchema:pt,rawErrors:nn,formData:tn,idSchema:Ut}=C,gn=Ct(pt),pn=(_=pt["ui:options"])==null?void 0:_.defaultKind,hn=((O=pt["ui:options"])==null?void 0:O.defaultNamespace)||void 0,En=(0,X.u)(l.Ah),{value:vn,loading:Yn}=(0,mt.default)(async()=>{const{items:sn}=await En.getEntities(gn?{filter:gn}:void 0);return sn}),Vn=(ue=(D=pt["ui:options"])==null?void 0:D.allowArbitraryValues)!=null?ue:!0,In=(0,L.useCallback)(sn=>{try{return(0,l.$3)((0,Y.of)(sn,{defaultKind:pn,defaultNamespace:hn}),{defaultKind:pn,defaultNamespace:hn})}catch{return sn}},[pn,hn]),xn=(0,L.useCallback)((sn,Rn,or)=>{if(typeof Rn!="string")oe(Rn?(0,Y.eE)(Rn):void 0);else if(or==="blur"||or==="create-option"){let er=Rn;try{er=(0,Y.eE)((0,Y.of)(Rn,{defaultKind:pn,defaultNamespace:hn}))}catch{}(tn!==Rn||Vn)&&oe(er)}},[oe,tn,pn,hn,Vn]),zn=(_e=vn==null?void 0:vn.find(sn=>(0,Y.eE)(sn)===tn))!=null?_e:Vn&&tn?In(tn):"";return(0,L.useEffect)(()=>{(vn==null?void 0:vn.length)===1&&zn===""&&oe((0,Y.eE)(vn[0]))},[vn,oe,zn]),L.createElement(be.Z,{margin:"normal",required:We,error:(nn==null?void 0:nn.length)>0&&!tn},L.createElement(St.ZP,{disabled:(vn==null?void 0:vn.length)===1,id:Ut==null?void 0:Ut.$id,value:zn,loading:Yn,onChange:xn,options:vn||[],getOptionLabel:sn=>typeof sn=="string"?sn:(0,l.$3)(sn,{defaultKind:pn,defaultNamespace:hn}),autoSelect:!0,freeSolo:Vn,renderInput:sn=>L.createElement(ne.Z,{...sn,label:Ce,margin:"dense",helperText:Ne,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:We,InputProps:sn.InputProps})}))};function ct(C){return typeof C=="object"&&C.exists?ye.n3:C==null?void 0:C.toString()}function Ot(C){const _={};for(const[O,D]of Object.entries(C))Array.isArray(D)?_[O]=D:_[O]=ct(D);return _}function Ct(C){var _,O;const D=(_=C["ui:options"])==null?void 0:_.allowedKinds,ue=((O=C["ui:options"])==null?void 0:O.catalogFilter)||D&&{kind:D};if(ue)return Array.isArray(ue)?ue.map(Ot):Ot(ue)}const $t=(C,_)=>{Y.y$.isValidObjectName(C)||_.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},$e=Fe(fe.z.string()).schema,qe=C=>{const{onChange:_,required:O,schema:{title:D="Name",description:ue="Unique name of the component"},rawErrors:_e,formData:oe,uiSchema:{"ui:autofocus":Ce},idSchema:Ne,placeholder:We}=C;return L.createElement(ne.Z,{id:Ne==null?void 0:Ne.$id,label:D,placeholder:We,helperText:ue,required:O,value:oe!=null?oe:"",onChange:({target:{value:pt}})=>_(pt),margin:"normal",error:(_e==null?void 0:_e.length)>0&&!oe,inputProps:{autoFocus:Ce}})},G=Fe(fe.z.string(),fe.z.object({allowedKinds:fe.z.array(fe.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:fe.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:fe.z.union([fe.z.string(),fe.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:fe.z.array(dt).or(dt).optional().describe("List of key-value filter expression for entities")})).schema,de=C=>{var _,O,D,ue,_e;const{schema:{title:oe="Owner",description:Ce="The owner of the component"},uiSchema:Ne,...We}=C,pt=(_=Ne["ui:options"])==null?void 0:_.defaultNamespace,nn=(O=Ne["ui:options"])==null?void 0:O.allowedKinds,tn=((D=Ne["ui:options"])==null?void 0:D.catalogFilter)||{kind:nn||["Group","User"]},Ut={...Ne,"ui:options":{catalogFilter:tn,defaultKind:"Group",allowArbitraryValues:(_e=(ue=Ne["ui:options"])==null?void 0:ue.allowArbitraryValues)!=null?_e:!0,...pt!==void 0?{defaultNamespace:pt}:{}}};return L.createElement(Be,{...We,schema:{title:oe,description:Ce},uiSchema:Ut})},nt=Fe(fe.z.string(),fe.z.object({allowedHosts:fe.z.array(fe.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:fe.z.array(fe.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:fe.z.array(fe.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:fe.z.array(fe.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:fe.z.array(fe.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:fe.z.object({secretsKey:fe.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:fe.z.object({gerrit:fe.z.array(fe.z.string()).optional().describe("Additional Gerrit scopes to request"),github:fe.z.array(fe.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:fe.z.array(fe.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:fe.z.array(fe.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:fe.z.array(fe.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,it=(C,_,O)=>{var D,ue;try{const{host:_e,searchParams:oe}=new URL(`https://${C}`),Ce=O.apiHolder.get(o.q3);_e?(((D=Ce==null?void 0:Ce.byHost(_e))==null?void 0:D.type)==="bitbucket"?(_e==="bitbucket.org"&&!oe.get("workspace")&&_.addError("Incomplete repository location provided, workspace not provided"),oe.get("project")||_.addError("Incomplete repository location provided, project not provided")):((ue=Ce==null?void 0:Ce.byHost(_e))==null?void 0:ue.type)!=="gerrit"&&(oe.get("owner")||_.addError("Incomplete repository location provided, owner not provided")),oe.get("repo")||_.addError("Incomplete repository location provided, repo not provided")):_.addError("Incomplete repository location provided, host not provided")}catch{_.addError("Unable to parse the Repository URL")}},Rt=C=>{const{allowedOwners:_=[],rawErrors:O,state:D,onChange:ue}=C,_e=_?_.map(Ce=>({label:Ce,value:Ce})):[{label:"Loading...",value:"loading"}],{owner:oe}=D;return L.createElement(L.Fragment,null,L.createElement(be.Z,{margin:"normal",required:!0,error:(O==null?void 0:O.length)>0&&!oe},_!=null&&_.length?L.createElement(Ye.Ph,{native:!0,label:"Owner Available",onChange:Ce=>ue({owner:String(Array.isArray(Ce)?Ce[0]:Ce)}),disabled:_.length===1,selected:oe,items:_e}):L.createElement(L.Fragment,null,L.createElement(Ft.Z,{htmlFor:"ownerInput"},"Owner"),L.createElement(It.Z,{id:"ownerInput",onChange:Ce=>ue({owner:Ce.target.value}),value:oe})),L.createElement(Et.Z,null,"The organization, user or project that this repo will belong to")))},en=C=>{const{allowedOwners:_=[],state:O,onChange:D,rawErrors:ue}=C,_e=_?_.map(Ce=>({label:Ce,value:Ce})):[{label:"Loading...",value:"loading"}],{owner:oe}=O;return L.createElement(L.Fragment,null,L.createElement(be.Z,{margin:"normal",required:!0,error:(ue==null?void 0:ue.length)>0&&!oe},_!=null&&_.length?L.createElement(Ye.Ph,{native:!0,label:"Owner Available",onChange:Ce=>D({owner:String(Array.isArray(Ce)?Ce[0]:Ce)}),disabled:_.length===1,selected:oe,items:_e}):L.createElement(L.Fragment,null,L.createElement(Ft.Z,{htmlFor:"ownerInput"},"Owner"),L.createElement(It.Z,{id:"ownerInput",onChange:Ce=>D({owner:Ce.target.value}),value:oe})),L.createElement(Et.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},rn=C=>{const{allowedOrganizations:_=[],allowedOwners:O=[],rawErrors:D,state:ue,onChange:_e}=C,oe=_?_.map(pt=>({label:pt,value:pt})):[{label:"Loading...",value:"loading"}],Ce=O?O.map(pt=>({label:pt,value:pt})):[{label:"Loading...",value:"loading"}],{organization:Ne,owner:We}=ue;return L.createElement(L.Fragment,null,L.createElement(be.Z,{margin:"normal",required:!0,error:(D==null?void 0:D.length)>0&&!Ne},_!=null&&_.length?L.createElement(Ye.Ph,{native:!0,label:"Organization",onChange:pt=>_e({organization:String(Array.isArray(pt)?pt[0]:pt)}),disabled:_.length===1,selected:Ne,items:oe}):L.createElement(L.Fragment,null,L.createElement(Ft.Z,{htmlFor:"orgInput"},"Organization"),L.createElement(It.Z,{id:"orgInput",onChange:pt=>_e({organization:pt.target.value}),value:Ne})),L.createElement(Et.Z,null,"The Organization that this repo will belong to")),L.createElement(be.Z,{margin:"normal",required:!0,error:(D==null?void 0:D.length)>0&&!We},O!=null&&O.length?L.createElement(Ye.Ph,{native:!0,label:"Owner",onChange:pt=>_e({owner:String(Array.isArray(pt)?pt[0]:pt)}),disabled:O.length===1,selected:We,items:Ce}):L.createElement(L.Fragment,null,L.createElement(Ft.Z,{htmlFor:"ownerInput"},"Project"),L.createElement(It.Z,{id:"ownerInput",onChange:pt=>_e({owner:pt.target.value}),value:We})),L.createElement(Et.Z,null,"The Project that this repo will belong to")))},Ae=C=>{const{allowedOwners:_=[],allowedProjects:O=[],onChange:D,rawErrors:ue,state:_e}=C,{host:oe,workspace:Ce,project:Ne}=_e,We=_?_==null?void 0:_.map(nn=>({label:nn,value:nn})):[],pt=O?O==null?void 0:O.map(nn=>({label:nn,value:nn})):[];return(0,L.useEffect)(()=>{oe==="bitbucket.org"&&_.length&&D({workspace:_[0]})},[_,oe,D]),L.createElement(L.Fragment,null,oe==="bitbucket.org"&&L.createElement(be.Z,{margin:"normal",required:!0,error:(ue==null?void 0:ue.length)>0&&!Ce},_!=null&&_.length?L.createElement(Ye.Ph,{native:!0,label:"Allowed Workspaces",onChange:nn=>D({workspace:String(Array.isArray(nn)?nn[0]:nn)}),disabled:_.length===1,selected:Ce,items:We}):L.createElement(L.Fragment,null,L.createElement(Ft.Z,{htmlFor:"workspaceInput"},"Workspace"),L.createElement(It.Z,{id:"workspaceInput",onChange:nn=>D({workspace:nn.target.value}),value:Ce})),L.createElement(Et.Z,null,"The Workspace that this repo will belong to")),L.createElement(be.Z,{margin:"normal",required:!0,error:(ue==null?void 0:ue.length)>0&&!Ne},O!=null&&O.length?L.createElement(Ye.Ph,{native:!0,label:"Allowed Projects",onChange:nn=>D({project:String(Array.isArray(nn)?nn[0]:nn)}),disabled:O.length===1,selected:Ne,items:pt}):L.createElement(L.Fragment,null,L.createElement(Ft.Z,{htmlFor:"projectInput"},"Project"),L.createElement(It.Z,{id:"projectInput",onChange:nn=>D({project:nn.target.value}),value:Ne})),L.createElement(Et.Z,null,"The Project that this repo will belong to")))},De=C=>{const{onChange:_,rawErrors:O,state:D}=C,{workspace:ue,owner:_e}=D;return L.createElement(L.Fragment,null,L.createElement(be.Z,{margin:"normal",error:(O==null?void 0:O.length)>0&&!ue},L.createElement(Ft.Z,{htmlFor:"ownerInput"},"Owner"),L.createElement(It.Z,{id:"ownerInput",onChange:oe=>_({owner:oe.target.value}),value:_e}),L.createElement(Et.Z,null,"The owner of the project (optional)")),L.createElement(be.Z,{margin:"normal",required:!0,error:(O==null?void 0:O.length)>0&&!ue},L.createElement(Ft.Z,{htmlFor:"parentInput"},"Parent"),L.createElement(It.Z,{id:"parentInput",onChange:oe=>_({workspace:oe.target.value}),value:ue}),L.createElement(Et.Z,null,"The project parent that the repo will belong to")))},w=C=>{const{host:_,hosts:O,onChange:D,rawErrors:ue}=C,_e=(0,X.u)(p.s),{value:{integrations:oe}={integrations:[]},loading:Ce}=(0,mt.default)(async()=>await _e.getIntegrationsList({allowedHosts:O!=null?O:[]}));(0,L.useEffect)(()=>{_||(O!=null&&O.length?D(O[0]):oe!=null&&oe.length&&D(oe[0].host))},[O,_,D,oe]);const Ne=oe?oe.filter(We=>O!=null&&O.length?O==null?void 0:O.includes(We.host):!0).map(We=>({label:We.title,value:We.host})):[{label:"Loading...",value:"loading"}];return Ce?L.createElement(Ye.Ex,null):L.createElement(L.Fragment,null,L.createElement(be.Z,{margin:"normal",required:!0,error:(ue==null?void 0:ue.length)>0&&!_},L.createElement(Ye.Ph,{native:!0,disabled:(O==null?void 0:O.length)===1,label:"Host",onChange:We=>D(String(Array.isArray(We)?We[0]:We)),selected:_,items:Ne,"data-testid":"host-select"}),L.createElement(Et.Z,null,"The host where the repository will be created")))},H=C=>{const{repoName:_,allowedRepos:O,onChange:D,rawErrors:ue}=C;(0,L.useEffect)(()=>{_||O!=null&&O.length&&D(O[0])},[O,_,D]);const _e=O?O.map(oe=>({label:oe,value:oe})):[{label:"Loading...",value:"loading"}];return L.createElement(L.Fragment,null,L.createElement(be.Z,{margin:"normal",required:!0,error:(ue==null?void 0:ue.length)>0&&!_},O!=null&&O.length?L.createElement(Ye.Ph,{native:!0,label:"Repositories Available",onChange:oe=>D(String(Array.isArray(oe)?oe[0]:oe)),disabled:O.length===1,selected:_,items:_e}):L.createElement(L.Fragment,null,L.createElement(Ft.Z,{htmlFor:"repoNameInput"},"Repository"),L.createElement(It.Z,{id:"repoNameInput",onChange:oe=>D(String(oe.target.value)),value:_})),L.createElement(Et.Z,null,"The name of the repository")))};function te(C){if(!C.host)return;const _=new URLSearchParams;return C.owner&&_.set("owner",C.owner),C.repoName&&_.set("repo",C.repoName),C.organization&&_.set("organization",C.organization),C.workspace&&_.set("workspace",C.workspace),C.project&&_.set("project",C.project),`${C.host}?${_.toString()}`}function ut(C){let _="",O="",D="",ue="",_e="",oe="";try{if(C){const Ce=new URL(`https://${C}`);_=Ce.host,O=Ce.searchParams.get("owner")||"",D=Ce.searchParams.get("repo")||"",ue=Ce.searchParams.get("organization")||"",_e=Ce.searchParams.get("workspace")||"",oe=Ce.searchParams.get("project")||""}}catch{}return{host:_,owner:O,repoName:D,organization:ue,workspace:_e,project:oe}}const K=C=>{var _,O;const{uiSchema:D,onChange:ue,rawErrors:_e,formData:oe,schema:Ce}=C,[Ne,We]=(0,L.useState)(ut(oe)),pt=(0,X.u)(o.q3),nn=(0,X.u)(o.Om),{setSecrets:tn}=(0,p.u)(),Ut=(0,L.useMemo)(()=>{var sn,Rn;return(Rn=(sn=D==null?void 0:D["ui:options"])==null?void 0:sn.allowedHosts)!=null?Rn:[]},[D]),gn=(0,L.useMemo)(()=>{var sn,Rn;return(Rn=(sn=D==null?void 0:D["ui:options"])==null?void 0:sn.allowedOrganizations)!=null?Rn:[]},[D]),pn=(0,L.useMemo)(()=>{var sn,Rn;return(Rn=(sn=D==null?void 0:D["ui:options"])==null?void 0:sn.allowedOwners)!=null?Rn:[]},[D]),hn=(0,L.useMemo)(()=>{var sn,Rn;return(Rn=(sn=D==null?void 0:D["ui:options"])==null?void 0:sn.allowedProjects)!=null?Rn:[]},[D]),En=(0,L.useMemo)(()=>{var sn,Rn;return(Rn=(sn=D==null?void 0:D["ui:options"])==null?void 0:sn.allowedRepos)!=null?Rn:[]},[D]),{owner:vn,organization:Yn,project:Vn,repoName:In}=Ne;(0,L.useEffect)(()=>{ue(te(Ne))},[Ne,ue]),(0,L.useEffect)(()=>{gn.length>0&&!Yn&&We(sn=>({...sn,organization:gn[0]}))},[We,gn,Yn]),(0,L.useEffect)(()=>{pn.length>0&&!vn&&We(sn=>({...sn,owner:pn[0]}))},[We,pn,vn]),(0,L.useEffect)(()=>{hn.length>0&&!Vn&&We(sn=>({...sn,project:hn[0]}))},[We,hn,Vn]),(0,L.useEffect)(()=>{En.length>0&&!In&&We(sn=>({...sn,repoName:En[0]}))},[We,En,In]);const xn=(0,L.useCallback)(sn=>{We(Rn=>({...Rn,...sn}))},[We]);(0,_t.Z)(async()=>{var sn;const{requestUserCredentials:Rn}=(sn=D==null?void 0:D["ui:options"])!=null?sn:{},or=Ne.owner?Ne.owner:Ne.project;if(!Rn||!(Ne.host&&or&&Ne.repoName))return;const[er,yr]=[Ne.host,Ne.repoName].map(encodeURIComponent),{token:Br}=await nn.getCredentials({url:`https://${er}/${or}/${yr}`,additionalScope:{repoWrite:!0,customScopes:Rn.additionalScopes}});tn({[Rn.secretsKey]:Br})},500,[Ne,D]);const zn=(O=Ne.host&&((_=pt.byHost(Ne.host))==null?void 0:_.type))!=null?O:null;return L.createElement(L.Fragment,null,Ce.title&&L.createElement(re.Z,{my:1},L.createElement(se.Z,{variant:"h5"},Ce.title),L.createElement(ve.Z,null)),Ce.description&&L.createElement(se.Z,{variant:"body1"},Ce.description),L.createElement(w,{host:Ne.host,hosts:Ut,onChange:sn=>We(Rn=>({...Rn,host:sn})),rawErrors:_e}),zn==="github"&&L.createElement(Rt,{allowedOwners:pn,onChange:xn,rawErrors:_e,state:Ne}),zn==="gitlab"&&L.createElement(en,{allowedOwners:pn,rawErrors:_e,state:Ne,onChange:xn}),zn==="bitbucket"&&L.createElement(Ae,{allowedOwners:pn,allowedProjects:hn,rawErrors:_e,state:Ne,onChange:xn}),zn==="azure"&&L.createElement(rn,{allowedOrganizations:gn,allowedOwners:pn,rawErrors:_e,state:Ne,onChange:xn}),zn==="gerrit"&&L.createElement(De,{rawErrors:_e,state:Ne,onChange:xn}),L.createElement(H,{repoName:Ne.repoName,allowedRepos:En,onChange:sn=>We(Rn=>({...Rn,repoName:sn})),rawErrors:_e}))},Ve=Fe(fe.z.string(),fe.z.object({allowedKinds:fe.z.array(fe.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:fe.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:fe.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:fe.z.union([fe.z.string(),fe.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:fe.z.array(dt).or(dt).optional().describe("List of key-value filter expression for entities")})).schema,lt=C=>{const{schema:{title:_="Entity",description:O="An entity from the catalog"},uiSchema:D,required:ue}=C,_e=(0,X.u)(X.v),{loading:oe,value:Ce}=(0,mt.default)(async()=>(await _e.getBackstageIdentity()).ownershipEntityRefs);if(oe)return L.createElement(St.ZP,{loading:oe,renderInput:We=>L.createElement(ne.Z,{...We,label:_,margin:"dense",helperText:O,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:ue,InputProps:We.InputProps}),options:[]});const Ne=Lt(D,Ce);return L.createElement(Be,{...C,uiSchema:Ne})};function Lt(C,_){const O=(C==null?void 0:C["ui:options"])||{},D=O.allowedKinds;return{"ui:options":{catalogFilter:{...O.catalogFilter,...D?{kind:D,[`relations.${Y.S4}`]:_||[]}:{[`relations.${Y.S4}`]:_||[]}}}}}const Gt=Fe(fe.z.array(fe.z.string()),fe.z.object({kinds:fe.z.array(fe.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:fe.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:fe.z.string().optional().describe("Helper text to display")})).schema,an=C=>{var _,O,D;const{formData:ue,onChange:_e,uiSchema:oe}=C,Ce=(0,X.u)(l.Ah),[Ne,We]=(0,L.useState)([]),[pt,nn]=(0,L.useState)(""),[tn,Ut]=(0,L.useState)(!1),gn=(0,Y.In)().isValidTag,pn=(_=oe["ui:options"])==null?void 0:_.kinds,hn=(O=oe["ui:options"])==null?void 0:O.showCounts,En=(D=oe["ui:options"])==null?void 0:D.helperText,{loading:vn,value:Yn}=(0,mt.default)(async()=>{const In="metadata.tags",xn={facets:[In]};pn&&(xn.filter={kind:pn});const{facets:zn}=await Ce.getEntityFacets(xn),sn=Object.fromEntries(zn[In].map(({value:Rn,count:or})=>[Rn,or]));return We(Object.keys(sn).sort((Rn,or)=>hn?sn[or]-sn[Rn]:Rn.localeCompare(or))),sn}),Vn=(In,xn)=>{let zn=!1,sn=!1;const Rn=ue||[];if(xn!=null&&xn.length&&Rn.length<xn.length){const or=xn[xn.length-1]=xn[xn.length-1].toLocaleLowerCase("en-US").trim();zn=!gn(or),sn=Rn.indexOf(or)!==-1}Ut(zn),nn(zn?pt:""),!zn&&!sn&&_e(xn||[])};return(0,kt.Z)(()=>_e(ue||[])),L.createElement(be.Z,{margin:"normal"},L.createElement(St.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:Vn,value:ue||[],inputValue:pt,loading:vn,options:Ne,ChipProps:{size:"small"},renderOption:In=>hn?`${In} (${Yn==null?void 0:Yn[In]})`:In,renderInput:In=>L.createElement(ne.Z,{...In,label:"Tags",onChange:xn=>nn(xn.target.value),error:tn,helperText:En!=null?En:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},fn=(0,Z.x8)({id:"register-component",optional:!0}),on=(0,Z.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),ln=(0,Z.NT)({id:"scaffolder"}),cn=(0,Z.Rz)({id:"scaffolder/legacy/selected-template",parent:ln,path:"/templates/:templateName"}),On=(0,Z.Rz)({id:"scaffolder/selected-template",parent:ln,path:"/templates/:namespace/:templateName"}),dn=(0,Z.Rz)({id:"scaffolder/task",parent:ln,path:"/tasks/:taskId"}),Pn=(0,Z.Rz)({id:"scaffolder/list-tasks",parent:ln,path:"/tasks"}),ce=(0,Z.Rz)({id:"scaffolder/actions",parent:ln,path:"/actions"}),ae=(0,Z.Rz)({id:"scaffolder/edit",parent:ln,path:"/edit"}),vt=Fe(fe.z.string(),fe.z.object({title:fe.z.string().default("Group").describe("Group"),description:fe.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,jt=C=>{const{schema:{title:_,description:O},required:D,rawErrors:ue,onChange:_e}=C,oe=(0,X.u)(X.v),Ce=(0,X.u)(l.Ah),Ne=(0,X.u)(X.s),[We,pt]=(0,L.useState)([]),[nn,tn]=(0,L.useState)(null);(0,mt.default)(async()=>{const{userEntityRef:gn}=await oe.getBackstageIdentity();if(!gn){Ne.post(new V.dR("No user entity ref found"));return}const{items:pn}=await Ce.getEntities({filter:{kind:"Group",["relations.hasMember"]:[gn]}}),hn=pn.filter(En=>Boolean(En)).map(En=>{var vn;return{label:(vn=En.metadata.title)!=null?vn:En.metadata.name,ref:(0,Y.eE)(En)}});pt(hn)});const Ut=(gn,pn)=>{var hn;tn(pn),_e((hn=pn==null?void 0:pn.ref)!=null?hn:"")};return L.createElement(be.Z,{margin:"normal",required:D,error:(ue==null?void 0:ue.length)>0},L.createElement(St.ZP,{id:"OwnershipEntityRefPicker-dropdown",options:We||[],value:nn,onChange:Ut,getOptionLabel:gn=>gn.label,renderInput:gn=>L.createElement(ne.Z,{...gn,label:_,margin:"dense",helperText:O,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:D})}))},Vt=(0,Z.rx)({id:"scaffolder",apis:[(0,Z.ni)({api:p.s,deps:{discoveryApi:X.q,scmIntegrationsApi:o.q3,fetchApi:X.t,identityApi:X.v},factory:({discoveryApi:C,scmIntegrationsApi:_,fetchApi:O,identityApi:D})=>new he({discoveryApi:C,scmIntegrationsApi:_,fetchApi:O,identityApi:D})})],routes:{root:ln,selectedTemplate:On,ongoingTask:dn,actions:ce,listTasks:Pn,edit:ae},externalRoutes:{registerComponent:fn,viewTechDoc:on}}),An=Vt.provide((0,m.eP)({component:Be,name:"EntityPicker",schema:Ie})),Nn=Vt.provide((0,m.eP)({component:qe,name:"EntityNamePicker",validation:$t,schema:$e})),Fn=Vt.provide((0,m.eP)({component:K,name:"RepoUrlPicker",validation:it,schema:nt})),sr=Vt.provide((0,m.eP)({component:de,name:"OwnerPicker",schema:G})),gr=Vt.provide((0,m.eP)({component:jt,name:"MyGroupsPicker",schema:vt})),Jn=Vt.provide((0,Z.P4)({name:"ScaffolderPage",component:()=>Promise.all([e.e(258),e.e(5278)]).then(e.bind(e,55278)).then(C=>C.Router),mountPoint:ln})),pr=Vt.provide((0,m.eP)({component:lt,name:"OwnedEntityPicker",schema:Ve})),Cr=Vt.provide((0,m.eP)({component:an,name:"EntityTagsPicker",schema:Gt})),xr=Vt.provide((0,Z.P4)({name:"LegacyScaffolderPage",component:()=>Promise.all([e.e(258),e.e(2840)]).then(e.bind(e,42840)).then(C=>C.LegacyRouter),mountPoint:ln})),vr=L.createElement(bt.Z,{fontSize:"small"}),Lr=L.createElement(Nt.Z,{fontSize:"small"}),Ar=()=>{const C=(0,X.u)(X.l),{error:_,loading:O,availableTypes:D,selectedTypes:ue,setSelectedTypes:_e}=(0,l.Uh)();return O?L.createElement(Ye.Ex,null):D?_?(C.post({message:"Failed to load entity types",severity:"error"}),null):L.createElement(re.Z,{pb:1,pt:1},L.createElement(se.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),L.createElement(St.ZP,{id:"categories-picker",multiple:!0,options:D,value:ue,onChange:(oe,Ce)=>_e(Ce),renderOption:(oe,{selected:Ce})=>L.createElement(u.Z,{control:L.createElement(F.Z,{icon:vr,checkedIcon:Lr,checked:Ce}),label:Yt()(oe)}),size:"small",popupIcon:L.createElement(Tt.Z,{"data-testid":"categories-picker-expand"}),renderInput:oe=>L.createElement(ne.Z,{...oe,variant:"outlined"})})):null},Mr=(0,R.Z)(()=>({button:{color:({fontColor:C})=>C}})),ie=C=>{const{cancelEnabled:_,logsVisible:O,buttonBarVisible:D,onStartOver:ue,onToggleLogs:_e,onToggleButtonBar:oe,taskId:Ce}=C,{getPageTheme:Ne}=(0,M.Z)(),We=Ne({themeId:"website"}),pt=Mr({fontColor:We.fontColor}),nn=(0,X.u)(p.s),[tn,Ut]=(0,L.useState)(),[{status:gn},{execute:pn}]=(0,Xt.r)(async()=>{Ce&&await nn.cancelTask(Ce)});return L.createElement(L.Fragment,null,L.createElement(g.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:hn=>{Ut(hn.currentTarget)},"data-testid":"menu-button",className:pt.button},L.createElement(Q.Z,null)),L.createElement(Ze.ZP,{open:Boolean(tn),onClose:()=>Ut(void 0),anchorEl:tn,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},L.createElement(we.Z,null,L.createElement(Qe.Z,{onClick:()=>_e==null?void 0:_e(!O)},L.createElement(le.Z,null,L.createElement(v.Z,{fontSize:"small"})),L.createElement(Le.Z,{primary:O?"Hide Logs":"Show Logs"})),L.createElement(Qe.Z,{onClick:()=>oe==null?void 0:oe(!D)},L.createElement(le.Z,null,L.createElement(k.Z,{fontSize:"small"})),L.createElement(Le.Z,{primary:D?"Hide Button Bar":"Show Button Bar"})),L.createElement(Qe.Z,{onClick:ue},L.createElement(le.Z,null,L.createElement(j.Z,{fontSize:"small"})),L.createElement(Le.Z,{primary:"Start Over"})),L.createElement(Qe.Z,{onClick:pn,disabled:!_||gn!=="not-executed","data-testid":"cancel-task"},L.createElement(le.Z,null,L.createElement(Re.Z,{fontSize:"small"})),L.createElement(Le.Z,{primary:"Cancel"})))))},He=(0,R.Z)(C=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:C.spacing(1)},logsVisibilityButton:{marginRight:C.spacing(1)}})),st=C=>{var _,O,D,ue,_e,oe,Ce,Ne;const{taskId:We}=(0,wt.UO)(),pt=(0,Z.tg)(On),nn=(0,wt.s0)(),tn=(0,X.u)(p.s),Ut=(0,m.WQ)(We),gn=He(),pn=(0,L.useMemo)(()=>{var er,yr;return(yr=(er=Ut.task)==null?void 0:er.spec.steps.map(Br=>{var _r;return{...Br,...(_r=Ut==null?void 0:Ut.steps)==null?void 0:_r[Br.id]}}))!=null?yr:[]},[Ut]),[hn,En]=(0,L.useState)(!1),[vn,Yn]=(0,L.useState)(!0);(0,L.useEffect)(()=>{Ut.error&&En(!0)},[Ut.error]),(0,L.useEffect)(()=>{Ut.completed&&!Ut.error&&Yn(!1)},[Ut.error,Ut.completed]);const Vn=(0,L.useMemo)(()=>{for(let er=pn.length-1;er>=0;er--)if(pn[er].status!=="open")return er;return 0},[pn]),In=(0,L.useCallback)(()=>{var er,yr,Br,_r,Jr,Fr;const{namespace:kr,name:Wr}=(_r=(Br=(yr=(er=Ut.task)==null?void 0:er.spec.templateInfo)==null?void 0:yr.entity)==null?void 0:Br.metadata)!=null?_r:{},Xr=(Fr=(Jr=Ut.task)==null?void 0:Jr.spec.parameters)!=null?Fr:{};!kr||!Wr||nn({pathname:pt({namespace:kr,templateName:Wr}),search:`?${W().stringify({formData:JSON.stringify(Xr)})}`})},[nn,(_=Ut.task)==null?void 0:_.spec.parameters,(ue=(D=(O=Ut.task)==null?void 0:O.spec.templateInfo)==null?void 0:D.entity)==null?void 0:ue.metadata,pt]),[{status:xn},{execute:zn}]=(0,Xt.r)(async()=>{We&&await tn.cancelTask(We)}),sn=(_e=C.TemplateOutputsComponent)!=null?_e:q.Iy,Rn=(Ne=(Ce=(oe=Ut.task)==null?void 0:oe.spec.templateInfo)==null?void 0:Ce.entity)==null?void 0:Ne.metadata.name,or=!(Ut.cancelled||Ut.completed);return L.createElement(Ye.T3,{themeId:"website"},L.createElement(Ye.h4,{pageTitleOverride:`Run of ${Rn}`,title:L.createElement("div",null,"Run of ",L.createElement("code",null,Rn)),subtitle:`Task ${We}`},L.createElement(ie,{cancelEnabled:or,logsVisible:hn,buttonBarVisible:vn,onStartOver:In,onToggleLogs:En,onToggleButtonBar:Yn,taskId:We})),L.createElement(Ye.VY,{className:gn.contentWrapper},Ut.error?L.createElement(re.Z,{paddingBottom:2},L.createElement(Ye.yu,{error:Ut.error,titleFormat:"markdown",title:Ut.error.message})):null,L.createElement(re.Z,{paddingBottom:2},L.createElement(q.Lp,{steps:pn,activeStep:Vn,isComplete:Ut.completed,isError:Boolean(Ut.error)})),L.createElement(sn,{output:Ut.output}),vn?L.createElement(re.Z,{paddingBottom:2},L.createElement(Se.Z,null,L.createElement(re.Z,{padding:2},L.createElement("div",{className:gn.buttonBar},L.createElement(Ke.Z,{className:gn.cancelButton,disabled:!or||xn!=="not-executed",onClick:zn,"data-testid":"cancel-button"},"Cancel"),L.createElement(Ke.Z,{className:gn.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>En(!hn)},hn?"Hide Logs":"Show Logs"),L.createElement(Ke.Z,{variant:"contained",color:"primary",disabled:or,onClick:In},"Start Over"))))):null,hn?L.createElement(re.Z,{paddingBottom:2,height:"100%"},L.createElement(Se.Z,{style:{height:"100%"}},L.createElement(re.Z,{padding:2,height:"100%"},L.createElement(q.v9,{logs:Ut.stepLogs})))):null))}},31734:function(Un,Ht){var e,o,p;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(m){"use strict";var Y=m.setTimeout,V=m.clearTimeout,I=m.XMLHttpRequest,W=m.XDomainRequest,tt=m.ActiveXObject,Xe=m.EventSource,r=m.document,je=m.Promise,ye=m.fetch,X=m.Response,Z=m.TextDecoder,l=m.TextEncoder,ne=m.AbortController;if(typeof window!="undefined"&&typeof r!="undefined"&&!("readyState"in r)&&r.body==null&&(r.readyState="loading",window.addEventListener("load",function(v){r.readyState="complete"},!1)),I==null&&tt!=null&&(I=function(){return new tt("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(v){function k(){}return k.prototype=v,new k}),Date.now||(Date.now=function(){return new Date().getTime()}),ne==null){var re=ye;ye=function(v,k){var Q=k.signal;return re(v,{headers:k.headers,credentials:k.credentials,cache:k.cache}).then(function(q){var Ge=q.body.getReader();return Q._reader=Ge,Q._aborted&&Q._reader.cancel(),{status:q.status,statusText:q.statusText,headers:q.headers,body:{getReader:function(){return Ge}}}})},ne=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function se(){this.bitsNeeded=0,this.codePoint=0}se.prototype.decode=function(v){function k(dt,qt,Ie){if(Ie===1)return dt>=128>>qt&&dt<<qt<=2047;if(Ie===2)return dt>=2048>>qt&&dt<<qt<=55295||dt>=57344>>qt&&dt<<qt<=65535;if(Ie===3)return dt>=65536>>qt&&dt<<qt<=1114111;throw new Error}function Q(dt,qt){if(dt===6*1)return qt>>6>15?3:qt>31?2:1;if(dt===6*2)return qt>15?3:2;if(dt===6*3)return 3;throw new Error}for(var q=65533,Ge="",U=this.bitsNeeded,x=this.codePoint,he=0;he<v.length;he+=1){var Fe=v[he];U!==0&&(Fe<128||Fe>191||!k(x<<6|Fe&63,U-6,Q(U,x)))&&(U=0,x=q,Ge+=String.fromCharCode(x)),U===0?(Fe>=0&&Fe<=127?(U=0,x=Fe):Fe>=192&&Fe<=223?(U=6*1,x=Fe&31):Fe>=224&&Fe<=239?(U=6*2,x=Fe&15):Fe>=240&&Fe<=247?(U=6*3,x=Fe&7):(U=0,x=q),U!==0&&!k(x,U,Q(U,x))&&(U=0,x=q)):(U-=6,x=x<<6|Fe&63),U===0&&(x<=65535?Ge+=String.fromCharCode(x):(Ge+=String.fromCharCode(55296+(x-65535-1>>10)),Ge+=String.fromCharCode(56320+(x-65535-1&1023))))}return this.bitsNeeded=U,this.codePoint=x,Ge};var ve=function(){try{return new Z().decode(new l().encode("test"),{stream:!0})==="test"}catch(v){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+v)}return!1};(Z==null||l==null||!ve())&&(Z=se);var be=function(){};function u(v){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=be,this.onload=be,this.onerror=be,this.onreadystatechange=be,this._contentType="",this._xhr=v,this._sendTimeout=0,this._abort=be}u.prototype.open=function(v,k){this._abort(!0);var Q=this,q=this._xhr,Ge=1,U=0;this._abort=function(Ie){Q._sendTimeout!==0&&(V(Q._sendTimeout),Q._sendTimeout=0),(Ge===1||Ge===2||Ge===3)&&(Ge=4,q.onload=be,q.onerror=be,q.onabort=be,q.onprogress=be,q.onreadystatechange=be,q.abort(),U!==0&&(V(U),U=0),Ie||(Q.readyState=4,Q.onabort(null),Q.onreadystatechange())),Ge=0};var x=function(){if(Ge===1){var Ie=0,Be="",ct=void 0;if("contentType"in q)Ie=200,Be="OK",ct=q.contentType;else try{Ie=q.status,Be=q.statusText,ct=q.getResponseHeader("Content-Type")}catch{Ie=0,Be="",ct=void 0}Ie!==0&&(Ge=2,Q.readyState=2,Q.status=Ie,Q.statusText=Be,Q._contentType=ct,Q.onreadystatechange())}},he=function(){if(x(),Ge===2||Ge===3){Ge=3;var Ie="";try{Ie=q.responseText}catch{}Q.readyState=3,Q.responseText=Ie,Q.onprogress()}},Fe=function(Ie,Be){if((Be==null||Be.preventDefault==null)&&(Be={preventDefault:be}),he(),Ge===1||Ge===2||Ge===3){if(Ge=4,U!==0&&(V(U),U=0),Q.readyState=4,Ie==="load")Q.onload(Be);else if(Ie==="error")Q.onerror(Be);else if(Ie==="abort")Q.onabort(Be);else throw new TypeError;Q.onreadystatechange()}},dt=function(Ie){q!=null&&(q.readyState===4?(!("onload"in q)||!("onerror"in q)||!("onabort"in q))&&Fe(q.responseText===""?"error":"load",Ie):q.readyState===3?"onprogress"in q||he():q.readyState===2&&x())},qt=function(){U=Y(function(){qt()},500),q.readyState===3&&he()};"onload"in q&&(q.onload=function(Ie){Fe("load",Ie)}),"onerror"in q&&(q.onerror=function(Ie){Fe("error",Ie)}),"onabort"in q&&(q.onabort=function(Ie){Fe("abort",Ie)}),"onprogress"in q&&(q.onprogress=he),"onreadystatechange"in q&&(q.onreadystatechange=function(Ie){dt(Ie)}),("contentType"in q||!("ontimeout"in I.prototype))&&(k+=(k.indexOf("?")===-1?"?":"&")+"padding=true"),q.open(v,k,!0),"readyState"in q&&(U=Y(function(){qt()},0))},u.prototype.abort=function(){this._abort(!1)},u.prototype.getResponseHeader=function(v){return this._contentType},u.prototype.setRequestHeader=function(v,k){var Q=this._xhr;"setRequestHeader"in Q&&Q.setRequestHeader(v,k)},u.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},u.prototype.send=function(){if((!("ontimeout"in I.prototype)||!("sendAsBinary"in I.prototype)&&!("mozAnon"in I.prototype))&&r!=null&&r.readyState!=null&&r.readyState!=="complete"){var v=this;v._sendTimeout=Y(function(){v._sendTimeout=0,v.send()},4);return}var k=this._xhr;"withCredentials"in k&&(k.withCredentials=this.withCredentials);try{k.send(void 0)}catch(Q){throw Q}};function F(v){return v.replace(/[A-Z]/g,function(k){return String.fromCharCode(k.charCodeAt(0)+32)})}function R(v){for(var k=Object.create(null),Q=v.split(`\r
`),q=0;q<Q.length;q+=1){var Ge=Q[q],U=Ge.split(": "),x=U.shift(),he=U.join(": ");k[F(x)]=he}this._map=k}R.prototype.get=function(v){return this._map[F(v)]},I!=null&&I.HEADERS_RECEIVED==null&&(I.HEADERS_RECEIVED=2);function M(){}M.prototype.open=function(v,k,Q,q,Ge,U,x){v.open("GET",Ge);var he=0;v.onprogress=function(){var dt=v.responseText,qt=dt.slice(he);he+=qt.length,Q(qt)},v.onerror=function(dt){dt.preventDefault(),q(new Error("NetworkError"))},v.onload=function(){q(null)},v.onabort=function(){q(null)},v.onreadystatechange=function(){if(v.readyState===I.HEADERS_RECEIVED){var dt=v.status,qt=v.statusText,Ie=v.getResponseHeader("Content-Type"),Be=v.getAllResponseHeaders();k(dt,qt,Ie,new R(Be))}},v.withCredentials=U;for(var Fe in x)Object.prototype.hasOwnProperty.call(x,Fe)&&v.setRequestHeader(Fe,x[Fe]);return v.send(),v};function g(v){this._headers=v}g.prototype.get=function(v){return this._headers.get(v)};function Ze(){}Ze.prototype.open=function(v,k,Q,q,Ge,U,x){var he=null,Fe=new ne,dt=Fe.signal,qt=new Z;return ye(Ge,{headers:x,credentials:U?"include":"same-origin",signal:dt,cache:"no-store"}).then(function(Ie){return he=Ie.body.getReader(),k(Ie.status,Ie.statusText,Ie.headers.get("Content-Type"),new g(Ie.headers)),new je(function(Be,ct){var Ot=function(){he.read().then(function(Ct){if(Ct.done)Be(void 0);else{var $t=qt.decode(Ct.value,{stream:!0});Q($t),Ot()}}).catch(function(Ct){ct(Ct)})};Ot()})}).catch(function(Ie){if(Ie.name!=="AbortError")return Ie}).then(function(Ie){q(Ie)}),{abort:function(){he!=null&&he.cancel(),Fe.abort()}}};function we(){this._listeners=Object.create(null)}function Qe(v){Y(function(){throw v},0)}we.prototype.dispatchEvent=function(v){v.target=this;var k=this._listeners[v.type];if(k!=null)for(var Q=k.length,q=0;q<Q;q+=1){var Ge=k[q];try{typeof Ge.handleEvent=="function"?Ge.handleEvent(v):Ge.call(this,v)}catch(U){Qe(U)}}},we.prototype.addEventListener=function(v,k){v=String(v);var Q=this._listeners,q=Q[v];q==null&&(q=[],Q[v]=q);for(var Ge=!1,U=0;U<q.length;U+=1)q[U]===k&&(Ge=!0);Ge||q.push(k)},we.prototype.removeEventListener=function(v,k){v=String(v);var Q=this._listeners,q=Q[v];if(q!=null){for(var Ge=[],U=0;U<q.length;U+=1)q[U]!==k&&Ge.push(q[U]);Ge.length===0?delete Q[v]:Q[v]=Ge}};function le(v){this.type=v,this.target=void 0}function Le(v,k){le.call(this,v),this.data=k.data,this.lastEventId=k.lastEventId}Le.prototype=Object.create(le.prototype);function Se(v,k){le.call(this,v),this.status=k.status,this.statusText=k.statusText,this.headers=k.headers}Se.prototype=Object.create(le.prototype);function Ke(v,k){le.call(this,v),this.error=k.error}Ke.prototype=Object.create(le.prototype);var St=-1,L=0,mt=1,fe=2,Kt=-1,Et=0,It=1,Ft=2,Ye=3,_t=/^text\/event\-stream(;.*)?$/i,kt=1e3,Qt=18e6,Yt=function(v,k){var Q=v==null?k:parseInt(v,10);return Q!==Q&&(Q=k),Nt(Q)},Nt=function(v){return Math.min(Math.max(v,kt),Qt)},bt=function(v,k,Q){try{typeof k=="function"&&k.call(v,Q)}catch(q){Qe(q)}};function Tt(v,k){we.call(this),k=k||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Re(this,v,k)}function wt(){return I!=null&&"withCredentials"in I.prototype||W==null?new I:new W}var Xt=ye!=null&&X!=null&&"body"in X.prototype;function Re(v,k,Q){k=String(k);var q=Boolean(Q.withCredentials),Ge=Q.lastEventIdQueryParameterName||"lastEventId",U=Nt(1e3),x=Yt(Q.heartbeatTimeout,45e3),he="",Fe=U,dt=!1,qt=0,Ie=Q.headers||{},Be=Q.Transport,ct=Xt&&Be==null?void 0:new u(Be!=null?new Be:wt()),Ot=Be!=null&&typeof Be!="string"?new Be:ct==null?new Ze:new M,Ct=void 0,$t=0,Pt=St,$e="",qe="",Ee="",G="",de=Et,Ue=0,nt=0,it=function(De,w,H,te){if(Pt===L)if(De===200&&H!=null&&_t.test(H)){Pt=mt,dt=Date.now(),Fe=U,v.readyState=mt;var ut=new Se("open",{status:De,statusText:w,headers:te});v.dispatchEvent(ut),bt(v,v.onopen,ut)}else{var K="";De!==200?(w&&(w=w.replace(/\s+/g," ")),K="EventSource's response has a status "+De+" "+w+" that is not 200. Aborting the connection."):K="EventSource's response has a Content-Type specifying an unsupported type: "+(H==null?"-":H.replace(/\s+/g," "))+". Aborting the connection.",rn();var ut=new Se("error",{status:De,statusText:w,headers:te});v.dispatchEvent(ut),bt(v,v.onerror,ut),console.error(K)}},Rt=function(De){if(Pt===mt){for(var w=-1,H=0;H<De.length;H+=1){var te=De.charCodeAt(H);(te===`
`.charCodeAt(0)||te==="\r".charCodeAt(0))&&(w=H)}var ut=(w!==-1?G:"")+De.slice(0,w+1);G=(w===-1?G:"")+De.slice(w+1),De!==""&&(dt=Date.now(),qt+=De.length);for(var K=0;K<ut.length;K+=1){var te=ut.charCodeAt(K);if(de===Kt&&te===`
`.charCodeAt(0))de=Et;else if(de===Kt&&(de=Et),te==="\r".charCodeAt(0)||te===`
`.charCodeAt(0)){if(de!==Et){de===It&&(nt=K+1);var ee=ut.slice(Ue,nt-1),Ve=ut.slice(nt+(nt<K&&ut.charCodeAt(nt)===" ".charCodeAt(0)?1:0),K);ee==="data"?($e+=`
`,$e+=Ve):ee==="id"?qe=Ve:ee==="event"?Ee=Ve:ee==="retry"?(U=Yt(Ve,U),Fe=U):ee==="heartbeatTimeout"&&(x=Yt(Ve,x),$t!==0&&(V($t),$t=Y(function(){Ae()},x)))}if(de===Et){if($e!==""){he=qe,Ee===""&&(Ee="message");var lt=new Le(Ee,{data:$e.slice(1),lastEventId:qe});if(v.dispatchEvent(lt),Ee==="open"?bt(v,v.onopen,lt):Ee==="message"?bt(v,v.onmessage,lt):Ee==="error"&&bt(v,v.onerror,lt),Pt===fe)return}$e="",Ee=""}de=te==="\r".charCodeAt(0)?Kt:Et}else de===Et&&(Ue=K,de=It),de===It?te===":".charCodeAt(0)&&(nt=K+1,de=Ft):de===Ft&&(de=Ye)}}},en=function(De){if(Pt===mt||Pt===L){Pt=St,$t!==0&&(V($t),$t=0),$t=Y(function(){Ae()},Fe),Fe=Nt(Math.min(U*16,Fe*2)),v.readyState=L;var w=new Ke("error",{error:De});v.dispatchEvent(w),bt(v,v.onerror,w),De!=null&&console.error(De)}},rn=function(){Pt=fe,Ct!=null&&(Ct.abort(),Ct=void 0),$t!==0&&(V($t),$t=0),v.readyState=fe},Ae=function(){if($t=0,Pt!==St){if(!dt&&Ct!=null)en(new Error("No activity within "+x+" milliseconds. "+(Pt===L?"No response received.":qt+" chars received.")+" Reconnecting.")),Ct!=null&&(Ct.abort(),Ct=void 0);else{var De=Math.max((dt||Date.now())+x-Date.now(),1);dt=!1,$t=Y(function(){Ae()},De)}return}dt=!1,qt=0,$t=Y(function(){Ae()},x),Pt=L,$e="",Ee="",qe=he,G="",Ue=0,nt=0,de=Et;var w=k;if(k.slice(0,5)!=="data:"&&k.slice(0,5)!=="blob:"&&he!==""){var H=k.indexOf("?");w=H===-1?k:k.slice(0,H+1)+k.slice(H+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(Ve,lt){return lt===Ge?"":Ve}),w+=(k.indexOf("?")===-1?"?":"&")+Ge+"="+encodeURIComponent(he)}var te=v.withCredentials,ut={};ut.Accept="text/event-stream";var K=v.headers;if(K!=null)for(var ee in K)Object.prototype.hasOwnProperty.call(K,ee)&&(ut[ee]=K[ee]);try{Ct=Ot.open(ct,it,Rt,en,w,te,ut)}catch(Ve){throw rn(),Ve}};v.url=k,v.readyState=L,v.withCredentials=q,v.headers=Ie,v._close=rn,Ae()}Tt.prototype=Object.create(we.prototype),Tt.prototype.CONNECTING=L,Tt.prototype.OPEN=mt,Tt.prototype.CLOSED=fe,Tt.prototype.close=function(){this._close()},Tt.CONNECTING=L,Tt.OPEN=mt,Tt.CLOSED=fe,Tt.prototype.withCredentials=void 0;var j=Xe;I!=null&&(Xe==null||!("withCredentials"in Xe.prototype))&&(j=Tt),function(v){if(typeof Un.exports=="object"){var k=v(Ht);k!==void 0&&(Un.exports=k)}else o=[Ht],e=v,p=typeof e=="function"?e.apply(Ht,o):e,p!==void 0&&(Un.exports=p)}(function(v){v.EventSourcePolyfill=Tt,v.NativeEventSource=Xe,v.EventSource=j})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},42054:(Un,Ht,e)=>{"use strict";e.d(Ht,{S:()=>be,b:()=>ye,c:()=>se});var o=e(2784),p=e(30705),m=e(79692),Y=e(86136),V=e(49378),I=e(95544),W=e(38402),tt=e(11776),Xe=e(90436),r=e(49558);const je=(0,m.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),ye=u=>{const{text:F,preTag:R,postTag:M}=u,g=je(),Ze=(0,o.useMemo)(()=>F.split(new RegExp(`(${R}.+?${M})`)),[M,R,F]);return o.createElement(o.Fragment,null,Ze.map((we,Qe)=>we.includes(R)?o.createElement("mark",{className:g.highlight,key:Qe},we.replace(new RegExp(`${R}|${M}`,"g"),"")):we))},X=({result:u,highlight:F,icon:R,secondaryAction:M,lineClamp:g=5})=>u?o.createElement(o.Fragment,null,R&&o.createElement(Y.Z,null,R),o.createElement(V.Z,{primaryTypographyProps:{variant:"h6"},primary:o.createElement(r.rU,{noTrack:!0,to:u.location},F!=null&&F.fields.title?o.createElement(ye,{text:(F==null?void 0:F.fields.title)||"",preTag:(F==null?void 0:F.preTag)||"",postTag:(F==null?void 0:F.postTag)||""}):u.title),secondary:o.createElement(Xe.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:g,overflow:"hidden"},color:"textSecondary",variant:"body2"},F!=null&&F.fields.text?o.createElement(ye,{text:F.fields.text,preTag:F.preTag,postTag:F.postTag}):u.text)}),M&&o.createElement(I.Z,{alignItems:"flex-end"},M)):null,Z=u=>o.createElement(p.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},o.createElement(X,{...u})),l="search.results.list.items.extensions.v1",ne=(u,F)=>{for(const R of u){if(!(0,o.isValidElement)(R))continue;const M=(0,p.IY)(R,l);if(M!=null&&M(F))return(0,o.cloneElement)(R,{rank:F.rank,highlight:F.highlight,result:F.document,...R.props})}return null},re=u=>{const{rank:F,result:R,noTrack:M,children:g,alignItems:Ze="flex-start",...we}=u,Qe=(0,p.z$)(),le=(0,o.useCallback)(()=>{M||R&&Qe.captureEvent("discover",R.title,{attributes:{to:R.location},value:F})},[F,R,M,Qe]);return o.createElement(W.Z,{divider:!0,alignItems:Ze,onClickCapture:le,...we},g)},se=u=>{const{name:F,component:R,predicate:M=()=>!0}=u;return(0,p.YO)({name:F,component:{lazy:()=>R().then(g=>Ze=>o.createElement(re,{rank:Ze.rank,result:Ze.result,noTrack:Ze.noTrack},(0,o.createElement)(g,Ze)))},data:{[l]:M}})},ve=u=>{const F=(0,p.vJ)(u,R=>R.selectByComponentData({key:l}).getElements(),[u]);return(0,o.useCallback)((R,M)=>{const g=ne(F,R);return o.createElement(o.Fragment,{key:M},g!=null?g:o.createElement(re,{rank:R.rank,result:R.document},o.createElement(Z,{rank:R.rank,highlight:R.highlight,result:R.document})))},[F])},be=u=>{const{results:F,children:R,...M}=u,g=ve(R);return o.createElement(tt.Z,{...M},F.map(g))}},92573:(Un,Ht,e)=>{"use strict";e.d(Ht,{E1:()=>bt,GQ:()=>rn,Nd:()=>Qt,Rx:()=>It,US:()=>Nt,ay:()=>x,gK:()=>fe,lt:()=>Ct,qO:()=>Re,wy:()=>qt});var o=e(30204),p=e(30705),m=e(42054),Y=e(50581),V=e(61837),I=e(86619),W=e(79692),tt=e(4614),Xe=e(7089),r=e(42494),je=e(84899),ye=e(5806),X=e(21324),Z=e(56939),l=e(73698),ne=e(12231),re=e(90436),se=e(28899),ve=e(77277),be=e(21853),u=e(2784),F=e(48760),R=e(76635),M=e.n(R),g=e(64279),Ze=e(1849),we=e(18473),Qe=e(88013),le=e(69294),Le=e(49558),Se=e(19126),Ke=e.n(Se),St=e(27742),L=e(35352),mt=e(48834).Buffer;const fe=(0,o.c)({id:"plugin.search.queryservice"});class Kt{constructor(De){this.mockedResults=De}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const Et=(0,we.CT)("search-context"),It=()=>{const Ae=(0,u.useContext)(Et);if(!Ae)throw new Error("useSearch must be used within a SearchContextProvider");const De=Ae.atVersion(1);if(!De)throw new Error("No SearchContext v1 found");return De},Ft=()=>(0,u.useContext)(Et)!==void 0,Ye={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},_t=(Ae=Ye)=>{var De,w,H,te;const ut=(0,o.u)(fe),K=(0,p.z$)(),[ee,Ve]=(0,u.useState)(Ae.term),[lt,Lt]=(0,u.useState)(Ae.types),[zt,Gt]=(0,u.useState)(Ae.filters),[an,fn]=(0,u.useState)(Ae.pageLimit),[on,ln]=(0,u.useState)(Ae.pageCursor),cn=(0,Ze.Z)(ee),On=(0,Ze.Z)(zt),dn=(0,g.default)(async()=>{const jt=await ut.query({term:ee,types:lt,filters:zt,pageLimit:an,pageCursor:on});return ee&&jt.numberOfResults!==void 0&&K.captureEvent("search",ee,{value:jt.numberOfResults}),jt},[ee,lt,zt,an,on]),Pn=!dn.loading&&!dn.error&&((De=dn.value)==null?void 0:De.nextPageCursor),ce=!dn.loading&&!dn.error&&((w=dn.value)==null?void 0:w.previousPageCursor),ae=(0,u.useCallback)(()=>{var jt;ln((jt=dn.value)==null?void 0:jt.nextPageCursor)},[(H=dn.value)==null?void 0:H.nextPageCursor]),ke=(0,u.useCallback)(()=>{var jt;ln((jt=dn.value)==null?void 0:jt.previousPageCursor)},[(te=dn.value)==null?void 0:te.previousPageCursor]);return(0,u.useEffect)(()=>{cn!==void 0&&ee!==cn&&ln(void 0)},[ee,cn,ln]),(0,u.useEffect)(()=>{On!==void 0&&!(0,R.isEqual)(zt,On)&&ln(void 0)},[zt,On,ln]),{result:dn,term:ee,setTerm:Ve,types:lt,setTypes:Lt,filters:zt,setFilters:Gt,pageLimit:an,setPageLimit:fn,pageCursor:on,setPageCursor:ln,fetchNextPage:Pn?ae:void 0,fetchPreviousPage:ce?ke:void 0}},kt=Ae=>{const{initialState:De,children:w}=Ae,H=_t(De);return u.createElement(p.fC,{attributes:{searchTypes:H.types.sort().join(",")}},u.createElement(Et.Provider,{value:(0,we.EI)({1:H})},w))},Qt=Ae=>{const{initialState:De,inheritParentContextIfAvailable:w,children:H}=Ae,te=Ft(),ut=(0,o.u)(o.p),K=De!=null?De:{},ee=ut.has("search.query.pageLimit")?{pageLimit:ut.getNumber("search.query.pageLimit")}:{},Ve={...Ye,...K,...ee};return te&&w?u.createElement(u.Fragment,null,H):u.createElement(kt,{initialState:Ve},H)};function Yt(Ae){return(0,u.forwardRef)((De,w)=>u.createElement(Qt,{inheritParentContextIfAvailable:!0},u.createElement(Ae,{...De,ref:w})))}const Nt=Yt((0,u.forwardRef)((Ae,De)=>{const{onChange:w,onKeyDown:H=()=>{},onClear:te=()=>{},onSubmit:ut=()=>{},debounceTime:K=200,clearButton:ee=!0,fullWidth:Ve=!0,value:lt,label:Lt,placeholder:zt,inputProps:Gt={},InputProps:an={},endAdornment:fn,...on}=Ae,ln=(0,o.u)(o.p),[cn,On]=(0,u.useState)(""),dn=(0,u.useRef)("");(0,u.useEffect)(()=>{On(An=>An===dn.current?String(lt):An)},[lt,dn]),(0,F.Z)(()=>{dn.current=cn,w(cn)},K,[cn]);const Pn=(0,u.useCallback)(An=>{On(An.target.value)},[On]),ce=(0,u.useCallback)(An=>{H&&H(An),ut&&An.key==="Enter"&&ut()},[H,ut]),ae=(0,u.useCallback)(()=>{dn.current="",w(""),On(""),te&&te()},[w,te]),ke=Lt?void 0:"Search",vt=zt!=null?zt:`Search in ${ln.getOptionalString("app.title")||"Backstage"}`,jt=u.createElement(Y.Z,{position:"start"},u.createElement(V.Z,{"aria-label":"Query",size:"small",disabled:!0},u.createElement(be.Z,null))),Vt=u.createElement(Y.Z,{position:"end"},u.createElement(ve.Z,{"aria-label":"Clear",size:"small",onClick:ae,onKeyDown:An=>{An.key==="Enter"&&An.stopPropagation()}},"Clear"));return u.createElement(I.Z,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:De,value:cn,label:Lt,placeholder:vt,InputProps:{startAdornment:jt,endAdornment:ee?Vt:fn,...an},inputProps:{"aria-label":ke,...Gt},fullWidth:Ve,onChange:Pn,onKeyDown:ce,...on})})),bt=Yt((0,u.forwardRef)((Ae,De)=>{const{value:w="",onChange:H,...te}=Ae,{term:ut,setTerm:K}=It();(0,u.useEffect)(()=>{w&&K(String(w))},[w,K]);const ee=(0,u.useCallback)(Ve=>{H?H(Ve):K(Ve)},[H,K]);return u.createElement(p.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},u.createElement(Nt,{...te,ref:De,value:ut,onChange:ee}))})),Tt=(0,W.Z)(Ae=>({loading:{right:Ae.spacing(1),position:"absolute"}})),wt=Ae=>De=>u.createElement(Qt,{inheritParentContextIfAvailable:!0},u.createElement(Ae,{...De})),Xt=()=>{const Ae=Tt();return u.createElement(tt.Z,{className:Ae.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},Re=wt(function(De){const{loading:w,value:H,onChange:te=()=>{},options:ut=[],getOptionLabel:K=dn=>String(dn),inputPlaceholder:ee,inputDebounceTime:Ve,freeSolo:lt=!0,fullWidth:Lt=!0,clearOnBlur:zt=!1,"data-testid":Gt="search-autocomplete",...an}=De,{setTerm:fn}=It(),on=(0,u.useCallback)(dn=>dn?typeof dn=="string"?dn:K(dn):"",[K]),ln=(0,u.useMemo)(()=>on(H),[H,on]),cn=(0,u.useCallback)((dn,Pn,ce,ae)=>{fn(on(Pn)),te(dn,Pn,ce,ae)},[on,fn,te]),On=(0,u.useCallback)(({InputProps:{ref:dn,className:Pn,endAdornment:ce},InputLabelProps:ae,...ke})=>u.createElement(bt,{...ke,ref:dn,clearButton:!1,value:ln,placeholder:ee,debounceTime:Ve,endAdornment:w?u.createElement(Xt,null):ce,InputProps:{className:Pn}}),[w,ln,ee,Ve]);return u.createElement(Qe.ZP,{...an,"data-testid":Gt,value:H,onChange:cn,options:ut,getOptionLabel:K,renderInput:On,freeSolo:lt,fullWidth:Lt,clearOnBlur:zt})}),j=Ae=>{const{icon:De,primaryText:w,primaryTextTypographyProps:H,secondaryText:te,secondaryTextTypographyProps:ut,disableTextTypography:K}=Ae;return React.createElement(React.Fragment,null,De?React.createElement(ListItemIcon,null,De):null,React.createElement(ListItemText,{primary:w,primaryTypographyProps:H,secondary:te,secondaryTypographyProps:ut,disableTypography:K}))},v=(Ae,De,w=[],H=250)=>{const te=(0,u.useRef)({}),ut=Ae||(()=>Promise.resolve([])),[K,ee]=(0,le.default)(ut,[De],{loading:!0});if((0,F.Z)(()=>{te.current[De]===void 0&&(te.current[De]=ee(De).then(lt=>(te.current[De]=lt,lt)))},H,[ee,De]),w.length)return{loading:!1,value:w};const Ve=te.current[De];return Array.isArray(Ve)?{loading:!1,value:Ve}:K},k=(Ae,De)=>{const{setFilters:w}=It();(0,u.useEffect)(()=>{De&&[De].flat().length>0&&w(H=>({...H,[Ae]:De}))},[])},Q=Ae=>{const{className:De,defaultValue:w,name:H,values:te,valuesDebounceMs:ut,label:K,filterSelectedOptions:ee,limitTags:Ve,multiple:lt}=Ae,[Lt,zt]=(0,u.useState)("");k(H,w);const Gt=typeof te=="function"?te:void 0,an=typeof te=="function"?void 0:te,{value:fn,loading:on}=v(Gt,Lt,an,ut),{filters:ln,setFilters:cn}=It(),On=ln[H]||(lt?[]:null),dn=(ae,ke)=>{cn(vt=>{const{[H]:jt,...Vt}=vt;return ke?{...Vt,[H]:ke}:{...Vt}})},Pn=ae=>u.createElement(I.Z,{...ae,name:"search",variant:"outlined",label:K,fullWidth:!0}),ce=(ae,ke)=>ae.map((vt,jt)=>u.createElement(Xe.Z,{label:vt,color:"primary",...ke({index:jt})}));return u.createElement(Qe.ZP,{filterSelectedOptions:ee,limitTags:Ve,multiple:lt,className:De,id:`${lt?"multi-":""}select-filter-${H}--select`,options:fn||[],loading:on,value:On,onChange:dn,onInputChange:(ae,ke)=>zt(ke),renderInput:Pn,renderTags:ce})},q=(0,W.Z)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),Ge=Ae=>{const{className:De,defaultValue:w,label:H,name:te,values:ut=[],valuesDebounceMs:K}=Ae,ee=q(),{filters:Ve,setFilters:lt}=It();k(te,w);const Lt=typeof ut=="function"?ut:void 0,zt=typeof ut=="function"?void 0:ut,{value:Gt=[],loading:an}=v(Lt,"",zt,K),fn=on=>{const{target:{value:ln,checked:cn}}=on;lt(On=>{const{[te]:dn,...Pn}=On,ce=(dn||[]).filter(ke=>ke!==ln),ae=cn?[...ce,ln]:ce;return ae.length?{...Pn,[te]:ae}:Pn})};return u.createElement(r.Z,{className:De,disabled:an,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},H?u.createElement(je.Z,{className:ee.label},H):null,Gt.map(on=>{var ln;return u.createElement(ye.Z,{key:on,classes:{root:ee.checkboxWrapper,label:ee.textWrapper},label:on,control:u.createElement(X.Z,{color:"primary",inputProps:{"aria-labelledby":on},value:on,name:on,onChange:fn,checked:((ln=Ve[te])!=null?ln:[]).includes(on)})})}))},U=Ae=>{const{className:De,defaultValue:w,label:H,name:te,values:ut,valuesDebounceMs:K}=Ae,ee=q();k(te,w);const Ve=typeof ut=="function"?ut:void 0,lt=typeof ut=="function"?void 0:ut,{value:Lt=[],loading:zt}=v(Ve,"",lt,K),{filters:Gt,setFilters:an}=It(),fn=on=>{const{target:{value:ln}}=on;an(cn=>{const{[te]:On,...dn}=cn;return ln?{...dn,[te]:ln}:dn})};return u.createElement(r.Z,{disabled:zt,className:De,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},H?u.createElement(Z.Z,{className:ee.label,margin:"dense"},H):null,u.createElement(l.Z,{variant:"outlined",value:Gt[te]||"",onChange:fn},u.createElement(ne.Z,{value:""},u.createElement("em",null,"All")),Lt.map(on=>u.createElement(ne.Z,{key:on,value:on},u.createElement(re.Z,{variant:"inherit",noWrap:!0},on)))))},x=Ae=>{const{component:De,...w}=Ae;return u.createElement(De,{...w})};x.Checkbox=Ae=>u.createElement(x,{...Ae,component:Ge}),x.Select=Ae=>u.createElement(x,{...Ae,component:U}),x.Autocomplete=Ae=>u.createElement(x,{...Ae,component:Q});const he=Ae=>mt.from(Ae.toString(),"utf-8").toString("base64"),Fe=Ae=>Ae?Number(mt.from(Ae,"base64").toString("utf-8")):0,dt=Ae=>{const{total:De=-1,cursor:w,hasNextPage:H,onCursorChange:te,limit:ut=25,limitLabel:K="Results per page:",limitText:ee=({from:fn,to:on})=>De>0?`of ${De}`:`${fn}-${on}`,limitOptions:Ve,onLimitChange:lt,...Lt}=Ae,zt=(0,u.useMemo)(()=>Fe(w),[w]),Gt=(0,u.useCallback)((fn,on)=>{te==null||te(he(on))},[te]),an=(0,u.useCallback)(fn=>{const on=fn.target.value;lt==null||lt(parseInt(on,10))},[lt]);return u.createElement(se.Z,{...Lt,component:"div",count:De,page:zt,nextIconButtonProps:{...H!==void 0&&{disabled:!H}},onPageChange:Gt,rowsPerPage:ut,labelRowsPerPage:K,labelDisplayedRows:ee,rowsPerPageOptions:Ve,onRowsPerPageChange:an})},qt=Ae=>{const{pageLimit:De,setPageLimit:w,pageCursor:H,setPageCursor:te,fetchNextPage:ut}=It(),K=(0,u.useCallback)(ee=>{w(ee),te(void 0)},[w,te]);return u.createElement(dt,{...Ae,hasNextPage:!!ut,limit:De,onLimitChange:K,cursor:H,onCursorChange:te})},Ie=Ae=>{const{children:De}=Ae,w=It(),{result:H,...te}=w;return De(H,te)},Be=Ae=>{const{query:De,children:w}=Ae,H=(0,o.u)(fe),te=(0,g.default)(()=>{const{term:ut="",types:K=[],filters:ee={},...Ve}=De;return H.query({...Ve,term:ut,types:K,filters:ee})},[De]);return w(te,De)},ct=Ae=>{const{query:De,children:w}=Ae;return De?u.createElement(Be,{query:De},w):u.createElement(Ie,null,w)},Ot=Ae=>{const{query:De,children:w,noResultsComponent:H=u.createElement(Le.ub,{missing:"data",title:"Sorry, no results were found"}),...te}=Ae;return u.createElement(ct,{query:De},({loading:ut,error:K,value:ee})=>ut?u.createElement(Le.Ex,null):K?u.createElement(Le.Gk,{title:"Error encountered while fetching search results",error:K}):ee!=null&&ee.results.length?(0,R.isFunction)(w)?w(ee):u.createElement(m.S,{...te,results:ee.results},w):H)},Ct=Ae=>u.createElement(p.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},u.createElement(Ot,{...Ae})),$t=Ae=>{const{error:De,loading:w,resultItems:H,renderResultItem:te=Ve=>React.createElement(HigherOrderDefaultResultListItem,{key:Ve.document.location,result:Ve.document}),disableRenderingWithNoResults:ut,noResultsComponent:K=ut?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...ee}=Ae;return w?React.createElement(Progress,null):De?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:De}):H!=null&&H.length?React.createElement(List,{...ee},H.map(te)):React.createElement(React.Fragment,null,K)},Pt=Ae=>{const{query:De,renderResultItem:w,children:H,...te}=Ae,ut=useSearchResultListItemExtensions(H);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(ct,{query:De},({loading:K,error:ee,value:Ve})=>React.createElement($t,{...te,error:ee,loading:K,resultItems:Ve==null?void 0:Ve.results,renderResultItem:w!=null?w:ut})))},$e=(0,W.Z)(Ae=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:Ae.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:Ae.palette.text.secondary,margin:Ae.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:Ae.palette.text.secondary,margin:Ae.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:Ae.spacing(.5)}})),qe=Ae=>{const De=$e(),{label:w,children:H,...te}=Ae;return React.createElement(Chip,{...te,className:De.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,w,": ",H)})},Ee=()=>null,G=(0,W.Z)(Ae=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:Ae.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:Ae.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),de=Ae=>{const De=G(),{label:w,value:H="None",onChange:te,onDelete:ut}=Ae,K=useCallback(ee=>{te(ee.target.value)},[te]);return React.createElement(qe,{label:w,onDelete:ut},React.createElement(Typography,{role:"textbox",component:"span",className:De.root,onChange:K,contentEditable:!0,suppressContentEditableWarning:!0},H==null?void 0:H.toString()))},Ue=(0,W.Z)(Ae=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:Ae.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),nt=Ae=>{const De=Ue(),{label:w,value:H="none",onChange:te,onDelete:ut,children:K}=Ae,ee=useCallback(Ve=>{te(Ve.target.value)},[te]);return React.createElement(qe,{label:w,onDelete:ut},React.createElement(Select,{className:De.root,value:H,onChange:ee,input:React.createElement(InputBase,null),IconComponent:Ee},React.createElement(MenuItem,{value:"none"},"None"),K))};function it(Ae){const De=$e(),[w,H]=useState(null),{error:te,loading:ut,icon:K,title:ee,titleProps:Ve={},link:lt=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:De.listSubheaderLinkIcon})),linkProps:Lt={},filterOptions:zt,renderFilterOption:Gt=ae=>React.createElement(MenuItem,{key:String(ae),value:String(ae)},String(ae)),filterFields:an,renderFilterField:fn,resultItems:on,renderResultItem:ln=ae=>React.createElement(HigherOrderDefaultResultListItem,{key:ae.document.location,result:ae.document}),disableRenderingWithNoResults:cn,noResultsComponent:On=cn?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...dn}=Ae,Pn=useCallback(ae=>{H(ae.currentTarget)},[]),ce=useCallback(()=>{H(null)},[]);return ut?React.createElement(Progress,null):te?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:te}):on!=null&&on.length?React.createElement(List,{...dn},React.createElement(ListSubheader,{className:De.listSubheader},K,React.createElement(Typography,{className:De.listSubheaderName,component:"strong",...Ve},ee),zt?React.createElement(Chip,{className:De.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:Pn}):null,zt?React.createElement(Menu,{id:"filters-menu",anchorEl:w,open:Boolean(w),onClose:ce,onClick:ce,keepMounted:!0},zt.map(Gt)):null,an==null?void 0:an.map(ae=>{var ke;return(ke=fn==null?void 0:fn(ae))!=null?ke:null}),React.createElement(Link,{className:De.listSubheaderLink,to:"/search",...Lt},lt)),on.map(ln)):React.createElement(React.Fragment,null,On)}function Rt(Ae){const{query:De,children:w,renderResultItem:H,linkProps:te={},...ut}=Ae,K=useSearchResultListItemExtensions(w);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(ct,{query:De},({loading:ee,error:Ve,value:lt},{term:Lt,types:zt,pageCursor:Gt,filters:an={}})=>{const fn=`/search?${qs.stringify({term:Lt,types:zt,filters:an,pageCursor:Gt,query:Lt},{arrayFormat:"brackets"})}`;return React.createElement(it,{...ut,error:Ve,loading:ee,linkProps:{to:fn,...te},filterFields:Object.keys(an),resultItems:lt==null?void 0:lt.results,renderResultItem:H!=null?H:K})}))}const en=(0,W.Z)(Ae=>({root:{display:"flex",justifyContent:"space-between",gap:Ae.spacing(2),margin:Ae.spacing(2,0)}})),rn=()=>{const{fetchNextPage:Ae,fetchPreviousPage:De}=It(),w=en();return!Ae&&!De?u.createElement(u.Fragment,null):u.createElement("nav",{"aria-label":"pagination navigation",className:w.root},u.createElement(ve.Z,{"aria-label":"previous page",disabled:!De,onClick:De,startIcon:u.createElement(L.Z,null)},"Previous"),u.createElement(ve.Z,{"aria-label":"next page",disabled:!Ae,onClick:Ae,endIcon:u.createElement(St.Z,null)},"Next"))}},81024:(Un,Ht,e)=>{"use strict";e.d(Ht,{S:()=>Qt,a:()=>Xt,b:()=>Ft,c:()=>Ye,r:()=>Et});var o=e(32272),p=e(19126),m=e.n(p),Y=e(92573),V=e(30705),I=e(30204),W=e(2784),tt=e(1849),Xe=e(73557),r=e(79692),je=e(94339),ye=e(32552),X=e(24579),Z=e(27616),l=e(8284),ne=e(70660),re=e(11776),se=e(85256),ve=e(38402),be=e(86136),u=e(49378),F=e(99152),R=e(6487),M=e(42494),g=e(56939),Ze=e(73698),we=e(7089),Qe=e(12231),le=e(21324),Le=e(62155),Se=e(38016),Ke=e(56881),St=e(64279),L=Object.defineProperty,mt=(Re,j,v)=>j in Re?L(Re,j,{enumerable:!0,configurable:!0,writable:!0,value:v}):Re[j]=v,fe=(Re,j,v)=>(mt(Re,typeof j!="symbol"?j+"":j,v),v);class Kt{constructor(j){fe(this,"discoveryApi"),fe(this,"identityApi"),this.discoveryApi=j.discoveryApi,this.identityApi=j.identityApi}async query(j){const{token:v}=await this.identityApi.getCredentials(),k=m().stringify(j),Q=`${await this.discoveryApi.getBaseUrl("search")}/query?${k}`,q=await fetch(Q,{headers:v?{Authorization:`Bearer ${v}`}:{}});if(!q.ok)throw await o.VL.fromResponse(q);return q.json()}}const Et=(0,V.NT)({id:"search"}),It=(0,V.rx)({id:"search",apis:[(0,V.ni)({api:Y.gK,deps:{discoveryApi:I.q,identityApi:I.v},factory:({discoveryApi:Re,identityApi:j})=>new Kt({discoveryApi:Re,identityApi:j})})],routes:{root:Et}}),Ft=It.provide((0,V.P4)({name:"SearchPage",component:()=>e.e(3509).then(e.bind(e,53509)).then(Re=>Re.SearchPage),mountPoint:Et})),Ye=It.provide((0,V.CO)({name:"SidebarSearchModal",component:{lazy:()=>e.e(8742).then(e.bind(e,38742)).then(Re=>Re.SidebarSearchModal)}})),_t=It.provide((0,V.CO)({name:"HomePageSearchBar",component:{lazy:()=>e.e(8622).then(e.bind(e,8622)).then(Re=>Re.HomePageSearchBar)}})),kt=()=>{const Re=(0,Xe.TH)(),{term:j,setTerm:v,types:k,setTypes:Q,pageCursor:q,setPageCursor:Ge,filters:U,setFilters:x}=(0,Y.Rx)(),he=(0,tt.Z)(Re.search);return(0,W.useEffect)(()=>{if(Re.search===he)return;const Fe=m().parse(Re.search.substring(1),{arrayLimit:0})||{};Fe.filters&&x(Fe.filters),Fe.query&&v(Fe.query),Fe.pageCursor&&Ge(Fe.pageCursor),Fe.types&&Q(Fe.types)},[he,Re,v,Q,Ge,x]),(0,W.useEffect)(()=>{const Fe=m().stringify({query:j,types:k,pageCursor:q,filters:U},{arrayFormat:"brackets"}),dt=`${window.location.pathname}?${Fe}`;window.history.replaceState(null,document.title,dt)},[j,k,q,U]),null},Qt=()=>{const Re=(0,Xe.pC)();return W.createElement(Y.Nd,null,W.createElement(kt,null),Re)},Yt=(0,r.Z)(Re=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:Re.spacing(1)},icon:{color:Re.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:Re.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:Re.spacing(2,0),"&.Mui-expanded":{margin:Re.spacing(2,0)}},accordionDetails:{padding:Re.spacing(0,0,1)}})),Nt=Re=>{const j=Yt(),{filters:v,setPageCursor:k,setTypes:Q,term:q,types:Ge}=(0,Y.Rx)(),U=(0,I.u)(Y.gK),[x,he]=(0,W.useState)(!0),{defaultValue:Fe,name:dt,showCounts:qt,types:Ie}=Re,Be=()=>he(Pt=>!Pt),ct=Pt=>()=>{Q(Pt!==""?[Pt]:[]),k(void 0),he(!1)};(0,W.useEffect)(()=>{Fe&&Q([Fe])},[]);const Ot=[{value:"",name:"All",icon:W.createElement(Ke.Z,null)},...Ie],Ct=Ge[0]||"",{value:$t}=(0,St.default)(async()=>{if(!qt)return{};const Pt=await Promise.all(Ot.map($e=>$e.value).map(async $e=>{const{numberOfResults:qe}=await U.query({term:q,types:$e?[$e]:[],filters:Ge.includes($e)||!Ge.length&&!$e?v:{},pageLimit:0});return[$e,qe!==void 0?`${qe>=1e4?">10000":qe} results`:" -- "]}));return Object.fromEntries(Pt)},[v,qt,q,Ge]);return W.createElement(je.Z,{className:j.card},W.createElement(ye.Z,{title:dt,titleTypographyProps:{variant:"overline"}}),W.createElement(X.Z,{className:j.cardContent},W.createElement(Z.Z,{className:j.accordion,expanded:x,onChange:Be},W.createElement(l.Z,{classes:{root:j.accordionSummary,content:j.accordionSummaryContent},expandIcon:W.createElement(Se.Z,{className:j.icon}),IconButtonProps:{size:"small"}},x?"Collapse":Ot.filter(Pt=>Pt.value===Ct)[0].name),W.createElement(ne.Z,{classes:{root:j.accordionDetails}},W.createElement(re.Z,{className:j.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},Ot.map(Pt=>W.createElement(W.Fragment,{key:Pt.value},W.createElement(se.Z,null),W.createElement(ve.Z,{selected:Ge[0]===Pt.value||Ge.length===0&&Pt.value==="",onClick:ct(Pt.value),button:!0},W.createElement(be.Z,null,(0,W.cloneElement)(Pt.icon,{className:j.listItemIcon})),W.createElement(u.Z,{primary:Pt.name,secondary:$t&&$t[Pt.value]})))))))))},bt=(0,r.Z)(Re=>({tabs:{borderBottom:`1px solid ${Re.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:Re.typography.fontWeightBold,fontSize:Re.typography.pxToRem(13),color:Re.palette.text.primary,minWidth:"130px"}})),Tt=Re=>{const j=bt(),{setPageCursor:v,setTypes:k,types:Q}=(0,Y.Rx)(),{defaultValue:q,types:Ge}=Re,U=(he,Fe)=>{k(Fe!==""?[Fe]:[]),v(void 0)};(0,W.useEffect)(()=>{q&&k([q])},[]);const x=[{value:"",name:"All"},...Ge];return W.createElement(F.Z,{"aria-label":"List of search types tabs",className:j.tabs,indicatorColor:"primary",value:Q.length===0?"":Q[0],onChange:U},x.map((he,Fe)=>W.createElement(R.Z,{key:Fe,className:j.tab,label:he.name,value:he.value})))},wt=(0,r.Z)(Re=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:Re.spacing(1)},chip:{margin:2}})),Xt=Re=>{const{className:j,defaultValue:v,name:k,values:Q=[]}=Re,q=wt(),{types:Ge,setTypes:U}=(0,Y.Rx)();(0,Le.Z)(()=>{Ge.length||(v&&Array.isArray(v)?U(v):v&&U([v]))});const x=he=>{const Fe=he.target.value;U(Fe)};return W.createElement(M.Z,{className:j,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},W.createElement(g.Z,{className:q.label,margin:"dense"},k),W.createElement(Ze.Z,{multiple:!0,variant:"outlined",value:Ge,onChange:x,placeholder:"All Results",renderValue:he=>W.createElement("div",{className:q.chips},he.map(Fe=>W.createElement(we.Z,{key:Fe,label:Fe,className:q.chip,size:"small"})))},Q.map(he=>W.createElement(Qe.Z,{key:he,value:he},W.createElement(le.Z,{checked:Ge.indexOf(he)>-1}),W.createElement(u.Z,{primary:he})))))};Xt.Accordion=Re=>W.createElement(Nt,{...Re}),Xt.Tabs=Re=>W.createElement(Tt,{...Re})},7310:(Un,Ht,e)=>{"use strict";e.d(Ht,{M:()=>Y,T:()=>ye,a:()=>m});var o=e(30204),p=e(30705);const m=(0,o.c)({id:"plugin.techradar.service"});var Y=(X=>(X[X.Down=-1]="Down",X[X.NoChange=0]="NoChange",X[X.Up=1]="Up",X))(Y||{});const V=new Array;V.push({id:"adopt",name:"ADOPT",color:"#5BA300",description:"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus."}),V.push({id:"trial",name:"TRIAL",color:"#009EB0",description:"Recusandae possimus ipsum dolores."}),V.push({id:"assess",name:"ASSESS",color:"#C7BA00",description:"In asperiores repellat error recusandae et adipisci laborum porro."}),V.push({id:"hold",name:"HOLD",color:"#E09B96",description:"Esse mollitia in."});const I=new Array;I.push({id:"infrastructure",name:"Infrastructure"}),I.push({id:"frameworks",name:"Frameworks"}),I.push({id:"languages",name:"Languages"}),I.push({id:"process",name:"Process"});const W=new Array;W.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),W.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),W.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),W.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),W.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),W.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),W.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),W.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),W.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const tt={entries:W,quadrants:I,rings:V};class Xe{async load(){return tt}}const r=(0,p.NT)({id:"tech-radar"}),ye=(0,p.rx)({id:"tech-radar",routes:{root:r},apis:[(0,p.ni)(m,new Xe)]}).provide((0,p.P4)({name:"TechRadarPage",component:()=>e.e(8272).then(e.bind(e,88272)).then(function(X){return X.b}).then(X=>X.RadarPage),mountPoint:r}))},65609:(Un,Ht,e)=>{"use strict";e.d(Ht,{EU:()=>dt});var o=e(30204),p=e(30705),m=e(66565),Y=e(2784),V=e(87370),I=e(15459),W=e(77277),tt=e(79692),Xe=e(8560),r=e(27556),je=e(11433),ye=e(60364),X=e(12231),Z=e(49378),l=e(90436),ne=e(95544),re=e(61837),se=e(51209),ve=e(38016),be=e(82717),u=e.n(be),F=e(1854),R=e(49462),M=e(31654),g=e(49558),Ze=e(65549),we=e(17373),Qe=e(85224),le=e(96103);const Le=".md-nav__item--nested .md-toggle",Se="@backstage/techdocs-addons/nav-expanded",Ke=(0,I.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(W.Z),St=(0,I.Z)({root:{height:"20px",width:"20px"}})(se.Z),L=(0,I.Z)({root:{height:"20px",width:"20px"}})(ve.Z),mt=()=>{const Be={expandAllNestedNavs:!1},{value:ct,set:Ot}=(0,V.Z)(Se,{defaultValue:Be}),[Ct,$t]=(0,Y.useState)(!1),[...Pt]=(0,m.pV)([Le]),$e=(0,Y.useCallback)(Ee=>{const G=Ee.checked,de=ct==null?void 0:ct.expandAllNestedNavs;return!!(de&&!G||!de&&G)},[ct]);(0,Y.useEffect)(()=>{Pt!=null&&Pt.length&&($t(!0),Pt.forEach(Ee=>{$e(Ee)&&Ee.click()}))},[ct,$e,Pt]);const qe=()=>{Ot(Ee=>({expandAllNestedNavs:!(Ee!=null&&Ee.expandAllNestedNavs)}))};return Y.createElement(Y.Fragment,null,Ct?Y.createElement(Ke,{size:"small",onClick:qe,"aria-label":ct!=null&&ct.expandAllNestedNavs?"collapse-nav":"expand-nav"},ct!=null&&ct.expandAllNestedNavs?Y.createElement(L,null):Y.createElement(St,null)):null)},fe="techdocs-report-issue",Kt=`#${fe}`,Et='[title^="Edit this page"]',It='[title^="Leave feedback for"]',Ft='[data-md-component="main"] .md-content',Ye=(Be,ct)=>ct==="github"?(0,F.BT)(Be,"blob"):ct==="gitlab"?(0,F.ah)(Be,"blob"):(console.error(`Invalid SCM type ${ct} found in ReportIssue addon for URL ${Be}!`),Be),_t=Be=>{const ct=Be.toString().substring(0,70),Ot=ct.length===70?"...":"";return`Documentation feedback: ${ct}${Ot}`},kt=(Be,ct,Ot)=>{const Ct="## Documentation Feedback \u{1F4DD}",$t="#### The highlighted text:",Pt="#### The comment on the text:",$e="_>replace this line with your comment<_",qe=Be.toString().trim().split(`
`).map(G=>`> ${G.trim()}`).join(`
`),Ee=[`${Ot} URL: <${window.location.href}> 
Markdown URL: <${ct}>`];return`${Ct}

 ${$t} 

 ${qe}

 ${Pt} 
 ${$e}

 ___
${Ee}`},Qt=Be=>{var ct,Ot;const Ct={title:"",body:""},$t=(0,m.oi)(Be),[Pt]=(0,m.pV)([Et]),$e=(ct=Pt==null?void 0:Pt.href)!=null?ct:"",qe=(0,o.u)(R.q3),G=(0,o.u)(o.p).getOptionalString("app.title")||"Backstage";if(!$t||!$e)return Ct;const de=(Ot=qe.byUrl($e))==null?void 0:Ot.type;return de?{title:_t($t),body:kt($t,Ye($e,de),G)}:Ct},Yt=()=>{var Be,ct;const Ot=(0,o.u)(R.q3),[Ct]=(0,m.pV)([Et]),$t=(Be=Ct==null?void 0:Ct.href)!=null?Be:"";if(!$t)return null;const Pt=(ct=Ot.byUrl($t))==null?void 0:ct.type;return Pt?{...u()(Ye($t,Pt)),type:Pt}:null},Nt=(0,tt.Z)(Be=>({root:{display:"grid",gridGap:Be.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Be.palette.common.black,fontSize:Be.typography.button.fontSize}})),bt=({type:Be})=>Be==="github"?g.fy:M.Z,Tt=({type:Be})=>Be==="github"?"Github":"Gitlab",wt=(Be,ct)=>{const{title:Ot,body:Ct}=ct,$t=encodeURIComponent(Ot),Pt=encodeURIComponent(Ct),{protocol:$e,resource:qe,owner:Ee,name:G,type:de}=Be,Ue=`${$e}://${qe}/${Ee}/${G}`,nt=encodeURI(Ue);return de==="github"?`${nt}/issues/new?title=${$t}&body=${Pt}`:`${nt}/issues/new?issue[title]=${$t}&issue[description]=${Pt}`},Xt=({template:Be,repository:ct})=>{const Ot=Nt(),Ct=bt(ct),$t=wt(ct,Be);return Y.createElement(g.rU,{className:Ot.root,to:$t,target:"_blank"},Y.createElement(Ct,null)," Open new ",Tt(ct)," issue")},Re=(0,tt.Z)(Be=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Be.spacing(1),zIndex:Be.zIndex.tooltip,background:Be.palette.common.white}})),j=({debounceTime:Be=500,templateBuilder:ct})=>{const Ot=Re(),[Ct,$t]=(0,Y.useState)(),Pt=Yt(),$e=Qt(Be),qe=(0,m.oi)(Be),[Ee,G]=(0,m.pV)([Ft,It]);let[de]=(0,m.pV)([Kt]);return G&&(G.style.display="none"),(0,Y.useEffect)(()=>{if(!Pt||!qe||!qe.containsNode(Ee,!0)||qe!=null&&qe.containsNode(de,!0))return;const Ue=Ee.getBoundingClientRect(),nt=qe.getRangeAt(0).getBoundingClientRect();$t({top:`${nt.top-Ue.top-16}px`,left:`${nt.left+nt.width/2}px`})},[qe,Ee,de]),!qe||!Pt||!["github","gitlab"].includes(Pt.type)?null:(de||(de=document.createElement("div"),de.setAttribute("id",fe),Ee.prepend(de)),Y.createElement(Xe.Z,{container:de},Y.createElement(r.Z,{"data-testid":"report-issue-addon",className:Ot.root,style:Ct},Y.createElement(Xt,{repository:Pt,template:ct?ct({selection:qe}):$e}))))},v="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",k=(0,I.Z)(Be=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Be.palette.common.white,boxShadow:v,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:v}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Be.palette.common.black,fontSize:Be.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(je.Z),Q={key:"techdocs.addons.settings.textsize",defaultValue:100},q=[{value:90},{value:100},{value:115},{value:130},{value:150}],Ge=(0,tt.Z)(Be=>({container:{color:Be.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Be.spacing(1)},increaseButton:{marginLeft:Be.spacing(1)}})),U=()=>{const Be=Ge(),ct=(0,ye.Z)(),[Ot]=(0,m.pV)(["body"]),[Ct,$t]=(0,Y.useState)(()=>{const it=localStorage==null?void 0:localStorage.getItem(Q.key);return it?parseInt(it,10):Q.defaultValue}),Pt=(0,Y.useMemo)(()=>q.map(it=>it.value),[]),$e=(0,Y.useMemo)(()=>Pt.indexOf(Ct),[Pt,Ct]),qe=(0,Y.useMemo)(()=>Pt[0],[Pt]),Ee=(0,Y.useMemo)(()=>Pt[Pt.length-1],[Pt]),G=(0,Y.useCallback)(()=>`${Ct}%`,[Ct]),de=(0,Y.useCallback)((it,Rt)=>{Array.isArray(Rt)||($t(Rt),localStorage==null||localStorage.setItem(Q.key,String(Rt)))},[$t]),Ue=(0,Y.useCallback)(it=>{de(it,Pt[$e-1])},[$e,Pt,de]),nt=(0,Y.useCallback)(it=>{de(it,Pt[$e+1])},[$e,Pt,de]);return(0,Y.useEffect)(()=>{var it,Rt;if(!Ot)return;const en=(Rt=(it=ct.typography)==null?void 0:it.htmlFontSize)!=null?Rt:16;Ot.style.setProperty("--md-typeset-font-size",`${en*(Ct/100)}px`)},[Ot,Ct,ct]),Y.createElement(X.Z,{className:Be.menuItem,button:!0,disableRipple:!0},Y.createElement(Z.Z,{primary:Y.createElement(l.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:Y.createElement(ne.Z,{className:Be.container},Y.createElement(re.Z,{className:Be.decreaseButton,size:"small",edge:"start",disabled:Ct===qe,onClick:Ue,"aria-label":"Decrease text size"},Y.createElement(we.Z,null)),Y.createElement(k,{value:Ct,"aria-labelledby":"text-size-slider",getAriaValueText:G,valueLabelDisplay:"on",valueLabelFormat:G,marks:q,step:null,min:qe,max:Ee,onChangeCommitted:de}),Y.createElement(re.Z,{className:Be.increaseButton,size:"small",edge:"end",disabled:Ct===Ee,onClick:nt,"aria-label":"Increase text size"},Y.createElement(Ze.Z,null))),disableTypography:!0}))},x=()=>{const Be=(0,m.pV)(["img"]);return(0,Y.useEffect)(()=>{let ct=null,Ot=new Qe.Z({pswpModule:le.Z,initialZoomLevel:1,secondaryZoomLevel:Ct=>{const $t=Ct.elementSize.x,Pt=Ct.elementSize.y,$e=Ct.panAreaSize.x,qe=Ct.panAreaSize.y,Ee=$e/$t,G=qe/Pt;return Math.min(Ee,G)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return Be.forEach((Ct,$t)=>{Ct.onclick=()=>(ct===null&&(ct=Be.map(Pt=>({element:Pt,src:Pt.src,msrc:Pt.src,alt:Pt.alt,width:Pt.clientWidth,height:Pt.clientHeight}))),Ot.loadAndOpen($t,ct),!1)}),Ot.init(),()=>{Ot.destroy(),Ot=null}},[Be]),null},he=(0,p.rx)({id:"techdocsModuleAddonsContrib"}),Fe=he.provide((0,m.KY)({name:"ExpandableNavigation",location:m.oZ.PrimarySidebar,component:mt})),dt=he.provide((0,m.KY)({name:"ReportIssue",location:m.oZ.Content,component:j})),qt=he.provide((0,m.KY)({name:"TextSize",location:m.oZ.Settings,component:U})),Ie=he.provide((0,m.KY)({name:"LightBox",location:m.oZ.Content,component:x}))},66565:(Un,Ht,e)=>{"use strict";e.d(Ht,{$L:()=>R,DR:()=>re,Dl:()=>g,KY:()=>ve,Ox:()=>St,VA:()=>fe,ZS:()=>Le,Zz:()=>ne,gT:()=>M,jM:()=>l,oZ:()=>Ke,oi:()=>Ft,pV:()=>Et,ux:()=>mt,x1:()=>Se});var o=e(2784),p=e(73557),m=e(30705),Y=e(30204),V=e(64279),I=e(77446),W=e(34520),tt=e(18473),Xe=e(70882),r=e(50236),je=e(19219),ye=e(49558),X=e(54073),Z=e.n(X);const l="techdocs.addons.addon.v1",ne="techdocs.addons.wrapper.v1",re=()=>null;(0,m.R5)(re,ne,!0);const se=Ye=>`${l}.${Ye.toLocaleLowerCase("en-US")}`;function ve(Ye){const{name:_t,component:kt}=Ye;return(0,m.YO)({name:_t,component:{sync:Qt=>o.createElement(kt,{...Qt})},data:{[l]:Ye,[se(_t)]:!0}})}const be=(Ye,_t)=>Ye.selectByComponentData({key:_t}).getElements()[0],u=Ye=>Ye.selectByComponentData({key:ne}).selectByComponentData({key:l}),F=Ye=>Ye.selectByComponentData({key:ne}).findComponentData({key:l}),R=()=>{const Ye=(0,p.pC)(),_t=(0,m.vJ)(Ye,u),kt=(0,m.vJ)(Ye,F),Qt=(0,o.useCallback)(bt=>{var Tt;if(!_t||!bt)return null;const wt=se(bt.name);return(Tt=be(_t,wt))!=null?Tt:null},[_t]),Yt=(0,o.useCallback)(bt=>{const Tt=kt.find(wt=>wt.name===bt);return Tt?Qt(Tt):null},[kt,Qt]),Nt=(0,o.useCallback)(bt=>{const Tt=kt.filter(wt=>wt.location===bt);return Tt.length?Tt.map(Qt):null},[kt,Qt]);return{renderComponentByName:Yt,renderComponentsByLocation:Nt}},M=(0,Y.c)({id:"plugin.techdocs.service"}),g=(0,Y.c)({id:"plugin.techdocs.storageservice"});function Ze(Ye,_t){return _t.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(Ye.kind=Ye.kind.toLocaleLowerCase(),Ye.name=Ye.name.toLocaleLowerCase(),Ye.namespace=Ye.namespace.toLocaleLowerCase()),Ye}const we=(Ye,_t)=>(0,W.eE)(Ye)===(0,W.eE)(_t),Qe={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},le=(0,tt.CT)("techdocs-reader-page-context"),Le=(0,o.memo)(Ye=>{const{entityRef:_t,children:kt}=Ye,Qt=(0,Y.u)(M),Yt=(0,Y.u)(Y.p),Nt=(0,V.default)(async()=>Qt.getEntityMetadata(_t),[_t]),bt=(0,I.Z)(async()=>Qt.getTechDocsMetadata(_t),[_t]),[Tt,wt]=(0,o.useState)(Qe.title),[Xt,Re]=(0,o.useState)(Qe.subtitle),[j,v]=(0,o.useState)(Qe.shadowRoot);(0,o.useEffect)(()=>{j&&!bt.value&&!bt.loading&&bt.retry()},[bt.value,bt.loading,j,bt.retry,bt]);const k={metadata:bt,entityRef:Ze(_t,Yt),entityMetadata:Nt,shadowRoot:j,setShadowRoot:v,title:Tt,setTitle:wt,subtitle:Xt,setSubtitle:Re},Q=(0,tt.EI)({1:k});return o.createElement(m.fC,{attributes:{entityRef:(0,W.eE)(_t)}},o.createElement(le.Provider,{value:Q},kt instanceof Function?kt(k):kt))},(Ye,_t)=>we(Ye.entityRef,_t.entityRef)),Se=()=>{const Ye=(0,o.useContext)(le);if(Ye===void 0)return Qe;const _t=Ye.atVersion(1);if(_t===void 0)throw new Error("No context found for version 1.");return _t},Ke=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),St="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",L=Ye=>{(0,o.useEffect)(()=>{var _t;if(!Ye)return()=>{};const kt=Ye.querySelectorAll('head > link[rel="stylesheet"]');let Qt=(_t=kt==null?void 0:kt.length)!=null?_t:0;const Yt=new CustomEvent(St);if(!Qt)return Ye.dispatchEvent(Yt),()=>{};const Nt=()=>{--Qt===0&&Ye.dispatchEvent(Yt)};return kt==null||kt.forEach(bt=>{bt.addEventListener("load",Nt)}),()=>{kt==null||kt.forEach(bt=>{bt.removeEventListener("load",Nt)})}},[Ye])},mt=Ye=>{const[_t,kt]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!Ye)return()=>{};kt(!0);const Qt=Ye.style;Qt.setProperty("opacity","0");const Yt=()=>{kt(!1),Qt.setProperty("opacity","1")};return Ye.addEventListener(St,Yt),()=>{Ye.removeEventListener(St,Yt)}},[Ye]),_t},fe=Ye=>{const{element:_t,onAppend:kt,children:Qt}=Ye,[Yt,Nt]=(0,o.useState)((0,Xe.Ue)({...(0,r.Z)(),insertionPoint:void 0}));L(_t);const bt=mt(_t),Tt=(0,o.useCallback)(wt=>{if(!_t||!wt)return;Nt((0,Xe.Ue)({...(0,r.Z)(),insertionPoint:_t.querySelector("head")||void 0}));let Xt=wt.shadowRoot;Xt||(Xt=wt.attachShadow({mode:"open"})),Xt.replaceChildren(_t),typeof kt=="function"&&kt(Xt)},[_t,kt]);return o.createElement(o.Fragment,null,bt&&o.createElement(ye.Ex,null),o.createElement(je.ZP,{jss:Yt,sheetsManager:new Map},o.createElement("div",{ref:Tt,"data-testid":"techdocs-native-shadowroot"}),Qt))},Kt=()=>{const{shadowRoot:Ye}=Se();return Ye},Et=Ye=>{const _t=Kt();return _t?Ye.map(kt=>_t==null?void 0:_t.querySelectorAll(kt)).filter(kt=>kt.length).map(kt=>Array.from(kt)).flat():[]},It=Ye=>Ye.toString()&&Ye.rangeCount&&Ye.getRangeAt(0).getBoundingClientRect().top,Ft=(Ye=0)=>{const _t=Kt(),[kt,Qt]=(0,o.useState)(null),Yt=(0,o.useMemo)(()=>Z()(()=>{const Nt=_t,bt=Nt.getSelection?Nt.getSelection():document.getSelection();bt&&It(bt)?Qt(bt):Qt(null)},Ye),[_t,Qt,Ye]);return(0,o.useEffect)(()=>(window.document.addEventListener("selectionchange",Yt),()=>{Yt.cancel(),window.document.removeEventListener("selectionchange",Yt)}),[Yt]),kt}},78832:(Un,Ht,e)=>{"use strict";e.d(Ht,{E:()=>l,a:()=>re,c:()=>se,d:()=>ve,t:()=>X});var o=e(2784),p=e(73557),m=e(34520),Y=e(66565),V=e(67266),I=e(30705),W=e(30204),tt=e(42054),Xe=e(33019),r=e(38334),je=e(78373),ye=e(64304);const X=(0,I.rx)({id:"techdocs",apis:[(0,I.ni)({api:Y.Dl,deps:{configApi:W.p,discoveryApi:W.q,identityApi:W.v,fetchApi:W.t},factory:({configApi:Qe,discoveryApi:le,identityApi:Le,fetchApi:Se})=>new V.a({configApi:Qe,discoveryApi:le,identityApi:Le,fetchApi:Se})}),(0,I.ni)({api:Y.gT,deps:{configApi:W.p,discoveryApi:W.q,fetchApi:W.t},factory:({configApi:Qe,discoveryApi:le,fetchApi:Le})=>new V.T({configApi:Qe,discoveryApi:le,fetchApi:Le})})],routes:{root:V.r,docRoot:V.b,entityContent:V.c}}),Z=X.provide((0,I.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return we}).then(Qe=>Qe.Router),mountPoint:V.r})),l=X.provide((0,I.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return we}).then(Qe=>Qe.EmbeddedDocsRouter),mountPoint:V.c})),ne=X.provide((0,I.P4)({name:"TechDocsCustomHome",component:()=>e.e(979).then(e.bind(e,979)).then(Qe=>Qe.TechDocsCustomHome),mountPoint:V.r})),re=X.provide((0,I.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(e.bind(e,38334)).then(function(Qe){return Qe.d}).then(Qe=>Qe.TechDocsIndexPage),mountPoint:V.r})),se=X.provide((0,I.P4)({name:"TechDocsReaderPage",component:()=>e.e(4376).then(e.bind(e,34376)).then(Qe=>Qe.TechDocsReaderPage),mountPoint:V.b})),ve=X.provide((0,tt.c)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(e.bind(e,77529)).then(Qe=>Qe.TechDocsSearchResultListItem),predicate:Qe=>Qe.type==="techdocs"})),be="backstage.io/techdocs-entity",u=({entity:Qe})=>{var le,Le;let Se=(0,m.iB)(Qe);if((le=Qe.metadata.annotations)!=null&&le[be])try{Se=(0,m.of)((Le=Qe.metadata.annotations)==null?void 0:Le[be])}catch{}return o.createElement(se,{entityRef:Se},o.createElement(Xe.d,null),o.createElement(Xe.c,{withSearch:!1}))},F="backstage.io/techdocs-ref",R="backstage.io/techdocs-entity";var we=Object.freeze({__proto__:null,isTechDocsAvailable:Qe=>{var le,Le,Se,Ke;return Boolean((Le=(le=Qe==null?void 0:Qe.metadata)==null?void 0:le.annotations)==null?void 0:Le[F])||Boolean((Ke=(Se=Qe==null?void 0:Qe.metadata)==null?void 0:Se.annotations)==null?void 0:Ke[R])},Router:()=>o.createElement(p.Z5,null,o.createElement(p.AW,{path:"/",element:o.createElement(r.c,null)}),o.createElement(p.AW,{path:"/:namespace/:kind/:name/*",element:o.createElement(Xe.f,null)})),EmbeddedDocsRouter:Qe=>{var le,Le;const{children:Se}=Qe,{entity:Ke}=(0,je.u)(),St=(0,p.V$)([{path:"/*",element:o.createElement(u,{entity:Ke}),children:[{path:"*",element:Se}]}]);return((le=Ke.metadata.annotations)==null?void 0:le[F])||((Le=Ke.metadata.annotations)==null?void 0:Le[R])?St:o.createElement(ye.sk,{annotation:[F]})}})},38334:(Un,Ht,e)=>{"use strict";e.r(Ht),e.d(Ht,{D:()=>R,E:()=>M,T:()=>g,a:()=>Qe,b:()=>we,c:()=>le,d:()=>Le,t:()=>se});var o=e(2784),p=e(73557),m=e(49558),Y=e(64304),V=e(78373),I=e(88285),W=e(30705),tt=e(30204),Xe=e(95074),r=e(76635),je=e.n(r),ye=e(34520),X=e(67266),Z=e(39981),l=e(2337),ne=e(11640),re=e(28347);function se(Se,Ke){return Ke.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?Se:Se.toLocaleLowerCase("en-US")}const ve=(0,l.Z)({root:{color:"#f3ba37"}})(ne.Z),be={createCopyDocsUrlAction(Se){return Ke=>({icon:()=>o.createElement(Z.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>Se(`${window.location.origin}${Ke.resolved.docsUrl}`)})},createStarEntityAction(Se,Ke){return St=>{const L=St.entity,mt=Se(L);return{cellStyle:{paddingLeft:"1em"},icon:()=>mt?o.createElement(ve,null):o.createElement(re.Z,null),tooltip:mt?"Remove from favorites":"Add to favorites",onClick:()=>Ke(L)}}}};function u(Se){return Se.metadata.title||Se.metadata.name}const F={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:Se=>o.createElement(m.uw,{value:o.createElement(m.rU,{to:Se.resolved.docsUrl},u(Se.entity)),subvalue:Se.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:Se})=>o.createElement(Y.rI,{entityRefs:Se.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},R=Se=>{const{entities:Ke,title:St,loading:L,columns:mt,actions:fe,options:Kt}=Se,[,Et]=(0,Xe.Z)(),It=(0,W.tg)(X.b),Ft=(0,tt.u)(tt.p);if(!Ke)return null;const Ye=Ke.map(Nt=>{var bt;const Tt=(0,V.g)(Nt,ye.S4);return{entity:Nt,resolved:{docsUrl:It({namespace:se((bt=Nt.metadata.namespace)!=null?bt:"default",Ft),kind:se(Nt.kind,Ft),name:se(Nt.metadata.name,Ft)}),ownedByRelations:Tt,ownedByRelationsTitle:Tt.map(wt=>(0,Y.$3)(wt,{defaultKind:"group"})).join(", ")}}}),_t=[F.createNameColumn(),F.createOwnerColumn(),F.createKindColumn(),F.createTypeColumn()],kt=[be.createCopyDocsUrlAction(Et)],Qt=20,Yt=Ye&&Ye.length>Qt;return o.createElement(o.Fragment,null,L||Ye&&Ye.length>0?o.createElement(m.iA,{isLoading:L,options:{paging:Yt,pageSize:Qt,search:!0,actionsColumnIndex:-1,...Kt},data:Ye,columns:mt||_t,actions:fe||kt,title:St?`${St} (${Ye.length})`:`All (${Ye.length})`}):o.createElement(m.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:o.createElement(m.Qj,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};R.columns=F,R.actions=be;const M=Se=>{var Ke,St;const{columns:L,actions:mt,options:fe}=Se,{loading:Kt,error:Et,entities:It,filters:Ft}=(0,Y.wp)(),{isStarredEntity:Ye,toggleStarredEntity:_t}=(0,Y.CR)(),[,kt]=(0,Xe.Z)(),Qt=(0,r.capitalize)((St=(Ke=Ft.user)==null?void 0:Ke.value)!=null?St:"all"),Yt=[be.createCopyDocsUrlAction(kt),be.createStarEntityAction(Ye,_t)];return Et?o.createElement(m.GB,{severity:"error",title:"Could not load available documentation."},o.createElement(m.Oi,{language:"text",text:Et.toString()})):o.createElement(R,{title:Qt,entities:It,loading:Kt,actions:mt||Yt,columns:L,options:fe})};M.columns=F,M.actions=be;const g=Se=>{var Ke;const{children:St}=Se,mt=`Documentation available in ${(Ke=(0,tt.u)(tt.p).getOptionalString("organization.name"))!=null?Ke:"Backstage"}`;return o.createElement(m.g9,{title:"Documentation",subtitle:mt,themeId:"documentation"},St)};class Ze{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":I.n3}}}const we=()=>{const{updateFilters:Se}=(0,Y.wp)();return(0,o.useEffect)(()=>{Se({techdocs:new Ze})},[Se]),null},Qe=Se=>{const{initialFilter:Ke="owned",columns:St,actions:L}=Se;return o.createElement(g,null,o.createElement(m.VY,null,o.createElement(m.yW,{title:""},o.createElement(m.qt,null,"Discover documentation in your ecosystem.")),o.createElement(Y.UO,null,o.createElement(Y._i,null,o.createElement(Y._i.Filters,null,o.createElement(we,null),o.createElement(Y.EW,{initialFilter:Ke}),o.createElement(Y.dq,null),o.createElement(Y.xE,null)),o.createElement(Y._i.Content,null,o.createElement(M,{actions:L,columns:St}))))))},le=Se=>(0,p.pC)()||o.createElement(Qe,{...Se});var Le=Object.freeze({__proto__:null,TechDocsIndexPage:le})},33019:(Un,Ht,e)=>{"use strict";e.d(Ht,{a:()=>Ar,c:()=>Jn,d:()=>Lr,f:()=>Mr});var o=e(2784),p=e(73557),m=e(49558),Y=e(66565),V=e(79692),I=e(12420),W=e(60905),tt=e(90436),Xe=e(61837),r=e(77277),je=e(4190),ye=e(4614),X=e(41128),Z=e(60364),l=e(15459),ne=e(80030),re=e(72379),se=e(41547),ve=e(41156),be=e(8560),u=e(15223),F=e(95544),R=e(48348),M=e(92573),g=e(77529),Ze=e(99688),we=e(98069),Qe=e(87685),le=e(30204),Le=e(30705),Se=e(64279),Ke=e(77446),St=e(49462),L=e(35368),mt=e.n(L),fe=e(1854),Kt=e(67097),Et=e(82717),It=e.n(Et),Ft=e(44882),Ye=e(95074),_t=e(18671),kt=e(73250),Qt=e(78373),Yt=e(64304),Nt=e(34520),bt=e(76635),Tt=e.n(bt),wt=e(67266),Xt=e(47603);function Re({contentLoading:ie,content:He,activeSyncState:st}){return ie||st==="BUILD_READY_RELOAD"||!He&&st==="CHECKING"?"CHECKING":!He&&st==="BUILDING"?"INITIAL_BUILD":He?st==="BUILDING"?"CONTENT_STALE_REFRESHING":st==="BUILD_READY"?"CONTENT_STALE_READY":st==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function j(ie,He){const st={...ie};switch(He.type){case"sync":He.state==="CHECKING"&&(st.buildLog=[]),st.activeSyncState=He.state,st.syncError=He.syncError;break;case"contentLoading":st.contentLoading=!0,st.contentError=void 0;break;case"content":typeof He.path=="string"&&(st.path=He.path),st.contentLoading=!1,st.content=He.content,st.contentError=He.contentError;break;case"buildLog":st.buildLog=st.buildLog.concat(He.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(st.activeSyncState)&&["contentLoading","content"].includes(He.type)&&(st.activeSyncState="UP_TO_DATE",st.buildLog=[]),st}function v(ie,He,st,C){var _,O;const[D,ue]=(0,o.useReducer)(j,{activeSyncState:"CHECKING",path:C,contentLoading:!0,buildLog:[]}),_e=(0,le.u)(Y.Dl),{retry:oe}=(0,Ke.Z)(async()=>{ue({type:"contentLoading"});try{const We=await _e.getEntityDocs({kind:ie,namespace:He,name:st},C);return ue({type:"content",content:We,path:C}),We}catch(We){ue({type:"content",contentError:We,path:C})}},[_e,ie,He,st,C]),Ce=(0,o.useRef)({content:void 0,reload:()=>{}});return Ce.current={content:D.content,reload:oe},(0,Se.default)(async()=>{ue({type:"sync",state:"CHECKING"});const We=setTimeout(()=>{ue({type:"sync",state:"BUILDING"})},1e3);try{switch(await _e.syncEntityDocs({kind:ie,namespace:He,name:st},nn=>{ue({type:"buildLog",log:nn})})){case"updated":Ce.current.content?ue({type:"sync",state:"BUILD_READY"}):(Ce.current.reload(),ue({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":ue({type:"sync",state:"UP_TO_DATE"});break;default:ue({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(pt){ue({type:"sync",state:"ERROR",syncError:pt})}finally{clearTimeout(We)}},[ie,st,He,_e,ue,Ce]),{state:(0,o.useMemo)(()=>Re({activeSyncState:D.activeSyncState,contentLoading:D.contentLoading,content:D.content}),[D.activeSyncState,D.content,D.contentLoading]),contentReload:oe,path:D.path,content:D.content,contentErrorMessage:(_=D.contentError)==null?void 0:_.toString(),syncErrorMessage:(O=D.syncError)==null?void 0:O.toString(),buildLog:D.buildLog}}const k=(0,o.createContext)({}),Q=()=>(0,o.useContext)(k),q=ie=>{const{children:He}=ie,{"*":st=""}=(0,p.UO)(),{entityRef:C}=(0,Y.x1)(),{kind:_,namespace:O,name:D}=C,ue=v(_,O,D,st);return o.createElement(k.Provider,{value:ue},He instanceof Function?He(ue):He)},Ge=ie=>He=>o.createElement(q,null,o.createElement(ie,{...He})),U=ie=>ie==null?void 0:ie.document,x=ie=>{const{entityId:He,entityTitle:st,debounceTime:C=150}=ie,[_,O]=(0,o.useState)(!1),D=(0,p.s0)(),{setFilters:ue,result:{loading:_e,value:oe}}=(0,M.Rx)(),[Ce,Ne]=(0,o.useState)([]);(0,o.useEffect)(()=>{let Ut=!0;if(Ut&&oe){const gn=oe.results.slice(0,10);Ne(gn)}return()=>{Ut=!1}},[_e,oe]);const{kind:We,name:pt,namespace:nn}=He;(0,o.useEffect)(()=>{ue(Ut=>({...Ut,kind:We,namespace:nn,name:pt}))},[We,nn,pt,ue]);const tn=(Ut,gn)=>{if(U(gn)){const{location:pn}=gn.document;D(pn)}};return o.createElement(M.qO,{"data-testid":"techdocs-search-bar",size:"small",open:_,getOptionLabel:()=>"",filterOptions:Ut=>Ut,onClose:()=>{O(!1)},onFocus:()=>{O(!0)},onChange:tn,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:Ce,renderOption:({document:Ut,highlight:gn})=>o.createElement(g.TechDocsSearchResultListItem,{result:Ut,lineClamp:3,asListItem:!1,asLink:!1,title:Ut.title,highlight:gn}),loading:_e,inputDebounceTime:C,inputPlaceholder:`Search ${st||He.name} docs`,freeSolo:!1})},he=ie=>{const He={term:"",types:["techdocs"],pageCursor:"",filters:ie.entityId};return o.createElement(M.Nd,{initialState:He},o.createElement(x,{...ie}))},Fe=(0,V.Z)(ie=>(0,I.Z)({paper:{width:"100%",[ie.breakpoints.up("sm")]:{width:"75%"},[ie.breakpoints.up("md")]:{width:"50%"},padding:ie.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:ie.palette.background.default}})),dt=({buildLog:ie,onClose:He})=>{const st=Fe(),C=ie.length===0?"Waiting for logs...":ie.join(`
`);return o.createElement(W.Z,{container:!0,direction:"column",className:st.root,spacing:0,wrap:"nowrap"},o.createElement(W.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},o.createElement(tt.Z,{variant:"h5"},"Build Details"),o.createElement(Xe.Z,{key:"dismiss",title:"Close the drawer",onClick:He,color:"inherit"},o.createElement(Qe.Z,null))),o.createElement(W.Z,{item:!0,xs:!0},o.createElement(m.nU,{text:C,classes:{root:st.logs}})))},qt=({buildLog:ie})=>{const He=Fe(),[st,C]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(r.Z,{color:"inherit",onClick:()=>C(!0)},"Show Build Logs"),o.createElement(je.ZP,{classes:{paper:He.paper},anchor:"right",open:st,onClose:()=>C(!1)},o.createElement(dt,{buildLog:ie,onClose:()=>C(!1)})))},Ie=({errorMessage:ie})=>{const He=(0,le.u)(le.p).getOptionalString("techdocs.builder"),st=(0,Le.z$)(),{entityRef:C}=(0,Y.x1)(),_=(0,p.TH)();(0,o.useEffect)(()=>{const{pathname:D,search:ue,hash:_e}=_;st.captureEvent("not-found",`${D}${ue}${_e}`,{attributes:C})},[st,C,_]);let O="";return He!=="local"&&(O="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),o.createElement(m.mf,{status:"404",statusMessage:ie||"Documentation not found",additionalInfo:O})},Be=(0,V.Z)(ie=>({root:{marginBottom:ie.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),ct=()=>{let ie=null;const He=Be(),{state:st,contentReload:C,contentErrorMessage:_,syncErrorMessage:O,buildLog:D}=Q();return st==="INITIAL_BUILD"&&(ie=o.createElement(Ze.Z,{classes:{root:He.root},variant:"outlined",severity:"info",icon:o.createElement(ye.Z,{size:"24px"}),action:o.createElement(qt,{buildLog:D})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),st==="CONTENT_STALE_REFRESHING"&&(ie=o.createElement(Ze.Z,{variant:"outlined",severity:"info",icon:o.createElement(ye.Z,{size:"24px"}),action:o.createElement(qt,{buildLog:D}),classes:{root:He.root}},"A newer version of this documentation is being prepared and will be available shortly.")),st==="CONTENT_STALE_READY"&&(ie=o.createElement(Ze.Z,{variant:"outlined",severity:"success",action:o.createElement(r.Z,{color:"inherit",onClick:()=>C()},"Refresh"),classes:{root:He.root}},"A newer version of this documentation is now available, please refresh to view.")),st==="CONTENT_STALE_ERROR"&&(ie=o.createElement(Ze.Z,{variant:"outlined",severity:"error",action:o.createElement(qt,{buildLog:D}),classes:{root:He.root,message:He.message}},"Building a newer version of this documentation failed."," ",O)),st==="CONTENT_NOT_FOUND"&&(ie=o.createElement(o.Fragment,null,O&&o.createElement(Ze.Z,{variant:"outlined",severity:"error",action:o.createElement(qt,{buildLog:D}),classes:{root:He.root,message:He.message}},"Building a newer version of this documentation failed."," ",O),o.createElement(Ie,{errorMessage:_}))),ie},Ot=/main\.[A-Fa-f0-9]{8}\.min\.css$/,Ct=/^https:\/\/fonts\.googleapis\.com/,$t=/^https:\/\/fonts\.gstatic\.com/,Pt=ie=>ie.nodeName==="LINK",$e=ie=>{const He=(ie==null?void 0:ie.getAttribute("href"))||"",st=He.match(Ot),C=He.match(Ct),_=He.match($t);return st||C||_},qe=ie=>(Pt(ie)&&!$e(ie)&&ie.remove(),ie),Ee=ie=>ie.nodeName==="IFRAME",G=(ie,He)=>{const st=ie.getAttribute("src")||"";try{const{host:C}=new URL(st);return He.includes(C)}catch{return!1}},de=ie=>He=>(Ee(He)&&!G(He,ie)&&He.remove(),He),Ue=()=>{const ie=(0,le.u)(le.p);return(0,o.useMemo)(()=>ie.getOptionalConfig("techdocs.sanitizer"),[ie])},nt=()=>{const ie=Ue();return(0,o.useCallback)(async He=>{const st=ie==null?void 0:ie.getOptionalStringArray("allowedIframeHosts");mt().addHook("beforeSanitizeElements",qe);const C=["link"];return st&&(C.push("iframe"),mt().addHook("beforeSanitizeElements",de(st))),mt().sanitize(He.outerHTML,{ADD_TAGS:C,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[ie])};var it=({theme:ie})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${ie.palette.text.primary};
  --md-default-fg-color--light: ${ie.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,X.$n)(ie.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,X.$n)(ie.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${ie.palette.background.default};
  --md-default-bg-color--light: ${ie.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,X.$n)(ie.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,X.$n)(ie.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${ie.palette.primary.main};
  --md-primary-fg-color--light: ${ie.palette.primary.light};
  --md-primary-fg-color--dark: ${ie.palette.primary.dark};
  --md-primary-bg-color: ${ie.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,X.$n)(ie.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${ie.shadows[1]};
  --md-shadow-z2: ${ie.shadows[2]};
  --md-shadow-z3: ${ie.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${ie.palette.text.primary};
  --md-code-bg-color: ${ie.palette.background.paper};
  --md-code-hl-color: ${(0,X.Fq)(ie.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${ie.palette.type==="dark"?ie.palette.primary.light:ie.palette.primary.dark};
  --md-code-hl-function-color: ${ie.palette.type==="dark"?ie.palette.secondary.light:ie.palette.secondary.dark};
  --md-code-hl-string-color: ${ie.palette.type==="dark"?ie.palette.success.light:ie.palette.success.dark};
  --md-code-hl-number-color: ${ie.palette.type==="dark"?ie.palette.error.light:ie.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${ie.palette.link};
  --md-typeset-table-color: ${ie.palette.text.primary};
  --md-typeset-del-color: ${ie.palette.type==="dark"?(0,X.Fq)(ie.palette.error.dark,.5):(0,X.Fq)(ie.palette.error.light,.5)};
  --md-typeset-ins-color: ${ie.palette.type==="dark"?(0,X.Fq)(ie.palette.success.dark,.5):(0,X.Fq)(ie.palette.success.light,.5)};
  --md-typeset-mark-color: ${ie.palette.type==="dark"?(0,X.Fq)(ie.palette.warning.dark,.5):(0,X.Fq)(ie.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,Rt=({theme:ie})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${ie.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const en="224px";var rn=({theme:ie,sidebar:He})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${ie.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${ie.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link, .md-footer__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${He.isPinned?`calc(-12.1rem + ${en})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const Ae=["h1","h2","h3","h4","h5","h6"];var De=({theme:ie})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${Ae.reduce((He,st)=>{var C;const _=(C=ie.typography.htmlFontSize)!=null?C:16,O=ie.typography[st],{lineHeight:D,fontFamily:ue,fontWeight:_e,fontSize:oe}=O,Ce=Ne=>{let We=1;return typeof Ne=="number"&&(We=Ne/_*.6),typeof Ne=="string"&&(We=Ne.replace("rem","")),`calc(${We} * var(--md-typeset-font-size))`};return He.concat(`
    .md-typeset ${st} {
      color: var(--md-default-fg-color);
      line-height: ${D};
      font-family: ${ue};
      font-weight: ${_e};
      font-size: ${Ce(oe)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${ie.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,w=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,H=({theme:ie})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${ie.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${ie.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${ie.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${ie.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${ie.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const te=[it,Rt,rn,De,w,H],ut=()=>(0,m.Pf)(),K=()=>{const ie=ut(),He=(0,Z.Z)();return(0,o.useMemo)(()=>{const st={theme:He,sidebar:ie};return te.reduce((C,_)=>C+_(st),"")},[He,ie])},ee=()=>{const ie=K();return(0,o.useCallback)(He=>(He.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${ie}</style>`),He),[ie])},Ve=(ie,He,st)=>{const C=ie==="src"&&He.endsWith(".svg"),_=!He.match(/^([a-z]*:)?\/\//i),O=He.startsWith(st);return C&&(_||O)},lt=({techdocsStorageApi:ie,entityId:He,path:st})=>async C=>{const _=await ie.getApiOrigin(),O=async(D,ue)=>{for(const _e of D)if(_e.hasAttribute(ue)){const oe=_e.getAttribute(ue);if(!oe)return;const Ce=await ie.getBaseUrl(oe,He,st);if(Ve(ue,oe,_))try{const We=await(await fetch(Ce,{credentials:"include"})).text();_e.setAttribute(ue,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(We)))}`)}catch{_e.setAttribute("alt",`Error: ${oe}`)}else _e.setAttribute(ue,Ce)}};return await Promise.all([O(C.querySelectorAll("img"),"src"),O(C.querySelectorAll("script"),"src"),O(C.querySelectorAll("source"),"src"),O(C.querySelectorAll("link"),"href"),O(C.querySelectorAll("a[download]"),"href")]),C};let Lt;Lt=Promise.resolve().then(e.t.bind(e,28316,19));function zt(ie,He){Lt.then(st=>{"createRoot"in st?st.createRoot(He).render(ie):st.render(ie,He)})}const Gt=ie=>He=>{var st;const C=He.querySelector('[title="Edit this page"]');if(!C||!C.href)return He;const _=new URL(C.href),O=ie.byUrl(_);if((O==null?void 0:O.type)!=="github"&&(O==null?void 0:O.type)!=="gitlab")return He;const D=((st=He.querySelector("article>h1"))==null?void 0:st.childNodes[0].textContent)||"",ue=encodeURIComponent(`Documentation Feedback: ${D}`),_e=encodeURIComponent(`Page source:
${C.href}

Feedback:`),oe=(O==null?void 0:O.type)==="github"?(0,fe.BT)(_.href,"blob"):_.href,Ce=It()(oe),Ne=`/${Ce.organization}/${Ce.name}`,We=C.cloneNode();switch(O==null?void 0:O.type){case"gitlab":We.href=`${_.origin}${Ne}/issues/new?issue[title]=${ue}&issue[description]=${_e}`;break;case"github":We.href=`${_.origin}${Ne}/issues/new?title=${ue}&body=${_e}`;break;default:return He}return zt(o.createElement(Kt.Z),We),We.style.paddingLeft="5px",We.title="Leave feedback for this page",We.id="git-feedback-link",C==null||C.insertAdjacentElement("beforebegin",We),He},an=()=>ie=>{const He=ie.querySelector('.md-header label[for="__drawer"]'),st=ie.querySelector("article");if(!He||!st)return ie;const C=He.cloneNode();return zt(o.createElement(Ft.Z),C),C.id="toggle-sidebar",C.title="Toggle Sidebar",C.classList.add("md-content__button"),C.style.setProperty("padding","0 0 0 5px"),C.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),st==null||st.prepend(C),ie},fn=()=>ie=>(((st,C)=>{Array.from(st).filter(_=>_.hasAttribute(C)).forEach(_=>{const O=_.getAttribute(C);if(O){O.match(/^https?:\/\//i)&&_.setAttribute("target","_blank");try{const D=on(window.location.href);_.setAttribute(C,new URL(O,D).toString())}catch{_.replaceWith(_.textContent||O)}}})})(Array.from(ie.getElementsByTagName("a")),"href"),ie);function on(ie){const He=new URL(ie);return!He.pathname.endsWith("/")&&!He.pathname.endsWith(".html")&&(He.pathname+="/"),He.toString()}const ln=({baseUrl:ie,onClick:He})=>st=>(Array.from(st.getElementsByTagName("a")).forEach(C=>{C.addEventListener("click",_=>{const D=C.getAttribute("href");D&&D.startsWith(ie)&&!C.hasAttribute("download")&&(_.preventDefault(),He(_,D))})}),st),cn=(0,l.Z)(ie=>({tooltip:{fontSize:"inherit",color:ie.palette.text.primary,margin:0,padding:ie.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(ne.ZP),On=()=>o.createElement(re.Z,null,o.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),dn=({text:ie})=>{const[He,st]=(0,o.useState)(!1),[,C]=(0,Ye.Z)(),_=(0,o.useCallback)(()=>{C(ie),st(!0)},[ie,C]),O=(0,o.useCallback)(()=>{st(!1)},[st]);return o.createElement(cn,{title:"Copied to clipboard",placement:"left",open:He,onClose:O,leaveDelay:1e3},o.createElement(Xe.Z,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:_},o.createElement(On,null)))},Pn=ie=>He=>{var st;const C=He.querySelectorAll("pre > code");for(const _ of C){const O=_.textContent||"",D=document.createElement("div");(st=_==null?void 0:_.parentElement)==null||st.prepend(D),zt(o.createElement(se.Z,{theme:ie},o.createElement(dn,{text:O})),D)}return He},ce=()=>ie=>{var He;return(He=ie.querySelector(".md-header"))==null||He.remove(),ie},ae=()=>ie=>{var He,st;return(He=ie.querySelector(".md-footer .md-copyright"))==null||He.remove(),(st=ie.querySelector(".md-footer-copyright"))==null||st.remove(),ie},ke=({onLoading:ie,onLoaded:He})=>st=>(ie(),st.addEventListener(Y.Ox,function C(){He(),st.removeEventListener(Y.Ox,C)}),st),vt=()=>ie=>(setTimeout(()=>{const He=ie==null?void 0:ie.querySelectorAll("li.md-nav__item--active");He.length!==0&&(He.forEach(C=>{const _=C==null?void 0:C.querySelector("input");_!=null&&_.checked||_==null||_.click()}),He[He.length-1].scrollIntoView())},200),ie),jt=async(ie,He)=>{let st;if(typeof ie=="string")st=new DOMParser().parseFromString(ie,"text/html").documentElement;else if(ie instanceof Element)st=ie;else throw new Error("dom is not a recognized type");for(const C of He)st=await C(st);return st};function Vt(ie,He){const st=new URL(He),C=`${st.origin}${st.pathname.replace(/\/$/,"")}`,_=ie.replace(C,"").replace(/^\/+/,""),O=new URL(`http://localhost/${_}`);return`${O.pathname}${O.search}${O.hash}`}function An(){const ie=(0,p.s0)(),st=(0,le.u)(le.p).getOptionalString("app.baseUrl");return(0,o.useCallback)(_=>{let O=_;if(st)try{O=Vt(_,st)}catch{}ie(O)},[ie,st])}const Nn="screen and (max-width: 76.1875em)",Fn=ie=>{const He=An(),st=(0,Z.Z)(),C=(0,ve.Z)(Nn),_=nt(),O=ee(),D=(0,Le.z$)(),ue=(0,le.u)(Y.Dl),_e=(0,le.u)(St.q3),{state:oe,path:Ce,content:Ne}=Q(),[We,pt]=(0,o.useState)(null),nn=(0,Y.ux)(We),tn=(0,o.useCallback)(()=>{if(!We)return;We.querySelectorAll(".md-sidebar").forEach(En=>{var vn,Yn,Vn;if(C)En.style.top="0px";else{const In=document==null?void 0:document.querySelector(".techdocs-reader-page"),xn=(vn=In==null?void 0:In.getBoundingClientRect().top)!=null?vn:0;let zn=(Yn=We.getBoundingClientRect().top)!=null?Yn:0;const sn=We.querySelector(".md-container > .md-tabs"),Rn=(Vn=sn==null?void 0:sn.getBoundingClientRect().height)!=null?Vn:0;zn<xn&&(zn=xn),En.style.top=`${Math.max(zn,0)+Rn}px`}En.style.setProperty("opacity","1")})},[We,C]);(0,o.useEffect)(()=>(window.addEventListener("resize",tn),window.addEventListener("scroll",tn,!0),()=>{window.removeEventListener("resize",tn),window.removeEventListener("scroll",tn,!0)}),[We,tn]);const Ut=(0,o.useCallback)(()=>{if(!We)return;const hn=We.querySelector(".md-footer");hn&&(hn.style.width=`${We.getBoundingClientRect().width}px`)},[We]);(0,o.useEffect)(()=>(window.addEventListener("resize",Ut),()=>{window.removeEventListener("resize",Ut)}),[We,Ut]),(0,o.useEffect)(()=>{nn||(Ut(),tn())},[oe,nn,Ut,tn]);const gn=(0,o.useCallback)((hn,En)=>jt(hn,[_,lt({techdocsStorageApi:ue,entityId:ie,path:En}),fn(),an(),ce(),ae(),Gt(_e),O]),[ie,_e,ue,_,O]),pn=(0,o.useCallback)(async hn=>jt(hn,[vt(),Pn(st),ln({baseUrl:window.location.origin,onClick:(En,vn)=>{var Yn,Vn;const In=En.ctrlKey||En.metaKey,xn=new URL(vn),zn=((Yn=En.target)==null?void 0:Yn.innerText)||vn,sn=vn.replace(window.location.origin,"");D.captureEvent("click",zn,{attributes:{to:sn}}),xn.hash?In?window.open(vn,"_blank"):(He(vn),(Vn=hn==null?void 0:hn.querySelector(`[id="${xn.hash.slice(1)}"]`))==null||Vn.scrollIntoView()):In?window.open(vn,"_blank"):He(vn)}}),ke({onLoading:()=>{},onLoaded:()=>{var En;(En=hn.querySelector(".md-nav__title"))==null||En.removeAttribute("for")}}),ke({onLoading:()=>{Array.from(hn.querySelectorAll(".md-sidebar")).forEach(vn=>{vn.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[st,He,D]);return(0,o.useEffect)(()=>{if(!Ne)return()=>{};let hn=!0;return gn(Ne,Ce).then(async En=>{if(!(En!=null&&En.innerHTML)||!hn)return;window.scroll({top:0});const vn=await pn(En);pt(vn)}),()=>{hn=!1}},[Ne,Ce,gn,pn]),We},sr=()=>{const ie=(0,Y.$L)(),{shadowRoot:He}=(0,Y.x1)(),st=He==null?void 0:He.querySelector('[data-md-component="content"]'),C=He==null?void 0:He.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let _=C==null?void 0:C.querySelector('[data-techdocs-addons-location="primary sidebar"]');_||(_=document.createElement("div"),_.setAttribute("data-techdocs-addons-location","primary sidebar"),C==null||C.prepend(_));const O=He==null?void 0:He.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let D=O==null?void 0:O.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return D||(D=document.createElement("div"),D.setAttribute("data-techdocs-addons-location","secondary sidebar"),O==null||O.prepend(D)),o.createElement(o.Fragment,null,o.createElement(be.Z,{container:_},ie.renderComponentsByLocation(Y.oZ.PrimarySidebar)),o.createElement(be.Z,{container:st},ie.renderComponentsByLocation(Y.oZ.Content)),o.createElement(be.Z,{container:D},ie.renderComponentsByLocation(Y.oZ.SecondarySidebar)))},gr=(0,V.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),Jn=Ge(ie=>{var He;const{withSearch:st=!0,onReady:C}=ie,_=gr(),{entityMetadata:{value:O,loading:D},entityRef:ue,setShadowRoot:_e}=(0,Y.x1)(),oe=Fn(ue),Ce=window.location.pathname,Ne=window.location.hash,We=(0,Y.ux)(oe),[pt]=(0,Y.pV)([`[id="${Ne.slice(1)}"]`]);(0,o.useEffect)(()=>{var tn;We||(Ne?pt&&pt.scrollIntoView():(tn=document==null?void 0:document.querySelector("header"))==null||tn.scrollIntoView())},[Ce,Ne,pt,We]);const nn=(0,o.useCallback)(tn=>{_e(tn),C instanceof Function&&C()},[_e,C]);return D===!1&&!O?o.createElement(m.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):oe?o.createElement(m.VY,null,o.createElement(W.Z,{container:!0},o.createElement(W.Z,{xs:12,item:!0},o.createElement(ct,null)),st&&o.createElement(W.Z,{className:_.search,xs:"auto",item:!0},o.createElement(he,{entityId:ue,entityTitle:(He=O==null?void 0:O.metadata)==null?void 0:He.title})),o.createElement(W.Z,{xs:12,item:!0},o.createElement(Y.VA,{element:oe,onAppend:nn},o.createElement(sr,null))))):o.createElement(m.VY,null,o.createElement(W.Z,{container:!0},o.createElement(W.Z,{xs:12,item:!0},o.createElement(ct,null))))}),pr=null,Cr=o.createElement(we.Z,{animation:"wave",variant:"text",height:40}),xr=ie=>{const{palette:{common:{white:He}}}=(0,Z.Z)(),{children:st}=ie,C=(0,Y.$L)(),_=(0,le.u)(le.p),{title:O,setTitle:D,subtitle:ue,setSubtitle:_e,entityRef:oe,metadata:{value:Ce,loading:Ne},entityMetadata:{value:We,loading:pt}}=(0,Y.x1)();(0,o.useEffect)(()=>{Ce&&(D(Ce.site_name),_e(()=>{let{site_description:In}=Ce;return(!In||In==="None")&&(In=""),In}))},[Ce,D,_e]);const nn=_.getOptional("app.title")||"Backstage",tn=[O,ue,nn].filter(Boolean).join(" | "),{locationMetadata:Ut,spec:gn}=We||{},pn=gn==null?void 0:gn.lifecycle,hn=We?(0,Qt.g)(We,Nt.S4):[],En=(0,Le.tg)(wt.r)(),vn=o.createElement(o.Fragment,null,o.createElement(m.i9,{label:(0,bt.capitalize)((We==null?void 0:We.kind)||"entity"),value:o.createElement(Yt.dx,{color:"inherit",entityRef:oe,title:We==null?void 0:We.metadata.title,defaultKind:"Component"})}),hn.length>0&&o.createElement(m.i9,{label:"Owner",value:o.createElement(Yt.rI,{color:"inherit",entityRefs:hn,defaultKind:"group"})}),pn?o.createElement(m.i9,{label:"Lifecycle",value:String(pn)}):null,Ut&&Ut.type!=="dir"&&Ut.type!=="file"?o.createElement(m.i9,{label:"",value:o.createElement(W.Z,{container:!0,direction:"column",alignItems:"center",style:{color:He}},o.createElement(W.Z,{style:{padding:0},item:!0},o.createElement(kt.Z,{style:{marginTop:"-25px"}})),o.createElement(W.Z,{style:{padding:0},item:!0},"Source")),url:Ut.target}):null);return!pt&&We===void 0||!Ne&&Ce===void 0?null:o.createElement(m.h4,{type:"Documentation",typeLink:En,title:O||Cr,subtitle:ue===""?void 0:ue||Cr},o.createElement(_t.Z,{titleTemplate:"%s"},o.createElement("title",null,tn)),vn,st,C.renderComponentsByLocation(Y.oZ.Header))},vr=(0,V.Z)(ie=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:ie.spacing(3,3,0),"@media print":{display:"none"}}})),Lr=ie=>{const He=vr(),[st,C]=(0,o.useState)(null),_=(0,o.useCallback)(Ne=>{C(Ne.currentTarget)},[]),O=(0,o.useCallback)(()=>{C(null)},[]),{entityMetadata:{value:D,loading:ue}}=(0,Y.x1)(),_e=(0,Y.$L)(),oe=_e.renderComponentsByLocation(Y.oZ.Subheader),Ce=_e.renderComponentsByLocation(Y.oZ.Settings);return!oe&&!Ce||ue===!1&&!D?null:o.createElement(u.Z,{classes:He,...ie.toolbarProps},o.createElement(F.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},oe,Ce?o.createElement(o.Fragment,null,o.createElement(ne.ZP,{title:"Settings"},o.createElement(Xe.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:_},o.createElement(Xt.Z,null))),o.createElement(R.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:st,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(st),onClose:O,keepMounted:!0},o.createElement("div",null,Ce))):null))},Ar=ie=>{const{withSearch:He,withHeader:st=!0}=ie;return o.createElement(m.T3,{themeId:"documentation"},st&&o.createElement(xr,null),o.createElement(Lr,null),o.createElement(Jn,{withSearch:He}))},Mr=ie=>{const{kind:He,name:st,namespace:C}=(0,Le.Oi)(wt.b),{children:_,entityRef:O={kind:He,name:st,namespace:C}}=ie,D=(0,p.pC)();if(!_){const oe=(D?o.Children.toArray(D.props.children):[]).flatMap(Ce=>{var Ne,We;return(We=(Ne=Ce==null?void 0:Ce.props)==null?void 0:Ne.children)!=null?We:[]}).find(Ce=>!(0,Le.IY)(Ce,Y.Zz)&&!(0,Le.IY)(Ce,Y.jM));return o.createElement(Y.ZS,{entityRef:O},oe||o.createElement(Ar,null))}return o.createElement(Y.ZS,{entityRef:O},({metadata:ue,entityMetadata:_e,onReady:oe})=>o.createElement("div",{className:"techdocs-reader-page"},o.createElement(m.T3,{themeId:"documentation"},_ instanceof Function?_({entityRef:O,techdocsMetadataValue:ue.value,entityMetadataValue:_e.value,onReady:oe}):_)))}},77529:(Un,Ht,e)=>{"use strict";e.r(Ht),e.d(Ht,{TechDocsSearchResultListItem:()=>Xe});var o=e(2784),p=e(79692),m=e(49378),Y=e(86136),V=e(90436),I=e(49558),W=e(42054);const tt=(0,p.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),Xe=r=>{const{result:je,highlight:ye,lineClamp:X=5,asListItem:Z=!0,asLink:l=!0,title:ne,icon:re}=r,se=tt(),ve=({children:F})=>l?o.createElement(I.rU,{noTrack:!0,to:je.location},F):o.createElement(o.Fragment,null,F),be=()=>{const F=ye!=null&&ye.fields.title?o.createElement(W.b,{text:ye.fields.title,preTag:ye.preTag,postTag:ye.postTag}):je.title,R=ye!=null&&ye.fields.entityTitle?o.createElement(W.b,{text:ye.fields.entityTitle,preTag:ye.preTag,postTag:ye.postTag}):je.entityTitle,M=ye!=null&&ye.fields.name?o.createElement(W.b,{text:ye.fields.name,preTag:ye.preTag,postTag:ye.postTag}):je.name;return je?o.createElement(m.Z,{className:se.itemText,primaryTypographyProps:{variant:"h6"},primary:o.createElement(ve,null,ne||o.createElement(o.Fragment,null,F," | ",R!=null?R:M," docs")),secondary:o.createElement(V.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:X,overflow:"hidden"},color:"textSecondary",variant:"body2"},ye!=null&&ye.fields.text?o.createElement(W.b,{text:ye.fields.text,preTag:ye.preTag,postTag:ye.postTag}):je.text)}):null},u=({children:F})=>Z?o.createElement(o.Fragment,null,re&&o.createElement(Y.Z,null,typeof re=="function"?re(je):re),o.createElement("div",{className:se.flexContainer},F)):o.createElement(o.Fragment,null,F);return o.createElement(u,null,o.createElement(be,null))}},67266:(Un,Ht,e)=>{"use strict";e.d(Ht,{T:()=>tt,a:()=>Xe,b:()=>je,c:()=>ye,r:()=>r});var o=e(32272),p=e(76372),m=e.n(p),Y=e(30705),V=Object.defineProperty,I=(X,Z,l)=>Z in X?V(X,Z,{enumerable:!0,configurable:!0,writable:!0,value:l}):X[Z]=l,W=(X,Z,l)=>(I(X,typeof Z!="symbol"?Z+"":Z,l),l);class tt{constructor(Z){W(this,"configApi"),W(this,"discoveryApi"),W(this,"fetchApi"),this.configApi=Z.configApi,this.discoveryApi=Z.discoveryApi,this.fetchApi=Z.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(Z){const{kind:l,namespace:ne,name:re}=Z,ve=`${await this.getApiOrigin()}/metadata/techdocs/${ne}/${l}/${re}`,be=await this.fetchApi.fetch(`${ve}`);if(!be.ok)throw await o.VL.fromResponse(be);return await be.json()}async getEntityMetadata(Z){const{kind:l,namespace:ne,name:re}=Z,ve=`${await this.getApiOrigin()}/metadata/entity/${ne}/${l}/${re}`,be=await this.fetchApi.fetch(`${ve}`);if(!be.ok)throw await o.VL.fromResponse(be);return await be.json()}}class Xe{constructor(Z){W(this,"configApi"),W(this,"discoveryApi"),W(this,"identityApi"),W(this,"fetchApi"),this.configApi=Z.configApi,this.discoveryApi=Z.discoveryApi,this.identityApi=Z.identityApi,this.fetchApi=Z.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var Z;return(Z=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?Z:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(Z,l){const{kind:ne,namespace:re,name:se}=Z,be=`${await this.getStorageUrl()}/${re}/${ne}/${se}/${l}`,u=await this.fetchApi.fetch(`${be.endsWith("/")?be:`${be}/`}index.html`);let F="";switch(u.status){case 404:throw F="Page not found. ",l||(F+="This could be because there is no index.md file in the root of the docs directory of this repository."),new o.dR(F);case 500:throw F="Could not generate documentation or an error in the TechDocs backend. ",new Error(F)}return u.text()}async syncEntityDocs(Z,l=()=>{}){const{kind:ne,namespace:re,name:se}=Z,be=`${await this.getApiOrigin()}/sync/${re}/${ne}/${se}`,{token:u}=await this.identityApi.getCredentials();return new Promise((F,R)=>{const M=new p.EventSourcePolyfill(be,{withCredentials:!0,headers:u?{Authorization:`Bearer ${u}`}:{}});M.addEventListener("log",g=>{g.data&&l(JSON.parse(g.data))}),M.addEventListener("finish",g=>{let Ze=!1;g.data&&({updated:Ze}=JSON.parse(g.data)),F(Ze?"updated":"cached")}),M.onerror=g=>{switch(M.close(),g.status){case 404:R(new o.dR(g.message));return;default:R(new Error(g.data));return}}})}async getBaseUrl(Z,l,ne){const{kind:re,namespace:se,name:ve}=l,u=`${await this.getApiOrigin()}/static/docs/${se}/${re}/${ve}/${ne}`;return new URL(Z,u.endsWith("/")?u:`${u}/`).toString()}}const r=(0,Y.NT)({id:"techdocs:index-page"}),je=(0,Y.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),ye=(0,Y.NT)({id:"techdocs:catalog-reader-view"})},54892:(Un,Ht,e)=>{"use strict";e.d(Ht,{L:()=>ct,S:()=>Ct,a:()=>Pt,e:()=>Xt});var o=e(73557),p=e(2784),m=e(90436),Y=e(77277),V=e(79692),I=e(43434),W=e(38402),tt=e(86136),Xe=e(49378),r=e(80030),je=e(60905),ye=e(9520),X=e(11776),Z=e(82938),l=e(86619),ne=e(61837),re=e(48348),se=e(12231),ve=e(49558),be=e(11640),u=e(30204),F=e(30705),R=e(33375),M=e(64279),g=e(71554),Ze=e(43054),we=e(72164),Qe=e(59324),le=e(13737),Le=e(31168),Se=e(83487),Ke=e(40080),St=e(64304);const L=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,mt=()=>p.createElement(ve.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:p.createElement(p.Fragment,null,p.createElement(m.Z,{variant:"body1"},"Open ",p.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),p.createElement(ve.Oi,{text:L,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),p.createElement(Y.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),fe=(0,V.Z)($e=>({avatar:{width:({size:qe})=>qe,height:({size:qe})=>qe,fontSize:({size:qe})=>qe*.7,border:`1px solid ${$e.palette.textSubtle}`}})),Kt=({size:$e,picture:qe})=>{const{iconSize:Ee}=ve.sidebarConfig,G=fe($e?{size:$e}:{size:Ee});return p.createElement(I.Z,{src:qe,className:G.avatar})},Et={},It=$e=>{const{title:qe,description:Ee,icon:G,apiRef:de}=$e,Ue=(0,u.u)(de),nt=(0,u.u)(u.s),[it,Rt]=(0,p.useState)(!1),[en,rn]=(0,p.useState)(Et);return(0,p.useEffect)(()=>{let Ae=!1;const De=Ue.sessionState$().subscribe(w=>{w!==u.S.SignedIn&&(rn(Et),Rt(!1)),Ae||Ue.getProfile({optional:!0}).then(H=>{Ae||(w===u.S.SignedIn&&Rt(!0),H&&rn(H))})});return()=>{Ae=!0,De.unsubscribe()}},[Ue]),p.createElement(W.Z,null,p.createElement(tt.Z,null,p.createElement(G,null)),p.createElement(Xe.Z,{primary:qe,secondary:p.createElement(r.ZP,{placement:"top",arrow:!0,title:Ee},p.createElement(je.Z,{container:!0,spacing:6},p.createElement(je.Z,{item:!0},p.createElement(Kt,{size:48,picture:en.picture})),p.createElement(je.Z,{item:!0,xs:12,sm:!0,container:!0},p.createElement(je.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},p.createElement(je.Z,{item:!0,xs:!0},p.createElement(m.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},en.displayName),p.createElement(m.Z,{variant:"body2",color:"textSecondary"},en.email),p.createElement(m.Z,{variant:"body2",color:"textSecondary"},Ee)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),p.createElement(ye.Z,null,p.createElement(r.ZP,{placement:"top",arrow:!0,title:it?`Sign out from ${qe}`:`Sign in to ${qe}`},p.createElement(Y.Z,{variant:"outlined",color:"primary",onClick:()=>{(it?Ue.signOut():Ue.signIn()).catch(De=>nt.post(De))}},it?"Sign out":"Sign in"))))},Ft=$e=>{const{configuredProviders:qe}=$e;return p.createElement(p.Fragment,null,qe.includes("google")&&p.createElement(It,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:u.g,icon:be.Z}),qe.includes("microsoft")&&p.createElement(It,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:u.m,icon:be.Z}),qe.includes("github")&&p.createElement(It,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:u.d,icon:be.Z}),qe.includes("gitlab")&&p.createElement(It,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:u.e,icon:be.Z}),qe.includes("okta")&&p.createElement(It,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:u.o,icon:be.Z}),qe.includes("bitbucket")&&p.createElement(It,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:u.i,icon:be.Z}),qe.includes("onelogin")&&p.createElement(It,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:u.h,icon:be.Z}),qe.includes("atlassian")&&p.createElement(It,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:u.k,icon:be.Z}),qe.includes("bitbucketServer")&&p.createElement(It,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:u.j,icon:be.Z}))},Ye=$e=>{const{providerSettings:qe}=$e,G=(0,u.u)(u.p).getOptionalConfig("auth.providers"),de=(G==null?void 0:G.keys())||[],Ue=qe!=null?qe:p.createElement(Ft,{configuredProviders:de});return!qe&&!(de!=null&&de.length)?p.createElement(mt,null):p.createElement(ve.rJ,{title:"Available Providers"},p.createElement(X.Z,{dense:!0},Ue))},_t=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,kt=()=>p.createElement(ve.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:p.createElement(p.Fragment,null,p.createElement(m.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),p.createElement(ve.Oi,{text:_t,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),p.createElement(Y.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),Qt=$e=>$e.description?$e.description:$e.pluginId?`Registered in ${$e.pluginId} plugin`:"Registered in the application",Yt=({flag:$e,enabled:qe,toggleHandler:Ee})=>p.createElement(W.Z,{divider:!0,button:!0,onClick:()=>Ee($e.name)},p.createElement(tt.Z,null,p.createElement(r.ZP,{placement:"top",arrow:!0,title:qe?"Disable":"Enable"},p.createElement(Z.Z,{color:"primary",checked:qe,name:$e.name}))),p.createElement(Xe.Z,{primary:$e.name,secondary:Qt($e)})),Nt=($e,qe)=>{const Ee=$e.filter(de=>qe.isActive(de.name)),G=$e.filter(de=>!qe.isActive(de.name));return[...Ee,...G]},bt=()=>{const $e=(0,u.u)(u.f),qe=p.useRef(),Ee=$e.getRegisteredFlags(),G=Nt(Ee,$e),[de]=(0,p.useState)(G),Ue=Object.fromEntries(de.map(({name:H})=>[H,$e.isActive(H)])),[nt,it]=(0,p.useState)(Ue),[Rt,en]=(0,p.useState)(""),rn=(0,p.useCallback)(H=>{const te=$e.isActive(H)?u.F.None:u.F.Active;$e.save({states:{[H]:te},merge:!0}),it(ut=>({...ut,[H]:te===u.F.Active}))},[$e]);if(!de.length)return p.createElement(kt,null);const Ae=()=>{var H;en(""),(H=qe==null?void 0:qe.current)==null||H.focus()},De=de.filter(H=>H.name.toLocaleLowerCase("en-US").includes(Rt.toLocaleLowerCase("en-US"))),w=()=>p.createElement(je.Z,{container:!0,style:{justifyContent:"space-between"}},p.createElement(je.Z,{item:!0,xs:6,md:8},p.createElement(m.Z,{variant:"h5"},"Feature Flags"),p.createElement(m.Z,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),de.length>=10&&p.createElement(je.Z,{item:!0,xs:6,md:4},p.createElement(l.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:H=>H&&H.focus(),InputProps:{...Rt.length&&{endAdornment:p.createElement(ne.Z,{"aria-label":"Clear filter",onClick:Ae,edge:"end"},p.createElement(R.Z,null))}},onChange:H=>en(H.target.value),value:Rt})));return p.createElement(ve.rJ,{title:p.createElement(w,null)},p.createElement(X.Z,{dense:!0},De.map(H=>{const te=Boolean(nt[H.name]);return p.createElement(Yt,{key:H.name,flag:H,enabled:te,toggleHandler:rn})})))},Tt=()=>{var $e;const qe=(0,u.u)(u.v),Ee=(0,u.u)(u.l),{value:G,loading:de,error:Ue}=(0,M.default)(async()=>({profile:await qe.getProfileInfo(),identity:await qe.getBackstageIdentity()}),[]);return(0,p.useEffect)(()=>{Ue&&Ee.post({message:`Failed to load user identity: ${Ue}`,severity:"error"})},[Ue,Ee]),de||Ue?{profile:{},displayName:"",loading:de}:{profile:G.profile,backstageIdentity:G.identity,displayName:($e=G.profile.displayName)!=null?$e:G.identity.userEntityRef,loading:de}},wt=(0,V.Z)($e=>({avatar:{width:({size:qe})=>qe,height:({size:qe})=>qe,fontSize:({size:qe})=>qe*.7,border:`1px solid ${$e.palette.textSubtle}`}})),Xt=$e=>{const{size:qe}=$e,{iconSize:Ee}=ve.sidebarConfig,G=wt(qe?{size:qe}:{size:Ee}),{profile:de}=Tt();return p.createElement(I.Z,{src:de.picture,className:G.avatar,alt:"Profile picture"})},Re=()=>{const $e=(0,u.u)(u.s),qe=(0,u.u)(u.v),[Ee,G]=p.useState(!1),[de,Ue]=p.useState(void 0),nt=Rt=>{Ue(Rt.currentTarget),G(!0)},it=()=>{Ue(void 0),G(!1)};return p.createElement(p.Fragment,null,p.createElement(ne.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:nt},p.createElement(Ze.Z,null)),p.createElement(re.Z,{anchorEl:de,open:Ee,onClose:it},p.createElement(se.Z,{"data-testid":"sign-out",onClick:()=>qe.signOut().catch(Rt=>$e.post(Rt))},p.createElement(tt.Z,null,p.createElement(g.Z,null)),"Sign Out")))},j=()=>{const{profile:$e,displayName:qe}=Tt();return p.createElement(ve.rJ,{title:"Profile",variant:"gridItem"},p.createElement(je.Z,{container:!0,spacing:6},p.createElement(je.Z,{item:!0},p.createElement(Xt,{size:96})),p.createElement(je.Z,{item:!0,xs:12,sm:!0,container:!0},p.createElement(je.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},p.createElement(je.Z,{item:!0,xs:!0},p.createElement(m.Z,{variant:"subtitle1",gutterBottom:!0},qe),$e.email&&p.createElement(m.Z,{variant:"body2",color:"textSecondary"},$e.email))),p.createElement(je.Z,{item:!0},p.createElement(Re,null)))))},v=()=>{const{isPinned:$e,toggleSidebarPinState:qe}=(0,ve.Pf)();return p.createElement(W.Z,null,p.createElement(Xe.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),p.createElement(ye.Z,null,p.createElement(r.ZP,{placement:"top",arrow:!0,title:`${$e?"Unpin":"Pin"} Sidebar`},p.createElement(Z.Z,{color:"primary",checked:$e,onChange:()=>qe(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},k=({id:$e,activeId:qe,icon:Ee})=>Ee?(0,p.cloneElement)(Ee,{color:qe===$e?"primary":void 0}):p.createElement(Qe.Z,{color:qe===$e?"primary":void 0}),Q=(0,V.Z)($e=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[$e.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[$e.breakpoints.down("xs")]:{paddingLeft:0}}})),q=({children:$e,title:qe,value:Ee,...G})=>p.createElement(r.ZP,{placement:"top",arrow:!0,title:qe},p.createElement(le.Z,{value:Ee,...G},$e)),Ge=()=>{const $e=Q(),qe=(0,u.u)(u.n),Ee=(0,we.Z)(qe.activeThemeId$(),qe.getActiveThemeId()),G=qe.getInstalledThemes(),{t:de}=(0,Se.iH)(Ke.a),Ue=(nt,it)=>{G.some(Rt=>Rt.id===it)?qe.setActiveThemeId(it):qe.setActiveThemeId(void 0)};return p.createElement(W.Z,{className:$e.list,classes:{container:$e.container}},p.createElement(Xe.Z,{className:$e.listItemText,primary:de("theme"),secondary:de("change_the_theme_mode")}),p.createElement(ye.Z,{className:$e.listItemSecondaryAction},p.createElement(Le.Z,{exclusive:!0,size:"small",value:Ee!=null?Ee:"auto",onChange:Ue},G.map(nt=>{const it=nt.id,Rt=nt.icon,en=nt.title||(it==="light"||it==="dark"?de(`theme_${it}`):it);return p.createElement(q,{key:it,title:de("select_theme",{theme:en}),value:it},p.createElement(p.Fragment,null,en,"\xA0",p.createElement(k,{id:it,icon:Rt,activeId:Ee})))}),p.createElement(r.ZP,{placement:"top",arrow:!0,title:de("select_theme_auto")},p.createElement(le.Z,{value:"auto",selected:Ee===void 0},de("theme_auto"),"\xA0",p.createElement(Qe.Z,{color:Ee===void 0?"primary":void 0}))))))},U=(0,V.Z)($e=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[$e.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[$e.breakpoints.down("xs")]:{paddingLeft:0}}})),x=({children:$e,title:qe,value:Ee,...G})=>p.createElement(r.ZP,{placement:"top",arrow:!0,title:qe},p.createElement(le.Z,{value:Ee,...G},$e)),he=()=>{const $e=U(),qe=(0,u.u)(Se.IB),{t:Ee}=(0,Se.iH)(Ke.a),[G]=(0,p.useState)(()=>qe.language$()),{language:de}=(0,we.Z)(G,qe.getLanguage()),{languages:Ue}=qe.getAvailableLanguages();if(Ue.length<=1)return null;const nt=(it,Rt)=>{qe.setLanguage(Rt)};return p.createElement(W.Z,{className:$e.list,classes:{container:$e.container}},p.createElement(Xe.Z,{className:$e.listItemText,primary:Ee("language"),secondary:Ee("change_the_language")}),p.createElement(ye.Z,{className:$e.listItemSecondaryAction},p.createElement(Le.Z,{exclusive:!0,size:"small",value:de,onChange:nt},Ue.map(it=>p.createElement(x,{key:it,title:Ee("select_lng",{language:it}),value:it},p.createElement(p.Fragment,null,it))))))},Fe=()=>{const{isMobile:$e}=(0,ve.Pf)();return p.createElement(ve.rJ,{title:"Appearance",variant:"gridItem"},p.createElement(X.Z,{dense:!0},p.createElement(Ge,null),p.createElement(he,null),!$e&&p.createElement(v,null)))},dt=()=>{const{backstageIdentity:$e}=Tt();return $e?p.createElement(je.Z,{container:!0,spacing:1},p.createElement(je.Z,{item:!0,xs:12},p.createElement(m.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",p.createElement(St.rI,{entityRefs:[$e.userEntityRef]}))),p.createElement(je.Z,{item:!0,xs:12},p.createElement(m.Z,{variant:"subtitle1"},"Ownership Entities:"," ",p.createElement(St.rI,{entityRefs:$e.ownershipEntityRefs})))):p.createElement(m.Z,null,"No Backstage Identity")},qt=()=>p.createElement(ve.rJ,{title:"Backstage Identity"},p.createElement(dt,null)),Ie=()=>p.createElement(je.Z,{container:!0,direction:"row",spacing:3},p.createElement(je.Z,{item:!0,xs:12,md:6},p.createElement(j,null)),p.createElement(je.Z,{item:!0,xs:12,md:6},p.createElement(Fe,null)),p.createElement(je.Z,{item:!0,xs:12,md:6},p.createElement(qt,null))),Be="plugin.user-settings.settingsLayout",ct="plugin.user-settings.settingsLayoutRoute",Ot=()=>null;(0,F.R5)(Ot,ct,!0),(0,F.R5)(Ot,"core.gatherMountPoints",!0);const Ct=$e=>{const{title:qe,children:Ee}=$e,{isMobile:G}=(0,ve.Pf)(),de=(0,F.vJ)(Ee,Ue=>Ue.selectByComponentData({key:ct,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(nt=>nt.props));return p.createElement(ve.T3,{themeId:"home"},!G&&p.createElement(ve.h4,{title:qe!=null?qe:"Settings"}),p.createElement(ve.tn,{routes:de}))};(0,F.R5)(Ct,Be,!0),Ct.Route=Ot;const $t=$e=>{const{providerSettings:qe,tabs:Ee}=$e;return p.createElement(Ct,null,p.createElement(Ct.Route,{path:"general",title:"General"},p.createElement(Ie,null)),p.createElement(Ct.Route,{path:"auth-providers",title:"Authentication Providers"},p.createElement(Ye,{providerSettings:qe})),p.createElement(Ct.Route,{path:"feature-flags",title:"Feature Flags"},p.createElement(bt,null)),Ee)},Pt=$e=>{const{providerSettings:qe}=$e,Ee=(0,o.pC)(),G=(0,F.vJ)(Ee,Ue=>Ue.selectByComponentData({key:Be}).getElements()),de=(0,F.vJ)(Ee,Ue=>Ue.selectByComponentData({key:ct}).getElements());return p.createElement(p.Fragment,null,G.length!==0&&G||p.createElement($t,{tabs:de,providerSettings:qe}))}},40080:(Un,Ht,e)=>{"use strict";e.d(Ht,{U:()=>V,a:()=>I,s:()=>m});var o=e(30705),p=e(83487);const m=(0,o.NT)({id:"user-settings"}),V=(0,o.rx)({id:"user-settings",routes:{settingsPage:m}}).provide((0,o.P4)({name:"UserSettingsPage",component:()=>e.e(5863).then(e.bind(e,25863)).then(W=>W.SettingsPage),mountPoint:m})),I=(0,p.FB)({id:"user-settings",messages:{language:"Language",change_the_language:"Change the language",theme:"Theme",theme_light:"Light",theme_dark:"Dark",theme_auto:"Auto",change_the_theme_mode:"Change the theme mode",select_theme:"Select {{theme}}",select_theme_auto:"Select Auto Theme",select_lng:"Select language {{language}}"}})},43229:(Un,Ht,e)=>{"use strict";e.d(Ht,{Zr:()=>l});var o=e(82394),p=e.n(o),m=e(40080),Y=e(2784),V=e(47603),I=e(49558),W=e(30705),tt=e(54892),Xe=Object.defineProperty,r=(se,ve,be)=>ve in se?Xe(se,ve,{enumerable:!0,configurable:!0,writable:!0,value:be}):se[ve]=be,je=(se,ve,be)=>(r(se,typeof ve!="symbol"?ve+"":ve,be),be);const ye={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},X=new Map;class Z{constructor(ve,be,u,F,R,M){this.namespace=ve,this.fetchApi=be,this.discoveryApi=u,this.errorApi=F,this.identityApi=R,this.fallback=M,je(this,"subscribers",new Set),je(this,"observables",new Map)}static create(ve){var be;return new Z((be=ve.namespace)!=null?be:"default",ve.fetchApi,ve.discoveryApi,ve.errorApi,ve.identityApi,WebStorage.create({namespace:ve.namespace,errorApi:ve.errorApi}))}forBucket(ve){const be=`${this.namespace}.${ve}`;return X.has(be)||X.set(be,new Z(be,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),X.get(be)}async remove(ve){const be=await this.getFetchUrl(ve),u=await this.fetchApi.fetch(be,{method:"DELETE"});if(!u.ok&&u.status!==404)throw await ResponseError.fromResponse(u);this.notifyChanges({key:ve,presence:"absent"})}async set(ve,be){if(!await this.isSignedIn()){await this.fallback.set(ve,be),this.notifyChanges({key:ve,presence:"present",value:be});return}const u=await this.getFetchUrl(ve),F=await this.fetchApi.fetch(u,{method:"PUT",headers:ye,body:JSON.stringify({value:be})});if(!F.ok)throw await ResponseError.fromResponse(F);const{value:R}=await F.json();this.notifyChanges({key:ve,value:R,presence:"present"})}observe$(ve){return this.observables.has(ve)||this.observables.set(ve,new ObservableImpl(be=>(this.subscribers.add(be),Promise.resolve().then(()=>this.get(ve)).then(u=>be.next(u)).catch(u=>this.errorApi.post(u)),()=>{this.subscribers.delete(be)})).filter(({key:be})=>be===ve)),this.observables.get(ve)}snapshot(ve){return{key:ve,presence:"unknown"}}async get(ve){if(!await this.isSignedIn())return this.fallback.snapshot(ve);const be=await this.getFetchUrl(ve),u=await this.fetchApi.fetch(be);if(u.status===404)return{key:ve,presence:"absent"};if(!u.ok)throw await ResponseError.fromResponse(u);try{const{value:F}=await u.json(),R=JSON.parse(JSON.stringify(F),(M,g)=>(typeof g=="object"&&g!==null&&Object.freeze(g),g));return{key:ve,presence:"present",value:R}}catch{return{key:ve,presence:"absent"}}}async getFetchUrl(ve){const be=await this.discoveryApi.getBaseUrl("user-settings"),u=encodeURIComponent(this.namespace),F=encodeURIComponent(ve);return`${be}/buckets/${u}/keys/${F}`}async notifyChanges(ve){for(const be of this.subscribers)try{be.next(ve)}catch{}}async isSignedIn(){try{const ve=await this.identityApi.getCredentials();return!!(ve!=null&&ve.token)}catch{return!1}}}const l=se=>{const ve=(0,W.tg)(m.s),be=se.icon?se.icon:V.Z;return Y.createElement(I.R6,{text:"Settings",to:ve(),icon:be})},ne=tt.L,re=se=>Y.createElement(tt.S.Route,{path:se.path,title:se.title},Y.createElement(Y.Fragment,null,"props.children"));(0,W.R5)(re,ne,"UserSettingsTab")},18473:(Un,Ht,e)=>{"use strict";e.d(Ht,{CT:()=>W,EI:()=>I,Vt:()=>tt,uW:()=>V});var o=e(2784);function p(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const m=p(),Y=r=>`__@backstage/${r}__`;function V(r,je){const ye=Y(r);let X=m[ye];return X||(X=je(),m[ye]=X,X)}function I(r){Object.freeze(r);const je={atVersion(ye){return r[ye]}};return Object.defineProperty(je,"$map",{configurable:!0,enumerable:!0,get(){return r}}),je}function W(r){return V(r,()=>(0,o.createContext)(void 0))}function tt(r){return(0,o.useContext)(W(r))}function Xe(r){return{set(je){globalThis[`__@backstage/${r}__`]=createContext(I(je))},reset(){delete globalThis[`__@backstage/${r}__`]}}}}}]);})();

//# sourceMappingURL=module-backstage.f50fd248.js.map